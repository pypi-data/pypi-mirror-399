<div id="{{ id }}-wrapper" class="mb-3">
    {% if label %}
    <label for="{{ id }}" class="form-label">{{ label }}{% if required %} <span class="text-danger">*</span>{% endif %}</label>
    {% endif %}
    <input type="text" id="{{ id }}" name="{{ name }}" class="form-control{% if validation_state %} is-{{ validation_state }}{% endif %}"{% if value %} value="{{ value }}"{% endif %}{% if placeholder %} placeholder="{{ placeholder }}"{% endif %}{% if required %} required{% endif %}{% if disabled %} disabled{% endif %}>
    {%- if validation_message %}
    <div class="{% if validation_state == 'valid' %}valid{% else %}invalid{% endif %}-feedback">
        {{ validation_message }}
    </div>
    {%- endif %}
    {% if help_text %}
    <div class="form-text">{{ help_text }}</div>
    {% endif %}
</div>

<script type="text/javascript">
(function() {
    flatpickr("#{{ id }}", {
        mode: "{{ mode }}",
        enableTime: {{ 'true' if enable_time else 'false' }},
        time_24hr: {{ 'true' if time_24hr else 'false' }},
        dateFormat: "{{ date_format }}",
        {% if min_date %}
        minDate: "{{ min_date }}",
        {% endif %}
        {% if max_date %}
        maxDate: "{{ max_date }}",
        {% endif %}
        {% if disable_dates %}
        disable: {{ disable_dates | tojson }},
        {% endif %}
        inline: {{ 'true' if inline else 'false' }},
        {% if disabled %}
        clickOpens: false,
        {% endif %}
    });
})();
</script>
