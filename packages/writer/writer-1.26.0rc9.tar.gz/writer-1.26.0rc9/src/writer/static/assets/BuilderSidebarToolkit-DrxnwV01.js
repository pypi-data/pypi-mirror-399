function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderBlueprintLibraryPanel-BUUqJRFc.js","./index-BE6RSzCE.js","./index-BKNuk68o.css","./BuilderApp-Cw_QuIxo.js","./WdsCheckbox-TLlfBAzj.js","./WdsCheckbox-DKvpPA4D.css","./marked.esm-273vDTCT.js","./BuilderApp-WimUfNZr.css","./BuilderBlueprintLibraryPanel-CR2SgRSy.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as oe,ao as se,Q as ie,V as le,i as C,r as k,a as L,u as ue,c as d,a$ as F,bB as de,bC as R,w as ce,o as u,f as c,x as p,au as pe,R as T,z as A,g as v,W as me,y,A as fe,S as B,D,E as q,t as W,G as ve,bv as ge,aq as he,b as _e,bw as j,ax as be,aM as ye,_ as Be}from"./index-BE6RSzCE.js";import{B as Se}from"./BuilderApp-Cw_QuIxo.js";import"./WdsCheckbox-TLlfBAzj.js";import"./marked.esm-273vDTCT.js";const we={key:0,class:"sharedBlueprintNotice"},Ce={class:"header"},ke={class:"tools"},Le=["data-writer-tooltip","data-component-type","onDragstart"],Te={class:"name"},Ae=["data-writer-tooltip","onClick"],De={class:"BuilderSidebarPanel__footer__actions"},Ee=oe({__name:"BuilderSidebarToolkit",setup(Ie){const M=se({loader:()=>ie(()=>import("./BuilderBlueprintLibraryPanel-BUUqJRFc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)}),{pushToast:E}=le(),N=C(L.isAutogenModalShown,k(!1));function O(){N.value=!0}const S=k(!1);function U(){S.value=!0}const s=C(L.core),h=C(L.builderManager),z=ue(s),{removeComponentsSubtree:K}=be(s,h,z),{removeInsertionCandidacy:G}=ye(s),m=k(""),g=d(()=>Array.isArray(s.featureFlags.value)&&s.featureFlags.value.includes("shared_blueprints")),I=d(()=>Array.isArray(s.featureFlags.value)&&s.featureFlags.value.includes("blueprint_library")),_=h.activeRootId,H=d(()=>g.value?s.getComponents("blueprints_root",{sortedByPosition:!0}).filter(e=>F(e)):[]),Q=new Set(["blueprints_runblueprint","blueprints_apitrigger","blueprints_uieventtrigger","blueprints_crontrigger"]),b=d(()=>{if(_.value!=="blueprints_root")return!1;const t=s.activePageId.value;if(!t)return!1;const e=s.getComponentById(t);return F(e)}),J=["Layout","Content","Input","Embed","Writer","Logic","Triggers","Other","Shared Blueprints"],f=d(()=>h.mode.value=="blueprints"?"blueprints":"core"),$=d(()=>{const t=J.map(e=>[e,Z(e)]).filter(([e,a])=>a.length>0||e==="Shared Blueprints"&&_.value=="blueprints_root"&&g.value&&!b.value);return Object.fromEntries(t)}),X=d(()=>{if(m.value)return Object.values($.value).reduce((t,e)=>t+e.length,0)}),Y=d(()=>f.value=="core"?"Interface toolkit":f.value=="blueprints"?"Blueprints toolkit":"Toolkit");function Z(t){if(t==="Shared Blueprints"){if(!g.value||b.value)return[];const r=H.value.map(l=>{var V,x;const w=((V=l.content)==null?void 0:V.key)||"Untitled Blueprint",ne=((x=l.content)==null?void 0:x.description)||"A shared blueprint";return{type:`blueprints_shared:${l.id}`,name:w,description:ne,category:"Shared Blueprints",sourceBlueprintId:l.id}}),o=m.value.toLocaleLowerCase();return r.filter(l=>!o||l.name.toLocaleLowerCase().includes(o)).sort((l,w)=>l.name.localeCompare(w.name,void 0,{sensitivity:"base"}))}const a=de().filter(r=>{const o=R(r);return!(r.startsWith("shared_")||o.category!=t||!o.toolkit&&f.value!=="core"||o.toolkit&&o.toolkit!==f.value||o.deprecated||b.value&&Q.has(r))}).map(r=>{const{name:o,description:P,category:l}=R(r);return{type:r,name:o,description:P,category:l??"Other"}}),i=m.value.toLocaleLowerCase();return a.filter(r=>!i||r.name.toLocaleLowerCase().includes(i)).sort((r,o)=>r.name.localeCompare(o.name,void 0,{sensitivity:"base"}))}function ee(t,e,a){h.setSelection(null);const i=a?`application/json;writer=blueprints_shared,${a}`:`application/json;writer=${e},`;t.dataTransfer.setData(i,"{}")}function te(t){G(t)}function re(t){return t.sourceBlueprintId?["/components/blueprints_category_Logic.svg"].map(e=>j(e)):[`/components/${t.type}.svg`,`/components/${f.value=="blueprints"?"blueprints_":""}category_${t.category}.svg`].map(e=>j(e))}function ae(t,e){if(confirm(`Are you sure you want to delete the shared blueprint "${e}"?`))try{K(t),E({type:"success",message:`Shared blueprint '${e}' deleted.`})}catch(a){E({type:"error",message:`Failed to delete shared blueprint: ${a instanceof Error?a.message:String(a)}`})}}return ce(f,()=>{m.value=""}),(t,e)=>(u(),c(D,null,[p(Se,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),class:"BuilderSidebarToolkit",placeholder:Y.value,"search-count":X.value},pe({default:A(()=>[b.value?(u(),c("div",we,[p(y,{name:"info"}),e[3]||(e[3]=v("span",null,"Some blocks are hidden because they can't be used in shared blueprints.",-1))])):B("",!0),(u(!0),c(D,null,q($.value,(a,i)=>(u(),c("div",{key:i,class:"category"},[v("div",Ce,[v("span",null,W(i),1),i==="Shared Blueprints"&&T(_)=="blueprints_root"&&I.value?(u(),c("button",{key:0,class:"header__library-btn","data-writer-tooltip":"Blueprint Library","data-writer-tooltip-placement":"right",onClick:U},[p(y,{name:"layout-grid"})])):B("",!0)]),v("div",ke,[(u(!0),c(D,null,q(a,n=>(u(),c("div",{key:n.type,class:ve(["tool",{"tool--shared":i==="Shared Blueprints"&&g.value}]),"data-writer-tooltip":n.description,"data-writer-tooltip-placement":"right","data-writer-tooltip-gap":"8",draggable:"true","data-component-type":n.type,onDragend:e[0]||(e[0]=r=>te(r)),onDragstart:r=>ee(r,n.type,n.sourceBlueprintId)},[p(ge,{alt:`(Icon for ${n.name})`,draggable:"false",urls:re(n),"loader-max-width-px":18,"loader-max-height-px":18},null,8,["alt","urls"]),v("div",Te,W(n.name),1),i==="Shared Blueprints"&&g.value&&n.sourceBlueprintId?(u(),c("button",{key:0,class:"tool__delete","data-writer-tooltip":`Delete ${n.name}`,"data-writer-tooltip-placement":"right",onClick:he(r=>ae(n.sourceBlueprintId,n.name),["stop"])},[p(y,{name:"trash"})],8,Ae)):B("",!0)],42,Le))),128))])]))),128))]),_:2},[T(_)=="blueprints_root"?{name:"footer",fn:A(()=>[v("div",De,[p(me,{variant:"special",size:"small",class:"BuilderSidebarPanel__footer__btn",onClick:O},{default:A(()=>[p(y,{name:"wand-sparkles"}),e[4]||(e[4]=fe(" Autogenerate "))]),_:1})])]),key:"0"}:void 0]),1032,["modelValue","placeholder","search-count"]),I.value?(u(),_e(T(M),{key:0,modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=a=>S.value=a)},null,8,["modelValue"])):B("",!0)],64))}}),Fe=Be(Ee,[["__scopeId","data-v-f4d50b43"]]);export{Fe as default};
//# sourceMappingURL=BuilderSidebarToolkit-DrxnwV01.js.map
