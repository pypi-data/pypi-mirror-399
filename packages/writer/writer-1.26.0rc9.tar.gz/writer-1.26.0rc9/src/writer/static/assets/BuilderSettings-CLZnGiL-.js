function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderTemplateEditor-DWVywM3v.js","./index-BE6RSzCE.js","./index-BKNuk68o.css","./WdsDropdownMenu-qgYbo7Yd.js","./WdsCheckbox-TLlfBAzj.js","./WdsCheckbox-DKvpPA4D.css","./WdsDropdownMenu-CzzPN9Wg.css","./WdsTabs-D0Nt85Yz.js","./WdsTabs-DKj7BqI0.css","./WdsFieldWrapper-X0-0L30U.js","./WdsFieldWrapper-CsemOh8D.css","./useKeyValueEditor-C1JO3d2Y.js","./BuilderTemplateEditor-CYSDeWgV.css","./BuilderEmbeddedCodeEditor-B_mePKpd.js","./BuilderEmbeddedCodeEditor-B0bcjlhk.css","./BuilderGraphSelect-GDZBUS0N.js","./useListResources-Bxv9sc1g.js","./BuilderGraphSelect-D7B61d5s.css","./BuilderApplicationSelect-C8BSuPVC.js","./BuilderApplicationSelect-XaM1D5fv.css","./BuilderModelSelect-BbDEAHxb.js","./BuilderModelSelect-Dc4IPLp2.css","./BuilderSettingsArtifactAPITriggerDetails-BVwzs77e.js","./BuilderSettingsArtifactAPITriggerDetails-DnX66iRg.css","./BuilderSettingsHandlers-BcFsEXUH.js","./BuilderApp-Cw_QuIxo.js","./marked.esm-273vDTCT.js","./BuilderApp-WimUfNZr.css","./useBlueprintRun-DN3SM8T7.js","./BuilderSettingsHandlers-DJPeASfz.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as I,b3 as Be,R as m,$ as Le,b4 as et,C as tt,d as W,i as R,a as P,r as N,b5 as Ne,o as i,b as F,au as nt,z as M,x,W as H,aq as oe,y as z,ax as Ce,an as ue,ap as we,aJ as q,at as re,f as w,D as j,g as C,S as $,E as Z,_ as U,ao as X,Q,m as K,q as ie,G as ve,b6 as ze,K as Je,s as ce,a6 as ot,aZ as lt,w as me,b7 as at,a8 as Ge,b8 as it,L as le,b9 as st,ba as rt,aC as J,bb as ye,Z as ut,bc as Se,a7 as fe,A as ae,a3 as Oe,t as Y,l as Ee,aw as ee,v as he,bd as Te,be as dt,X as ct,a1 as We,bf as Fe,bg as D,bh as pt,bi as vt,bj as mt,bk as ft,aI as Ye,F as G,J as yt,bl as gt,a4 as He,b1 as _t,u as Me,bm as Xe,bn as Ve,aN as pe,b2 as bt,bo as ht,bp as kt,bq as St,br as It,a2 as Bt}from"./index-BE6RSzCE.js";import{W as Ie,a as Ct}from"./WdsDropdownMenu-qgYbo7Yd.js";import{W as se}from"./WdsTabs-D0Nt85Yz.js";import{W as te}from"./WdsFieldWrapper-X0-0L30U.js";import{W as qe}from"./WdsCheckbox-TLlfBAzj.js";import{u as wt}from"./useKeyValueEditor-C1JO3d2Y.js";function*Et(t,r){const l=new Set;function*c(s){var o;if(l.has(s))return;l.add(s);const a=t.getComponentById(s);if(a)for(const y of t.getComponentsNested(a.parentId))(o=y.outs)!=null&&o.some(v=>v.toNodeId===s)&&(yield y,yield*c(y.id))}yield*c(r)}function xt(t,r=void 0,l=Le()){const c=I(()=>new Set(Be(t.userStateInitial.value))),s=I(()=>{try{return Ft(t,c.value)}catch(y){return l.error("Cannot compute blueprintsSetStates",y),{}}}),a=I(()=>{try{return Tt(t,c.value)}catch(y){return l.error("Cannot compute bindings",y),{}}}),o=I(()=>{try{return $t(t,m(r))}catch(y){return l.error("Cannot compute blueprintsResults",y),{}}});return{blueprintsSetStates:s,bindings:a,blueprintsResults:o}}function $t(t,r,l=new Set){var s;const c={};for(const a of Et(t,r)){const o=a.type,y=t.getComponentDefinition(a.type);if(!y||!(a.type&&!et.has(o)&&a.type.startsWith("blueprints_")&&((s=y==null?void 0:y.outs)==null?void 0:s.success)!==void 0))continue;const p=`results.${a.id}`;p&&!l.has(p)&&(c[p]??(c[p]={components:[]}),c[p].components.push(a))}return c}function Tt(t,r=new Set){var c;const l={};for(const s of tt)for(const a of t.getComponentsNested(s)){const o=(c=a.binding)==null?void 0:c.stateRef;o&&!r.has(o)&&(l[o]??(l[o]={components:[]}),l[o].components.push(a))}return l}function Ft(t,r=new Set){var s;function*l(){for(const a of t.getComponentsNested("blueprints_root"))a.type==="blueprints_setstate"&&a.content&&(yield a)}const c={};for(const a of l()){const o=(s=a.content)==null?void 0:s.element;!o||typeof o!="string"||r.has(o)||(c[o]??(c[o]={components:[]}),c[o].components.push(a))}return c}const xe=W({__name:"BuilderStateSelectorDropdownComponent",props:{componentId:{type:String,required:!0},path:{type:String,required:!0},selected:{type:Boolean,required:!1}},setup(t){const r=t,l=R(P.core),c=R(P.builderManager),s=N(!1),a=I(()=>l.getComponentById(r.componentId)),{name:o,possibleImageUrls:y,previewText:v}=Ne(l,a),p=I(()=>({icon:y.value,label:r.path,detail:v.value||o.value,value:r.path})),{goToComponentParentPage:B}=Ce(l,c);async function h(){await B(r.componentId),c.setSelection(r.componentId)}return(u,f)=>(i(),F(Ie,{class:"BuilderStateSelectorDropdownItemComponent",option:p.value,selected:t.selected,"show-custom-action":"",onMousemove:f[1]||(f[1]=g=>s.value=!0),onMouseout:f[2]||(f[2]=g=>s.value=!1)},nt({_:2},[s.value?{name:"action",fn:M(()=>[x(H,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:oe(h,["prevent"]),onMousemove:f[0]||(f[0]=g=>s.value=!0)},{default:M(()=>[x(z,{name:"square-dashed-mouse-pointer"})]),_:1})]),key:"0"}:void 0]),1032,["option","selected"]))}}),Vt={class:"BuilderStateSelectorDropdown"},Ot={key:1,class:"BuilderStateSelectorDropdown__empty"},Mt={key:2,class:"BuilderStateSelectorDropdown__section"},qt={key:3,class:"BuilderStateSelectorDropdown__section"},At={key:4,class:"BuilderStateSelectorDropdown__section"},Dt={key:5,class:"BuilderStateSelectorDropdown__section"},Rt={key:6,class:"BuilderStateSelectorDropdown__section"},Pt=W({__name:"BuilderStateSelectorDropdown",props:ue({componentId:{type:String,required:!1,default:void 0},query:{type:String,required:!1,default:""},allowCreate:{type:Boolean,required:!1},hideSecrets:{type:Boolean,required:!1},hideBlueprintResults:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const r=t,l=R(P.core),c=R(P.secretsManager),s=we(t,"modelValue"),a=xt(l,q(r,"componentId")),o=I(()=>{const g=[];for(const b of Be(l.userStateInitial.value))r.query&&!b.includes(r.query)||g.push({value:b,label:b,icon:"code",iconBgColor:re.Green2});return g.sort((b,k)=>b.label.localeCompare(k.label))}),y=I(()=>{if(r.hideSecrets)return[];const g=[];for(const b of Be(c.secrets.value)){const k=`vault.${b}`;r.query&&!k.includes(r.query)||g.push({value:`vault.${b}`,label:b,icon:"key-round",iconBgColor:re.Yellow2})}return g.sort((b,k)=>b.label.localeCompare(k.label))}),v=I(()=>h(a.bindings.value)),p=I(()=>h(a.blueprintsSetStates.value)),B=I(()=>r.hideBlueprintResults?[]:h(a.blueprintsResults.value));function h(g){return Object.entries(g).map(([b,{components:k}])=>{for(const O of k)if(O.id!==r.componentId)return{componentId:O.id,path:b}}).filter(b=>!(!b||r.query&&!b.path.includes(r.query)))}const u=I(()=>!r.allowCreate||!r.query||r.query.endsWith(".")?!1:!(o.value.some(b=>b.value===r.query)||y.value.some(b=>b.value===r.query)||B.value.some(b=>b.path===r.query)||v.value.some(b=>b.path===r.query))),f=I(()=>!!(o.value.length||p.value.length||v.value.length||B.value.length||y.value.length));return(g,b)=>(i(),w("div",Vt,[u.value?(i(),w(j,{key:0},[b[1]||(b[1]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," Add new variable ",-1)),x(Ie,{option:{value:t.query,label:t.query,icon:"plus",iconBgColor:m(re).Blue4,iconColor:m(re).White},onClick:b[0]||(b[0]=oe(k=>s.value=t.query,["stop"]))},null,8,["option"])],64)):f.value?$("",!0):(i(),w("div",Ot," No result ")),p.value.length?(i(),w("div",Mt,[b[2]||(b[2]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," Set states ",-1)),(i(!0),w(j,null,Z(p.value,k=>(i(),F(xe,{key:k.path,path:k.path,"component-id":k.componentId,selected:k.path===s.value,onClick:oe(O=>s.value=k.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):$("",!0),v.value.length?(i(),w("div",qt,[b[3]||(b[3]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," Interface variables ",-1)),(i(!0),w(j,null,Z(v.value,k=>(i(),F(xe,{key:k.path,path:k.path,"component-id":k.componentId,selected:k.path===s.value,onClick:oe(O=>s.value=k.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):$("",!0),!t.hideBlueprintResults&&B.value.length?(i(),w("div",At,[b[4]||(b[4]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," block results ",-1)),(i(!0),w(j,null,Z(B.value,k=>(i(),F(xe,{key:k.path,path:k.path,"component-id":k.componentId,selected:k.path===s.value,onClick:oe(O=>s.value=k.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):$("",!0),!t.hideSecrets&&y.value.length?(i(),w("div",Dt,[b[5]||(b[5]=C("p",{class:"BuilderStateSelectorDropdown__section__title"},"Secrets",-1)),(i(!0),w(j,null,Z(y.value,k=>(i(),F(Ie,{key:k.value,option:k,selected:k.value===s.value,onClick:oe(O=>s.value=k.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):$("",!0),o.value.length?(i(),w("div",Rt,[b[6]||(b[6]=C("p",{class:"BuilderStateSelectorDropdown__section__title"}," main.py variables ",-1)),(i(!0),w(j,null,Z(o.value,k=>(i(),F(Ie,{key:k.value,option:k,selected:k.value===s.value,onClick:oe(O=>s.value=k.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):$("",!0)]))}}),Wt=U(Pt,[["__scopeId","data-v-d28f7ad6"]]),Kt=W({__name:"BuilderTemplateInputTemplate",props:ue({leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},invalid:{type:Boolean,required:!1},variant:{type:String,default:void 0},autofocus:{type:Boolean},multiline:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0,input:t=>!!t},["update:modelValue"]),setup(t,{expose:r,emit:l}){const c=X({loader:()=>Q(()=>import("./BuilderTemplateEditor-DWVywM3v.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)}),s=we(t,"modelValue"),a=t,o=l;r({focus:u,getSelection:h,value:s,setSelectionEnd:B,setSelectionStart:p});const y=K("input");ie(()=>{a.autofocus&&u()});async function v(f){s.value=f,o("input",{target:{value:f}})}function p(f){var g;(g=y.value)==null||g.setSelectionStart(f)}function B(f){var g;(g=y.value)==null||g.setSelectionEnd(f)}function h(){var f;return(f=y.value)==null?void 0:f.getSelection()}function u(){var f;(f=y.value)==null||f.focus()}return(f,g)=>(i(),F(ze,{"left-icon":t.leftIcon,"right-icon":t.rightIcon,invalid:t.invalid,variant:t.variant,class:ve(["BuilderTemplateInputTemplate",{"BuilderTemplateInputTemplate--singleline":!t.multiline,"BuilderTemplateInputTemplate--multiline":t.multiline}]),onRightIconClick:g[0]||(g[0]=b=>f.$emit("rightIconClick")),onClick:u},{default:M(()=>[x(m(c),{ref_key:"input",ref:y,class:"BuilderTemplateInputTemplate__input",multiline:t.multiline,"model-value":s.value,"onUpdate:modelValue":v},null,8,["multiline","model-value"])]),_:1},8,["left-icon","right-icon","invalid","variant","class"]))}}),Ut=U(Kt,[["__scopeId","data-v-2789dd2e"]]),jt={class:"BuilderTemplateInputState__content"},Lt=W({__name:"BuilderTemplateInputState",props:ue({rightIcon:{type:String,required:!1,default:void 0}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0},["update:modelValue"]),setup(t,{expose:r}){r({focus:u,setSelectionStart:p,setSelectionEnd:B,getSelection:h});const l=R(P.core),c=K("input"),s=we(t,"modelValue"),a=N(!1),o=I(()=>!s.value&&!a.value),y=I(()=>new Set(Be(l.userStateInitial.value))),v=I(()=>({opacity:o.value?0:void 0,backgroundColor:y.value.has(s.value)?re.Green2:re.Gray1}));function p(f){c.value&&(c.value.selectionStart=f)}function B(f){c.value&&(c.value.selectionEnd=f)}function h(){var f,g;return{selectionStart:(f=c.value)==null?void 0:f.selectionStart,selectionEnd:(g=c.value)==null?void 0:g.selectionEnd}}function u(){var f;(f=c.value)==null||f.focus()}return(f,g)=>(i(),F(ze,{class:"BuilderTemplateInputState","left-icon":o.value?"at-sign":void 0,"right-icon":t.rightIcon,onRightIconClick:g[3]||(g[3]=b=>f.$emit("rightIconClick")),onClick:g[4]||(g[4]=b=>m(c).focus())},{default:M(()=>[C("div",jt,[C("div",{class:"BuilderTemplateInputState__content__tag",style:Je(v.value)},[g[5]||(g[5]=C("span",null,"@",-1)),ce(C("input",{ref_key:"input",ref:c,"onUpdate:modelValue":g[0]||(g[0]=b=>s.value=b),type:"text",onFocus:g[1]||(g[1]=b=>a.value=!0),onBlur:g[2]||(g[2]=b=>a.value=!1)},null,544),[[ot,s.value]])],4)])]),_:1},8,["left-icon","right-icon"]))}}),Nt=U(Lt,[["__scopeId","data-v-f03927da"]]);function zt(t,r){const l=t.lastIndexOf("@");if(l!==-1){let c=l;const a=t.slice(l).indexOf("{");return a!==-1&&(c+=a+1),t.indexOf("}",c)!==-1?t.substring(0,l)+`@{${r}}`:t.slice(0,l)+`@{${r}}`}return t+`@{${r}}`}function Jt(t){const r=t.lastIndexOf("@");if(r===-1)return"";const l=t.slice(r);return l.includes("}")||l.includes(`
`)||!l.startsWith("@{")&&l.includes(" ")?"":l.replace(/^@{?/,"")}function Gt(t,r){return function(c){var v;if(!t.value)return;let s=0;if(c.key==="ArrowDown"?s=1:c.key==="ArrowUp"&&(s=-1),s===0)return;const a=Array.from(t.value.querySelectorAll("button")).filter(p=>!p.hasAttribute("disabled")&&p.offsetParent!==null);let o=s===1?a[0]:a.at(-1);const y=a.indexOf(document.activeElement);y!==-1&&(o=a[y+s]),o?(o.focus(),c.preventDefault()):(v=r==null?void 0:r.nextFocusNotFound)==null||v.call(r)}}const Yt=W({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},componentId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},readonly:{type:Boolean}},emits:["input","update:value"],setup(t,{expose:r,emit:l}){const c=t,s=l,a=K("root"),o=K("input"),y=K("dropdown"),v=N(),{floatingStyles:p,update:B}=lt(a,y,{placement:"bottom-start",middleware:[st(),rt({apply({rects:e,elements:n}){Object.assign(n.floating.style,{minWidth:`${e.reference.width}px`,maxWidth:`${e.reference.width}px`})}})],strategy:"fixed"});h();function h(){let e;function n(){e&&e(),e=void 0}me(y,()=>{n(),y.value&&(e=at(o,y.value,B))}),Ge(()=>n())}r({focus:()=>{var e;return(e=o.value)==null?void 0:e.focus()}});const u=I(()=>c.options?Object.entries(c.options).reduce((e,[n,V])=>(n.includes(c.value)&&e.push({value:n,label:V}),e),[]):[]),f=Gt(y,{nextFocusNotFound:()=>{var e;v.value=void 0,(e=o.value)==null||e.focus()}});function g(){u.value.length>0&&(v.value="static")}const b=I(()=>{var S,T;if(c.type==="state")return c.value;let e=((S=o.value)==null?void 0:S.value)??"";if(!e)return"";const{selectionStart:n}=((T=o.value)==null?void 0:T.getSelection())??{},V=e.slice(0,n);return Jt(V)}),k=it(a);me(k,async()=>{k.value||(await le(),setTimeout(()=>{v.value=void 0},300))});async function O(e){var A,L;let n=((A=o.value)==null?void 0:A.value)??"";const{selectionStart:V,selectionEnd:S}=((L=o.value)==null?void 0:L.getSelection())??{};let T=V??n.length;if(c.type==="template"){const _e=n.slice(0,V),be=n.slice(S).replace(/^(\})+/,""),de=zt(_e,e);n=`${de}${be}`,T=de.length}else n=e,T=e.length;s("input",{target:{value:n}}),s("update:value",n),o.value&&(o.value.focus(),v.value=void 0,await le(),o.value.setSelectionStart(T))}async function E(e){s("input",{target:{value:e}}),s("update:value",e),o.value&&(o.value.focus(),v.value=void 0,await le(),o.value.setSelectionStart(e.length))}function _(e){d({target:{value:e}})}function d(e){var A;let n=String(e.target.value??"");if(s("input",e),s("update:value",n),c.type==="state"){v.value="template";return}if(u.value.some(L=>L.value.includes(n))){v.value="static";return}const{selectionStart:V}=((A=o.value)==null?void 0:A.getSelection())??{},S=n.slice(0,V),T=!!S.match(/@\{([^}{@]*)$/)||S.endsWith("@")||!!b.value;v.value=T?"template":void 0}return(e,n)=>(i(),w("div",{ref_key:"root",ref:a,class:"BuilderTemplateInput",onKeydown:n[2]||(n[2]=oe((...V)=>m(f)&&m(f)(...V),["stop"]))},[t.type==="template"?(i(),F(Ut,{key:0,ref_key:"input",ref:o,"model-value":c.value,placeholder:c.placeholder,list:c.options?`list-${c.inputId}`:void 0,invalid:t.error!==void 0,autofocus:t.autofocus,readonly:t.readonly,multiline:t.multiline,onInput:d,onClick:g},null,8,["model-value","placeholder","list","invalid","autofocus","readonly","multiline"])):$("",!0),t.type==="state"?(i(),F(Nt,{key:1,ref_key:"input",ref:o,"right-icon":v.value?"chevron-up":"chevron-down","model-value":c.value,onRightIconClick:n[0]||(n[0]=V=>v.value=v.value?void 0:"template"),"onUpdate:modelValue":_,onClick:n[1]||(n[1]=V=>m(o).focus())},null,8,["right-icon","model-value"])):$("",!0),v.value?(i(),w("div",{key:2,ref_key:"dropdown",ref:y,class:"BuilderTemplateInput__dropdown",style:Je(m(p))},[v.value==="template"?(i(),F(Wt,{key:0,"hide-secrets":t.type==="state","hide-blueprint-results":t.type==="state","allow-create":t.type==="state",query:b.value,"component-id":t.componentId,"onUpdate:modelValue":O},null,8,["hide-secrets","hide-blueprint-results","allow-create","query","component-id"])):u.value.length?(i(),F(Ct,{key:1,options:u.value,onSelect:E},null,8,["options"])):$("",!0)],4)):$("",!0)],544))}}),ne=U(Yt,[["__scopeId","data-v-8594b4ef"]]),ge=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Ht=["data-automation-key"],Xt={key:0,class:"main"},Qt={key:0,class:"pickerContainer"},Zt=W({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-BE6RSzCE.js").then(_=>_.bK),__vite__mapDeps([1,2]),import.meta.url)}),l=K("rootEl"),c=K("pickerEl"),s=K("freehandInputEl"),a=[{key:"start",label:"Left",match:_=>_=="start",default:"start",icon:"align-left"},{key:"center",label:"Center",match:_=>_=="center",default:"center",icon:"align-center"},{key:"end",label:"Right",match:_=>_=="end",default:"end",icon:"align-right"}],o=[{key:"start",label:"Top",match:_=>_=="start",default:"start",icon:"arrow-up-to-line"},{key:"center",label:"Center",match:_=>_=="center",default:"center",icon:"fold-vertical"},{key:"end",label:"Bottom",match:_=>_=="end",default:"end",icon:"arrow-down-to-line"}],y={pick:c,css:s,default:null},v=t,p=J({componentId:q(v,"componentId"),fieldKey:q(v,"fieldKey")}),B=I(()=>v.direction=="vertical"?o:v.direction=="horizontal"?a:o),h=I(()=>B.value.map(_=>({value:_.key,label:_.label,icon:_.icon}))),u=I(()=>{const _=p.value;for(const d in B.value)if(_&&B.value[d].match(_))return B.value[d].key;return null}),g=N((()=>{if(!p.value)return"default";for(const _ in B.value)if(B.value[_].match(p.value))return"pick";return"css"})()),b=()=>{var d;const _=(d=y[g.value])==null?void 0:d.value;_&&(_.focus(),typeof _.selectionStart=="number"&&(_.selectionStart=_.selectionEnd=_.value.length))},k=async _=>{g.value!=_&&(g.value=_,await le(),b(),_==="default"&&(p.value=""))},O=_=>{for(const d in B.value)B.value[d].key==_&&(p.value=B.value[d].default)},E=_=>{p.value=_.target.value};return ie(()=>{l.value.addEventListener("focus",b)}),ye(()=>{l.value.removeEventListener("focus",b)}),(_,d)=>(i(),w("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":v.fieldKey},[x(se,{tabs:m(ge),"model-value":g.value,"onUpdate:modelValue":k},null,8,["tabs","model-value"]),g.value=="pick"||g.value=="css"?(i(),w("div",Xt,[g.value=="pick"?(i(),w("div",Qt,[x(m(r),{ref_key:"pickerEl",ref:c,"model-value":u.value,options:h.value,"onUpdate:modelValue":O},null,8,["model-value","options"])])):$("",!0),g.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:m(p),error:t.error,onInput:E},null,8,["value","error"])):$("",!0)])):$("",!0)],8,Ht))}}),Ke=U(Zt,[["__scopeId","data-v-6a36fb0b"]]),en=["data-automation-key"],tn={key:0,class:"main"},nn={key:0,class:"pickerContainer"},on=["value"],ln=W({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=K("rootEl"),l=K("pickerEl"),c=K("freehandInputEl"),s={pick:l,css:c,default:null},a=t,o=J({componentId:q(a,"componentId"),fieldKey:q(a,"fieldKey")}),v=N((()=>{const u=o.value;return u?/#[A-Fa-f0-9]{6}/.test(u)?"pick":"css":"default"})()),p=()=>{var f;const u=(f=s[v.value])==null?void 0:f.value;u&&(u.focus(),typeof u.selectionStart=="number"&&(u.selectionStart=u.selectionEnd=u.value.length))},B=async u=>{v.value!=u&&(v.value=u,await le(),p(),u==="default"&&(o.value=""))},h=u=>o.value=u.target.value;return ie(()=>{r.value.addEventListener("focus",p)}),ye(()=>{r.value.removeEventListener("focus",p)}),(u,f)=>(i(),w("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":t.fieldKey},[x(se,{tabs:m(ge),"model-value":v.value,"onUpdate:modelValue":B},null,8,["tabs","model-value"]),v.value=="pick"||v.value=="css"?(i(),w("div",tn,[v.value=="pick"?(i(),w("div",nn,[C("input",{ref_key:"pickerEl",ref:l,type:"color",value:m(o),onInput:h},null,40,on)])):$("",!0),v.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:c,value:m(o),error:t.error,onInput:h},null,8,["value","error"])):$("",!0)])):$("",!0)],8,en))}}),an=U(ln,[["__scopeId","data-v-5432e5c5"]]);function $e(t){return typeof t=="string"&&t.startsWith("@{")&&t.endsWith("}")}function Qe({fieldViewModel:t}){const r=N($e(t.value)),l=N({binding:$e(t.value)?t.value:"",noneBinding:r.value?"":t.value});function c(){r.value?($e(t.value)&&(l.value.binding=t.value),t.value=l.value.noneBinding,r.value=!1):(l.value.noneBinding=t.value,t.value=l.value.binding,r.value=!0)}return{isBindingMode:ut(r),toggleBindingMode:c}}const sn=["data-automation-key"],rn=W({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},fieldControl:{type:String,required:!1,default:Se.Text},defaultValue:{type:String,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},type:{type:String,required:!1,default:"template"}},setup(t){const r=R(P.core),l=t,c=J({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey"),defaultValue:q(l,"defaultValue")}),s=I(()=>`${l.componentId}-${l.fieldKey}`),a={uiComponents:()=>{const u=r.getComponents(void 0,{sortedByPosition:!0}).filter(g=>r.isChildOf("root",g.id)),f={};return u.forEach(g=>{f[g.id]=g.id}),f},uiComponentsWithEvents:()=>r.getComponents(void 0,{sortedByPosition:!0}).filter(u=>r.isChildOf("root",u.id)).filter(u=>!!r.getComponentDefinition(u.type).events).reduce((u,f)=>(u[f.id]=f.id,u),{}),eventTypes:(u,f)=>{var E;const g=(E=u.getComponentById(f).content)==null?void 0:E.refComponentId,b=r.getComponentById(g);if(!b)return{};const k=u.getComponentDefinition(b.type);return Object.fromEntries(Object.keys(k.events??{}).map(_=>[_,_]))}},o=I(()=>{const u=r.getComponentById(l.componentId),g=r.getComponentDefinition(u.type).fields[l.fieldKey];return g.options?typeof g.options=="function"?g.options(r,l.componentId):typeof g.options=="string"?a==null?void 0:a[g.options](r,l.componentId):g.options:{}}),y=I(()=>["state","state-template"].includes(l.type)?"state":"template"),v=I(()=>h(c.value)),p=u=>{c.value=B(u.target.value)};function B(u){return typeof u!="string"?"":l.type==="state-template"?`@{${u}}`:u}function h(u){return typeof u!="string"?"":l.type==="state-template"?u.replace(/^@{/,"").replace(/}$/,""):u}return(u,f)=>(i(),w("div",{class:"BuilderFieldsText","data-automation-key":l.fieldKey},[t.fieldControl==m(Se).Text?(i(),F(ne,{key:0,class:"content","component-id":t.componentId,"input-id":s.value,value:v.value,placeholder:t.defaultValue,type:y.value,options:o.value,error:t.error,autofocus:t.autofocus,onInput:p},null,8,["component-id","input-id","value","placeholder","type","options","error","autofocus"])):t.fieldControl==m(Se).Textarea?(i(),F(ne,{key:1,multiline:"",variant:"text",class:"content","input-id":s.value,"component-id":t.componentId,value:v.value,placeholder:t.defaultValue,type:y.value,error:t.error,autofocus:t.autofocus,onInput:p},null,8,["input-id","component-id","value","placeholder","type","error","autofocus"])):$("",!0)],8,sn))}}),Ae=U(rn,[["__scopeId","data-v-aa053130"]]),un=["data-automation-key"],dn=W({__name:"BuilderFieldsCheckbox",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,default:void 0},unit:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),{isBindingMode:c,toggleBindingMode:s}=Qe({fieldViewModel:l}),a=I({get:()=>l.value==="yes",set:o=>{l.value=o?"yes":"no"}});return(o,y)=>m(c)?(i(),F(te,{key:0,"is-binding-button-shown":"","is-binding-enabled":m(c),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":r.fieldKey,"onUpdate:isBindingEnabled":m(s)},{default:M(()=>[x(Ae,{type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])]),_:1},8,["is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"])):(i(),w("div",{key:1,class:"BuilderFieldsCheckbox","data-automation-key":r.fieldKey},[x(qe,{modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=v=>a.value=v),label:t.label,detail:t.hint,invalid:!!t.error},null,8,["modelValue","label","detail","invalid"]),x(H,{size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Bind to a variable",onClick:m(s)},{default:M(()=>[x(z,{name:"at-sign"})]),_:1},8,["onClick"])],8,un))}}),cn=U(dn,[["__scopeId","data-v-d540f2ac"]]),pn={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},vn={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},mn=W({__name:"BuilderFieldsKeyValueModal",props:{data:{type:String,required:!0}},emits:{submit:t=>typeof t=="string",close:()=>!0},setup(t,{emit:r}){const l=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-B_mePKpd.js").then(O=>O.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),c=t,{mode:s,assistedEntries:a,freehandValue:o,isValid:y,currentValue:v,addAssistedEntry:p,updateAssistedEntryValue:B,updateAssistedEntryKey:h,removeAssistedEntry:u,getAssistedEntryError:f}=wt(c.data),g=r,b=I(()=>[{desc:"Save",fn:()=>g("submit",v.value),disabled:c.data===v.value||!y.value}]),k=[{label:"List",value:"assisted"},{label:"JSON",value:"freehand"}];return(O,E)=>(i(),F(Oe,{title:"Category key values","display-close-button":"",actions:b.value,onClose:E[2]||(E[2]=_=>O.$emit("close"))},{titleActions:M(()=>[x(se,{modelValue:m(s),"onUpdate:modelValue":E[0]||(E[0]=_=>fe(s)?s.value=_:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:k},null,8,["modelValue"])]),default:M(()=>[m(s)==="freehand"?(i(),F(m(l),{key:0,modelValue:m(o),"onUpdate:modelValue":E[1]||(E[1]=_=>fe(o)?o.value=_:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):$("",!0),m(s)==="assisted"?(i(),w("div",pn,[m(s)==="assisted"?(i(),w("div",vn,[E[3]||(E[3]=C("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),E[4]||(E[4]=C("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(i(!0),w(j,null,Z(m(a),(_,d)=>(i(),w(j,{key:d},[x(te,{error:m(f)(d)},{default:M(()=>[x(ne,{placeholder:"Type a key...",value:_.key,error:m(f)(d),"onUpdate:value":e=>m(h)(d,e)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),x(te,null,{default:M(()=>[x(ne,{placeholder:"Type a value...",value:_.value,"onUpdate:value":e=>m(B)(d,e)},null,8,["value","onUpdate:value"])]),_:2},1024),C("div",null,[x(H,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:e=>m(u)(d)},{default:M(()=>[x(z,{name:"trash-2"})]),_:2},1032,["onClick"])])],64))),128))])):$("",!0),x(H,{variant:"special",size:"small",onClick:m(p)},{default:M(()=>[x(z,{name:"plus"}),E[5]||(E[5]=ae(" Add a pair "))]),_:1},8,["onClick"])])):$("",!0)]),_:1},8,["actions"]))}}),fn=U(mn,[["__scopeId","data-v-4e74be91"]]),yn=["data-automation-key"],gn={class:"BuilderFieldsKeyValue__toolbar"},_n={key:1,class:"BuilderFieldsKeyValue__listEmpty"},bn={key:2,class:"BuilderFieldsKeyValue__list"},hn=["data-writer-tooltip"],kn=["data-writer-tooltip"],Sn=W({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),c=R(P.core),s=R(P.secretsManager),{getEvaluatedFields:a}=Ee(c,s),o=N(!1),y=I(()=>{var B;return((B=a(r.instancePath))==null?void 0:B[r.fieldKey].value)??{}}),v=I(()=>l.value||JSON.stringify(y.value));function p(B){o.value=!1,l.value=B}return(B,h)=>(i(),w("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":r.fieldKey},[C("div",gn,[x(H,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:h[0]||(h[0]=u=>o.value=!0)},{default:M(()=>[x(z,{name:"pencil"})]),_:1})]),o.value?(i(),F(fn,{key:0,data:v.value,onSubmit:p,onClose:h[1]||(h[1]=u=>o.value=!1)},null,8,["data"])):$("",!0),Object.keys(y.value).length===0?(i(),w("div",_n,[h[4]||(h[4]=C("p",null,"There are no key value categories defined",-1)),x(H,{variant:"special",size:"small",onClick:h[2]||(h[2]=u=>o.value=!0)},{default:M(()=>[x(z,{name:"pencil"}),h[3]||(h[3]=ae(" Edit "))]),_:1})])):(i(),w("ul",bn,[(i(!0),w(j,null,Z(y.value,(u,f)=>(i(),w("li",{key:f,class:"BuilderFieldsKeyValue__list__item"},[C("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":f,"data-writer-tooltip-strategy":"overflow"},Y(f),9,hn),C("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":u,"data-writer-tooltip-strategy":"overflow"},Y(u||"<empty value>"),9,kn)]))),128))]))],8,yn))}}),In=U(Sn,[["__scopeId","data-v-43bf3550"]]),Bn=W({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},defaultValue:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey"),defaultValue:q(r,"defaultValue")}),c=s=>{l.value=s.target.value};return(s,a)=>(i(),F(ne,{class:"BuilderFieldsObject","data-automation-key":r.fieldKey,multiline:"",variant:"code",value:m(l),placeholder:t.defaultValue,error:t.error,onInput:c},null,8,["data-automation-key","value","placeholder","error"]))}}),Cn=U(Bn,[["__scopeId","data-v-efbda4e8"]]),wn=["data-automation-key"],En={key:0,class:"main"},xn={key:0,class:"pickerContainer"},$n={class:"BuilderFieldsPadding__options"},Tn=W({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-BE6RSzCE.js").then(e=>e.bK),__vite__mapDeps([1,2]),import.meta.url)}),l=K("rootEl"),c=K("pickerEl"),s=K("freehandInputEl"),a=K("fixedEl"),o=[{key:"all_sides",label:"All sides",match:e=>e.split(" ").length==1&&e.endsWith("px"),default:()=>f.value?f.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:e=>e.split(" ").length==2&&e.endsWith("px"),default:()=>f.value?f.value[2]+" "+f.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:e=>e.split(" ").length==4&&e.endsWith("px"),default:()=>f.value?[f.value[3],f.value[1],f.value[2],f.value[0]].join(" "):"0px 0px 0px 0px"}],y={pick:c,css:s,default:null},v=t,p=J({componentId:q(v,"componentId"),fieldKey:q(v,"fieldKey")}),B=I(()=>o.map(e=>({value:e.key,label:e.label,icon:"panel-top-dashed"}))),h=I(()=>{const e=p.value;for(const n in o)if(e&&o[n].match(e))return o[n].key;return null}),u=I(()=>{const e=f.value;return e?[e[0].substring(0,e[0].length-2),e[1].substring(0,e[1].length-2),e[2].substring(0,e[2].length-2),e[3].substring(0,e[3].length-2)]:["0","0","0","0"]}),f=I(()=>{const e=p.value;if(e){const n=e.split(" ");if(n.length==1&&n[0].endsWith("px"))return[n[0],n[0],n[0],n[0]];if(n.length==2&&n[0].endsWith("px")&&n[0].endsWith("px"))return[n[1],n[1],n[0],n[0]];if(n.length==4&&n[0].endsWith("px")&&n[1].endsWith("px")&&n[2].endsWith("px")&&n[3].endsWith("px"))return[n[3],n[1],n[0],n[2]]}else return null;return null}),b=N((()=>{if(!p.value)return"default";for(const e in o)if(o[e].match(p.value))return"pick";return"css"})()),k=()=>{var n;const e=(n=y[b.value])==null?void 0:n.value;e&&(e.focus(),typeof e.selectionStart=="number"&&(e.selectionStart=e.selectionEnd=e.value.length))},O=async e=>{b.value!=e&&(b.value=e,await le(),k(),e==="default"&&(p.value=""))},E=e=>{for(const n in o)o[n].key==e&&(p.value=o[n].default());le(()=>{var n;(n=a.value)==null||n.focus()})},_=e=>{p.value=e.target.value},d=(e,n,V)=>{const S=Number(e),T=p.value;if(n=="all_sides")p.value=S+"px";else if(n=="XY sides"){const A=T.split(" ");V=="x"?A[1]=S+"px":V=="y"&&(A[0]=S+"px"),p.value=A.join(" ")}else if(n=="Per side"){const A=T.split(" ");V=="top"?A[0]=S+"px":V=="right"?A[1]=S+"px":V=="bottom"?A[2]=S+"px":V=="left"&&(A[3]=S+"px"),p.value=A.join(" ")}};return ie(()=>{l.value.addEventListener("focus",k)}),ye(()=>{l.value.removeEventListener("focus",k)}),(e,n)=>(i(),w("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":v.fieldKey},[x(se,{tabs:m(ge),"model-value":b.value,"onUpdate:modelValue":O},null,8,["tabs","model-value"]),b.value=="pick"||b.value=="css"?(i(),w("div",En,[b.value=="pick"?(i(),w("div",xn,[x(m(r),{ref_key:"pickerEl",ref:c,"model-value":h.value,options:B.value,"onUpdate:modelValue":E},null,8,["model-value","options"]),C("div",$n,[h.value=="all_sides"?(i(),w(j,{key:0},[n[7]||(n[7]=C("i",null,"All",-1)),x(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value[0],"onUpdate:modelValue":n[0]||(n[0]=V=>d(V,h.value))},null,8,["model-value"]),n[8]||(n[8]=C("div",null,"px",-1))],64)):$("",!0),h.value=="XY sides"?(i(),w(j,{key:1},[n[9]||(n[9]=C("i",null,"X",-1)),x(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[1]||(n[1]=V=>d(V,h.value,"x"))},null,8,["model-value"]),n[10]||(n[10]=C("div",null,"px",-1)),n[11]||(n[11]=C("i",null,"Y",-1)),x(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[2]||(n[2]=V=>d(V,h.value,"y"))},null,8,["model-value"]),n[12]||(n[12]=C("div",null,"px",-1))],64)):$("",!0),h.value=="Per side"?(i(),w(j,{key:2},[n[13]||(n[13]=C("i",null,"Left",-1)),x(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[3]||(n[3]=V=>d(V,h.value,"left"))},null,8,["model-value"]),n[14]||(n[14]=C("div",null,"px",-1)),n[15]||(n[15]=C("i",null,"Right",-1)),x(ee,{type:"number","model-value":u.value[1],"onUpdate:modelValue":n[4]||(n[4]=V=>d(V,h.value,"right"))},null,8,["model-value"]),n[16]||(n[16]=C("div",null,"px",-1)),n[17]||(n[17]=C("i",null,"Top",-1)),x(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[5]||(n[5]=V=>d(V,h.value,"top"))},null,8,["model-value"]),n[18]||(n[18]=C("div",null,"px",-1)),n[19]||(n[19]=C("i",null,"Bottom",-1)),x(ee,{type:"number","model-value":u.value[3],"onUpdate:modelValue":n[6]||(n[6]=V=>d(V,h.value,"bottom"))},null,8,["model-value"]),n[20]||(n[20]=C("div",null,"px",-1))],64)):$("",!0)])])):$("",!0),b.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:m(p),error:t.error,onInput:_},null,8,["value","error"])):$("",!0)])):$("",!0)],8,wn))}}),Fn=U(Tn,[["__scopeId","data-v-e122e664"]]),Vn=["data-automation-key"],On={key:0,class:"main"},Mn={key:0,class:"pickerContainer"},qn={class:"param"},An={class:"header"},Dn=["value"],Rn={class:"param"},Pn={class:"header"},Wn=["value"],Kn={class:"param"},Un={class:"header"},jn=["value"],Ln={class:"param"},Nn={class:"header"},zn=["value"],Jn={class:"param"},Gn=["value"],Yn=W({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=K("rootEl"),l=K("freehandInputEl"),c=K("paramOffsetXEl"),s=K("paramOffsetYEl"),a=K("paramBlurRadiusEl"),o=K("paramSpreadRadiusEl"),y=K("paramColorEl"),v={pick:c,css:l,default:null},p=t,B=J({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),h=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,f=N((()=>{const _=B.value;return _?h.test(_)?"pick":"css":"default"})()),g=()=>{var d;const _=(d=v[f.value])==null?void 0:d.value;_&&(_.focus(),typeof _.selectionStart=="number"&&(_.selectionStart=_.selectionEnd=_.value.length))},b=async _=>{f.value!=_&&(f.value=_,await le(),g(),_==="default"&&(B.value=""))},k=()=>{const _=c.value.value,d=s.value.value,e=a.value.value,n=o.value.value,V=y.value.value,S=`${_}px ${d}px ${e}px ${n}px ${V}`;B.value=S},O=_=>{B.value=_.target.value},E=I(()=>{const _=B.value.match(h);return(_==null?void 0:_.groups)??{}});return ie(()=>{r.value.addEventListener("focus",g)}),ye(()=>{r.value.removeEventListener("focus",g)}),(_,d)=>{var e,n,V,S,T,A,L,_e,be,de,De,Re,Pe;return i(),w("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":p.fieldKey},[x(se,{tabs:m(ge),"model-value":f.value,"onUpdate:modelValue":b},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(i(),w("div",On,[f.value=="pick"?(i(),w("div",Mn,[C("div",qn,[C("div",An,[d[0]||(d[0]=C("div",{class:"name"},"Offset X",-1)),ce(C("div",{class:"value"},Y((e=E.value)==null?void 0:e.offsetX)+"px ",513),[[he,(n=E.value)==null?void 0:n.offsetX]])]),C("input",{ref_key:"paramOffsetXEl",ref:c,type:"range",min:"0",max:"32",value:(V=E.value)==null?void 0:V.offsetX,onInput:k},null,40,Dn)]),C("div",Rn,[C("div",Pn,[d[1]||(d[1]=C("div",{class:"name"},"Offset Y",-1)),ce(C("div",{class:"value"},Y((S=E.value)==null?void 0:S.offsetY)+"px ",513),[[he,(T=E.value)==null?void 0:T.offsetY]])]),C("input",{ref_key:"paramOffsetYEl",ref:s,type:"range",min:"0",max:"32",value:(A=E.value)==null?void 0:A.offsetY,onInput:k},null,40,Wn)]),C("div",Kn,[C("div",Un,[d[2]||(d[2]=C("div",{class:"name"},"Blur radius",-1)),ce(C("div",{class:"value"},Y((L=E.value)==null?void 0:L.blurRadius)+"px ",513),[[he,(_e=E.value)==null?void 0:_e.blurRadius]])]),C("input",{ref_key:"paramBlurRadiusEl",ref:a,type:"range",min:"0",max:"32",value:(be=E.value)==null?void 0:be.blurRadius,onInput:k},null,40,jn)]),C("div",Ln,[C("div",Nn,[d[3]||(d[3]=C("div",{class:"name"},"Spread radius",-1)),ce(C("div",{class:"value"},Y((de=E.value)==null?void 0:de.spreadRadius)+"px ",513),[[he,(De=E.value)==null?void 0:De.spreadRadius]])]),C("input",{ref_key:"paramSpreadRadiusEl",ref:o,type:"range",min:"-16",max:"32",value:(Re=E.value)==null?void 0:Re.spreadRadius,onInput:k},null,40,zn)]),C("div",Jn,[d[4]||(d[4]=C("div",{class:"header"},[C("div",{class:"name"},"Color")],-1)),C("input",{ref_key:"paramColorEl",ref:y,type:"color",value:(Pe=E.value)==null?void 0:Pe.color,onInput:k},null,40,Gn)])])):$("",!0),f.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:l,value:m(B),error:t.error,onInput:O},null,8,["value","error"])):$("",!0)])):$("",!0)],8,Vn)}}}),Hn=U(Yn,[["__scopeId","data-v-c59dcd63"]]),Xn=["data-automation-key"],Qn={key:0,class:"main"},Zn={key:0,class:"pickerContainer"},eo={key:0,class:"fixedContainer"},to=W({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-BE6RSzCE.js").then(d=>d.bK),__vite__mapDeps([1,2]),import.meta.url)}),l=K("rootEl"),c=K("pickerEl"),s=K("freehandInputEl"),a=K("fixedEl"),o=[{key:"fixed",label:"Fixed",match:d=>d.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:d=>d=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:d=>d=="100%",default:"100%"}],y={pick:c,css:s,default:null},v=t,p=J({componentId:q(v,"componentId"),fieldKey:q(v,"fieldKey")}),B=I(()=>o.map(d=>({value:d.key,label:d.label,icon:"move-horizontal"}))),h=I(()=>{const d=p.value;for(const e in o)if(d&&o[e].match(d))return o[e].key;return null}),u=I(()=>{const d=p.value;if(d){if(d.endsWith("px"))return d.substring(0,d.length-2)}else return null;return null}),g=N((()=>{if(!p.value)return"default";for(const d in o)if(o[d].match(p.value))return"pick";return"css"})()),b=()=>{var e;const d=(e=y[g.value])==null?void 0:e.value;d&&(d.focus(),typeof d.selectionStart=="number"&&(d.selectionStart=d.selectionEnd=d.value.length))},k=async d=>{g.value!=d&&(g.value=d,await le(),b(),d==="default"&&(p.value=""))},O=d=>{for(const e in o)if(o[e].key==d){const n=o[e].default;p.value=n}d=="fixed"&&le(()=>{a.value.focus()})},E=d=>{p.value=d.target.value},_=d=>{p.value=`${d}px`};return ie(()=>{l.value.addEventListener("focus",b)}),ye(()=>{l.value.removeEventListener("focus",b)}),(d,e)=>(i(),w("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":v.fieldKey},[x(se,{tabs:m(ge),"model-value":g.value,"onUpdate:modelValue":k},null,8,["tabs","model-value"]),g.value=="pick"||g.value=="css"?(i(),w("div",Qn,[g.value=="pick"?(i(),w("div",Zn,[x(m(r),{ref_key:"pickerEl",ref:c,"model-value":h.value,options:B.value,"onUpdate:modelValue":O},null,8,["model-value","options"]),h.value=="fixed"?(i(),w("div",eo,[x(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value,invalid:t.error!==void 0,"onUpdate:modelValue":_},null,8,["model-value","invalid"]),e[0]||(e[0]=C("div",null,"px",-1))])):$("",!0)])):$("",!0),g.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:m(p),onInput:E},null,8,["value"])):$("",!0)])):$("",!0)],8,Xn))}}),no=U(to,[["__scopeId","data-v-55a31bea"]]),oo=["data-automation-key"],lo={class:"tools"},ao=["onClick"],io={class:"toolName"},so={class:"addToolForm"},ro=W({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderGraphSelect-GDZBUS0N.js"),__vite__mapDeps([15,1,2,16,17]),import.meta.url)}),l=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-B_mePKpd.js").then(d=>d.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),s={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:"",binding:!1,includeDomains:"",excludeDomains:"",includeRawContent:!1},a=N(s),o=I(()=>{switch(a.value.type){case"function":return!a.value.code;case"graph":return!a.value.graphIds;case"web_search":return!1;default:return!0}}),y=I({get:()=>a.value.graphIds.split(",").filter(d=>!d.startsWith("@{")),set(d){a.value={...a.value,graphIds:d.join(",")}}}),v=I({get:()=>{const d=Te.exec(a.value.graphIds);return(d==null?void 0:d[1])??""},set(d){a.value={...a.value,graphIds:`@{${d}}`}}}),p=t,B=J({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),h=I(()=>{try{return JSON.parse(B.value)}catch{return{}}});function u(){a.value={...s,isShown:!0}}function f(){const{type:d,code:e,graphIds:n,includeDomains:V,excludeDomains:S,includeRawContent:T}=a.value;if(d=="function")return{...JSON.parse(e),type:d};if(d=="graph"){const A=n.split(",").map(L=>L.trim());return{type:d,graph_ids:A}}if(d=="web_search"){const A={type:d};return V.trim()&&(A.include_domains=V.split(",").map(L=>L.trim()).filter(L=>L)),S.trim()&&(A.exclude_domains=S.split(",").map(L=>L.trim()).filter(L=>L)),T&&(A.include_raw_content=T),A}throw"Unexpected tool type."}function g(d){let e=[];const{originalName:n,name:V}=d;return V||e.push("The name cannot be empty."),Object.keys(h.value).includes(V)&&!(n||n==V)&&e.push("An existing tool with the specified name already exists."),e}function b(){const d=g(a.value);if(d.length>0){d.forEach(alert);return}let e;try{e=f()}catch{alert("Incorrect tool definition");return}const{originalName:n,name:V}=a.value;let S={...h.value};if(n&&n!==V){const{[n]:T,...A}=S;S=A}S[V]=e,B.value=JSON.stringify(S),a.value.isShown=!1}function k(d,e){var V,S,T,A;const{type:n}=e;if(n=="function")return{isShown:!0,type:"function",binding:!1,originalName:d,name:d,graphIds:"",code:JSON.stringify(e,void 0,2),includeDomains:"",excludeDomains:"",includeRawContent:!1};if(n=="graph"){const L=Te.test(((V=e.graph_ids)==null?void 0:V.at(0))??"");return{isShown:!0,type:"graph",originalName:d,name:d,binding:L,graphIds:((S=e.graph_ids)==null?void 0:S.join(","))??"",code:"",includeDomains:"",excludeDomains:"",includeRawContent:!1}}if(n=="web_search")return{isShown:!0,type:"web_search",originalName:d,name:d,graphIds:"",binding:!1,code:"",includeDomains:((T=e.include_domains)==null?void 0:T.join(", "))??"",excludeDomains:((A=e.exclude_domains)==null?void 0:A.join(", "))??"",includeRawContent:e.include_raw_content??!1};throw"Unexpected tool type;"}function O(d){var n;const e=(n=h.value)==null?void 0:n[d];e&&(a.value=k(d,e))}function E(d){const{[d]:e,...n}={...h.value};B.value=JSON.stringify(n)}const _=I(()=>[{desc:"cancel",fn:()=>a.value.isShown=!1},{desc:"Save",disabled:o.value,fn:b}]);return(d,e)=>(i(),w("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":p.fieldKey},[C("div",lo,[(i(!0),w(j,null,Z(h.value,(n,V)=>(i(),w("div",{key:V,class:"tool",onClick:S=>O(V)},[C("div",io,Y(V),1),x(H,{variant:"primary",size:"smallIcon",class:"delete",onClick:oe(S=>E(V),["stop"])},{default:M(()=>[x(z,{name:"trash-2"})]),_:2},1032,["onClick"])],8,ao))),128))]),x(H,{size:"small",onClick:u},{default:M(()=>[x(z,{name:"plus"}),e[9]||(e[9]=ae(" Add tool "))]),_:1}),a.value.isShown?(i(),F(Oe,{key:0,actions:_.value,title:"Add tool","allow-overflow":""},{default:M(()=>[C("div",so,[x(te,{label:"Tool type"},{default:M(()=>[x(dt,{modelValue:a.value.type,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.type=n)},{default:M(()=>e[10]||(e[10]=[C("option",{value:"function"},"Function",-1),C("option",{value:"graph"},"Knowledge graph",-1),C("option",{value:"web_search"},"Web search",-1)])),_:1},8,["modelValue"])]),_:1}),x(te,{label:"Tool name"},{default:M(()=>[x(ee,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.name=n)},null,8,["modelValue"])]),_:1}),a.value.type=="function"?(i(),F(te,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:M(()=>[x(m(l),{modelValue:a.value.code,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.code=n),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):$("",!0),a.value.type=="graph"?(i(),F(te,{key:1,"is-binding-enabled":a.value.binding,"onUpdate:isBindingEnabled":e[5]||(e[5]=n=>a.value.binding=n),label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas.","is-binding-button-shown":""},{default:M(()=>[a.value.binding?(i(),F(ne,{key:0,type:"state",value:v.value,"onUpdate:value":e[3]||(e[3]=n=>v.value=n)},null,8,["value"])):(i(),F(m(r),{key:1,modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=n=>y.value=n),"enable-multi-selection":""},null,8,["modelValue"]))]),_:1},8,["is-binding-enabled"])):$("",!0),a.value.type=="web_search"?(i(),F(te,{key:2,label:"Include domains (optional)",hint:"Comma-separated list of domains to search within (e.g., wikipedia.org, docs.python.org)"},{default:M(()=>[x(ee,{modelValue:a.value.includeDomains,"onUpdate:modelValue":e[6]||(e[6]=n=>a.value.includeDomains=n),placeholder:"domain1.com, domain2.org"},null,8,["modelValue"])]),_:1})):$("",!0),a.value.type=="web_search"?(i(),F(te,{key:3,label:"Exclude domains (optional)",hint:"Comma-separated list of domains to exclude from results"},{default:M(()=>[x(ee,{modelValue:a.value.excludeDomains,"onUpdate:modelValue":e[7]||(e[7]=n=>a.value.excludeDomains=n),placeholder:"spam.com, ads.net"},null,8,["modelValue"])]),_:1})):$("",!0),a.value.type=="web_search"?(i(),F(te,{key:4,label:"Include raw content",hint:"Include full page content in search results"},{default:M(()=>[x(qe,{modelValue:a.value.includeRawContent,"onUpdate:modelValue":e[8]||(e[8]=n=>a.value.includeRawContent=n),label:"Include raw content"},null,8,["modelValue"])]),_:1})):$("",!0)])]),_:1},8,["actions"])):$("",!0)],8,oo))}}),uo=U(ro,[["__scopeId","data-v-9b70cc0d"]]),co=["data-automation-key"],po={class:"availableMcpTools"},vo={class:"sectionHeader"},mo={key:0,class:"errorState"},fo={key:1,class:"loadingState"},yo={key:2,class:"emptyState"},go=["onClick"],_o={class:"iconContainer"},bo=["src","alt"],ho={class:"appName"},ko={key:1,class:"selectedCount"},So={key:0,class:"mcpFunctionsList"},Io=["data-writer-tooltip"],Bo=["onClick"],Co={class:"functionName"},wo={key:0,class:"functionDescription"},Eo=W({__name:"BuilderFieldsToolsWithMcp",props:{componentId:{},fieldKey:{}},setup(t){const r=R(P.core),l=Le(),{writerApi:c}=ct(),s=N([]),a=N(!1),o=N(void 0),y=N(new Set),v=I(()=>{var _;const E={};for(const d of s.value){const e=d.appName||"Unknown App";E[e]||(E[e]={functions:[],logo:(_=d.connector)==null?void 0:_.logo}),E[e].functions.push(d)}return E}),p=I(()=>{const E={};for(const[_,d]of Object.entries(v.value))E[_]=d.functions.filter(e=>u(e)).length;return E});function B(E){y.value.has(E)?y.value.delete(E):y.value.add(E)}function h(E){return`${E.appName}_${E.functionName}`.replace(/[^a-zA-Z0-9_]/g,"_")}function u(E){return h(E)in O.value}function f(E,_){const d=h(E);if(_){const e={type:"mcp",appId:E.appId,functionName:E.functionName,function:E.function};k.value=JSON.stringify({...O.value,[d]:e})}else{const{[d]:e,...n}=O.value;k.value=JSON.stringify(n)}}async function g(){const E=r.writerOrgId.value;if(!E){o.value=new Error("No organization ID available");return}a.value=!0,o.value=void 0;try{const _=r.writerAppId.value;s.value=await c.fetchMcpTools(E,_)}catch(_){const d=_ instanceof Error?_:new Error(String(_));o.value=d,s.value=[]}finally{a.value=!1}}ie(()=>{g()});const b=t,k=J({componentId:q(b,"componentId"),fieldKey:q(b,"fieldKey")}),O=I(()=>{try{return JSON.parse(k.value)}catch(E){return l.error(E),{}}});return(E,_)=>(i(),w("div",{class:"BuilderFieldsToolsWithMcp colorTransformer","data-automation-key":b.fieldKey},[C("div",po,[C("div",vo,[_[2]||(_[2]=C("div",{class:"sectionTitle"},"Available MCP Tools",-1)),x(H,{size:"small",variant:"secondary",loading:a.value,onClick:_[0]||(_[0]=d=>g())},{default:M(()=>[x(z,{name:"refresh-cw"}),_[1]||(_[1]=ae(" Refresh "))]),_:1},8,["loading"])]),o.value?(i(),w("div",mo,[ae(" Error loading MCP tools: "+Y(o.value.message)+" ",1),_[3]||(_[3]=C("br",null,null,-1)),_[4]||(_[4]=C("small",null,"Check console for details",-1))])):a.value&&s.value.length===0?(i(),w("div",fo,[(i(),w(j,null,Z(3,d=>C("div",{key:d,class:"loadingSkeleton"},[x(We,{style:{width:"200px","margin-bottom":"8px"}}),x(We,{style:{width:"150px"}})])),64))])):s.value.length===0?(i(),w("div",yo,_[5]||(_[5]=[ae(" No MCP tools available "),C("br",null,null,-1),C("small",null,"Make sure you have connected MCP applications with enabled functions",-1)]))):(i(),w("div",{key:3,class:ve(["mcpToolsList",{loading:a.value}])},[(i(!0),w(j,null,Z(v.value,(d,e)=>(i(),w("div",{key:e,class:ve(["mcpAppGroup",{expanded:y.value.has(e)}])},[C("div",{class:ve(["mcpAppHeader",{expanded:y.value.has(e)}]),onClick:n=>B(e)},[C("div",_o,[x(z,{name:y.value.has(e)?"minus":"plus",class:"expandIcon"},null,8,["name"])]),d.logo?(i(),w("img",{key:0,src:d.logo,alt:`${e} logo`,class:"appLogo"},null,8,bo)):$("",!0),C("span",ho,Y(e),1),p.value[e]>0?(i(),w("span",ko,Y(p.value[e])+" selected ",1)):$("",!0)],10,go),y.value.has(e)?(i(),w("div",So,[(i(!0),w(j,null,Z(d.functions,n=>{var V,S;return i(),w("div",{key:`${n.appId}-${n.functionName}`,class:"mcpFunctionItem","data-writer-tooltip":(V=n.function)==null?void 0:V.description,"data-writer-tooltip-placement":"left"},[x(qe,{class:"functionCheckbox","model-value":u(n),"onUpdate:modelValue":T=>f(n,T)},null,8,["model-value","onUpdate:modelValue"]),C("div",{class:"functionInfo",onClick:T=>f(n,!u(n))},[C("div",Co,Y(n.functionName),1),(S=n.function)!=null&&S.description?(i(),w("div",wo,Y(n.function.description),1)):$("",!0)],8,Bo)],8,Io)}),128))])):$("",!0)],2))),128))],2))])],8,co))}}),xo=U(Eo,[["__scopeId","data-v-c8204108"]]),$o=W({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0},inputLanguage:{type:String,required:!0},singleLine:{type:Boolean,required:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-B_mePKpd.js").then(a=>a.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),l=t,c=J({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey")}),s=I(()=>l.singleLine?"single-line":l.isExpanded?"half-screen":"minimal");return(a,o)=>(i(),F(m(r),{modelValue:m(c),"onUpdate:modelValue":o[0]||(o[0]=y=>fe(c)?c.value=y:null),language:t.inputLanguage,variant:s.value,class:"BuilderFieldsCode"},null,8,["modelValue","language","variant"]))}}),Ue=U($o,[["__scopeId","data-v-a2ca567b"]]),To=["data-automation-key"],Fo=W({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-BE6RSzCE.js").then(p=>p.bK),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")}),o=I(()=>{const p=new Set;for(const u of l.getComponents("blueprints_root"))u.content.key&&p.add(u.content.key);const B=[...p].sort((u,f)=>u.localeCompare(f)).map(u=>({value:u,label:u,icon:"wds-blueprints"})),h=[{value:"",label:"(No blueprint)",icon:"block"},...B];if(!h.some(u=>u.value===a.value)){const u=a.value;h.push({value:u,label:u})}return h}),y=I(()=>{const p=l.getComponents("blueprints_root").find(B=>B.content.key===a.value);return p==null?void 0:p.id});function v(){y.value&&(c.setSelection(y.value,null,"click"),l.setActivePageId(y.value))}return(p,B)=>(i(),w("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":s.fieldKey},[x(m(r),{modelValue:m(a),"onUpdate:modelValue":B[0]||(B[0]=h=>fe(a)?a.value=h:null),options:o.value},null,8,["modelValue","options"]),y.value?(i(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:v},{default:M(()=>[x(z,{name:"square-dashed-mouse-pointer"})]),_:1})):$("",!0)],8,To))}}),Vo=U(Fo,[["__scopeId","data-v-f1beb9af"]]),Oo=["data-automation-key"],Mo=W({__name:"BuilderFieldsBlueprintId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=R(P.core),l=t,c=I(()=>r.getComponentById(l.componentId)),s=I(()=>{var a;return((a=c.value)==null?void 0:a.parentId)??""});return(a,o)=>(i(),w("div",{class:"BuilderFieldsBlueprintId","data-automation-key":l.fieldKey},[x(ee,{"model-value":s.value,disabled:""},null,8,["model-value"])],8,Oo))}}),qo=U(Mo,[["__scopeId","data-v-23c33b8b"]]),Ao=["data-automation-key"],Do=W({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-BE6RSzCE.js").then(o=>o.bK),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=t,s=J({componentId:q(c,"componentId"),fieldKey:q(c,"fieldKey")}),a=I(()=>{const o=l.userFunctions.value.map(v=>v.name).sort((v,p)=>v.localeCompare(p)).map(v=>({value:v,label:v,icon:"wds-function"})),y=[{value:"",label:"(No handler)",icon:"ban"},...o];if(!y.some(v=>v.value===s.value)){const v=s.value;y.push({value:v,label:v})}return y});return(o,y)=>(i(),w("div",{class:"BuilderFieldsHandler","data-automation-key":c.fieldKey},[x(m(r),{modelValue:m(s),"onUpdate:modelValue":y[0]||(y[0]=v=>fe(s)?s.value=v:null),options:a.value},null,8,["modelValue","options"])],8,Ao))}}),Ro=["data-automation-key"],Po=["href","data-writer-tooltip"],Wo=W({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0},enableMultiSelection:{type:Boolean,required:!1,default:!1},isBindingButtonShown:{type:Boolean,required:!1,default:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderApplicationSelect-C8BSuPVC.js"),__vite__mapDeps([18,1,2,16,19]),import.meta.url)}),l=X({loader:()=>Q(()=>import("./BuilderGraphSelect-GDZBUS0N.js"),__vite__mapDeps([15,1,2,16,17]),import.meta.url)}),c=X({loader:()=>Q(()=>import("./BuilderModelSelect-BbDEAHxb.js"),__vite__mapDeps([20,1,2,16,21]),import.meta.url)}),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")}),{isBindingMode:o,toggleBindingMode:y}=Qe({fieldViewModel:a}),v=J({componentId:q(s,"componentId"),fieldKey:"appInputs"}),p=K("selectorEl"),B=I(()=>{switch(s.resourceType){case"model":return c;case"graph":return l;case"application":return r;default:throw new Error(`Unexpected resourceType: ${s.resourceType}`)}}),h=I(()=>{switch(s.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),u=I(()=>{var O,E;if(Array.isArray(f.value))return;const b=f.value;if(!b)return;const k=(E=(O=p.value)==null?void 0:O.selectedData)==null?void 0:E.organization_id;if(k)switch(s.resourceType){case"graph":{const _=new URLSearchParams({graphId:b});return`https://app.writer.com/aistudio/organization/${k}/knowledge-graph?${_}`}case"application":return`https://app.writer.com/aistudio/organization/${k}/app/${b}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),f=I({get(){if(s.enableMultiSelection){const b=a.value||"[]";try{return JSON.parse(b)}catch{return[]}}return a.value},set(b){a.value=s.enableMultiSelection?JSON.stringify(b):String(b)}});function g(b){s.resourceType!=="application"||!b||!b.inputs||typeof b.inputs!="object"||(v.value=JSON.stringify(b.inputs))}return(b,k)=>(i(),F(te,{"is-binding-button-shown":t.isBindingButtonShown,"is-binding-enabled":m(o),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":t.fieldKey,"onUpdate:isBindingEnabled":m(y)},{default:M(()=>[C("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":t.fieldKey},[m(o)?(i(),F(Ae,{key:0,type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])):(i(),F(Fe(B.value),{key:1,ref_key:"selectorEl",ref:p,modelValue:f.value,"onUpdate:modelValue":k[0]||(k[0]=O=>f.value=O),"enable-multi-selection":t.enableMultiSelection,onSelectedData:g},null,40,["modelValue","enable-multi-selection"])),u.value?(i(),w("a",{key:2,class:"BuilderFieldsWriterResourceId__link",href:u.value,target:"_blank","data-writer-tooltip":h.value},[x(z,{name:"external-link"})],8,Po)):$("",!0)],8,Ro)]),_:1},8,["is-binding-button-shown","is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"]))}}),ke=U(Wo,[["__scopeId","data-v-59e28cc4"]]),Ko=["data-automation-key"],Uo=W({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-BE6RSzCE.js").then(u=>u.bK),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")});function*o(){yield l.getComponentById("root"),yield*l.getComponentsNested("root")}const y=I(()=>{const u=[];for(const f of o()){const g=l.getComponentDefinition(f==null?void 0:f.type);if(!(g!=null&&g.events)||Object.keys(g.events).length===0)continue;const{name:b,previewText:k,possibleImageUrls:O}=Ne(l,f),E=O.value,_=f.id;u.push({value:_,label:k.value||b.value,detail:k.value?b.value:void 0,icon:E})}return u}),v=I({get:()=>a.value,set(u){a.value=String(u)}}),p=I(()=>{let u=v.value;for(;u;){const f=l.getComponentById(u);if(f.type==="page")return f.id;u=f.parentId}}),B=I(()=>l.getComponentById(v.value));function h(){!v.value||!B.value||(p.value&&(c.mode.value="ui",l.setActivePageId(p.value)),c.setSelection(v.value,null,"click"))}return(u,f)=>(i(),w("div",{class:"BuilderFieldsComponentId","data-automation-key":s.fieldKey},[x(m(r),{modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=g=>v.value=g),options:y.value,"enable-search":""},null,8,["modelValue","options"]),v.value?(i(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!B.value,onClick:h},{default:M(()=>[x(z,{name:"square-dashed-mouse-pointer"})]),_:1},8,["disabled"])):$("",!0)],8,Ko))}}),jo=U(Uo,[["__scopeId","data-v-fcce992f"]]),Lo=["data-automation-key"],No=W({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-BE6RSzCE.js").then(p=>p.bK),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=t,s=J({componentId:q(c,"componentId"),fieldKey:q(c,"fieldKey")}),a=I(()=>l.getComponentById(c.componentId)),o=I(()=>{var p;return l.getComponentDefinition((p=a.value)==null?void 0:p.type)}),y=I(()=>{var f,g;const p=(g=Object.entries(((f=o.value)==null?void 0:f.fields)??{}).find(([,b])=>b.type===D.ComponentId))==null?void 0:g.at(0);if(p===void 0)return[];const B=a.value.content[String(p)],h=l.getComponentById(B),u=l.getComponentDefinition(h==null?void 0:h.type);return u!=null&&u.events?Object.keys(u.events).map(b=>({value:b,label:b})):[]}),v=I({get:()=>s.value,set(p){s.value=String(p)}});return(p,B)=>(i(),w("div",{class:"BuilderFieldsComponentEventType","data-automation-key":c.fieldKey},[y.value.length?(i(),F(m(r),{key:0,modelValue:v.value,"onUpdate:modelValue":B[0]||(B[0]=h=>v.value=h),options:y.value,"hide-icons":""},null,8,["modelValue","options"])):(i(),F(ee,{key:1,modelValue:v.value,"onUpdate:modelValue":B[1]||(B[1]=h=>v.value=h)},null,8,["modelValue"]))],8,Lo))}});function zo(t,r,l){const{getEvaluatedFields:c}=Ee(t,l);function s(p){return!!Te.exec(p)}const a=I(()=>{var p;return(p=r.value.at(-1))==null?void 0:p.componentId}),o=I(()=>{if(a.value!==void 0)return t.getComponentById(a.value)}),y=I(()=>{var p,B;return(p=o.value)!=null&&p.type?((B=t.getComponentDefinition(o.value.type))==null?void 0:B.fields)??{}:{}}),v=I(()=>c(r.value));return I(()=>Object.entries(y.value).reduce((p,[B,h])=>{var g;const u=((g=o.value.content)==null?void 0:g[B])??"";if(s(u))return p;const f=v.value[B].value;return p[B]=Jo(t,a.value,h,f),p},{}))}function Jo(t,r,l,c){let s=l.validator;if(s===void 0&&typeof l.options=="object"&&l.options!==null&&Object.keys(l.options).length>0?s=pt(Object.keys(l.options)):typeof s=="function"&&(s=s(t,r)),s===void 0)return;const a=vt(s);if(!(a(c)||a.errors===void 0))return Yo(a.errors)}function Go(t){var l;if(t.keyword==="format"&&Object.values(mt).includes(t.params.format))return ft[t.params.format].errorMessage;let r="";return t.instancePath&&(r+=`${t.instancePath} `),r+=t.message,Array.isArray((l=t.params)==null?void 0:l.allowedValues)&&(r+=`: ${t.params.allowedValues.join(", ")}`),r}function Yo(t){return t.map(Go).join(`
`)}const Ho={key:0,class:"BuilderSettingsProperties"},Xo=["inert"],Qo=W({__name:"BuilderSettingsProperties",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),l=R(P.builderManager),c=R(P.secretsManager),s=N(new Set),a=I(()=>{var e,n;return Ye((n=(e=l.firstSelectedItem)==null?void 0:e.value)==null?void 0:n.instancePath)}),o=I(()=>r.getComponentById(l.firstSelectedId.value)),y=I(()=>{var e;return r.getComponentDefinition((e=o.value)==null?void 0:e.type)}),{getEvaluatedFields:v}=Ee(r,c),p=I(()=>v(a.value)),B=I(()=>{var n;const e=Object.entries(((n=y.value)==null?void 0:n.fields)??{}).filter(([V,S])=>S.isArtifactField?!1:S.enabled===void 0?!0:S.enabled({evaluatedFields:p.value}));return Object.fromEntries(e)});function h(e){return e.type===D.Code||e.type===D.JSONInput||e.type===D.Object||e.control===Se.Textarea}const u=zo(r,a,c),f=N(G.General),g=Object.freeze({[G.General]:"Configure",[G.Style]:"Style",[G.Tools]:"Tools"}),b=I(()=>k.value.map(e=>({label:g[e]??e,value:e}))),k=I(()=>[G.General,G.Style,G.Tools].filter(e=>{var n;return(n=O.value[e])==null?void 0:n.length})),O=I(()=>{const e={[G.General]:[],[G.Style]:[],[G.Tools]:[]};return Object.entries(B.value).forEach(([n,V])=>{const S=V.category||G.General;e[S]&&e[S].push([n,V])}),{[G.General]:E(e[G.General]),[G.Style]:E(e[G.Style]),[G.Tools]:E(e[G.Tools])}});function E(e){return e.map((n,V)=>[n,V]).sort(([n,V],[S,T])=>{const A=n[1].order??0;return(S[1].order??0)-A||V-T}).map(([n])=>n)}function _(e){s.value.add(e)}function d(e){s.value.delete(e)}return(e,n)=>m(l).isSingleSelectionActive?(i(),w("div",Ho,[k.value.length>1?(i(),F(se,{key:0,modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=V=>f.value=V),variant:"bar",tabs:b.value},null,8,["modelValue","tabs"])):$("",!0),(i(!0),w(j,null,Z(k.value.length>1?[f.value]:k.value,V=>(i(),w("div",{key:V,inert:t.isReadOnly,class:"BuilderSettingsProperties__category"},[(i(!0),w(j,null,Z(O.value[V],([S,T])=>(i(),w("div",{key:S,class:"BuilderSettingsProperties__category__field"},[T.type===m(D).Boolean?(i(),F(cn,{key:0,"field-key":S,"component-id":o.value.id,label:T.name??S,hint:T.desc,unit:T.type,error:m(u)[S]},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===m(D).WriterGraphId?(i(),F(ke,{key:1,"is-binding-button-shown":"","field-key":S,"component-id":o.value.id,label:T.name??S,hint:T.desc,unit:T.type,error:m(u)[S],"resource-type":"graph"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===m(D).WriterGraphIds?(i(),F(ke,{key:2,"is-binding-button-shown":"","field-key":S,"component-id":o.value.id,label:T.name??S,hint:T.desc,unit:T.type,error:m(u)[S],"resource-type":"graph","enable-multi-selection":""},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===m(D).WriterAppId?(i(),F(ke,{key:3,"field-key":S,"component-id":o.value.id,label:T.name??S,hint:T.desc,unit:T.type,error:m(u)[S],"resource-type":"application"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===m(D).WriterModelId?(i(),F(ke,{key:4,"field-key":S,"component-id":o.value.id,label:T.name??S,hint:T.desc,unit:T.type,error:m(u)[S],"resource-type":"model"},null,8,["field-key","component-id","label","hint","unit","error"])):(i(),F(te,{key:5,label:V==="Tools"?void 0:T.name??S,hint:T.desc,unit:T.type,error:m(u)[S],"is-expansible":h(T),onExpand:A=>_(S),onShrink:A=>d(S)},{default:M(()=>[T.type==m(D).Color?(i(),F(an,{key:0,"field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0),T.type==m(D).Shadow?(i(),F(Hn,{key:1,"field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0),T.type==m(D).KeyValue?(i(),F(In,{key:2,"field-key":S,"component-id":o.value.id,"instance-path":a.value,error:m(u)[S]},null,8,["field-key","component-id","instance-path","error"])):$("",!0),T.type==m(D).Text||T.type==m(D).Number||T.type==m(D).Binding||T.type==m(D).IdKey?(i(),F(Ae,{key:3,type:T.type==m(D).Binding?"state":"template","field-key":S,"field-control":T.control,"component-id":o.value.id,"default-value":T.default,error:m(u)[S]},null,8,["type","field-key","field-control","component-id","default-value","error"])):$("",!0),T.type==m(D).BlueprintId?(i(),F(qo,{key:4,"field-key":S,"component-id":o.value.id},null,8,["field-key","component-id"])):$("",!0),T.type==m(D).BlueprintKey?(i(),F(Vo,{key:5,"field-key":S,"component-id":o.value.id},null,8,["field-key","component-id"])):$("",!0),T.type==m(D).Handler?(i(),F(Do,{key:6,"field-key":S,"component-id":o.value.id},null,8,["field-key","component-id"])):$("",!0),T.type==m(D).Object?(i(),F(Cn,{key:7,"field-key":S,"component-id":o.value.id,"default-value":T.default,error:m(u)[S]},null,8,["field-key","component-id","default-value","error"])):$("",!0),T.type==m(D).JSONInput?(i(),F(Ue,{key:8,"field-key":S,"component-id":o.value.id,"is-expanded":s.value.has(S),"input-language":"json"},null,8,["field-key","component-id","is-expanded"])):$("",!0),T.type==m(D).Width?(i(),F(no,{key:9,"field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0),T.type==m(D).HAlign?(i(),F(Ke,{key:10,direction:"horizontal","field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0),T.type==m(D).VAlign?(i(),F(Ke,{key:11,direction:"vertical","field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0),T.type==m(D).Padding?(i(),F(Fn,{key:12,"field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0),T.type==m(D).Tools&&o.value.type==="blueprints_writerchatreplywithtoolconfig"?(i(),F(xo,{key:13,"field-key":S,"component-id":o.value.id},null,8,["field-key","component-id"])):T.type==m(D).Tools?(i(),F(uo,{key:14,"field-key":S,"component-id":o.value.id},null,8,["field-key","component-id"])):$("",!0),T.type==m(D).Code||T.type==m(D).Eval?(i(),F(Ue,{key:15,"field-key":S,"component-id":o.value.id,"is-expanded":s.value.has(S),"input-language":"python","single-line":T.type==m(D).Eval},null,8,["field-key","component-id","is-expanded","single-line"])):$("",!0),T.type==m(D).ComponentId?(i(),F(jo,{key:16,"field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0),T.type==m(D).ComponentEventType?(i(),F(No,{key:17,"field-key":S,"component-id":o.value.id,error:m(u)[S]},null,8,["field-key","component-id","error"])):$("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"]))]))),128))],8,Xo))),128))])):$("",!0)}}),Zo=U(Qo,[["__scopeId","data-v-d82ebb47"]]),el={},tl={class:"WdsTitle"};function nl(t,r){return i(),w("h2",tl,[yt(t.$slots,"default",{},void 0,!0)])}const Ze=U(el,[["render",nl],["__scopeId","data-v-3b68d589"]]),ol=["inert"],ll="Connect the result of this block to a dynamic variable you can use across this agent",al=W({__name:"BuilderSettingsBinding",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),l=R(P.builderManager),c=R(P.secretsManager),s=Ce(r,l),{getEvaluatedFields:a}=Ee(r,c),o=I(()=>{var h,u;return Ye((u=(h=l.firstSelectedItem)==null?void 0:h.value)==null?void 0:u.instancePath)}),y=I(()=>r.getComponentById(l.firstSelectedId.value)),v=I(()=>a(o.value)),p=I(()=>{const h=r.getComponentDefinition(y.value.type);return h?Object.entries(h.events).filter(([,g])=>g.bindable?g.enabled===void 0?!0:g.enabled({evaluatedFields:v.value}):!1).map(([g])=>g)[0]:void 0});function B(h){s.setBinding(l.firstSelectedId.value,h,p.value)}return me(p,()=>{var u;if(!p.value)return;const h=(u=y.value)==null?void 0:u.binding;h!=null&&h.stateRef&&p.value!==h.eventType&&B(h.stateRef)}),(h,u)=>m(l).isSingleSelectionActive?(i(),w("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsBinding"},[x(Ze,null,{default:M(()=>u[1]||(u[1]=[ae("Binding")])),_:1}),x(te,{class:"BuilderSettingsBinding__main",label:"Link Variable",hint:ll},{default:M(()=>{var f;return[x(ne,{type:"state",value:(f=y.value.binding)==null?void 0:f.stateRef,"component-id":m(l).firstSelectedId.value,onInput:u[0]||(u[0]=g=>B(g.target.value))},null,8,["value","component-id"])]}),_:1})],8,ol)):$("",!0)}}),il=U(al,[["__scopeId","data-v-f92e4a05"]]),sl=["inert"],rl={class:"main"},ul={class:"flexRow"},dl=["checked"],cl='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',pl=W({__name:"BuilderSettingsVisibility",props:{isReadOnly:{type:Boolean}},setup(t){const r=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],l=I({get(){const y=o.value.visible;return(y==null?void 0:y.expression)==="custom"?"custom":y===void 0||y.expression===!0?"yes":"no"},set(y){var v,p;y==="custom"?a(o.value.id,"custom",(v=o.value.visible)==null?void 0:v.binding,(p=o.value.visible)==null?void 0:p.reversed):a(o.value.id,y==="yes")}}),c=R(P.core),s=R(P.builderManager),{setVisibleValue:a}=Ce(c,s),o=I(()=>c.getComponentById(s.firstSelectedId.value));return(y,v)=>m(s).isSingleSelectionActive?(i(),w("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsVisibility"},[x(Ze,null,{default:M(()=>v[3]||(v[3]=[ae("Visibility")])),_:1}),C("div",rl,[x(se,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=p=>l.value=p),tabs:r},null,8,["modelValue"]),typeof o.value.visible<"u"&&o.value.visible.expression==="custom"?(i(),F(te,{key:0,hint:cl},{default:M(()=>[x(ne,{value:o.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:v[1]||(v[1]=p=>m(a)(o.value.id,"custom",p.target.value,o.value.visible.reversed))},null,8,["value"]),C("div",ul,[C("input",{type:"checkbox",checked:o.value.visible.reversed,onInput:v[2]||(v[2]=p=>m(a)(o.value.id,"custom",o.value.visible.binding,p.target.checked))},null,40,dl),v[4]||(v[4]=C("span",null,"Reverse",-1))])]),_:1})):$("",!0)])],8,sl)):$("",!0)}}),vl=U(pl,[["__scopeId","data-v-c4316bf1"]]),je={apiTriggerDetails:X({loader:()=>Q(()=>import("./BuilderSettingsArtifactAPITriggerDetails-BVwzs77e.js"),__vite__mapDeps([22,1,2,7,8,9,10,3,4,5,6,11,23]),import.meta.url)})},ml={class:"BuilderSettingsMain"},fl={key:1,class:"BuilderSettingsMain__description"},yl={key:2,class:"BuilderSettingsMain__warning cmc-warning"},gl={class:"BuilderSettingsMain__section"},_l={class:"BuilderSettingsMain__componentId"},bl=W({__name:"BuilderSettingsMain",setup(t){const r=X({loader:()=>Q(()=>import("./BuilderSettingsHandlers-BcFsEXUH.js"),__vite__mapDeps([24,1,2,25,4,5,26,27,28,3,6,7,8,9,10,11,29]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=I(()=>l.getComponentById(c.firstSelectedId.value)),a=I(()=>s.value.isCodeManaged),o=I(()=>c.isSingleSelectionActive.value?!y.value.toolkit||y.value.toolkit=="core":!1),y=I(()=>{const{type:k}=s.value;return l.getComponentDefinition(k)}),v=I(()=>{var O;return gt(l,s.value)||((O=y.value)==null?void 0:O.description)}),p=I(()=>{var k;return((k=s.value)==null?void 0:k.type)==="blueprints_shared"});me(s,k=>{k||c.setSelection(null)});const{copy:B,copied:h}=He();function u(){B(c.firstSelectedId.value)}const f=I(()=>{var k;return Object.values(((k=y.value)==null?void 0:k.events)??{}).some(O=>O.bindable)}),g=I(()=>{var k;return(((k=y.value)==null?void 0:k.settingsArtifacts)??[]).filter(O=>O.position!=="bottom")}),b=I(()=>{var k;return(((k=y.value)==null?void 0:k.settingsArtifacts)??[]).filter(O=>O.position==="bottom")});return(k,O)=>(i(),w("div",ml,[v.value&&p.value?(i(),F(_t,{key:0,"raw-text":v.value,class:"BuilderSettingsMain__description"},null,8,["raw-text"])):v.value?(i(),w("p",fl,Y(v.value),1)):$("",!0),a.value?(i(),w("p",yl,[C("span",null,[x(z,{name:"triangle-alert"})]),O[0]||(O[0]=C("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1))])):$("",!0),C("div",gl,[x(Zo,{"is-read-only":a.value},null,8,["is-read-only"]),(i(!0),w(j,null,Z(g.value,E=>(i(),F(Fe(m(je)[E.key]),{key:E.key,inert:a.value},null,8,["inert"]))),128)),o.value?(i(),w(j,{key:0},[f.value?(i(),F(il,{key:0,"is-read-only":a.value},null,8,["is-read-only"])):$("",!0),x(m(r),{"is-read-only":a.value},null,8,["is-read-only"]),x(vl,{"is-read-only":a.value},null,8,["is-read-only"])],64)):$("",!0),(i(!0),w(j,null,Z(b.value,E=>(i(),F(Fe(m(je)[E.key]),{key:E.key,inert:a.value},null,8,["inert"]))),128))]),O[1]||(O[1]=C("div",{class:"BuilderSettingsMain__spacer"},null,-1)),C("div",_l,[C("p",{class:"BuilderSettingsMain__componentId__text",onClick:u},Y(m(c).firstSelectedId.value),1),x(H,{class:"BuilderSettingsMain__componentId__btn",size:"smallIcon",variant:"tertiary","data-writer-tooltip":m(h)?"Copied!":"Copy block id","data-automation-action":"copy-component-id",onClick:u},{default:M(()=>[x(z,{name:m(h)?"check":"clipboard"},null,8,["name"])]),_:1},8,["data-writer-tooltip"])])]))}}),hl=U(bl,[["__scopeId","data-v-a87405f8"]]),kl=["data-writer-id"],Sl=W({__name:"BuilderSettingsActions",setup(t){const r=R(P.core),l=R(P.builderManager),c=Me(r),{dropdownOptions:s,handleDropdownSelect:a}=Xe(r,l,c);function o(){a(Ve.Delete)}const y=I(()=>{const p=s.value.find(B=>B.value===Ve.Delete);return p?p.disabled:!0}),v=l.firstSelectedId;return(p,B)=>(i(),w("div",{class:"BuilderSettingsActions","data-writer-id":m(v)},[m(l).selectionStatus.value===m(pe).Multiple?(i(),F(H,{key:0,class:"BuilderSettingsActions__btn",variant:"neutral",size:"smallIcon","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:B[0]||(B[0]=h=>m(l).setSelection(null))},{default:M(()=>[x(z,{name:"x"})]),_:1})):$("",!0),x(H,{class:"BuilderSettingsActions__btn BuilderSettingsActions__btn--delete",variant:"neutral",size:"smallIcon","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:y.value,onClick:o},{default:M(()=>[x(z,{name:"trash-2"})]),_:1},8,["disabled"])],8,kl))}}),Il=U(Sl,[["__scopeId","data-v-08efde31"]]),Bl=["id"],Cl=["value"],wl=W({__name:"BuilderSettingsAddComponentModal",props:ue({selectedId:{type:String,required:!0}},{isOpen:{type:Boolean,default:!1},isOpenModifiers:{}}),emits:["update:isOpen"],setup(t){const r=R(P.core),l=R(P.builderManager),c=bt(),s=Me(r),{createAndInsertComponent:a}=Ce(r,l,s),o=t,y=I(()=>r.getContainableTypes(o.selectedId).reduce((h,u)=>(h[u]=r.getComponentDefinition(u),h),{})),v=we(t,"isOpen");function p(){v.value=!1}function B(h){const u=h.target.value;if(!u)return;const f=Object.entries(y.value).find(([b,k])=>k.name==u);if(!f)return;const g=f[0];a(g,o.selectedId),p()}return(h,u)=>v.value?(i(),F(Oe,{key:0,title:"Add child component","display-close-button":"",onClose:p},{default:M(()=>[x(ee,{type:"text",list:m(c),placeholder:"Component...",onChange:B},null,8,["list"]),C("datalist",{id:m(c)},[(i(!0),w(j,null,Z(y.value,(f,g)=>(i(),w("option",{key:g,value:f.name},Y(f.name),9,Cl))),128))],8,Bl)]),_:1})):$("",!0)}});function El(t,r=500){const l=N(0);let c=null;function s(){t.value&&(l.value=t.value.clientHeight)}return ie(()=>{s(),c=setInterval(s,r)}),Ge(()=>{c&&clearInterval(c)}),l}const xl={key:0,class:"BuilderSettings__collapser"},$l={key:1,class:"BuilderSettings__titleBar"},Tl={class:"BuilderSettings__titleBar__title"},Fl={class:"BuilderSettings__titleBar__actions"},Vl=["data-writer-tooltip"],Ol=W({__name:"BuilderSettings",setup(t){ht(d=>({"02b76174":m(l).getMode()=="blueprints"?"82px":"20px","2a3f1d8c":a.value}));const r=R(P.core),l=R(P.builderManager),c=K("root"),s=El(c,1e3),a=I(()=>{if(!s.value)return"unset";const d=s.value-42;return d>0?`${d}px`:"unset"}),{component:o,definition:y}=kt(r,l.firstSelectedId),v=St(o,y),p=I(()=>{var d;return o.value&&(It(r,o.value)||((d=y.value)==null?void 0:d.name))||"Unknown"}),{copy:B,copied:h}=He();function u(){B(v.value)}const f=Me(r),g=N(!1),{dropdownOptions:b,handleDropdownSelect:k}=Xe(r,l,f,{[Ve.Add]:()=>g.value=!0}),O=I(()=>l.selectionStatus.value===pe.Multiple?!0:l.isSettingsBarCollapsed.value),E=I(()=>l.selection.value.length);function _(){l.isSettingsBarCollapsed.value=!l.isSettingsBarCollapsed.value}return me(o,d=>{d||l.setSelection(null)}),(d,e)=>m(l).selectionStatus.value!==m(pe).None?(i(),w("div",{key:0,ref_key:"root",ref:c,class:ve(["BuilderSettings",{"BuilderSettings--collapsed":O.value}])},[m(l).isSingleSelectionActive.value?(i(),w("div",xl,[O.value?(i(),F(H,{key:0,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:_},{default:M(()=>[x(z,{name:"settings"})]),_:1})):(i(),F(H,{key:1,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:_},{default:M(()=>[x(z,{name:"arrow-right-to-line"})]),_:1}))])):$("",!0),m(l).isSingleSelectionActive?(i(),w("div",$l,[C("p",Tl,Y(p.value),1),C("div",Fl,[m(v)?(i(),F(H,{key:0,size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"bottom","data-writer-tooltip":m(h)?"Copied!":"Copy result variable",onClick:oe(u,["prevent"])},{default:M(()=>[x(z,{name:"at-sign"})]),_:1},8,["data-writer-tooltip"])):$("",!0),x(Bt,{class:"BuilderSettings__titleBar__actions__more","data-automation-action":"settings-actions-dropdown",options:m(b),"trigger-custom-size":"32px","trigger-icon":"ellipsis-vertical",onSelect:m(k)},null,8,["options","onSelect"])])])):$("",!0),m(l).selectionStatus.value===m(pe).Multiple?(i(),w("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${E.value} components selected`},[C("p",null,Y(E.value),1)],8,Vl)):$("",!0),O.value&&m(l).selectionStatus.value===m(pe).Multiple?(i(),F(Il,{key:3,class:"BuilderSettings__actions"})):$("",!0),x(hl,{class:"BuilderSettings__main",inert:O.value},null,8,["inert"]),m(l).isSingleSelectionActive.value?(i(),F(wl,{key:4,"is-open":g.value,"onUpdate:isOpen":e[0]||(e[0]=n=>g.value=n),"selected-id":m(l).firstSelectedId.value},null,8,["is-open","selected-id"])):$("",!0)],2)):$("",!0)}}),Ml=U(Ol,[["__scopeId","data-v-e45ad79c"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"}));export{Ue as B,Ze as W,Kl as a,xt as u};
//# sourceMappingURL=BuilderSettings-CLZnGiL-.js.map
