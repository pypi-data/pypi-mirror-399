import{j as t,D as h,t as D,r as d}from"./vendor-tanstack-zpsXWFxg.js";import{E as j,k as u,l as S,m as C,n as v,D as b,B as w,g as N,h as _,bd as r,be as E,bf as k,T as P}from"./index-4D6ue93A.js";import{D as A}from"./index-CzdsNzuE.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-CrLZvj36.js";import"./vendor-recharts-C8e6QlQ9.js";import"./vendor-codemirror-KWel9Npa.js";import"./vendor-forms-DEIP3aGx.js";import"./vendor-date-ByQxM3Xh.js";import"./use-quick-run-BGqKUy84.js";import"./use-delete-confirmation-dialog-D3RwBW_o.js";import"./delete-confirmation-dialog-CyYzB0GU.js";import"./index-Dy1OPYb3.js";import"./cronstrue-Ceqsf2vJ.js";import"./index-DCTkiMGg.js";const F=()=>t.jsxs(j,{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(u,{id:"Workflow"}),t.jsx(u,{id:"MoreHorizontal"}),t.jsx(u,{id:"Rocket"})]}),t.jsx(S,{children:"Create a deployment to get started"}),t.jsx(C,{children:"Deployments elevate workflows from functions you call manually to API objects that can be remotely triggered."}),t.jsx(v,{children:t.jsx(b,{id:"deployments-guide"})})]}),O=()=>t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(w,{children:t.jsx(N,{children:t.jsx(_,{className:"text-xl font-semibold",children:"Deployments"})})})}),B=e=>({page:e?.page??1,limit:e?.limit??10,sort:e?.sort??"NAME_ASC",deployments:{operator:"and_",flow_or_deployment_name:{like_:e?.flowOrDeploymentName??""},tags:{operator:"and_",all_:e?.tags??[]}}}),I=()=>{const e=r.useSearch(),o=r.useNavigate(),s=(e.page??1)-1,a=e.limit??10,n=d.useMemo(()=>({pageIndex:s,pageSize:a}),[s,a]),c=d.useCallback(i=>{o({to:".",search:l=>({...l,page:i.pageIndex+1,limit:i.pageSize}),replace:!0})},[o]);return[n,c]},M=()=>{const e=r.useSearch(),o=r.useNavigate(),s=a=>{o({to:".",search:n=>({...n,sort:a}),replace:!0})};return[e.sort,s]},Q=()=>{const e=r.useSearch(),o=r.useNavigate(),s=d.useMemo(()=>[{id:"flowOrDeploymentName",value:e.flowOrDeploymentName},{id:"tags",value:e.tags}],[e.flowOrDeploymentName,e.tags]),a=d.useCallback(n=>{o({to:".",search:c=>{const i=n.find(m=>m.id==="flowOrDeploymentName")?.value,l=n.find(m=>m.id==="tags")?.value;return{...c,offset:0,flowOrDeploymentName:i,tags:l}},replace:!0})},[o]);return[s,a]};function $(){const e=r.useSearch(),[o,s]=I(),[a,n]=M(),[c,i]=Q(),[{data:l},{data:m}]=h({queries:[E(),k(B(e))]}),g=m?.results??[],{data:y}=D(P({flows:{operator:"and_",id:{any_:[...new Set(g.map(p=>p.flow_id))]}},offset:0,sort:"NAME_ASC"})),f=g.map(p=>({...p,flow:y?.find(x=>x.id===p.flow_id)}));return t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(O,{}),l===0?t.jsx(F,{}):t.jsx(A,{deployments:f,currentDeploymentsCount:l,pageCount:m?.pages??0,pagination:o,sort:a,columnFilters:c,onPaginationChange:s,onSortChange:n,onColumnFiltersChange:i})]})}export{$ as component};
//# sourceMappingURL=index-BILO_y6j.js.map
