import{j as e,L as m,r as l,s as p}from"./vendor-tanstack-zpsXWFxg.js";import{E as g,k as C,l as f,m as N,n as k,o as x,I as i,D as y,B as W,g as S,h as v,p as P,q as E,r as b,s as D,t as u,u as o,W as I,v as T,w as L,x as _,y as z,A,C as M,F as O,G as R,H as B,K as w,M as $,N as F,O as K}from"./index-4D6ue93A.js";import{S as H}from"./index-DCTkiMGg.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-CrLZvj36.js";import"./vendor-recharts-C8e6QlQ9.js";import"./vendor-codemirror-KWel9Npa.js";import"./vendor-forms-DEIP3aGx.js";import"./vendor-date-ByQxM3Xh.js";const Q=()=>e.jsxs(g,{children:[e.jsx(C,{id:"Cpu"}),e.jsx(f,{children:"Add a work pool to get started"}),e.jsx(N,{children:"Work pools allow you to prioritize and manage deployments and control the infrastructure they run on."}),e.jsxs(k,{children:[e.jsx(m,{to:"/work-pools/create",children:e.jsxs(x,{children:["Add Work Pool ",e.jsx(i,{id:"Plus",className:"size-4 ml-2"})]})}),e.jsx(y,{id:"work-pools-guide"})]})]}),U=()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{children:e.jsx(S,{children:e.jsx(v,{className:"text-xl font-semibold",children:"Work pools"})})}),e.jsx(m,{to:"/work-pools/create",children:e.jsx(x,{size:"icon",className:"size-7",variant:"outline",children:e.jsx(i,{id:"Plus",className:"size-4"})})})]}),q=({workPool:s,onDelete:t})=>{const r=n=>{navigator.clipboard.writeText(n),o.success("ID copied")};return e.jsxs(P,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"size-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(i,{id:"MoreVertical",className:"size-4"})]})}),e.jsxs(b,{align:"end",children:[e.jsx(D,{children:"Actions"}),e.jsx(u,{onClick:()=>r(s.id),children:"Copy ID"}),e.jsx(m,{to:"/work-pools/work-pool/$workPoolName/edit",params:{workPoolName:s.name},children:e.jsx(u,{children:"Edit"})}),e.jsx(u,{onClick:t,children:"Delete"})]})]})},V=({workPoolName:s})=>e.jsx(I,{workPoolName:s}),Y=({workPool:s})=>{const[t,r]=l.useState(s.status==="PAUSED"),{pauseWorkPool:n,isPending:c}=T(),{resumeWorkPool:d,isPending:a}=L(),j=l.useMemo(()=>c||a,[c,a]),h=()=>{t?d(s.name,{onSuccess:()=>{r(!1),o.success(`${s.name} resumed`)},onError:()=>{o.error(`Failed to resume ${s.name}`)}}):n(s.name,{onSuccess:()=>{r(!0),o.success(`${s.name} paused`)},onError:()=>{o.error(`Failed to pause ${s.name}`)}})};return e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:t?"Paused":"Active"}),e.jsx(_,{checked:!t,onCheckedChange:h,disabled:j,"aria-label":t?"Resume work pool":"Pause work pool"})]})},G={process:"Process",ecs:"ECS","azure-container-instance":"Azure Container Instance",docker:"Docker","cloud-run":"Cloud Run","cloud-run-v2":"Cloud Run v2","vertex-ai":"Vertex AI",kubernetes:"Kubernetes"},J={process:"Cpu",ecs:"Cpu","azure-container-instance":"Cpu",docker:"Cpu","cloud-run":"Cpu","cloud-run-v2":"Cpu","vertex-ai":"Cpu",kubernetes:"Cpu"},X=s=>G[s]??s,Z=s=>J[s]??"Cpu",ee=({type:s})=>e.jsxs(z,{children:[e.jsx(i,{id:Z(s)}),X(s)]}),se=({workPool:s})=>{const{deleteWorkPool:t}=A(),r=()=>{t(s.name,{onSuccess:()=>{o.success(`${s.name} deleted`)},onError:n=>{o.error(`Failed to delete work pool: ${n instanceof Error?n.message:"Unknown error"}`)}})};return e.jsxs(M,{className:"gap-2",children:[e.jsxs(O,{className:"flex flex-row items-center justify-between",children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(V,{workPoolName:s.name}),s.status&&e.jsx(H,{status:s.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{workPool:s}),e.jsx(q,{workPool:s,onDelete:r})]})]}),e.jsxs(B,{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(ee,{type:s.type})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Concurrency:"," ",e.jsx("span",{className:"text-foreground",children:s.concurrency_limit?s.concurrency_limit:"Unlimited"})]})]})]})};function ue(){const[s,t]=l.useState(""),{data:r=0}=p(w()),{data:n=[]}=p($({limit:200,offset:0})),c=l.useMemo(()=>n.filter(a=>[a.name,a.description,a.type,JSON.stringify(a.base_job_template),a.id,a.default_queue_id,a.status].join(" ").toLowerCase().includes(s.toLowerCase())),[n,s]),d=a=>{t(a.target.value)};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(U,{}),r<1?e.jsx(Q,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r," ",F(r,"work pool")]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(K,{placeholder:"Search work pools...",value:s,onChange:d})})]}),e.jsx("div",{className:"flex flex-col gap-4",children:c.map(a=>e.jsx(se,{workPool:a},a.id))})]})]})}export{ue as component};
//# sourceMappingURL=index-CdJzadRM.js.map
