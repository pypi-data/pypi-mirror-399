import{F,j as e,s as f}from"./vendor-tanstack-zpsXWFxg.js";import{dg as B,ac as C,ai as S,C as P,H as J,L as m,an as l,aj as d,ak as p,al as u,am as b,ao as x,o as j,u as h,B as L,g as E,h as i,br as y,bB as k,bD as W,dh as _,b_ as R}from"./index-4D6ue93A.js";import{b as I,r as U,n as $,c as D,h as H,d as O}from"./vendor-forms-DEIP3aGx.js";import{T as Q}from"./textarea-D_Be8CTk.js";import{B as V}from"./base-job-template-form-section-DtXbvehs.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-CrLZvj36.js";import"./vendor-recharts-C8e6QlQ9.js";import"./vendor-codemirror-KWel9Npa.js";import"./vendor-date-ByQxM3Xh.js";import"./primitives-DRAYI_UV.js";import"./schema-form-hz3mbPHA.js";import"./use-debounce-callback-B3PwORIA.js";import"./toggle-group-CtVLGj1O.js";const G=I({description:D().nullable().optional(),concurrencyLimit:$().min(0).nullable().optional(),baseJobTemplate:U(H()).optional()}),M=({workPool:s})=>{const r=F(),{updateWorkPool:v,isPending:t}=B(),a=O({resolver:C(G),defaultValues:{description:s.description??"",concurrencyLimit:s.concurrency_limit??null,baseJobTemplate:s.base_job_template}}),w=a.watch("baseJobTemplate"),N=s.type!=="prefect-agent",T=()=>{r.history.back()},g=o=>{v({name:s.name,workPool:{description:o.description||null,concurrency_limit:o.concurrencyLimit,base_job_template:o.baseJobTemplate}},{onSuccess:()=>{h.success("Work pool updated"),r.navigate({to:"/work-pools/work-pool/$workPoolName",params:{workPoolName:s.name}})},onError:n=>{h.error(`Failed to update work pool: ${n instanceof Error?n.message:"Unknown error"}`)}})};return e.jsx(S,{...a,children:e.jsxs("form",{onSubmit:o=>{a.handleSubmit(g)(o)},className:"space-y-6",children:[e.jsx(P,{children:e.jsxs(J,{className:"pt-6 space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"work-pool-name",children:"Name"}),e.jsx(l,{id:"work-pool-name",value:s.name,disabled:!0})]}),e.jsx(d,{control:a.control,name:"description",render:({field:o})=>e.jsxs(p,{children:[e.jsx(u,{children:"Description (Optional)"}),e.jsx(b,{children:e.jsx(Q,{...o,value:o.value??"",rows:7,placeholder:"Enter a description for your work pool"})}),e.jsx(x,{})]})}),e.jsx(d,{control:a.control,name:"concurrencyLimit",render:({field:o})=>e.jsxs(p,{children:[e.jsx(u,{children:"Flow Run Concurrency (Optional)"}),e.jsx(b,{children:e.jsx(l,{...o,type:"number",min:0,placeholder:"Unlimited",value:o.value??"",onChange:n=>{const c=n.target.value;o.onChange(c===""?null:Number(c))}})}),e.jsx(x,{})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"work-pool-type",children:"Type"}),e.jsx(l,{id:"work-pool-type",value:s.type,disabled:!0})]})]})}),N&&e.jsx(V,{baseJobTemplate:w,onBaseJobTemplateChange:o=>{a.setValue("baseJobTemplate",o)}}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(j,{type:"button",variant:"outline",onClick:T,disabled:t,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:t,children:t?"Saving...":"Save"})]})]})})},q=({workPool:s})=>e.jsx("header",{className:"mb-6",children:e.jsx(L,{children:e.jsxs(E,{children:[e.jsx(i,{children:e.jsx(y,{to:"/work-pools",className:"text-xl font-semibold",children:"Work Pools"})}),e.jsx(k,{}),e.jsx(i,{children:e.jsx(y,{to:"/work-pools/work-pool/$workPoolName",params:{workPoolName:s.name},className:"text-xl font-semibold",children:s.name})}),e.jsx(k,{}),e.jsx(i,{className:"text-xl font-semibold",children:e.jsx(W,{children:"Edit"})})]})})});function ie(){const{workPoolName:s}=_.useParams(),{data:r}=f(R(s));return e.jsxs("div",{className:"container max-w-4xl py-6",children:[e.jsx(q,{workPool:r}),e.jsx(M,{workPool:r})]})}export{ie as component};
//# sourceMappingURL=work-pool_._workPoolName.edit-CzPn6-hU.js.map
