import{j as e,G as d,t as l}from"./vendor-tanstack-zpsXWFxg.js";import{D as p,B as x,g as b,h as i,br as f,bB as g,bD as j,bE as h,bF as v,bG as D,u as m}from"./index-4D6ue93A.js";import"./automation-schema-6w0yykRv.js";import{A as B}from"./automation-wizard-CSqxFDzT.js";import{t as N}from"./event-to-trigger-BEzU9b5I.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-CrLZvj36.js";import"./vendor-recharts-C8e6QlQ9.js";import"./vendor-codemirror-KWel9Npa.js";import"./vendor-forms-DEIP3aGx.js";import"./vendor-date-ByQxM3Xh.js";import"./use-stepper-B7LyPv01.js";import"./index-Dij7UGkG.js";import"./textarea-D_Be8CTk.js";const A=()=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{}),e.jsx(p,{label:"Documentation",id:"automations-guide"})]}),y=()=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{children:e.jsxs(b,{children:[e.jsx(i,{children:e.jsx(f,{to:"/automations",className:"text-xl font-semibold",children:"Automations"})}),e.jsx(g,{}),e.jsx(i,{className:"text-xl font-semibold",children:e.jsx(j,{children:"Create"})})]})})});function E(a){const[t,s,o]=a.split("-").map(Number);return new Date(t,s-1,o)}function S(){const{eventId:a,eventDate:t}=v.useSearch(),s=!!(a&&t),{data:o}=l({...D(a??"",t?E(t):new Date),enabled:s});if(!s||!o)return;const{trigger:n,triggerTemplate:r}=N(o);return{trigger:n,triggerTemplate:r}}function W(){const{createAutomation:a,isPending:t}=h(),s=d(),o=S(),n=r=>{const c={name:r.name,description:r.description??"",enabled:!0,trigger:r.trigger,actions:r.actions};a(c,{onSuccess:()=>{m.success("Automation created successfully"),s({to:"/automations"})},onError:u=>{m.error(`Failed to create automation: ${u.message}`)}})};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(A,{}),e.jsx(B,{defaultValues:o,onSubmit:n,isSubmitting:t})]})}export{W as component};
//# sourceMappingURL=create-6qvPQ9iz.js.map
