import{j as e,L as x,r as l,s as v}from"./vendor-tanstack-zpsXWFxg.js";import{B as j,g as p,h as c,bB as h,a2 as u,D as w,o as g,I as k,u as N,O as D,d7 as S,d8 as L,d9 as b,da as C,db as T,dc as _,dd as A,de as B}from"./index-4D6ue93A.js";import{a as R}from"./use-get-artifacts-flow-task-runs-BrVGUUb1.js";import{M as f,r as y}from"./vendor-markdown-dkNYO1DR.js";import{u as I,E as M}from"./vendor-codemirror-KWel9Npa.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-CrLZvj36.js";import"./vendor-recharts-C8e6QlQ9.js";import"./vendor-forms-DEIP3aGx.js";import"./vendor-date-ByQxM3Xh.js";const P=({artifact:s})=>{let a=e.jsx(e.Fragment,{});return s.key?a=e.jsx("div",{className:"flex items-center ",children:e.jsx(j,{children:e.jsxs(p,{children:[e.jsx(c,{className:"text-xl text-blue-700 hover:underline",children:e.jsx(x,{to:"/artifacts/key/$key",params:{key:s.key},children:s.key})}),e.jsx(h,{children:"/"}),e.jsx(c,{className:"text-xl font-bold text-foreground",children:s.id})]})})}):a=e.jsx("div",{className:"flex items-center ",children:e.jsx(j,{children:e.jsxs(p,{children:[s.flow_run&&e.jsxs(e.Fragment,{children:[e.jsx(c,{children:e.jsx(u,{variant:"bodyLarge",className:"text-blue-700 hover:underline",children:e.jsx(x,{to:"/runs/flow-run/$id",params:{id:s.flow_run_id??""},children:s.flow_run.name})})}),e.jsx(h,{children:"/"})]}),s.task_run&&e.jsxs(e.Fragment,{children:[e.jsx(c,{children:e.jsx(u,{variant:"bodyLarge",className:"text-blue-700 hover:underline",children:e.jsx(x,{to:"/runs/task-run/$id",params:{id:s.task_run_id??""},children:s.task_run.name})})}),e.jsx(h,{children:"/"})]}),e.jsx(c,{className:"text-xl font-bold text-foreground",children:s.id})]})})}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[a,e.jsx(w,{id:"artifacts-guide",label:"Documentation"})]}),s.description&&e.jsx("div",{className:"",children:e.jsx(u,{variant:"h2",className:"my-4 font-bold prose lg:prose-xl",children:e.jsx(f,{remarkPlugins:[y],children:s.description})})}),e.jsx("hr",{})]})},E=({artifact:s})=>{const[a,t]=l.useState(!1),d=()=>{t(o=>!o)},n=l.useRef(null),m={highlightActiveLine:!1,foldGutter:!1,highlightActiveLineGutter:!1},{setContainer:r}=I({container:n.current,extensions:[M.lineWrapping],value:String(s.data),indentWithTab:!1,editable:!0,basicSetup:m});l.useEffect(()=>{n.current&&r(n.current)},[r]);const i=o=>{N.success("Copied to clipboard"),navigator.clipboard.writeText(o)};return e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsxs(g,{"data-testid":"show-raw-data-button",variant:"outline",onClick:d,className:"my-4",children:[a?"Hide":"Show"," Raw Data"]}),e.jsx("div",{className:"rounded-md border shadow-xs focus-within:outline-hidden focus-within:ring-1 focus-within:ring-ring relative",style:{display:a?"block":"none"},ref:o=>{n.current=o},"data-testid":"raw-data-display",children:e.jsx(g,{onClick:()=>i(s.data),variant:"ghost",size:"icon",className:"absolute top-0 right-0 z-10","aria-label":"copy",children:e.jsx(k,{id:"Copy",className:"size-2"})})})]})},F=({url:s})=>e.jsxs("div",{"data-testid":s,className:"prose mt-2",children:[e.jsx("img",{"data-testid":`image-${s}`,src:s,alt:"artifact-image",className:"w-full"}),e.jsxs(u,{variant:"bodyLarge",children:["Image URL:"," ",e.jsx("a",{className:"text-blue-700 hover:underline",target:"_blank",href:s,rel:"noreferrer",children:s})]})]}),G=({markdown:s})=>e.jsx("div",{"data-testid":"markdown-display",className:"mt-4 prose",children:e.jsx(f,{remarkPlugins:[y],children:s})}),H=({progress:s})=>e.jsxs(u,{"data-testid":"progress-display",variant:"bodyLarge",children:["Progress: ",s,"%"]}),O=({tableData:s})=>{const a=JSON.parse(s),t=Object.keys(a[0]),[d,n]=l.useState(""),m=l.useMemo(()=>a.filter(r=>Object.values(r).some(i=>String(i).toLowerCase().includes(d.toLowerCase()))),[d,a]);return e.jsxs("div",{"data-testid":"table-display",className:"mt-4",children:[e.jsx("div",{className:"flex flex-row justify-end items-center mb-2",children:e.jsx("div",{children:e.jsx(D,{placeholder:"Search",value:d,onChange:r=>n(r.target.value)})})}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(S,{children:[e.jsx(L,{className:"bg-muted",children:e.jsx(b,{children:t.map(r=>e.jsx(C,{className:"py-2 text-foreground",children:r},r))})}),e.jsx(T,{children:m.map(r=>e.jsx(b,{children:t.map(i=>e.jsx(_,{children:r[i]},i))},r.id))})]})})]})},$=({artifact:s})=>{const a=l.useMemo(()=>{switch(s.type){case"markdown":case"link":return e.jsx(G,{markdown:s.data});case"image":return e.jsx(F,{url:s.data});case"progress":return e.jsx(H,{progress:s.data});case"table":return e.jsx(O,{tableData:s.data});default:return e.jsx("pre",{children:JSON.stringify(s.data,null,2)})}},[s]);return e.jsxs("div",{children:[e.jsx(P,{artifact:s}),a,e.jsx(E,{artifact:s})]})};function Z(){const{id:s}=A.useParams(),{data:a}=v(B(s)),t=R(s);return e.jsx($,{artifact:t??a})}export{Z as component};
//# sourceMappingURL=artifact._id-CIEIyleQ.js.map
