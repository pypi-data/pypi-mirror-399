import{a as E}from"./chunk-2LJAANTL.js";import{b as f}from"./chunk-74KQCU7Q.js";import{a as g,c as y,d as b,f as v}from"./chunk-I4LTIZI7.js";import{a as h,b as x}from"./chunk-N73QEIV2.js";import"./chunk-JC2BH436.js";var F='[is^=django-date]{--dummy-style: none}[is^=django-date]+[role=textbox]{display:flex !important;align-items:center;flex-direction:row-reverse;flex-wrap:nowrap;justify-content:flex-end;background-color:var(--background-color);border:var(--border-width) var(--border-style) var(--border-color);border-radius:var(--border-radius)}[is^=django-date]+[role=textbox].focus{--dummy-style: none}[is^=django-date]+[role=textbox]>.calendar-picker-indicator{display:flex;align-items:center;cursor:pointer}[is^=django-date]+[role=textbox]>.calendar-picker-indicator svg{scale:.75}[is^=django-date]+[role=textbox]>.datetime-edit{display:flex;flex-wrap:nowrap;margin-inline:.25rem;overflow-x:hidden}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-delimiter{color:color-mix(in srgb, currentcolor, var(--django-formset-background-color) 30%);margin:0 -1px}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-delimiter.wide{margin:0;padding:0 .125rem}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-delimiter.extrawide{margin:0 .25rem;padding:0 .125rem}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-year-field,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-month-field,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-day-field,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-hour-field,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-minute-field{padding:.125rem;cursor:text;caret-color:rgba(0,0,0,0)}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-year-field:focus-visible,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-month-field:focus-visible,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-day-field:focus-visible,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-hour-field:focus-visible,[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-minute-field:focus-visible{border-radius:3px;outline:none;background-color:light-dark(hsl(213, 96%, 64%), hsl(213, 96%, 36%))}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-year-field:empty::after{content:"yyyy";color:color-mix(in srgb, currentcolor, var(--django-formset-background-color) 30%)}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-month-field:empty::after{content:"mm";color:color-mix(in srgb, currentcolor, var(--django-formset-background-color) 30%)}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-day-field:empty::after{content:"dd";color:color-mix(in srgb, currentcolor, var(--django-formset-background-color) 30%)}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-hour-field:empty::after{content:"HH";color:color-mix(in srgb, currentcolor, var(--django-formset-background-color) 30%)}[is^=django-date]+[role=textbox]>.datetime-edit>.datetime-edit-minute-field:empty::after{content:"MM";color:color-mix(in srgb, currentcolor, var(--django-formset-background-color) 30%)}';var S=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
	<path d="M17 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H7V1H9V3H15V1H17V3ZM4 9V19H20V9H4ZM6 11H8V13H6V11ZM11 11H13V13H11V11ZM16 11H18V13H16V11Z"></path>
</svg>`;var m=class m extends f{constructor(t,e){super(t);this.calendar=null;this.inputFields=[];this.inputFieldsOrder=[];this.baseSelector='[is^="django-date"]';this.hour12=!1;this.currentDate=null;this.extendedDate=null;this.calendarOpener=null;this.hasFocus=null;this.isOpen=!1;this.mediaStylesIndex=-1;this.attributesChanged=t=>{t.find(e=>e.attributeName==="disabled")&&(this.inputFields.forEach(e=>e.contentEditable=this.inputElement.disabled?"false":"true"),this.mediaStylesIndex=h.replaceMediaQueryStyles(this.mediaStylesIndex,this.styleSheet,`${this.baseSelector} + [role="textbox"]`,{"--background-color":"background-color"},this.inputElement))};this.handleClick=t=>{if(!this.calendar)return;let e=t.target instanceof Element?t.target:null;for(;e;){if(e===this.calendar.element)return;if(e===this.calendarOpener)return this.isOpen?this.closeCalendar():this.openCalendar();e=e.parentElement}this.closeCalendar()};this.updatePosition=()=>{if(!this.calendar)return;let t=this.textBox.style.zIndex?parseInt(this.textBox.style.zIndex):0;v(this.textBox,this.calendar.element,{placement:"bottom-start",middleware:[b(),y()]}).then(({x:e,y:i})=>Object.assign(this.calendar.element.style,{left:`${e}px`,top:`${i}px`,zIndex:`${t+2}`}))};this.handleFocus=t=>{this.inputFields.some(e=>{if(t.target instanceof HTMLElement&&e===t.target)return e.ariaBusy="true",this.hasFocus=e,!0})?(this.textBox.classList.add("focus"),this.inputElement.dispatchEvent(new Event("focus")),t.preventDefault()):this.hasFocus=null};this.handleBlur=()=>{requestIdleCallback(()=>{var t;this.hasFocus||(this.textBox.classList.remove("focus"),this.parseInputFields(),this.updateInputFields(),(t=this.calendar)==null||t.updateDate(this.currentDate,this.extendedDate),this.inputElement.dispatchEvent(new Event("blur")))}),this.hasFocus=null,this.inputElement.dispatchEvent(new Event("input"))};this.handleKeypress=async t=>{var i;let e=!1;this.hasFocus?e=this.editTextBox(t.key):this.isOpen&&(e=await((i=this.calendar)==null?void 0:i.navigate(t.key))??!1),e&&t.preventDefault()};if(this.inputElement=t,this.dateOnly=m.simpleComponents.includes(t.getAttribute("is")??""),this.withRange=m.rangeComponents.includes(t.getAttribute("is")??""),this.textBox=this.createTextBox(),this.setInitialDate(),e){this.calendar=new E(e,this.getCalendarSettings());let i=this.textBox.querySelector(".calendar-picker-indicator");if(!(i instanceof HTMLElement))throw new Error("Missing selector .calendar-picker-indicator");this.calendarOpener=i,this.calendarOpener.innerHTML=S}this.installEventHandlers(),this.styleSheet=h.stylesAreInstalled(this.baseSelector)??this.transferStyles(),this.transferClasses(),this.updateInputFields()}setInitialDate(){let t=i=>i.length===10?i+"T00:00":i,e=this.inputElement.value;if(e)if(this.withRange){let[i,n]=e.split(";");this.currentDate=i?new Date(t(i)):null,this.extendedDate=n?new Date(t(n)):null}else this.currentDate=new Date(t(e)),this.extendedDate=null;else this.currentDate=this.extendedDate=null}updateDate(t,e){this.withRange&&e instanceof Date?(this.currentDate=t,this.extendedDate=e):this.currentDate=t,this.updateInputFields(),e&&(this.inputElement.dispatchEvent(new Event("input")),this.inputElement.dispatchEvent(new Event("blur")))}getCalendarSettings(){return{dateOnly:this.dateOnly,withRange:this.withRange,pure:!1,inputElement:this.inputElement,hour12:this.hour12,updateDate:(e,i)=>this.updateDate(e,i),close:()=>this.closeCalendar()}}createTextBox(){let t=['<div role="textbox" aria-expanded="false" aria-haspopup="dialog">','<div class="datetime-edit">'],e=['<span role="spinbutton" class="datetime-edit-year-field" contenteditable="true" aria-placeholder="yyyy" aria-valuemin="1700" aria-valuemax="2300"></span>','<span role="separator" class="datetime-delimiter" aria-hidden="true">-</span>','<span role="spinbutton" class="datetime-edit-month-field" contenteditable="true" aria-placeholder="mm" aria-valuemin="1" aria-valuemax="12"></span>','<span role="separator" class="datetime-delimiter" aria-hidden="true">-</span>','<span role="spinbutton" class="datetime-edit-day-field" contenteditable="true" aria-placeholder="dd" aria-valuemin="1" aria-valuemax="31"></span>'];return this.dateOnly||(e.push('<span role="separator" class="datetime-delimiter wide" aria-hidden="true"> </span>'),e.push('<span role="spinbutton" class="datetime-edit-hour-field" contenteditable="true" aria-placeholder="hh" aria-valuemin="0" aria-valuemax="23"></span>'),e.push('<span role="separator" class="datetime-delimiter" aria-hidden="true">:</span>'),e.push('<span role="spinbutton" class="datetime-edit-minute-field" contenteditable="true" aria-placeholder="mm" aria-valuemin="0" aria-valuemax="59"></span>')),this.inputElement.getAttribute("date-format")==="iso"?(t.push(...e),this.inputFieldsOrder.push(0,1,2)):(this.dateTimeFormat=Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",calendar:"iso8601"}),this.hour12=this.dateTimeFormat.resolvedOptions().hour12??!1,this.dateTimeFormat.formatToParts().forEach(i=>{switch(i.type){case"year":t.push(e[0]),this.inputFieldsOrder.push(0);break;case"month":t.push(e[2]),this.inputFieldsOrder.push(1);break;case"day":t.push(e[4]),this.inputFieldsOrder.push(2);break;case"literal":[".","/","-"].includes(i.value)&&t.push(`<span role="separator" class="datetime-delimiter" aria-hidden="true">${i.value}</span>`),this.dateOnly||([", "," "].includes(i.value)&&t.push(e[5]),[":"].includes(i.value)&&t.push(e[7]));break;case"hour":this.dateOnly||(t.push(e[6]),this.inputFieldsOrder.push(3));break;case"minute":this.dateOnly||(t.push(e[8]),this.inputFieldsOrder.push(4));break;default:break}})),this.withRange&&(t.push('<span role="separator" class="datetime-delimiter extrawide" aria-hidden="true">\u2014</span>'),t.push(...t.slice(2,-1)),this.inputFieldsOrder.push(...this.inputFieldsOrder.map(i=>i+5))),t.push("</div>"),t.push('<span class="calendar-picker-indicator"></span>'),t.push("</div>"),this.inputElement.insertAdjacentHTML("afterend",t.join("")),this.inputElement.nextElementSibling}installEventHandlers(){this.inputFields[0]=this.textBox.querySelector(".datetime-edit-year-field"),this.inputFields[1]=this.textBox.querySelector(".datetime-edit-month-field"),this.inputFields[2]=this.textBox.querySelector(".datetime-edit-day-field"),this.dateOnly||(this.inputFields[3]=this.textBox.querySelector(".datetime-edit-hour-field"),this.inputFields[4]=this.textBox.querySelector(".datetime-edit-minute-field")),this.withRange&&(this.inputFields[5]=this.textBox.querySelector(".datetime-edit-year-field ~ .datetime-edit-year-field"),this.inputFields[6]=this.textBox.querySelector(".datetime-edit-month-field ~ .datetime-edit-month-field"),this.inputFields[7]=this.textBox.querySelector(".datetime-edit-day-field ~ .datetime-edit-day-field"),this.dateOnly||(this.inputFields[8]=this.textBox.querySelector(".datetime-edit-hour-field ~ .datetime-edit-hour-field"),this.inputFields[9]=this.textBox.querySelector(".datetime-edit-minute-field ~ .datetime-edit-minute-field"))),this.inputFields.forEach(e=>{e.addEventListener("focus",this.handleFocus),e.addEventListener("blur",this.handleBlur)}),document.addEventListener("click",this.handleClick),document.addEventListener("keydown",this.handleKeypress),new MutationObserver(this.attributesChanged).observe(this.inputElement,{attributes:!0})}openCalendar(){this.calendarOpener&&(this.calendar.element.parentElement.style.position="relative",this.cleanup=g(this.textBox,this.calendar.element,this.updatePosition),this.textBox.setAttribute("aria-expanded","true"),this.isOpen=!0,this.calendar.updateDate(this.currentDate,this.extendedDate))}closeCalendar(){var t;this.isOpen&&(this.textBox.setAttribute("aria-expanded","false"),(t=this.cleanup)==null||t.call(this),this.inputElement.dispatchEvent(new Event("focusout")),this.isOpen=!1)}updateInputFields(){let t=(e,i,n,s,d,c)=>{this.inputFields[i].innerText=String(e.getFullYear()),this.inputFields[n].innerText=String(e.getMonth()+1).padStart(2,"0"),this.inputFields[s].innerText=String(e.getDate()).padStart(2,"0"),this.dateOnly||(this.inputFields[d].innerText=String(e.getHours()).padStart(2,"0"),this.inputFields[c].innerText=String(e.getMinutes()).padStart(2,"0"))};if(this.currentDate){t(this.currentDate,0,1,2,3,4);let e=x(this.currentDate).toISOString();if(this.withRange){if(this.inputElement.value=this.dateOnly?`${e.slice(0,10)}T00:00`:e.slice(0,16),this.extendedDate){t(this.extendedDate,5,6,7,8,9);let i=x(this.extendedDate).toISOString();this.inputElement.value=[this.inputElement.value,this.dateOnly?`${i.slice(0,10)}T00:00`:i.slice(0,16)].join(";")}}else this.inputElement.value=e.slice(0,this.dateOnly?10:16)}else this.inputFields.forEach(e=>e.innerText=""),this.inputElement.value=""}parseInputFields(){let t=(n,s,d,c,l)=>{let p=[Math.min(Math.max(parseInt(this.inputFields[n].innerText),1700),2300).toString(),"-",Math.min(Math.max(parseInt(this.inputFields[s].innerText),1),12).toString().padStart(2,"0"),"-",Math.min(Math.max(parseInt(this.inputFields[d].innerText),1),31).toString().padStart(2,"0")];return p.push("T"),this.dateOnly?p.push("00:00"):(p.push(Math.min(Math.max(parseInt(this.inputFields[c].innerText),0),23).toString().padStart(2,"0")),p.push(":"),p.push(Math.min(Math.max(parseInt(this.inputFields[l].innerText),0),59).toString().padStart(2,"0"))),p},e=t(0,1,2,3,4),i=new Date(e.join(""));if(i&&!isNaN(i.getTime())){if(this.currentDate=i,this.withRange){let n=t(5,6,7,8,9),s=new Date(n.join(""));s&&!isNaN(s.getTime())?this.extendedDate=s:this.extendedDate=null}}else this.currentDate=this.extendedDate=null}editTextBox(t){var i,n,s,d;let e=this.hasFocus;switch(t){case"ArrowRight":return(i=this.nextInputField)==null||i.focus(),!0;case"ArrowLeft":return(n=this.previousInputField)==null||n.focus(),!0;case"ArrowUp":if(e.innerText){let l=parseInt(e.ariaValueMax??"0");l=Math.min(l,parseInt(e.innerText)+1),e.innerText=l.toString().padStart(2,"0")}else this.inputFields.indexOf(e)<5?this.currentDate=new Date:this.withRange&&(this.currentDate=this.currentDate??new Date,this.extendedDate=new Date),this.updateInputFields();return!0;case"ArrowDown":if(e.innerText){let l=parseInt(e.ariaValueMin??"0");l=Math.max(l,parseInt(e.innerText)-1),e.innerText=l.toString().padStart(2,"0")}else this.inputFields.indexOf(e)<5?this.currentDate=new Date:this.withRange&&(this.currentDate=this.currentDate??new Date,this.extendedDate=new Date),this.updateInputFields();return!0;case"Backspace":case"Delete":return e.ariaBusy==="true"?(e.innerText="",e.ariaBusy="false",!0):!1;case"-":case"/":case".":case":":case" ":return e.ariaBusy==="false"&&((s=this.nextInputField)==null||s.focus()),!0;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.ariaBusy==="true"&&(e.innerText="",e.ariaBusy="false");let c=((d=e.ariaPlaceholder)==null?void 0:d.length)??0;return e.innerText.length===c-1&&setTimeout(()=>{var l;return(l=this.nextInputField)==null?void 0:l.focus()},0),e.innerText.length===c;default:return!0}}get previousInputField(){let t=this.hasFocus,e=this.inputFieldsOrder.indexOf(this.inputFields.indexOf(t));if(e>0)return this.inputFields[this.inputFieldsOrder[e-1]]}get nextInputField(){let t=this.hasFocus,e=this.inputFieldsOrder.indexOf(this.inputFields.indexOf(t));if(e<this.inputFieldsOrder.length-1)return this.inputFields[this.inputFieldsOrder[e+1]]}transferStyles(){let t=document.createElement("style");t.innerText=F,document.head.appendChild(t),this.inputElement.style.transition="none";let e=!1;for(let i=0;t.sheet&&i<t.sheet.cssRules.length;i++){let s=t.sheet.cssRules.item(i).selectorText.trim(),d="";switch(s){case this.baseSelector:e=!0;break;case`${this.baseSelector} + [role="textbox"]`:d=h.extractStyles(this.inputElement,["height","line-height","padding"]).concat(h.extractStyles(this.inputElement,{"--border-style":"border-style","--border-width":"border-width","--border-radius":"border-radius"}));break;default:break}d&&t.sheet.insertRule(`${s}{${d}}`,++i)}if(this.inputElement.style.transition="",!e)throw new Error(`Could not load styles for ${this.baseSelector}`);return t.sheet}transferClasses(){this.inputElement.classList.forEach(t=>{this.textBox.classList.add(t)}),this.inputElement.style.transition=""}initialize(){this.calendar&&(this.calendar.element.style.visibility=""),h.replaceMediaQueryStyles(-1,this.styleSheet,`${this.baseSelector} + [role="textbox"]`,{"--border-color":"border-color","--outline":"outline"},this.inputElement),h.replaceMediaQueryStyles(-1,this.styleSheet,`${this.baseSelector} + [role="textbox"].focus`,{"border-color":"border-color","box-shadow":"box-shadow",outline:"outline"},this.inputElement,"\u205Dfocus"),this.inputElement.hidden=!0}formResetted(t){this.inputElement.value=this.inputElement.defaultValue,this.setInitialDate(),this.updateInputFields()}formSubmitted(t){}valueAsDate(){return this.currentDate}checkValidity(){return this.withRange&&this.currentDate&&this.extendedDate&&this.currentDate>this.extendedDate?(this.errorPlaceholder.reportCustomError(gettext("Start date must be before end date")),!1):!0}};m.simpleComponents=["django-datefield","django-datepicker","django-daterangefield","django-daterangepicker"],m.rangeComponents=["django-daterangefield","django-daterangepicker","django-datetimerangefield","django-datetimerangepicker"];var o=m,a=Symbol("DateTime"),H,w=class extends(H=HTMLInputElement,a,H){constructor(){if(super(),!this.closest('[role="group"]'))throw new Error(`Attempt to initialize ${this} outside <django-formset>`);this[a]=new o(this,null)}connectedCallback(){this[a].initialize()}get valueAsDate(){return this[a].valueAsDate()}},C,D=class extends(C=HTMLInputElement,a,C){constructor(){super();let r=this.closest('[role="group"]');if(!r)throw new Error(`Attempt to initialize ${this} outside <django-formset>`);let t=r.querySelector('[aria-label="calendar"]');this[a]=new o(this,t)}connectedCallback(){this[a].initialize()}get valueAsDate(){return this[a].valueAsDate()}},L,T=class extends(L=HTMLInputElement,a,L){constructor(){if(super(),!this.closest('[role="group"]'))throw new Error(`Attempt to initialize ${this} outside <django-formset>`);this[a]=new o(this,null)}connectedCallback(){this[a].initialize()}get valueAsDate(){return this[a].valueAsDate()}},B,k=class extends(B=HTMLInputElement,a,B){constructor(){super();let r=this.closest('[role="group"]');if(!r)throw new Error(`Attempt to initialize ${this} outside <django-formset>`);let t=r.querySelector('[aria-label="calendar"]');this[a]=new o(this,t)}connectedCallback(){this[a].initialize()}get valueAsDate(){return this[a].valueAsDate()}},A,M=class extends(A=HTMLInputElement,a,A){constructor(){if(super(),!this.closest('[role="group"]'))throw new Error(`Attempt to initialize ${this} outside <django-formset>`);this[a]=new o(this,null)}connectedCallback(){this[a].initialize()}checkValidity(){return super.checkValidity()?this[a].checkValidity():!1}},V,j=class extends(V=HTMLInputElement,a,V){constructor(){super();let r=this.closest('[role="group"]');if(!r)throw new Error(`Attempt to initialize ${this} outside <django-formset>`);let t=r.querySelector('[aria-label="calendar"]');this[a]=new o(this,t)}connectedCallback(){this[a].initialize()}checkValidity(){return super.checkValidity()?this[a].checkValidity():!1}},P,I=class extends(P=HTMLInputElement,a,P){constructor(){if(super(),!this.closest('[role="group"]'))throw new Error(`Attempt to initialize ${this} outside <django-formset>`);this[a]=new o(this,null)}connectedCallback(){this[a].initialize()}checkValidity(){return super.checkValidity()?this[a].checkValidity():!1}},z,O=class extends(z=HTMLInputElement,a,z){constructor(){super();let r=this.closest('[role="group"]');if(!r)throw new Error(`Attempt to initialize ${this} outside <django-formset>`);let t=r.querySelector('[aria-label="calendar"]');this[a]=new o(this,t)}connectedCallback(){this[a].initialize()}checkValidity(){return super.checkValidity()?this[a].checkValidity():!1}};export{w as DateFieldElement,D as DatePickerElement,M as DateRangeFieldElement,j as DateRangePickerElement,T as DateTimeFieldElement,k as DateTimePickerElement,I as DateTimeRangeFieldElement,O as DateTimeRangePickerElement};
