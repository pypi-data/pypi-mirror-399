import{a as S,b as h}from"./chunk-7AYLLUS2.js";import{a as b}from"./chunk-ULT7T2WM.js";import{a as p,d}from"./chunk-N73QEIV2.js";import{b as c}from"./chunk-JC2BH436.js";var g=c(S()),v=c(b());var u='django-stepper-collection{display:block}django-stepper-collection .stepper-horizontal{display:flex;justify-content:space-between;list-style:none;padding:0}django-stepper-collection .stepper-step{display:flex;flex-grow:1;justify-content:center}django-stepper-collection .stepper-step .stepper-head{display:flex;flex-grow:1;align-items:center}django-stepper-collection .stepper-step .stepper-head::before{margin-right:.5rem}django-stepper-collection .stepper-step .stepper-head::after{margin-left:.5rem}django-stepper-collection .stepper-step .stepper-head::before,django-stepper-collection .stepper-step .stepper-head::after{content:"";flex:1;height:1px;width:100%;background-color:gray}django-stepper-collection .stepper-step:not([aria-current=step]).visited .stepper-head-icon{cursor:pointer;background-color:color-mix(in srgb, light-dark(hsl(213, 96%, 64%), hsl(213, 96%, 36%)), var(--django-formset-background-color) 50%)}django-stepper-collection .stepper-step[aria-current=step].visited .stepper-head-icon{background-color:light-dark(hsl(213, 96%, 64%), hsl(213, 96%, 36%));color:var(--django-formset-background-color)}django-stepper-collection .stepper-step .stepper-head-icon{display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:50%;border:1px solid gray;background-color:color-mix(in srgb, var(--django-formset-background-color), currentcolor 5%);color:var(--django-formset-fg-color)}django-stepper-collection .stepper-step .stepper-head-icon.has-label{margin-right:.5rem}django-stepper-collection>django-form-collection:not([aria-current=step]){display:none}';var n=class{constructor(e,t,r){this.visited=!1;this.activateVisited=e=>{this.visited&&this.activateStep()};this.collectionChanged=e=>{let t=null;for(let r of this.collection.steps)r.visited&&(t?(r.visited=!1,r.listItem.classList.remove("visited")):Object.values(r.formCollection.querySelectorAll("form")).some(o=>!o.checkValidity())&&(t=r))};var o,s;this.collection=e,this.listItem=t,this.formCollection=r,this.path=((o=t.getAttribute("prefix"))==null?void 0:o.split("."))??[],this.induceActivate=this.evalInducer(t,(...y)=>this.activateStep(...y)),(s=this.listItem.querySelector(".stepper-head"))==null||s.addEventListener("click",this.activateVisited),r.addEventListener("change",this.collectionChanged)}evalInducer(e,t){let r=e.getAttribute("df-induce-activate");if(!(0,v.default)(r))return()=>{};try{let o=new Function("...args",`return ${h(r,{startRule:"InduceExpression"})}`);return(...s)=>{o.call(this,...s)&&t(...s)}}catch(o){throw new Error(`Error while parsing <django-form-collection df-induce-activate="${r}">: ${o}.`)}}isButtonActive(e,t,r,...o){return r&&(0,g.default)(d(this.path,e),r.path)&&t(...o)}activateStep(...e){this.collection.steps.forEach(t=>{t.formCollection.ariaCurrent=t.listItem.ariaCurrent=t===this?"step":null}),this.setAsVisited()}setAsVisited(){this.visited=!0,this.listItem.classList.add("visited")}},l=class{constructor(e){this.baseSelector="django-stepper-collection";this.steps=[];this.registerInducer=e=>{if(!(e instanceof CustomEvent))return;this.formset=e.detail.formset,this.formset.registerInducer(this);let t=null;for(let r of this.steps)t&&Object.values(t.formCollection.querySelectorAll("form")).every(o=>o.hasAttribute("df-transient")||o.checkValidity())&&r.setAsVisited(),t=r};this.element=e;let t=e.querySelectorAll("li.stepper-step");e.querySelectorAll(":scope > django-form-collection").forEach((o,s)=>{this.steps.push(new n(this,t.item(s),o))});let r=this.element.closest("django-formset");r&&r.addEventListener("django-formset-connected",this.registerInducer,{once:!0}),this.styleSheet=p.stylesAreInstalled(this.baseSelector)??this.appendStyles()}connectedCallback(){var e;(e=this.steps[0])==null||e.activateStep()}updateOperability(...e){for(let t of this.steps)t.induceActivate(...e)}forceVisibility(e){for(let t of this.steps)t.formCollection.contains(e)&&t.activateStep()}appendStyles(){let e=document.createElement("style");if(e.innerText=u,document.head.appendChild(e),!e.sheet)throw new Error("Could not create <style> element");return e.sheet}},i=Symbol("StepperCollection"),f,m=class extends(f=HTMLElement,i,f){constructor(){super(),this[i]=new l(this)}connectedCallback(){this[i].connectedCallback()}};export{m as StepperCollectionElement};
