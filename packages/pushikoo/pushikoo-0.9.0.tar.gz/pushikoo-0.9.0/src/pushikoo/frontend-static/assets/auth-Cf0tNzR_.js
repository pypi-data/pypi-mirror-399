import{aM as n,aN as i}from"./index-CQ1e8Rg2.js";import{S as s}from"./_plugin-vue_export-helper-BT-Tziy0.js";const t="auth:token",m=n("auth",{state:()=>({token:null}),getters:{isAuthenticated:e=>!!e.token},actions:{initializeFromStorage(){if(typeof window>"u")return;const e=localStorage.getItem(t);e&&(this.token=e,i.TOKEN=e)},setToken(e){this.token=e,typeof window<"u"&&(e?localStorage.setItem(t,e):localStorage.removeItem(t)),i.TOKEN=e??void 0},async loginWithToken(e){debugger;const o=e.trim();if(!o)throw new Error("Token is empty");this.setToken(o),await s.getSystemConfigApiV1SystemConfigGet()},logout(){this.setToken(null)}}});export{m as u};
