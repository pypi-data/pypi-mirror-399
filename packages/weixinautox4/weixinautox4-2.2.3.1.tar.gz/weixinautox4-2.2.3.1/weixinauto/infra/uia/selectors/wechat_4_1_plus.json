{
  "$schema": "weixinauto.selectors.v1",
  "version_range": ">=4.1",
  "globals": {
    "locale_names": {
      "search": ["搜索", "Search"],
      "send":   ["发送", "Send"],
      "wechat": ["微信", "WeChat"]
    },
    "timeouts": { "short": 0.4, "normal": 0.8, "long": 1.8 }
  },
  "selectors": {
    "MAIN_WINDOW": {
      "strategies": [
        { "by": "window", "name_in": "@wechat", "class_name": "mmui::MainWindow", "timeout": "@timeouts.normal" },
        { "by": "window", "class_name": "mmui::MainWindow", "timeout": "@timeouts.long" }
      ]
    },

    "CHAT_SEARCH_BOX": {
      "strategies": [
        { "by": "control", "control_type": "Edit", "class_name": "mmui::XValidatorTextEdit", "name_in": "@search", "timeout": "@timeouts.normal" },
        { "by": "near_text", "anchor_in": "@search", "control_type": "Edit", "timeout": "@timeouts.normal" },
        {
          "by": "path",
          "path": [
            { "control_type": "Window", "class_name": "mmui::MainWindow" },
            { "control_type": "Group",  "class_name": "mmui::XSearchField" },
            { "control_type": "Edit",   "class_name": "mmui::XValidatorTextEdit" }
          ],
          "timeout": "@timeouts.long"
        }
      ]
    },

    "CHAT_LIST_ITEM": {
      "strategies": [
        { "by": "list_item", "control_type": "ListItem", "name": "{target}", "timeout": "@timeouts.normal" },
        { "by": "list_item", "control_type": "ListItem", "name_regex": "^{target}$", "timeout": "@timeouts.normal" },
        { "by": "list_item", "control_type": "ListItem", "child_text_regex": "^{target}$", "timeout": "@timeouts.long" }
      ]
    },
    "SESSION_LIST": {
      "strategies": [
        { "by": "control", "control_type": "List", "class_name": "mmui::XTableView", "automation_id": "session_list", "timeout": "@timeouts.short" },
        {
          "by": "path",
          "path": [
            { "control_type": "Window", "class_name": "mmui::MainWindow" },
            { "control_type": "List",   "class_name": "mmui::XTableView" }
          ],
          "timeout": "@timeouts.short"
        }
      ]
    },
    "SESSION_ITEM": {
      "strategies": [
        { "by": "list_item", "control_type": "ListItem", "name": "{target}", "timeout": "@timeouts.short" },
        { "by": "list_item", "control_type": "ListItem", "name_regex": "^{target}$", "timeout": "@timeouts.normal" },
        { "by": "list_item", "control_type": "ListItem", "child_text_regex": "^{target}$", "timeout": "@timeouts.long" }
      ]
    },
    "CHAT_INPUT": {
      "strategies": [
        { "by": "control", "control_type": "Edit", "automation_id": "chat_input_field", "timeout": "@timeouts.short" },
        { "by": "control", "control_type": "Edit", "class_name": "mmui::ChatInputField", "timeout": "@timeouts.long" }
      ]
    },

    "SEND_BUTTON": {
      "strategies": [
        { "by": "control", "control_type": "Button", "class_name": "mmui::XOutlineButton", "name_in": "@send", "timeout": "@timeouts.short" },
        {
          "by": "path",
          "path": [
            { "control_type": "Window", "class_name": "mmui::MainWindow" },
            { "control_type": "Button", "class_name": "mmui::XOutlineButton" }
          ],
          "name_in": "@send",
          "timeout": "@timeouts.long"
        }
      ]
    },

    "LAST_MESSAGE_BUBBLE": {
      "strategies": [
        { "by": "timeline_last", "timeline_control_type": "List", "item_types": ["ListItem", "Pane"], "timeout": "@timeouts.normal" },
        {
          "by": "path_last",
          "path": [
            { "control_type": "Window", "class_name": "mmui::MainWindow" },
            { "control_type": "List" }
          ],
          "item_types": ["ListItem", "Pane"],
          "timeout": "@timeouts.long"
        }
      ]
    }
  }
}
