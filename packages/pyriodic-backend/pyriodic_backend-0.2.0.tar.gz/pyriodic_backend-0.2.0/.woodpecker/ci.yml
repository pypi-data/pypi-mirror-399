when:
  - event: push
    branch: main
  - event: pull_request

steps:
  - name: Pytest
    image: python:3.11
    commands:
      - pip install -r requirements.txt
      - pytest
  - name: Lint
    image: python:3.11
    commands:
      - pip install pre-commit mypy
      - pre-commit run --all-files
      - mypy pyriodic_backend/ --ignore-missing-imports
