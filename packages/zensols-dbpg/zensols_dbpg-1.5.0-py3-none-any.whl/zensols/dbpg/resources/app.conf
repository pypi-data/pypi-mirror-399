#@meta {author: "Paul Landes"}
#@meta {desc: "command-line configuration", date: "2025-12-31"}


[cli]
apps = list: ${cli_config_default:apps}, app, papp
# do not remove `app` from config for app retrieval in tests
cleanups = list: ${cli_config_default:cleanups}, papp, app_decorator
default_action = run
# usage_config = object({'param':
#     {'max_first_col': 0.4, 'max_metavar_len': 0.2}}):
#     zensols.cli.UsageConfig

[log_cli]
#format = %%(asctime)s[%%(levelname)s]:%%(name)s %%(message)s
level = debug
#default_level = debug
#default_app_level = warn

# for multi-process apps, uncomment and remove the log_cli cleanup
#[multiprocess_log_config]
#section = log_cli

[import]
config_files = list:
  resource(zensols.util): resources/cli.conf,
  resource(zensols.util): resources/cli-config.conf

# configuration files are optional
[config_cli]
expect = False

[config_import]
references = list: app, package

[config_imp]
type = import
config_files = list: 
  ^{override}, ^{config_path},
  resource(zensols.dbutilpg): resources/obj.yml,
  ^{config_path}, ^{override}

[app]
class_name = zensols.dbutilpg.Application

[app_decorator]
option_excludes = set: config_factory

[papp]
class_name = zensols.dbutilpg.PrototypeApplication
app = instance: app
