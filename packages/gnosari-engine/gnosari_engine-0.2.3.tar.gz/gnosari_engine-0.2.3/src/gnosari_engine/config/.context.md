# Config Module Context

## Purpose
Configuration loading and transformation pipeline that converts YAML team configurations into domain objects using SOLID principles.

## Core Architecture
**Main Service**: `ConfigurationService` - Orchestrates the entire configuration pipeline through dependency injection.

**Service Pipeline**:
1. **Strategy Resolution**: `ConfigurationStrategyResolver` determines loading approach (monolithic YAML vs modular directory)
2. **Parsing**: `ConfigurationParser` loads YAML with environment variable substitution (`${VAR}` syntax)
3. **Validation**: `ConfigurationValidator` validates structure and component references
4. **Domain Building**: `DomainObjectBuilder` creates `Team`, `Agent`, `Tool`, `Knowledge`, `Trait` objects
5. **Indexing**: `ComponentIndexer` adds O(1) lookup indexes for performance
6. **Resolution**: `ComponentResolver` resolves component references within team

## Key Components

### Loading Strategies
- **MonolithicYamlStrategy**: Single YAML file configurations
- **ModularDirectoryStrategy**: Directory-based configs with `main.yaml` + component subdirectories

### Environment Substitution
- **EnvironmentVariableSubstitutor**: Handles `${VAR_NAME}` and `${VAR_NAME:default}` patterns in YAML

### Interfaces (SOLID Compliance)
All services implement interfaces (`IConfigurationParser`, `IConfigurationValidator`, etc.) following Dependency Inversion Principle.

## Integration Points
- **Used by**: Team runners, CLI commands, session management
- **Creates**: Domain objects (`Team`, `Agent`, etc.) consumed throughout the system
- **Dependencies**: Domain schemas, factories, environment variables

## Error Handling
Custom exceptions for each stage: `ConfigurationParsingError`, `ConfigurationValidationError`, `DomainObjectBuildError`, `ConfigurationServiceError`