var me=Object.defineProperty;var r=(i,s)=>me(i,"name",{value:s,configurable:!0});import{bq as E,cF as Q,cG as h,r as _,o as K,c6 as Y,h as W,c as k,d as t,l as D,j as b,k as R,e as d,s as T,z as G,br as e,v as H,E as P,q as M,F as ee,y as oe,A as ae,u as J,I as V,T as fe,b9 as F}from"./vendor-other-BxP-0xn6.js";import{j as se,i as ie}from"./vendor-primevue-rR0TB_Js.js";import{_ as I,e as Z,t as q,c as X,d as de,cE as ye,u as be,cF as ke,cG as we,q as xe,cH as he}from"./index-FoJ8Eu4a.js";const Me={class:"relative show-slider"},Ce={class:"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg w-[150px]"},re=E({__name:"PopupSlider",props:Q({icon:{default:"pi-expand"},tooltipText:{},min:{default:10},max:{default:150},step:{default:1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const s=h(i,"modelValue"),l=_(!1),o=r(()=>{l.value=!l.value},"toggleSlider"),a=r(u=>{u.target.closest(".show-slider")||(l.value=!1)},"closeSlider");return K(()=>{document.addEventListener("click",a)}),Y(()=>{document.removeEventListener("click",a)}),(u,p)=>{const v=W("tooltip");return t(),k("div",Me,[D((t(),b(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":u.tooltipText,onClick:o},{default:R(()=>[d("i",{class:T(["pi",u.icon,"text-lg text-white"])},null,2)]),_:1},8,["aria-label"])),[[v,{value:u.tooltipText,showDelay:300},void 0,{right:!0}]]),D(d("div",Ce,[G(e(se),{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=c=>s.value=c),class:"w-full",min:u.min,max:u.max,step:u.step},null,8,["modelValue","min","max","step"])],512),[[H,l.value]])])}}}),$e={class:"flex flex-col"},De=E({__name:"CameraControls",props:{cameraType:{},cameraTypeModifiers:{},fov:{},fovModifiers:{}},emits:["update:cameraType","update:fov"],setup(i){const s=h(i,"cameraType"),l=h(i,"fov"),o=P(()=>s.value==="perspective"),a=r(()=>{s.value=s.value==="perspective"?"orthographic":"perspective"},"switchCamera");return(u,p)=>{const v=W("tooltip");return t(),k("div",$e,[D((t(),b(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":u.$t("load3d.switchCamera"),onClick:a},{default:R(()=>p[1]||(p[1]=[d("i",{class:T(["pi","pi-camera","text-lg text-white"])},null,-1)])),_:1},8,["aria-label"])),[[v,{value:u.$t("load3d.switchCamera"),showDelay:300},void 0,{right:!0}]]),o.value?(t(),b(re,{key:0,modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=c=>l.value=c),"tooltip-text":u.$t("load3d.fov")},null,8,["modelValue","tooltip-text"])):M("",!0)])}}}),Re={class:"flex flex-col"},Ie={class:"show-export-formats relative"},Le={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},Se={class:"flex flex-col"},Be=E({__name:"ExportControls",emits:["exportModel"],setup(i,{emit:s}){const l=s,o=_(!1),a=[{label:"GLB",value:"glb"},{label:"OBJ",value:"obj"},{label:"STL",value:"stl"}];function u(){o.value=!o.value}r(u,"toggleExportFormats");function p(c){l("exportModel",c),o.value=!1}r(p,"exportModel");function v(c){c.target.closest(".show-export-formats")||(o.value=!1)}return r(v,"closeExportFormatsList"),K(()=>{document.addEventListener("click",v)}),Y(()=>{document.removeEventListener("click",v)}),(c,n)=>{const m=W("tooltip");return t(),k("div",Re,[d("div",Ie,[D((t(),b(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":c.$t("load3d.exportModel"),onClick:u},{default:R(()=>n[0]||(n[0]=[d("i",{class:"pi pi-download text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[m,{value:c.$t("load3d.exportModel"),showDelay:300},void 0,{right:!0}]]),D(d("div",Le,[d("div",Se,[(t(),k(ee,null,oe(a,x=>G(I,{key:x.value,variant:"textonly",class:"text-white",onClick:r(S=>p(x.value),"onClick")},{default:R(()=>[ae(J(x.label),1)]),_:2},1032,["onClick"])),64))])],512),[[H,o.value]])])])}}}),Ue={class:"flex flex-col"},ze={key:0,class:"show-light-intensity relative"},Ve={class:"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg",style:{width:"150px"}},Ee=E({__name:"LightControls",props:{lightIntensity:{},lightIntensityModifiers:{},materialMode:{},materialModeModifiers:{}},emits:["update:lightIntensity","update:materialMode"],setup(i){const s=h(i,"lightIntensity"),l=h(i,"materialMode"),o=P(()=>l.value==="original"),a=_(!1),u=Z().get("Comfy.Load3D.LightIntensityMaximum"),p=Z().get("Comfy.Load3D.LightIntensityMinimum"),v=Z().get("Comfy.Load3D.LightAdjustmentIncrement");function c(){a.value=!a.value}r(c,"toggleLightIntensity");function n(m){m.target.closest(".show-light-intensity")||(a.value=!1)}return r(n,"closeLightSlider"),K(()=>{document.addEventListener("click",n)}),Y(()=>{document.removeEventListener("click",n)}),(m,x)=>{const S=W("tooltip");return t(),k("div",Ue,[o.value?(t(),k("div",ze,[D((t(),b(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":m.$t("load3d.lightIntensity"),onClick:c},{default:R(()=>x[1]||(x[1]=[d("i",{class:"pi pi-sun text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[S,{value:m.$t("load3d.lightIntensity"),showDelay:300},void 0,{right:!0}]]),D(d("div",Ve,[G(e(se),{modelValue:s.value,"onUpdate:modelValue":x[0]||(x[0]=C=>s.value=C),class:"w-full",min:e(p),max:e(u),step:e(v)},null,8,["modelValue","min","max","step"])],512),[[H,a.value]])])):M("",!0)])}}}),Pe={class:"flex flex-col"},Ge={class:"show-up-direction relative"},Te={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},Fe={class:"flex flex-col"},_e={key:0,class:"show-material-mode relative"},Ae={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},je={class:"flex flex-col"},Oe=E({__name:"ModelControls",props:Q({hideMaterialMode:{type:Boolean,default:!1},isPlyModel:{type:Boolean,default:!1}},{materialMode:{},materialModeModifiers:{},upDirection:{},upDirectionModifiers:{}}),emits:["update:materialMode","update:upDirection"],setup(i){const s=h(i,"materialMode"),l=h(i,"upDirection"),o=_(!1),a=_(!1),u=["original","-x","+x","-y","+y","-z","+z"],p=P(()=>{const C=["original","normal","wireframe"];return i.isPlyModel&&C.splice(1,0,"pointCloud"),C});function v(){o.value=!o.value,a.value=!1}r(v,"toggleUpDirection");function c(C){l.value=C,o.value=!1}r(c,"selectUpDirection");function n(){a.value=!a.value,o.value=!1}r(n,"toggleMaterialMode");function m(C){s.value=C,a.value=!1}r(m,"selectMaterialMode");function x(C){return q(`load3d.materialModes.${C}`)}r(x,"formatMaterialMode");function S(C){const B=C.target;B.closest(".show-up-direction")||(o.value=!1),B.closest(".show-material-mode")||(a.value=!1)}return r(S,"closeSceneSlider"),K(()=>{document.addEventListener("click",S)}),Y(()=>{document.removeEventListener("click",S)}),(C,B)=>{const A=W("tooltip");return t(),k("div",Pe,[d("div",Ge,[D((t(),b(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":e(q)("load3d.upDirection"),onClick:v},{default:R(()=>B[0]||(B[0]=[d("i",{class:"pi pi-arrow-up text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[A,{value:e(q)("load3d.upDirection"),showDelay:300},void 0,{right:!0}]]),D(d("div",Te,[d("div",Fe,[(t(),k(ee,null,oe(u,U=>G(I,{key:U,variant:"textonly",class:T(e(X)("text-white",l.value===U&&"bg-blue-500")),onClick:r(j=>c(U),"onClick")},{default:R(()=>[ae(J(U.toUpperCase()),1)]),_:2},1032,["class","onClick"])),64))])],512),[[H,o.value]])]),C.hideMaterialMode?M("",!0):(t(),k("div",_e,[D((t(),b(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":e(q)("load3d.materialMode"),onClick:n},{default:R(()=>B[1]||(B[1]=[d("i",{class:"pi pi-box text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[A,{value:e(q)("load3d.materialMode"),showDelay:300},void 0,{right:!0}]]),D(d("div",Ae,[d("div",je,[(t(!0),k(ee,null,oe(p.value,U=>(t(),b(I,{key:U,variant:"textonly",class:T(e(X)("whitespace-nowrap text-white",s.value===U&&"bg-blue-500")),onClick:r(j=>m(U),"onClick")},{default:R(()=>[ae(J(x(U)),1)]),_:2},1032,["class","onClick"]))),128))])],512),[[H,a.value]])]))])}}}),Ne={class:"flex flex-col"},qe={key:0},We=["value"],He={key:1},Je={key:2},Ke={key:4},Qe=E({__name:"SceneControls",props:{showGrid:{type:Boolean},showGridModifiers:{},backgroundColor:{},backgroundColorModifiers:{},backgroundImage:{},backgroundImageModifiers:{},backgroundRenderMode:{default:"tiled"},backgroundRenderModeModifiers:{},fov:{},fovModifiers:{}},emits:Q(["updateBackgroundImage"],["update:showGrid","update:backgroundColor","update:backgroundImage","update:backgroundRenderMode","update:fov"]),setup(i,{emit:s}){const l=s,o=h(i,"showGrid"),a=h(i,"backgroundColor"),u=h(i,"backgroundImage"),p=h(i,"backgroundRenderMode"),v=h(i,"fov"),c=P(()=>u.value&&u.value!==""),n=_(null),m=_(null),x=r(()=>{o.value=!o.value},"toggleGrid"),S=r(L=>{a.value=L},"updateBackgroundColor"),C=r(()=>{n.value?.click()},"openColorPicker"),B=r(()=>{m.value?.click()},"openImagePicker"),A=r(L=>{const $=L.target;$.files&&$.files[0]&&l("updateBackgroundImage",$.files[0])},"uploadBackgroundImage"),U=r(()=>{l("updateBackgroundImage",null)},"removeBackgroundImage"),j=r(()=>{p.value=p.value==="panorama"?"tiled":"panorama"},"toggleBackgroundRenderMode");return(L,$)=>{const O=W("tooltip");return t(),k("div",Ne,[D((t(),b(I,{variant:"textonly",size:"icon",class:T(e(X)("rounded-full",o.value&&"ring-2 ring-white/50")),"aria-label":L.$t("load3d.showGrid"),onClick:x},{default:R(()=>$[2]||($[2]=[d("i",{class:"pi pi-table text-lg text-white"},null,-1)])),_:1},8,["class","aria-label"])),[[O,{value:L.$t("load3d.showGrid"),showDelay:300},void 0,{right:!0}]]),c.value?M("",!0):(t(),k("div",qe,[D((t(),b(I,{variant:"textonly",size:"icon",class:"rounded-full","aria-label":L.$t("load3d.backgroundColor"),onClick:C},{default:R(()=>[$[3]||($[3]=d("i",{class:"pi pi-palette text-lg text-white"},null,-1)),d("input",{ref_key:"colorPickerRef",ref:n,type:"color",value:a.value,class:"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0",onInput:$[0]||($[0]=N=>S(N.target.value))},null,40,We)]),_:1},8,["aria-label"])),[[O,{value:L.$t("load3d.backgroundColor"),showDelay:300},void 0,{right:!0}]])])),c.value?M("",!0):(t(),k("div",He,[D((t(),b(I,{variant:"textonly",size:"icon",class:"rounded-full","aria-label":L.$t("load3d.uploadBackgroundImage"),onClick:B},{default:R(()=>[$[4]||($[4]=d("i",{class:"pi pi-image text-lg text-white"},null,-1)),d("input",{ref_key:"imagePickerRef",ref:m,type:"file",accept:"image/*",class:"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0",onChange:A},null,544)]),_:1},8,["aria-label"])),[[O,{value:L.$t("load3d.uploadBackgroundImage"),showDelay:300},void 0,{right:!0}]])])),c.value?(t(),k("div",Je,[D((t(),b(I,{variant:"textonly",size:"icon",class:T(e(X)("rounded-full",p.value==="panorama"&&"ring-2 ring-white/50")),"aria-label":L.$t("load3d.panoramaMode"),onClick:j},{default:R(()=>$[5]||($[5]=[d("i",{class:"pi pi-globe text-lg text-white"},null,-1)])),_:1},8,["class","aria-label"])),[[O,{value:L.$t("load3d.panoramaMode"),showDelay:300},void 0,{right:!0}]])])):M("",!0),c.value&&p.value==="panorama"?(t(),b(re,{key:3,modelValue:v.value,"onUpdate:modelValue":$[1]||($[1]=N=>v.value=N),"tooltip-text":L.$t("load3d.fov")},null,8,["modelValue","tooltip-text"])):M("",!0),c.value?(t(),k("div",Ke,[D((t(),b(I,{variant:"textonly",size:"icon",class:"rounded-full","aria-label":L.$t("load3d.removeBackgroundImage"),onClick:U},{default:R(()=>$[6]||($[6]=[d("i",{class:"pi pi-times text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[O,{value:L.$t("load3d.removeBackgroundImage"),showDelay:300},void 0,{right:!0}]])])):M("",!0)])}}}),Xe={class:"show-menu relative"},Ye={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},Ze={class:"flex flex-col"},eo={class:"whitespace-nowrap text-white"},oo={class:"rounded-lg bg-smoke-700/30"},to=E({__name:"Load3DControls",props:Q({isSplatModel:{type:Boolean,default:!1},isPlyModel:{type:Boolean,default:!1}},{sceneConfig:{},sceneConfigModifiers:{},modelConfig:{},modelConfigModifiers:{},cameraConfig:{},cameraConfigModifiers:{},lightConfig:{},lightConfigModifiers:{}}),emits:Q(["updateBackgroundImage","exportModel"],["update:sceneConfig","update:modelConfig","update:cameraConfig","update:lightConfig"]),setup(i,{emit:s}){const l=h(i,"sceneConfig"),o=h(i,"modelConfig"),a=h(i,"cameraConfig"),u=h(i,"lightConfig"),p=_(!1),v=_("scene"),c={scene:"load3d.scene",model:"load3d.model",camera:"load3d.camera",light:"load3d.light",export:"load3d.export"},n=P(()=>i.isSplatModel?["scene","model","camera"]:["scene","model","camera","light","export"]),m=P(()=>v.value==="scene"&&!!l.value),x=P(()=>v.value==="model"&&!!o.value),S=P(()=>v.value==="camera"&&!!a.value),C=P(()=>v.value==="light"&&!!u.value&&!!o.value),B=P(()=>v.value==="export"),A=r(()=>{p.value=!p.value},"toggleMenu"),U=r(z=>{v.value=z,p.value=!1},"selectCategory"),j=r(z=>`${{scene:"pi pi-image",model:"pi pi-box",camera:"pi pi-camera",light:"pi pi-sun",export:"pi pi-download"}[z]} text-white text-lg`,"getCategoryIcon"),L=s,$=r(z=>{L("updateBackgroundImage",z)},"handleBackgroundImageUpdate"),O=r(z=>{L("exportModel",z)},"handleExportModel"),N=r(z=>{z.target.closest(".show-menu")||(p.value=!1)},"closeSlider");return K(()=>{document.addEventListener("click",N)}),Y(()=>{document.removeEventListener("click",N)}),(z,g)=>(t(),k("div",{class:"pointer-events-auto absolute top-12 left-2 z-20 flex flex-col rounded-lg bg-smoke-700/30",onPointerdown:g[11]||(g[11]=V(()=>{},["stop"])),onPointermove:g[12]||(g[12]=V(()=>{},["stop"])),onPointerup:g[13]||(g[13]=V(()=>{},["stop"])),onWheel:g[14]||(g[14]=V(()=>{},["stop"]))},[d("div",Xe,[G(I,{variant:"textonly",size:"icon","aria-label":z.$t("menu.showMenu"),class:"rounded-full",onClick:A},{default:R(()=>g[15]||(g[15]=[d("i",{class:"pi pi-bars text-lg text-white"},null,-1)])),_:1},8,["aria-label"]),D(d("div",Ye,[d("div",Ze,[(t(!0),k(ee,null,oe(n.value,y=>(t(),b(I,{key:y,variant:"textonly",class:T(e(X)("flex w-full items-center justify-start",v.value===y&&"bg-smoke-600")),onClick:r(ne=>U(y),"onClick")},{default:R(()=>[d("i",{class:T(j(y))},null,2),d("span",eo,J(z.$t(c[y])),1)]),_:2},1032,["class","onClick"]))),128))])],512),[[H,p.value]])]),D(d("div",oo,[m.value?(t(),b(Qe,{key:0,"show-grid":l.value.showGrid,"onUpdate:showGrid":g[0]||(g[0]=y=>l.value.showGrid=y),"background-color":l.value.backgroundColor,"onUpdate:backgroundColor":g[1]||(g[1]=y=>l.value.backgroundColor=y),"background-image":l.value.backgroundImage,"onUpdate:backgroundImage":g[2]||(g[2]=y=>l.value.backgroundImage=y),"background-render-mode":l.value.backgroundRenderMode,"onUpdate:backgroundRenderMode":g[3]||(g[3]=y=>l.value.backgroundRenderMode=y),fov:a.value.fov,"onUpdate:fov":g[4]||(g[4]=y=>a.value.fov=y),onUpdateBackgroundImage:$},null,8,["show-grid","background-color","background-image","background-render-mode","fov"])):M("",!0),x.value?(t(),b(Oe,{key:1,"material-mode":o.value.materialMode,"onUpdate:materialMode":g[5]||(g[5]=y=>o.value.materialMode=y),"up-direction":o.value.upDirection,"onUpdate:upDirection":g[6]||(g[6]=y=>o.value.upDirection=y),"hide-material-mode":z.isSplatModel,"is-ply-model":z.isPlyModel},null,8,["material-mode","up-direction","hide-material-mode","is-ply-model"])):M("",!0),S.value?(t(),b(De,{key:2,"camera-type":a.value.cameraType,"onUpdate:cameraType":g[7]||(g[7]=y=>a.value.cameraType=y),fov:a.value.fov,"onUpdate:fov":g[8]||(g[8]=y=>a.value.fov=y)},null,8,["camera-type","fov"])):M("",!0),C.value?(t(),b(Ee,{key:3,"light-intensity":u.value.intensity,"onUpdate:lightIntensity":g[9]||(g[9]=y=>u.value.intensity=y),"material-mode":o.value.materialMode,"onUpdate:materialMode":g[10]||(g[10]=y=>o.value.materialMode=y)},null,8,["light-intensity","material-mode"])):M("",!0),B.value?(t(),b(Be,{key:4,onExportModel:O})):M("",!0)],512),[[H,v.value]])],32))}}),lo={key:0,class:"bg-opacity-50 absolute inset-0 z-50 flex items-center justify-center bg-black"},ao={class:"flex flex-col items-center"},no={class:"mt-4 text-lg text-white"},io=E({__name:"LoadingOverlay",props:{loading:{type:Boolean},loadingMessage:{}},setup(i){return(s,l)=>(t(),b(fe,{name:"fade"},{default:R(()=>[s.loading?(t(),k("div",lo,[d("div",ao,[l[0]||(l[0]=d("div",{class:"spinner"},null,-1)),d("div",no,J(s.loadingMessage),1)])])):M("",!0)]),_:1}))}}),so=de(io,[["__scopeId","data-v-b13965f5"]]),ro={key:0,class:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"},uo={class:"rounded-lg border-2 border-dashed border-blue-400 bg-blue-500/20 px-6 py-4 text-lg font-medium text-blue-100"},co=E({__name:"Load3DScene",props:{initializeLoad3d:{type:Function},cleanup:{type:Function},loading:{type:Boolean},loadingMessage:{},onModelDrop:{type:Function},isPreview:{type:Boolean}},setup(i){const s=i,l=_(null),{isDragging:o,dragMessage:a,handleDragOver:u,handleDragLeave:p,handleDrop:v}=ye({onModelDrop:r(async c=>{s.onModelDrop&&await s.onModelDrop(c)},"onModelDrop"),disabled:P(()=>s.isPreview)});return K(()=>{l.value&&s.initializeLoad3d(l.value)}),Y(()=>{s.cleanup()}),(c,n)=>(t(),k("div",{ref_key:"container",ref:l,class:"relative h-full w-full","data-capture-wheel":"true",onPointerdown:n[0]||(n[0]=V(()=>{},["stop"])),onPointermove:n[1]||(n[1]=V(()=>{},["stop"])),onPointerup:n[2]||(n[2]=V(()=>{},["stop"])),onMousedown:n[3]||(n[3]=V(()=>{},["stop"])),onMousemove:n[4]||(n[4]=V(()=>{},["stop"])),onMouseup:n[5]||(n[5]=V(()=>{},["stop"])),onContextmenu:n[6]||(n[6]=V(()=>{},["stop","prevent"])),onDragover:n[7]||(n[7]=V((...m)=>e(u)&&e(u)(...m),["prevent","stop"])),onDragleave:n[8]||(n[8]=V((...m)=>e(p)&&e(p)(...m),["stop"])),onDrop:n[9]||(n[9]=V((...m)=>e(v)&&e(v)(...m),["prevent","stop"]))},[G(so,{loading:c.loading,"loading-message":c.loadingMessage},null,8,["loading","loading-message"]),!c.isPreview&&e(o)?(t(),k("div",ro,[d("div",uo,J(e(a)),1)])):M("",!0)],544))}}),po={key:0,class:"pointer-events-auto absolute top-0 left-0 z-10 flex w-full items-center justify-center gap-2 pt-2"},go=E({__name:"AnimationControls",props:{animations:{},animationsModifiers:{},playing:{type:Boolean},playingModifiers:{},selectedSpeed:{},selectedSpeedModifiers:{},selectedAnimation:{},selectedAnimationModifiers:{}},emits:["update:animations","update:playing","update:selectedSpeed","update:selectedAnimation"],setup(i){const s=h(i,"animations"),l=h(i,"playing"),o=h(i,"selectedSpeed"),a=h(i,"selectedAnimation"),u=[{name:"0.1x",value:.1},{name:"0.5x",value:.5},{name:"1x",value:1},{name:"1.5x",value:1.5},{name:"2x",value:2}],p=r(()=>{l.value=!l.value},"togglePlay");return(v,c)=>s.value&&s.value.length>0?(t(),k("div",po,[G(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":v.$t("g.playPause"),onClick:p},{default:R(()=>[d("i",{class:T(["pi",l.value?"pi-pause":"pi-play","text-lg text-white"])},null,2)]),_:1},8,["aria-label"]),G(e(ie),{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=n=>o.value=n),options:u,"option-label":"name","option-value":"value",class:"w-24"},null,8,["modelValue"]),G(e(ie),{modelValue:a.value,"onUpdate:modelValue":c[1]||(c[1]=n=>a.value=n),options:s.value,"option-label":"name","option-value":"index",class:"w-32"},null,8,["modelValue","options"])])):M("",!0)}}),vo={class:"relative rounded-lg bg-smoke-700/30"},mo={class:"flex flex-col gap-2"},fo={key:2,class:"mt-1 text-center text-xs text-white"},yo=E({__name:"RecordingControls",props:{hasRecording:{type:Boolean},hasRecordingModifiers:{},isRecording:{type:Boolean},isRecordingModifiers:{},recordingDuration:{},recordingDurationModifiers:{}},emits:Q(["startRecording","stopRecording","exportRecording","clearRecording"],["update:hasRecording","update:isRecording","update:recordingDuration"]),setup(i,{emit:s}){const l=h(i,"hasRecording"),o=h(i,"isRecording"),a=h(i,"recordingDuration"),u=s;function p(){o.value?u("stopRecording"):u("startRecording")}r(p,"toggleRecording");function v(){u("exportRecording")}r(v,"handleExportRecording");function c(){u("clearRecording")}r(c,"handleClearRecording");function n(m){const x=Math.floor(m/60),S=Math.floor(m%60);return`${x.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`}return r(n,"formatDuration"),(m,x)=>{const S=W("tooltip");return t(),k("div",vo,[d("div",mo,[D((t(),b(I,{size:"icon",variant:"textonly",class:T(e(X)("rounded-full",o.value&&"text-red-500 recording-button-blink")),"aria-label":o.value?m.$t("load3d.stopRecording"):m.$t("load3d.startRecording"),onClick:p},{default:R(()=>[d("i",{class:T(["pi",o.value?"pi-circle-fill":"pi-video","text-lg text-white"])},null,2)]),_:1},8,["class","aria-label"])),[[S,{value:o.value?m.$t("load3d.stopRecording"):m.$t("load3d.startRecording"),showDelay:300},void 0,{right:!0}]]),l.value&&!o.value?D((t(),b(I,{key:0,size:"icon",variant:"textonly",class:"rounded-full","aria-label":m.$t("load3d.exportRecording"),onClick:v},{default:R(()=>x[0]||(x[0]=[d("i",{class:"pi pi-download text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[S,{value:m.$t("load3d.exportRecording"),showDelay:300},void 0,{right:!0}]]):M("",!0),l.value&&!o.value?D((t(),b(I,{key:1,size:"icon",variant:"textonly",class:"rounded-full","aria-label":m.$t("load3d.clearRecording"),onClick:c},{default:R(()=>x[1]||(x[1]=[d("i",{class:"pi pi-trash text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[S,{value:m.$t("load3d.clearRecording"),showDelay:300},void 0,{right:!0}]]):M("",!0),a.value&&a.value>0&&!o.value?(t(),k("div",fo,J(n(a.value)),1)):M("",!0)])])}}}),bo=de(yo,[["__scopeId","data-v-a74d27e9"]]),ko={class:"relative rounded-lg bg-smoke-700/30"},wo={class:"flex flex-col gap-2"},xo=E({__name:"ViewerControls",props:{node:{}},setup(i){const s=r(()=>{const l={node:i.node};be().showDialog({key:"global-load3d-viewer",title:q("load3d.viewer.title"),component:ke,props:l,dialogComponentProps:{style:"width: 80vw; height: 80vh;",maximizable:!0,onClose:r(async()=>{await we().handleViewerClose(l.node)},"onClose")}})},"openIn3DViewer");return(l,o)=>{const a=W("tooltip");return t(),k("div",ko,[d("div",wo,[D((t(),b(I,{size:"icon",variant:"textonly",class:"rounded-full","aria-label":e(q)("load3d.openIn3DViewer"),onClick:s},{default:R(()=>o[0]||(o[0]=[d("i",{class:"pi pi-expand text-lg text-white"},null,-1)])),_:1},8,["aria-label"])),[[a,{value:e(q)("load3d.openIn3DViewer"),showDelay:300},void 0,{right:!0}]])])])}}}),ho={class:"pointer-events-none absolute top-0 left-0 size-full"},Mo={key:1,class:"pointer-events-auto absolute top-12 right-2 z-20"},Io=E({__name:"Load3D",props:{widget:{},nodeId:{}},setup(i){const s=i;function l(le){return"node"in le&&le.node!==void 0}r(l,"isComponentWidget");const o=_(null);l(s.widget)?o.value=s.widget.node:s.nodeId&&K(()=>{o.value=xe.rootGraph?.getNodeById(s.nodeId)||null});const{sceneConfig:a,modelConfig:u,cameraConfig:p,lightConfig:v,isRecording:c,isPreview:n,isSplatModel:m,isPlyModel:x,hasRecording:S,recordingDuration:C,animations:B,playing:A,selectedSpeed:U,selectedAnimation:j,loading:L,loadingMessage:$,initializeLoad3d:O,handleMouseEnter:N,handleMouseLeave:z,handleStartRecording:g,handleStopRecording:y,handleExportRecording:ne,handleClearRecording:ue,handleBackgroundImageUpdate:ce,handleExportModel:pe,handleModelDrop:ge,cleanup:ve}=he(o),te=P(()=>Z().get("Comfy.Load3D.3DViewerEnable"));return(le,f)=>(t(),k("div",{class:"relative size-full",onMouseenter:f[11]||(f[11]=(...w)=>e(N)&&e(N)(...w)),onMouseleave:f[12]||(f[12]=(...w)=>e(z)&&e(z)(...w)),onPointerdown:f[13]||(f[13]=V(()=>{},["stop"])),onPointermove:f[14]||(f[14]=V(()=>{},["stop"])),onPointerup:f[15]||(f[15]=V(()=>{},["stop"]))},[o.value?(t(),b(co,{key:0,"initialize-load3d":e(O),cleanup:e(ve),loading:e(L),"loading-message":e($),"on-model-drop":e(n)?void 0:e(ge),"is-preview":e(n)},null,8,["initialize-load3d","cleanup","loading","loading-message","on-model-drop","is-preview"])):M("",!0),d("div",ho,[G(to,{"scene-config":e(a),"onUpdate:sceneConfig":f[0]||(f[0]=w=>F(a)?a.value=w:null),"model-config":e(u),"onUpdate:modelConfig":f[1]||(f[1]=w=>F(u)?u.value=w:null),"camera-config":e(p),"onUpdate:cameraConfig":f[2]||(f[2]=w=>F(p)?p.value=w:null),"light-config":e(v),"onUpdate:lightConfig":f[3]||(f[3]=w=>F(v)?v.value=w:null),"is-splat-model":e(m),"is-ply-model":e(x),onUpdateBackgroundImage:e(ce),onExportModel:e(pe)},null,8,["scene-config","model-config","camera-config","light-config","is-splat-model","is-ply-model","onUpdateBackgroundImage","onExportModel"]),e(B)&&e(B).length>0?(t(),b(go,{key:0,animations:e(B),"onUpdate:animations":f[4]||(f[4]=w=>F(B)?B.value=w:null),playing:e(A),"onUpdate:playing":f[5]||(f[5]=w=>F(A)?A.value=w:null),"selected-speed":e(U),"onUpdate:selectedSpeed":f[6]||(f[6]=w=>F(U)?U.value=w:null),"selected-animation":e(j),"onUpdate:selectedAnimation":f[7]||(f[7]=w=>F(j)?j.value=w:null)},null,8,["animations","playing","selected-speed","selected-animation"])):M("",!0)]),te.value&&o.value?(t(),k("div",Mo,[G(xo,{node:o.value},null,8,["node"])])):M("",!0),e(n)?M("",!0):(t(),k("div",{key:2,class:T(["pointer-events-auto absolute right-2 z-20",{"top-12":!te.value,"top-24":te.value}])},[G(bo,{"is-recording":e(c),"onUpdate:isRecording":f[8]||(f[8]=w=>F(c)?c.value=w:null),"has-recording":e(S),"onUpdate:hasRecording":f[9]||(f[9]=w=>F(S)?S.value=w:null),"recording-duration":e(C),"onUpdate:recordingDuration":f[10]||(f[10]=w=>F(C)?C.value=w:null),onStartRecording:e(g),onStopRecording:e(y),onExportRecording:e(ne),onClearRecording:e(ue)},null,8,["is-recording","has-recording","recording-duration","onStartRecording","onStopRecording","onExportRecording","onClearRecording"])],2))],32))}});export{Io as _};
//# sourceMappingURL=Load3D.vue_vue_type_script_setup_true_lang-BJ0IqFdp.js.map
