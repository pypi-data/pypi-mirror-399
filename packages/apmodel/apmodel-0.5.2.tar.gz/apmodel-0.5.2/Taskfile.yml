version: '3'

tasks:
  default:
    cmds:
      - uv sync --locked --dev
    silent: true
  test:
    cmds:
      - uv run pytest --cov=./src/apmodel
    silent: true
  docs:dev:
    cmds:
      - uv run zensical serve
    silent: true
  build:
    cmds:
      - cmd: rm --rf dist
        platforms: [linux, darwin]
      - cmd: rmdir /s /q dist
        platforms: [windows]
      - uv build
    silent: true
  changelog:
    cmds:
      - uv run git cliff -o CHANGELOG.md
      - git add CHANGELOG.md
      - 'git commit -m "chore: update changelog [skip ci]"'
    silent: true