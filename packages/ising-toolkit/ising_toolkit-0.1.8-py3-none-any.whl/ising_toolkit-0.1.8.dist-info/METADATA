Metadata-Version: 2.4
Name: ising-toolkit
Version: 0.1.8
Summary: ç”¨äºè°ƒç”¨ä¼Šè¾›äº‘å¹³å°çš„SDK
Author-email: åŒ—äº¬ä¼Šè¾›æ™ºèƒ½ç§‘æŠ€æœ‰é™å…¬å¸ <max@isingtech.com>
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Topic :: Scientific/Engineering
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: numpy>=1.21
Provides-Extra: sa
Requires-Dist: torch; extra == "sa"
Provides-Extra: remote
Requires-Dist: ising; extra == "remote"
Provides-Extra: all
Requires-Dist: torch; extra == "all"
Requires-Dist: ising; extra == "all"
Dynamic: license-file


# Ising Toolkit (v0.1.1)

`ising-toolkit` æ˜¯ä¸€ä¸ªä¸ºè§£å†³äºŒæ¬¡æ— çº¦æŸäºŒå…ƒä¼˜åŒ– (QUBO) å’Œ Ising (ä¼Šè¾›) æ¨¡å‹é—®é¢˜è€Œè®¾è®¡çš„ Python å·¥å…·åŒ…ã€‚

å®ƒæä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„é«˜çº§ APIï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†æ¨¡å‹ï¼ˆ`IsingModel`, `QUBOModel`ï¼‰çš„é¢„å¤„ç†ã€åœ¨ Ising å’Œ QUBO æ ¼å¼ä¹‹é—´è½¬æ¢ï¼Œå¹¶æ”¯æŒä½¿ç”¨æœ¬åœ°**æ¨¡æ‹Ÿé€€ç«**æˆ–è¿œç¨‹**ä¼Šè¾›äº‘å¹³å°**è¿›è¡Œæ±‚è§£ã€‚

## æ ¸å¿ƒåŠŸèƒ½

  * [cite\_start]**æ¨¡å‹å®šä¹‰**: æä¾›äº† `IsingModel` å’Œ `QUBOModel` [cite: 2] ä¸¤ä¸ªé«˜çº§ç±»æ¥æ„å»ºæ‚¨çš„é—®é¢˜ã€‚
  * **è‡ªåŠ¨é¢„å¤„ç†**:
      * **IsingModel**: è‡ªåŠ¨å°†éé›¶çš„ `h` å‘é‡ï¼ˆå¤–éƒ¨ç£åœºï¼‰é€šè¿‡å¼•å…¥**è¾…åŠ©è‡ªæ—‹**æ¥è½¬æ¢æ¨¡å‹ï¼Œä½¿å…¶ç¬¦åˆçº¯ç²¹çš„ Ising æ±‚è§£å™¨è¦æ±‚ã€‚
      * [cite\_start]**QUBOModel**: è‡ªåŠ¨å°†çº¿æ€§ `h` å‘é‡åˆå¹¶åˆ° `Q` çŸ©é˜µçš„å¯¹è§’çº¿ä¸Š [cite: 2]ã€‚
      * æ‰€æœ‰æ¨¡å‹éƒ½ä¼šè‡ªåŠ¨éªŒè¯è¾“å…¥å¹¶è¿›è¡ŒçŸ©é˜µå¯¹ç§°åŒ–ã€‚
  * [cite\_start]**æ¨¡å‹è½¬æ¢**: åŒ…å« `to_ising` ç­‰å·¥å…·å‡½æ•°ï¼Œç”¨äºåœ¨ QUBO å’Œ Ising æ¨¡å‹ä¹‹é—´è½»æ¾è½¬æ¢ [cite: 3]ã€‚
  * **åŒæ±‚è§£å™¨æ”¯æŒ**:
      * `SimulatedAnnealingSolver`: ä¸€ä¸ªå†…ç½®çš„ã€å¤šå‰¯æœ¬å¹¶è¡Œçš„æ¨¡æ‹Ÿé€€ç«æ±‚è§£å™¨ï¼Œç”¨äºå¿«é€Ÿæœ¬åœ°æµ‹è¯•ã€‚
      * `IsingSolver`: å¯¹æ¥ "ä¼Šè¾›äº‘å¹³å°" çš„è¿œç¨‹æ±‚è§£å™¨ï¼Œç”¨äºæäº¤ä»»åŠ¡åˆ°å…‰ç”µä¼Šè¾›æœºã€‚
  * **æ ‡å‡†åŒ–çš„å·¥ä½œæµ**: æ— è®ºä½¿ç”¨æœ¬åœ°è¿˜æ˜¯äº‘ç«¯æ±‚è§£å™¨ï¼Œå·¥ä½œæµéƒ½ä¿æŒä¸€è‡´ã€‚

## ğŸ“¦ å®‰è£…

æ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨ pip å®‰è£…æ­¤ wheel æ–‡ä»¶ï¼š

```bash
pip install ising_toolkit-0.1.1-py3-none-any.whl
```

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹ï¼šæ±‚è§£æœ€å¤§å‰² (Max-Cut) é—®é¢˜

æœ¬ç¤ºä¾‹ï¼ˆåŸºäº `ä½¿ç”¨ä¼Šè¾›äº‘å¹³å°è§£å†³æœ€å¤§å‰²é—®é¢˜æ•™ç¨‹.ipynb`ï¼‰å°†å¼•å¯¼æ‚¨å®Œæˆä¸€ä¸ª 100 èŠ‚ç‚¹å›¾çš„æœ€å¤§å‰²é—®é¢˜æ±‚è§£ã€‚

```python
import numpy as np
import networkx as nx
import time
from ising_toolkit.models import IsingModel
from ising_toolkit.solvers import SimulatedAnnealingSolver, IsingSolver

# --- 1. ç”Ÿæˆé—®é¢˜ ---
# åˆ›å»ºä¸€ä¸ª 100 èŠ‚ç‚¹çš„éšæœºå›¾
N = 100
G = nx.erdos_renyi_graph(N, p=0.08, seed=42)
print(f"å›¾å·²ç”Ÿæˆï¼Œå…±æœ‰ {N} ä¸ªèŠ‚ç‚¹å’Œ {G.number_of_edges()} æ¡è¾¹ã€‚")

# --- 2. æ„å»º Ising æ¨¡å‹ ---
# æœ€å¤§å‰²é—®é¢˜çš„ J çŸ©é˜µï¼šå¦‚æœèŠ‚ç‚¹ i å’Œ j ä¹‹é—´æœ‰è¾¹ï¼Œåˆ™ J[i,j] = 1
J_matrix = np.zeros((N, N), dtype=np.float64)
for i, j in G.edges():
    J_matrix[i, j] = 1.0

# h å‘é‡ä¸º Noneï¼Œå·¥å…·åŒ…ä¼šè‡ªåŠ¨å¤„ç† J çš„å¯¹ç§°åŒ–
ising_model = IsingModel(J=J_matrix, h=None)

# --- 3. æ–¹æ¡ˆ Aï¼šæœ¬åœ°æ¨¡æ‹Ÿé€€ç«æ±‚è§£ ---
print("\n--- æ–¹æ¡ˆ Aï¼šæœ¬åœ°æ±‚è§£ (SimulatedAnnealingSolver) ---")
sa_solver = SimulatedAnnealingSolver(agents=128, steps_per_temp=100)

# .solve() æ–¹æ³•æ¥æ”¶ IsingModel å¯¹è±¡
sa_result = sa_solver.solve(ising_model)

print(f"æœ¬åœ° SA æ±‚è§£å®Œæˆã€‚")
print(f"  æ‰¾åˆ°çš„æœ€ä¼˜èƒ½é‡: {sa_result['energy']}")
# print(f"  è‡ªæ—‹çŠ¶æ€ (å‰10ä¸ª): {sa_result['spins'][:10]}")


# --- 4. æ–¹æ¡ˆ Bï¼šä¼Šè¾›äº‘å¹³å°æ±‚è§£ ---
print("\n--- æ–¹æ¡ˆ Bï¼šäº‘å¹³å°æ±‚è§£ (IsingSolver) ---")
# æ›¿æ¢ä¸ºæ‚¨çš„ API å¯†é’¥
API_KEY = "YOUR_API_KEY_HERE" # æ•™ç¨‹ä¸­ä½¿ç”¨äº†ç¤ºä¾‹key

# æ£€æŸ¥æ˜¯å¦è®¾ç½®äº† API_KEY
if API_KEY == "YOUR_API_KEY_HERE":
    print("è¯·è®¾ç½®æ‚¨çš„ API_KEY æ¥è¿è¡Œäº‘å¹³å°æ±‚è§£å™¨ã€‚")
else:
    try:
        # 4.1 åˆå§‹åŒ–äº‘æ±‚è§£å™¨
        ising_solver = IsingSolver(api_key=API_KEY)
        
        # 4.2 æäº¤ä»»åŠ¡
        # .solve() è¿”å›ä¸€ä¸ªåŒ…å«ä»»åŠ¡ ID çš„å­—å…¸
        task_response = ising_solver.solve(
            ising_model=ising_model,
            name=f"MaxCut-{N}-Nodes-Tutorial",
            shots=5
        )

        if task_response.get("success"):
            task_id = task_response.get("taskId")
            print(f"ä»»åŠ¡æäº¤æˆåŠŸ, Task ID: {task_id}")

            # 4.3 è½®è¯¢è·å–ç»“æœ
            cloud_result_data = None
            while cloud_result_data is None:
                print("æ­£åœ¨ç­‰å¾…äº‘ç«¯ç»“æœ...")
                time.sleep(5)
                cloud_result_data = ising_solver.get_result(task_id)
            
            print("âœ… äº‘ç«¯è®¡ç®—å®Œæˆï¼")
            print(f"  æ‰¾åˆ°çš„æœ€ä¼˜èƒ½é‡: {cloud_result_data['energy']}")
            # print(f"  è‡ªæ—‹çŠ¶æ€ (å‰10ä¸ª): {cloud_result_data['spins'][:10]}")

        else:
            print(f"âŒ ä»»åŠ¡æäº¤å¤±è´¥: {task_response.get('message')}")

    except Exception as e:
        print(f"âŒ äº‘å¹³å°æ±‚è§£æ—¶å‘ç”Ÿé”™è¯¯: {e}")

```

## API ä½¿ç”¨æŒ‡å—

### 1\. å®šä¹‰æ¨¡å‹ (Models)

#### `IsingModel`

ç”¨äºå®šä¹‰ Ising é—®é¢˜ï¼š$H = \sum_{i,j} J_{ij} s_i s_j + \sum_i h_i s_i$

  * **å¦‚ä½•ä½¿ç”¨**: `IsingModel(J, h=None)`
  * **å‚æ•°**:
      * `J` (np.ndarray | List[List]): `(N, N)` è€¦åˆçŸ©é˜µã€‚
      * `h` (np.ndarray | List | None): `(N,)` çº¿æ€§ï¼ˆç£åœºï¼‰å‘é‡ã€‚
  * **è‡ªåŠ¨è½¬æ¢**: å¦‚æœæä¾›äº† `h` å‘é‡ï¼Œè¯¥æ¨¡å‹ä¼šè‡ªåŠ¨å¼•å…¥ä¸€ä¸ª**è¾…åŠ©è‡ªæ—‹**ï¼Œå°† `J` è½¬æ¢ä¸º `(N+1, N+1)` çŸ©é˜µï¼Œå¹¶å°† `h` å‘é‡æ¸…é›¶ã€‚è¿™å¯¹äºé‚£äº›åªæ¥å—çº¯ Ising æ¨¡å‹çš„æ±‚è§£å™¨ï¼ˆå¦‚æœ¬åŒ…ä¸­çš„æ±‚è§£å™¨ï¼‰è‡³å…³é‡è¦ã€‚

<!-- end list -->

```python
# ç¤ºä¾‹ï¼šä¸€ä¸ª 3 è‡ªæ—‹é—®é¢˜ï¼Œå¸¦å¤–éƒ¨ç£åœº h
J = [[0, 1, 2], [1, 0, 0], [2, 0, 0]]
h = [0.5, 0, -0.5]
ising_model = IsingModel(J=J, h=h)

# ising_model.J ç°åœ¨æ˜¯ä¸€ä¸ª (4, 4) çŸ©é˜µ
# ising_model.h ç°åœ¨æ˜¯ä¸€ä¸ª [0, 0, 0, 0] å‘é‡
# ising_model.aux_spin_index å°†ä¼šæ˜¯ 3
```

#### `QUBOModel`

[cite\_start][cite: 2]
ç”¨äºå®šä¹‰ QUBO é—®é¢˜ï¼š$H = \sum_{i,j} Q_{ij} x_i x_j + \sum_i h_i x_i$

  * [cite\_start]**å¦‚ä½•ä½¿ç”¨**: `QUBOModel(Q, h=None)` [cite: 2]
  * **å‚æ•°**:
      * [cite\_start]`Q` (np.ndarray): `(N, N)` äºŒæ¬¡é¡¹çŸ©é˜µ [cite: 2]ã€‚
      * [cite\_start]`h` (np.ndarray | None): `(N,)` çº¿æ€§é¡¹å‘é‡ [cite: 2]ã€‚
  * [cite\_start]**è‡ªåŠ¨è½¬æ¢**: æ„é€ å‡½æ•°ä¼šè‡ªåŠ¨å°† `h` å‘é‡åˆå¹¶åˆ° `Q` çŸ©é˜µçš„å¯¹è§’çº¿ä¸Š [cite: 2]ã€‚

<!-- end list -->

```python
# ç¤ºä¾‹ï¼šä¸€ä¸ª 2 å˜é‡çš„ QUBO
Q = [[1, 2], [2, 1]]
h = [0.5, -0.5]
qubo_model = QUBOModel(Q=Q, h=h)

# qubo_model.Q ç°åœ¨æ˜¯ [[1.5, 2], [2, 0.5]]
```

### 2\. æ±‚è§£å™¨ (Solvers)

#### `SimulatedAnnealingSolver` (æœ¬åœ°æ±‚è§£)

ä½¿ç”¨å¤šå‰¯æœ¬å¹¶è¡Œè®¡ç®—åœ¨æœ¬åœ° CPU ä¸Šè¿è¡Œæ¨¡æ‹Ÿé€€ç«ã€‚

  * **å¦‚ä½•åˆå§‹åŒ–**: `SimulatedAnnealingSolver(agents=128, initial_temp=10.0, final_temp=0.1, cooling_rate=0.99, steps_per_temp=100)`
  * **å¦‚ä½•æ±‚è§£**: `.solve(ising_model)`
  * **è¿”å›**: ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å« `{'spins': np.ndarray, 'energy': float}`ã€‚

<!-- end list -->

```python
# (æ¥ä¸Šæ–‡ ising_model ç¤ºä¾‹)
local_solver = SimulatedAnnealingSolver(agents=64, steps_per_temp=50)
result = local_solver.solve(ising_model)
print(result['energy'])
```

#### `IsingSolver` (äº‘å¹³å°æ±‚è§£)

å°†é—®é¢˜æäº¤åˆ°è¿œç¨‹å…‰ç”µä¼Šè¾›æœºã€‚

  * **å¦‚ä½•åˆå§‹åŒ–**: `IsingSolver(api_key: str)`
  * **å¦‚ä½•æäº¤ä»»åŠ¡**: `.solve(ising_model, name: str, shots: int = 5, post_process: bool = False)`
      * æ­¤æ–¹æ³•ä¼šè‡ªåŠ¨å°† `ising_model.J` å’Œ `ising_model.h` è½¬æ¢ä¸º CSV æ ¼å¼å¹¶ä¸Šä¼ ã€‚
      * **è¿”å›**: ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å« `{'success': bool, 'taskId': str}`ã€‚
  * **å¦‚ä½•è·å–ç»“æœ**: `.get_result(task_id: str)`
      * è½®è¯¢æ­¤æ–¹æ³•ç›´åˆ°ä»»åŠ¡å®Œæˆã€‚
      * **è¿”å›**: ä»»åŠ¡å®Œæˆæ—¶ï¼Œè¿”å› `{'spins': np.ndarray, 'energy': float}`ã€‚å¦‚æœä»»åŠ¡ä»åœ¨è¿è¡Œï¼Œè¿”å› `None`ã€‚

<!-- end list -->

```python
# (æ¥ä¸Šæ–‡ ising_model ç¤ºä¾‹)
cloud_solver = IsingSolver(api_key="YOUR_API_KEY")

task_resp = cloud_solver.solve(ising_model, name="My_Test_Task", shots=10)

if task_resp['success']:
    task_id = task_resp['taskId']
    # (...è½®è¯¢...)
    cloud_result = cloud_solver.get_result(task_id)
    if cloud_result:
        print(cloud_result['energy'])
```

### 3\. å·¥å…· (Utils)

#### `to_ising`

[cite\_start][cite: 3]
å°† `QUBOModel` è½¬æ¢ä¸º `IsingModel`ã€‚

  * [cite\_start]**å¦‚ä½•ä½¿ç”¨**: `to_ising(qubo_model)` [cite: 3]
  * **è¿”å›**: ä¸€ä¸ªæ–°çš„ `IsingModel` å®ä¾‹ã€‚

<!-- end list -->

```python
from ising_toolkit.utils.converters import to_ising

# (æ¥ä¸Šæ–‡ qubo_model ç¤ºä¾‹)
converted_ising_model = to_ising(qubo_model)

# ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ local_solver æˆ– cloud_solver æ¥æ±‚è§£ converted_ising_model
result = local_solver.solve(converted_ising_model)
```
