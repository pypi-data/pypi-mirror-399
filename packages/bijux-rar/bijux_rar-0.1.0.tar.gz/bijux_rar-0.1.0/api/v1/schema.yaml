openapi: 3.0.3
info:
  title: Bijux RAR API
  version: 1.0.0
  description: 'OpenAPI schema for Bijux RAR item management.

    Includes robust error handling, pagination, and industry-standard response objects.

    Designed for SDK/code generation, documentation, monitoring, and security review.

    '
  contact:
    name: Bijux RAR Support
    url: https://bijux.dev/bijux-rar/support
    email: mousavi.bijan@gmail.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
tags:
- name: Items
  description: Operations related to items
servers:
- url: http://127.0.0.1:8000/v1
  description: Local development server
- url: https://api.bijux.dev/bijux-rar/v1
  description: 'Production API server (planned; not live yet).

    This URL is a placeholder. API endpoints are not currently deployed.

    '
security: []
paths:
  /items:
    get:
      tags:
      - Items
      summary: List items
      description: 'Return a paginated list of items.

        Use `limit` and `offset` for pagination.

        '
      operationId: listItems
      parameters:
      - name: limit
        in: query
        description: Maximum number of items to return (default 10, max 100)
        required: false
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 10
        example: 20
      - name: offset
        in: query
        description: Offset from the start of the list (for pagination)
        required: false
        schema:
          type: integer
          minimum: 0
          default: 0
        example: 0
      responses:
        '200':
          description: A paginated list of items
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ItemList'
              examples:
                success:
                  value:
                    items:
                    - id: 1
                      name: Item One
                      description: Description one
                    - id: 2
                      name: Item Two
                      description: Description two
                    total: 2
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
    post:
      tags:
      - Items
      summary: Create a new item
      description: Create a new item with the provided data. If an item with the same
        name exists, returns the existing item (idempotent).
      operationId: createItem
      requestBody:
        description: Data for the new item
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ItemCreate'
            examples:
              minimalItem:
                summary: A request with only the required fields
                value:
                  name: Minimal Item
              fullItem:
                summary: A request with all optional fields included
                value:
                  name: Full Item
                  description: This item has a detailed description.
      responses:
        '201':
          description: Item created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
              examples:
                created:
                  value:
                    id: 3
                    name: New Item
                    description: A new item description
          links:
            GetCreatedItem:
              operationId: getItemById
              parameters:
                item_id: $response.body#/id
            UpdateCreatedItem:
              operationId: updateItemById
              parameters:
                item_id: $response.body#/id
            DeleteCreatedItem:
              operationId: deleteItemById
              parameters:
                item_id: $response.body#/id
        '200':
          description: Item already exists (idempotent create); existing resource
            is returned
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
              examples:
                existed:
                  value:
                    id: 3
                    name: Full Item
                    description: This item has a detailed description.
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '409':
          $ref: '#/components/responses/Conflict'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
  /items/{item_id}:
    parameters:
    - name: item_id
      in: path
      required: true
      description: Unique item identifier
      schema:
        type: integer
        minimum: 1
        maximum: 1000000
      example: 1
    get:
      tags:
      - Items
      summary: Get item by ID
      description: Retrieve item details by unique ID.
      operationId: getItemById
      responses:
        '200':
          description: Item details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
              examples:
                found:
                  value:
                    id: 1
                    name: Item One
                    description: Description one
        '410':
          $ref: '#/components/responses/Gone'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
    put:
      tags:
      - Items
      summary: Update item by ID
      description: Update an existing item with the provided data. Raises conflict
        if the new name is already in use by another item.
      operationId: updateItemById
      requestBody:
        description: Updated data for the item
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ItemUpdate'
            examples:
              valid1:
                value:
                  name: Alpha
                  description: ok
              valid2:
                value:
                  name: Beta
              update:
                value:
                  name: Updated Item
                  description: Updated description
      responses:
        '200':
          description: Item updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Item'
              examples:
                updated:
                  value:
                    id: 1
                    name: Updated Item
                    description: Updated description
          links:
            GetUpdatedItem:
              operationId: getItemById
              parameters:
                item_id: $response.body#/id
            DeleteUpdatedItem:
              operationId: deleteItemById
              parameters:
                item_id: $response.body#/id
        '410':
          $ref: '#/components/responses/Gone'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '409':
          $ref: '#/components/responses/Conflict'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
    delete:
      tags:
      - Items
      summary: Delete item by ID
      description: Delete an item by its unique ID. Returns 404 if the item does not
        exist.
      operationId: deleteItemById
      responses:
        '204':
          description: Item deleted successfully
        '410':
          $ref: '#/components/responses/Gone'
        '404':
          $ref: '#/components/responses/NotFound'
        '406':
          $ref: '#/components/responses/NotAcceptable'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
components:
  schemas:
    ItemCreate:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          nullable: true
          description: Optional item name
        description:
          type: string
          nullable: true
          description: Optional item description
    Item:
      type: object
      additionalProperties: false
      properties:
        id:
          type: integer
          description: Item ID
          example: 1
        name:
          type: string
          description: Item name
          example: Item One
        description:
          type: string
          description: Optional item description
          nullable: true
          example: Description one
      required:
      - id
      - name
    ItemList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Item'
        total:
          type: integer
          description: Total items available
          example: 2
      required:
      - items
      - total
      additionalProperties: false
    ItemUpdate:
      type: object
      additionalProperties: true
      properties:
        name:
          type: string
          nullable: true
          description: Optional item name
        description:
          type: string
          nullable: true
          description: Optional item description
    Problem:
      type: object
      description: Error object in RFC7807 format
      properties:
        type:
          type: string
          description: Error type URI
          example: https://bijux.dev/bijux-rar/docs/errors/invalid-request
        title:
          type: string
          description: Short, human-readable summary
          example: Invalid request
        status:
          type: integer
          description: HTTP status code
          example: 400
        detail:
          type: string
          description: Detailed explanation
          example: Query parameter 'limit' must be between 1 and 100
        instance:
          type: string
          description: URI of the request/instance
          example: /items?limit=1000
  responses:
    NotFound:
      description: Item not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            notFound:
              value:
                type: https://bijux.dev/bijux-rar/docs/errors/not-found
                title: Not found
                status: 404
                detail: Item not found
                instance: /items/99
    NotAcceptable:
      description: Client must accept application/json
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            notAcceptable:
              value:
                type: https://bijux.dev/bijux-rar/docs/errors/not-acceptable
                title: Not Acceptable
                status: 406
                detail: 'Set ''Accept: application/json'' for this endpoint'
                instance: /items/1
    Gone:
      description: Item has been deleted (410)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            gone:
              value:
                type: https://bijux.dev/bijux-rar/docs/errors/gone
                title: Gone
                status: 410
                detail: Item deleted
                instance: /items/1
    Conflict:
      description: Conflict (e.g., duplicate name)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            conflict:
              value:
                type: https://bijux.dev/bijux-rar/docs/errors/conflict
                title: Conflict
                status: 409
                detail: Item with this name already exists
                instance: /items
    ValidationError:
      description: Unprocessable entity (validation failed)
      content:
        application/json:
          schema:
            type: object
            properties:
              detail:
                type: string
            required:
            - detail
          examples:
            validation:
              value:
                detail: invalid request
    ServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Problem'
          examples:
            serverError:
              value:
                type: https://bijux.dev/bijux-rar/docs/errors/internal-server-error
                title: Internal server error
                status: 500
                detail: An unexpected error occurred
                instance: /items
