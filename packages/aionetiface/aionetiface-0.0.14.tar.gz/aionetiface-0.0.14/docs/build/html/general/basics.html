<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic concepts &mdash; aionetiface 0.1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Pipes" href="pipes.html" />
    <link rel="prev" title="General networking" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            aionetiface
          </a>
              <div class="version">
                3.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">General networking</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Basic concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#protocol-design">Protocol design</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-about-udp">What about UDP?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pipes.html">Pipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="interfaces.html">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="queues.html">Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="daemons.html">Daemons</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../articles/index.html">Knowledge articles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../built/index.html">Feature showcase</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Development</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">aionetiface</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">General networking</a></li>
      <li class="breadcrumb-item active">Basic concepts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/general/basics.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-concepts">
<h1>Basic concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this heading"></a></h1>
<p>An OS’s network stack offers high-level features that are easier to work with than dealing with hardware directly.
If the developer uses TCP they don’t have to worry about things like bit
errors due to electrical interference, packet loss, and so on. But these
APIs aren’t as friendly as they might appear. One way
they can trip up newer engineers is the way they buffer data.</p>
<img alt="Diagram of TCP buffering" src="../_images/tcp_buffering.png" />
<p>Many people think that when you call send() it finishes
with dispatching the data. The reality is multiple send calls may
be joined together and arrive as one big blob. Theoretically, if you
wanted to send data with TCP each byte of the message might be transmitted
as an individual packet. And what about recv()? The OS also buffers received data.
So you might ask for as much data as you like but if it doesn’t exist or
isn’t optimal to send it – you’re not going to get it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<div class="line-block">
<div class="line">TCP data arrives in any number of pieces! TCP buffers send and recv calls.</div>
<div class="line">So there is no way to know when data is sent.</div>
<div class="line">This is what it means for TCP to be ‘stream orientated.’</div>
</div>
</div>
<section id="protocol-design">
<h2>Protocol design<a class="headerlink" href="#protocol-design" title="Permalink to this heading"></a></h2>
<p>Now, think about writing a TCP web server that properly respects how TCP works.
It ‘knows’ what a full HTTP request looks like because the request either
ends with ‘rnrn’ OR the client indicates they’re done sending.
The server will get some data from the client, look to see if it has a
full request to process, otherwise, it will keep checking until it does.
That would be a simple, delimiter-orientated protocol using markers to
signify where messages start and stop.</p>
<p>There are other ways to design protocols though. You could start with a fixed
header of known length. The header would then describe the length and what kind of
data is to follow. STUN uses this approach for messages because the messages
may contain attributes. For example: a STUN message may contain attributes like the
version and relay address.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>TCP callbacks in aionetiface may contain partial or buffered data!</p>
</div>
</section>
<section id="what-about-udp">
<h2>What about UDP?<a class="headerlink" href="#what-about-udp" title="Permalink to this heading"></a></h2>
<p>UDP is another way to transfer data. UDP doesn’t have the delivery guarantees of TCP
but it does have a feature that makes it less annoying: no buffering.
What this means is receivers for UDP data will receive messages exactly
as they were sent. Of course, data may be split up by the networking stack but
these details will be hidden so as to simulate unbroken messages.</p>
<p>The downside of using UDP is that messages may arrive in any order. Assuming
they arrive at all. This is because unlike UDP – a UDP message has no
acknowledgement and may be lost in transit. So most clients that work with UDP
have a simple loop that sends off packets and checks for a reply. The process
can be repeated until it succeeds or times out.</p>
<p>UDP is a very useful protocol and far from obscure. For instance – many
of the latest developments in network protocols are being built on UDP.
The connectionless nature of UDP allows broken connections to be easily resumed;
the lack of buffering reduces latency; and its message-orientated approach makes it
easier to use for developers.</p>
<p>Indeed: it seems that what developers really want from a networking API is
something that performs logically like UDP but with the ordered delivery guarantees
that made TCP famous. So if you want to know what the Internet looks like in the
future – look no further than UDP.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="General networking" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipes.html" class="btn btn-neutral float-right" title="Pipes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>