{"version":3,"file":"8817.d52f4303b98b1cdf.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-menu.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-select.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-condition.ts"],"sourcesContent":["import { MenuBase } from \"@material/mwc-menu/mwc-menu-base\";\nimport { styles } from \"@material/mwc-menu/mwc-menu.css\";\nimport { html } from \"lit\";\nimport { customElement } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport \"./ha-list\";\n\n@customElement(\"ha-menu\")\nexport class HaMenu extends MenuBase {\n  protected get listElement() {\n    if (!this.listElement_) {\n      this.listElement_ = this.renderRoot.querySelector(\"ha-list\");\n      return this.listElement_;\n    }\n\n    return this.listElement_;\n  }\n\n  protected renderList() {\n    const itemRoles = this.innerRole === \"menu\" ? \"menuitem\" : \"option\";\n    const classes = this.renderListClasses();\n\n    return html`<ha-list\n      rootTabbable\n      .innerAriaLabel=${this.innerAriaLabel}\n      .innerRole=${this.innerRole}\n      .multi=${this.multi}\n      class=${classMap(classes)}\n      .itemRoles=${itemRoles}\n      .wrapFocus=${this.wrapFocus}\n      .activatable=${this.activatable}\n      @action=${this.onAction}\n    >\n      <slot></slot>\n    </ha-list>`;\n  }\n\n  static styles = styles;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-menu\": HaMenu;\n  }\n}\n","import { SelectBase } from \"@material/mwc-select/mwc-select-base\";\nimport { styles } from \"@material/mwc-select/mwc-select.css\";\nimport { mdiClose } from \"@mdi/js\";\nimport { css, html, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { debounce } from \"../common/util/debounce\";\nimport { nextRender } from \"../common/util/render-status\";\nimport \"./ha-icon-button\";\nimport \"./ha-menu\";\n\n@customElement(\"ha-select\")\nexport class HaSelect extends SelectBase {\n  // @ts-ignore\n  @property({ type: Boolean }) public icon = false;\n\n  @property({ type: Boolean, reflect: true }) public clearable = false;\n\n  @property({ attribute: \"inline-arrow\", type: Boolean })\n  public inlineArrow = false;\n\n  @property() public options;\n\n  protected override render() {\n    return html`\n      ${super.render()}\n      ${this.clearable && !this.required && !this.disabled && this.value\n        ? html`<ha-icon-button\n            label=\"clear\"\n            @click=${this._clearValue}\n            .path=${mdiClose}\n          ></ha-icon-button>`\n        : nothing}\n    `;\n  }\n\n  protected override renderMenu() {\n    const classes = this.getMenuClasses();\n    return html`<ha-menu\n      innerRole=\"listbox\"\n      wrapFocus\n      class=${classMap(classes)}\n      activatable\n      .fullwidth=${this.fixedMenuPosition ? false : !this.naturalMenuWidth}\n      .open=${this.menuOpen}\n      .anchor=${this.anchorElement}\n      .fixed=${this.fixedMenuPosition}\n      @selected=${this.onSelected}\n      @opened=${this.onOpened}\n      @closed=${this.onClosed}\n      @items-updated=${this.onItemsUpdated}\n      @keydown=${this.handleTypeahead}\n    >\n      ${this.renderMenuContent()}\n    </ha-menu>`;\n  }\n\n  protected override renderLeadingIcon() {\n    if (!this.icon) {\n      return nothing;\n    }\n\n    return html`<span class=\"mdc-select__icon\"\n      ><slot name=\"icon\"></slot\n    ></span>`;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    window.addEventListener(\"translations-updated\", this._translationsUpdated);\n  }\n\n  protected async firstUpdated() {\n    super.firstUpdated();\n\n    if (this.inlineArrow) {\n      this.shadowRoot\n        ?.querySelector(\".mdc-select__selected-text-container\")\n        ?.classList.add(\"inline-arrow\");\n    }\n  }\n\n  protected updated(changedProperties) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has(\"inlineArrow\")) {\n      const textContainerElement = this.shadowRoot?.querySelector(\n        \".mdc-select__selected-text-container\"\n      );\n      if (this.inlineArrow) {\n        textContainerElement?.classList.add(\"inline-arrow\");\n      } else {\n        textContainerElement?.classList.remove(\"inline-arrow\");\n      }\n    }\n    if (changedProperties.get(\"options\")) {\n      this.layoutOptions();\n      this.selectByValue(this.value);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    window.removeEventListener(\n      \"translations-updated\",\n      this._translationsUpdated\n    );\n  }\n\n  private _clearValue(): void {\n    if (this.disabled || !this.value) {\n      return;\n    }\n    this.valueSetDirectly = true;\n    this.select(-1);\n    this.mdcFoundation.handleChange();\n  }\n\n  private _translationsUpdated = debounce(async () => {\n    await nextRender();\n    this.layoutOptions();\n  }, 500);\n\n  static override styles = [\n    styles,\n    css`\n      :host([clearable]) {\n        position: relative;\n      }\n      .mdc-select:not(.mdc-select--disabled) .mdc-select__icon {\n        color: var(--secondary-text-color);\n      }\n      .mdc-select__anchor {\n        width: var(--ha-select-min-width, 200px);\n      }\n      .mdc-select--filled .mdc-select__anchor {\n        height: var(--ha-select-height, 56px);\n      }\n      .mdc-select--filled .mdc-floating-label {\n        inset-inline-start: var(--ha-space-4);\n        inset-inline-end: initial;\n        direction: var(--direction);\n      }\n      .mdc-select--filled.mdc-select--with-leading-icon .mdc-floating-label {\n        inset-inline-start: 48px;\n        inset-inline-end: initial;\n        direction: var(--direction);\n      }\n      .mdc-select .mdc-select__anchor {\n        padding-inline-start: var(--ha-space-4);\n        padding-inline-end: 0px;\n        direction: var(--direction);\n      }\n      .mdc-select__anchor .mdc-floating-label--float-above {\n        transform-origin: var(--float-start);\n      }\n      .mdc-select__selected-text-container {\n        padding-inline-end: var(--select-selected-text-padding-end, 0px);\n      }\n      :host([clearable]) .mdc-select__selected-text-container {\n        padding-inline-end: var(\n          --select-selected-text-padding-end,\n          var(--ha-space-4)\n        );\n      }\n      ha-icon-button {\n        position: absolute;\n        top: 10px;\n        right: 28px;\n        --mdc-icon-button-size: 36px;\n        --mdc-icon-size: 20px;\n        color: var(--secondary-text-color);\n        inset-inline-start: initial;\n        inset-inline-end: 28px;\n        direction: var(--direction);\n      }\n      .inline-arrow {\n        flex-grow: 0;\n      }\n    `,\n  ];\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-select\": HaSelect;\n  }\n}\n","import { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport type { Condition } from \"../../data/automation\";\nimport type { ConditionSelector } from \"../../data/selector\";\nimport \"../../panels/config/automation/condition/ha-automation-condition\";\nimport type HaAutomationCondition from \"../../panels/config/automation/condition/ha-automation-condition\";\nimport type { HomeAssistant } from \"../../types\";\n\n@customElement(\"ha-selector-condition\")\nexport class HaConditionSelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  @property({ attribute: false }) public selector!: ConditionSelector;\n\n  @property({ attribute: false }) public value?: Condition;\n\n  @property() public label?: string;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @query(\"ha-automation-condition\")\n  private _conditionElement?: HaAutomationCondition;\n\n  protected render() {\n    return html`\n      ${this.label ? html`<label>${this.label}</label>` : nothing}\n      <ha-automation-condition\n        .disabled=${this.disabled}\n        .conditions=${this.value || []}\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .optionsInSidebar=${!!this.selector.condition?.optionsInSidebar}\n      ></ha-automation-condition>\n    `;\n  }\n\n  public expandAll() {\n    this._conditionElement?.expandAll();\n  }\n\n  public collapseAll() {\n    this._conditionElement?.collapseAll();\n  }\n\n  static styles = css`\n    ha-automation-condition {\n      display: block;\n      margin-bottom: 16px;\n    }\n    label {\n      display: block;\n      margin-bottom: 4px;\n      font-weight: var(--ha-font-weight-medium);\n      color: var(--secondary-text-color);\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-condition\": HaConditionSelector;\n  }\n}\n"],"names":["HaMenu","MenuBase","listElement","this","listElement_","renderRoot","querySelector","renderList","itemRoles","innerRole","classes","renderListClasses","html","innerAriaLabel","multi","classMap","wrapFocus","activatable","onAction","styles","HaSelect","SelectBase","render","clearable","required","disabled","value","_clearValue","nothing","renderMenu","getMenuClasses","fixedMenuPosition","naturalMenuWidth","menuOpen","anchorElement","onSelected","onOpened","onClosed","onItemsUpdated","handleTypeahead","renderMenuContent","renderLeadingIcon","icon","connectedCallback","super","window","addEventListener","_translationsUpdated","firstUpdated","inlineArrow","shadowRoot","classList","add","updated","changedProperties","has","textContainerElement","remove","get","layoutOptions","selectByValue","disconnectedCallback","removeEventListener","valueSetDirectly","select","mdcFoundation","handleChange","args","debounce","nextRender","css","type","Boolean","reflect","attribute","HaConditionSelector","LitElement","label","hass","narrow","selector","condition","optionsInSidebar","expandAll","_conditionElement","collapseAll"],"mappings":"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"}