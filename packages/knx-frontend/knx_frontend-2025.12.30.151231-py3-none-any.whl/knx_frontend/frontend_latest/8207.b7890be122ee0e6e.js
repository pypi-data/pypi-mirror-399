export const __webpack_id__="8207";export const __webpack_ids__=["8207"];export const __webpack_modules__={45336:function(e,t,a){a.d(t,{H:()=>y});const i=e=>e.normalize("NFD").replace(/[\u0300-\u036F]/g,"");var o=function(e){return e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.LineFeed=10]="LineFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.DoubleQuote=34]="DoubleQuote",e[e.Hash=35]="Hash",e[e.DollarSign=36]="DollarSign",e[e.PercentSign=37]="PercentSign",e[e.Ampersand=38]="Ampersand",e[e.SingleQuote=39]="SingleQuote",e[e.OpenParen=40]="OpenParen",e[e.CloseParen=41]="CloseParen",e[e.Asterisk=42]="Asterisk",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit1=49]="Digit1",e[e.Digit2=50]="Digit2",e[e.Digit3=51]="Digit3",e[e.Digit4=52]="Digit4",e[e.Digit5=53]="Digit5",e[e.Digit6=54]="Digit6",e[e.Digit7=55]="Digit7",e[e.Digit8=56]="Digit8",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.Semicolon=59]="Semicolon",e[e.LessThan=60]="LessThan",e[e.Equals=61]="Equals",e[e.GreaterThan=62]="GreaterThan",e[e.QuestionMark=63]="QuestionMark",e[e.AtSign=64]="AtSign",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.OpenSquareBracket=91]="OpenSquareBracket",e[e.Backslash=92]="Backslash",e[e.CloseSquareBracket=93]="CloseSquareBracket",e[e.Caret=94]="Caret",e[e.Underline=95]="Underline",e[e.BackTick=96]="BackTick",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace",e[e.Tilde=126]="Tilde",e}({});const s=128;function r(){const e=[],t=[];for(let a=0;a<=s;a++)t[a]=0;for(let a=0;a<=s;a++)e.push(t.slice(0));return e}function n(e,t){if(t<0||t>=e.length)return!1;const a=e.codePointAt(t);switch(a){case o.Underline:case o.Dash:case o.Period:case o.Space:case o.Slash:case o.Backslash:case o.SingleQuote:case o.DoubleQuote:case o.Colon:case o.DollarSign:case o.LessThan:case o.OpenParen:case o.OpenSquareBracket:return!0;case void 0:return!1;default:return(i=a)>=127462&&i<=127487||8986===i||8987===i||9200===i||9203===i||i>=9728&&i<=10175||11088===i||11093===i||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129003||i>=129280&&i<=129535||i>=129648&&i<=129750}var i}function l(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case o.Space:case o.Tab:return!0;default:return!1}}function d(e,t,a){return t[e]!==a[e]}function c(e,t,a,i,o,r,n){const l=e.length>s?s:e.length,c=i.length>s?s:i.length;if(a>=l||r>=c||l-a>c-r)return;if(!function(e,t,a,i,o,s,r=!1){for(;t<a&&o<s;)e[t]===i[o]&&(r&&(p[t]=o),t+=1),o+=1;return t===a}(t,a,l,o,r,c,!0))return;let m;!function(e,t,a,i,o,s){let r=e-1,n=t-1;for(;r>=a&&n>=i;)o[r]===s[n]&&(u[r]=n,r--),n--}(l,c,a,r,t,o);let y,b,f=1;const x=[!1];for(m=1,y=a;y<l;m++,y++){const s=p[y],n=u[y],d=y+1<l?u[y+1]:c;for(f=s-r+1,b=s;b<d;f++,b++){let l=Number.MIN_SAFE_INTEGER,d=!1;b<=n&&(l=h(e,t,y,a,i,o,b,c,r,0===v[m-1][f-1],x));let p=0;l!==Number.MAX_SAFE_INTEGER&&(d=!0,p=l+g[m-1][f-1]);const u=b>s,$=u?g[m][f-1]+(v[m][f-1]>0?-5:0):0,k=b>s+1&&v[m][f-1]>0,w=k?g[m][f-2]+(v[m][f-2]>0?-5:0):0;if(k&&(!u||w>=$)&&(!d||w>=p))g[m][f]=w,_[m][f]=3,v[m][f]=0;else if(u&&(!d||$>=p))g[m][f]=$,_[m][f]=2,v[m][f]=0;else{if(!d)throw new Error("not possible");g[m][f]=p,_[m][f]=1,v[m][f]=v[m-1][f-1]+1}}}if(!x[0]&&!n)return;m--,f--;const $=[g[m][f],r];let k=0,w=0;for(;m>=1;){let e=f;do{const t=_[m][e];if(3===t)e-=2;else{if(2!==t)break;e-=1}}while(e>=1);k>1&&t[a+m-1]===o[r+f-1]&&!d(e+r-1,i,o)&&k+1>v[m][e]&&(e=f),e===f?k++:k=1,w||(w=e),m--,f=e-1,$.push(f)}c===l&&($[0]+=2);const M=w-l;return $[0]-=M,$}function h(e,t,a,i,o,s,r,c,h,p,u){if(t[a]!==s[r])return Number.MIN_SAFE_INTEGER;let v=1,g=!1;return r===a-i?v=e[a]===o[r]?7:5:!d(r,o,s)||0!==r&&d(r-1,o,s)?!n(s,r)||0!==r&&n(s,r-1)?(n(s,r-1)||l(s,r-1))&&(v=5,g=!0):v=5:(v=e[a]===o[r]?7:5,g=!0),v>1&&a===i&&(u[0]=!0),g||(g=d(r,o,s)||n(s,r-1)||l(s,r-1)),a===i?r>h&&(v-=g?3:5):v+=p?g?2:0:g?0:1,r+1===c&&(v-=g?3:5),v}const p=m(256),u=m(256),v=r(),g=r(),_=r();function m(e){const t=[];for(let a=0;a<=e;a++)t[a]=0;return t}const y=(e,t)=>t.map((t=>(t.score=((e,t)=>{let a=Number.NEGATIVE_INFINITY;for(const o of t.strings){const t=c(e,i(e.toLowerCase()),0,o,i(o.toLowerCase()),0,!0);if(!t)continue;const s=0===t[0]?1:t[0];s>a&&(a=s)}if(a!==Number.NEGATIVE_INFINITY)return a})(e,t),t))).filter((e=>void 0!==e.score)).sort((({score:e=0},{score:t=0})=>e>t?-1:e<t?1:0))},95379:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845);class r extends o.WF{render(){return o.qy`
      ${this.header?o.qy`<h1 class="card-header">${this.header}</h1>`:o.s6}
      <slot></slot>
    `}constructor(...e){super(...e),this.raised=!1}}r.styles=o.AH`
    :host {
      background: var(
        --ha-card-background,
        var(--card-background-color, white)
      );
      -webkit-backdrop-filter: var(--ha-card-backdrop-filter, none);
      backdrop-filter: var(--ha-card-backdrop-filter, none);
      box-shadow: var(--ha-card-box-shadow, none);
      box-sizing: border-box;
      border-radius: var(--ha-card-border-radius, var(--ha-border-radius-lg));
      border-width: var(--ha-card-border-width, 1px);
      border-style: solid;
      border-color: var(--ha-card-border-color, var(--divider-color, #e0e0e0));
      color: var(--primary-text-color);
      display: block;
      transition: all 0.3s ease-out;
      position: relative;
    }

    :host([raised]) {
      border: none;
      box-shadow: var(
        --ha-card-box-shadow,
        0px 2px 1px -1px rgba(0, 0, 0, 0.2),
        0px 1px 1px 0px rgba(0, 0, 0, 0.14),
        0px 1px 3px 0px rgba(0, 0, 0, 0.12)
      );
    }

    .card-header,
    :host ::slotted(.card-header) {
      color: var(--ha-card-header-color, var(--primary-text-color));
      font-family: var(--ha-card-header-font-family, inherit);
      font-size: var(--ha-card-header-font-size, var(--ha-font-size-2xl));
      letter-spacing: -0.012em;
      line-height: var(--ha-line-height-expanded);
      padding: var(--ha-space-3) var(--ha-space-4) var(--ha-space-4);
      display: block;
      margin-block-start: var(--ha-space-0);
      margin-block-end: var(--ha-space-0);
      font-weight: var(--ha-font-weight-normal);
    }

    :host ::slotted(.card-content:not(:first-child)),
    slot:not(:first-child)::slotted(.card-content) {
      padding-top: var(--ha-space-0);
      margin-top: calc(var(--ha-space-2) * -1);
    }

    :host ::slotted(.card-content) {
      padding: var(--ha-space-4);
    }

    :host ::slotted(.card-actions) {
      border-top: 1px solid var(--divider-color, #e8e8e8);
      padding: var(--ha-space-2);
    }
  `,(0,i.__decorate)([(0,s.MZ)()],r.prototype,"header",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],r.prototype,"raised",void 0),r=(0,i.__decorate)([(0,s.EM)("ha-card")],r)},46757:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845),r=a(94333),n=a(32288),l=a(4937),d=a(92542);a(22598),a(60961);class c extends o.WF{_handleFocus(e){if(!this.disabled&&this.options&&e.target===e.currentTarget){const e=null!=this.value?this.options.findIndex((e=>e.value===this.value)):-1,t=-1!==e?e:0;this._focusOption(t)}}_focusOption(e){this._activeIndex=e,this.requestUpdate(),this.updateComplete.then((()=>{const t=this.shadowRoot?.querySelector(`#option-${this.options[e].value}`);t?.focus()}))}_handleBlur(e){this.contains(e.relatedTarget)||(this._activeIndex=void 0)}_handleKeydown(e){if(!this.options||this.disabled)return;let t=this._activeIndex??0;switch(e.key){case" ":case"Enter":if(null!=this._activeIndex){const e=this.options[this._activeIndex].value;this.value=e,(0,d.r)(this,"value-changed",{value:e})}break;case"ArrowUp":case"ArrowLeft":t=t<=0?this.options.length-1:t-1,this._focusOption(t);break;case"ArrowDown":case"ArrowRight":t=(t+1)%this.options.length,this._focusOption(t);break;default:return}e.preventDefault()}_handleOptionClick(e){if(this.disabled)return;const t=e.target.value;this.value=t,(0,d.r)(this,"value-changed",{value:t})}_handleOptionMouseDown(e){if(this.disabled)return;e.preventDefault();const t=e.target.value;this._activeIndex=this.options?.findIndex((e=>e.value===t))}_handleOptionMouseUp(e){e.preventDefault()}_handleOptionFocus(e){if(this.disabled)return;const t=e.target.value;this._activeIndex=this.options?.findIndex((e=>e.value===t))}render(){return o.qy`
      <div
        class="container"
        role="radiogroup"
        aria-label=${(0,n.J)(this.label)}
        @focus=${this._handleFocus}
        @blur=${this._handleBlur}
        @keydown=${this._handleKeydown}
        ?disabled=${this.disabled}
      >
        ${this.options?(0,l.u)(this.options,(e=>e.value),(e=>this._renderOption(e))):o.s6}
      </div>
    `}_renderOption(e){const t=this.value===e.value;return o.qy`
      <div
        id=${`option-${e.value}`}
        class=${(0,r.H)({option:!0,selected:t})}
        role="radio"
        tabindex=${t?"0":"-1"}
        .value=${e.value}
        aria-checked=${t?"true":"false"}
        aria-label=${(0,n.J)(e.label)}
        title=${(0,n.J)(e.label)}
        @click=${this._handleOptionClick}
        @focus=${this._handleOptionFocus}
        @mousedown=${this._handleOptionMouseDown}
        @mouseup=${this._handleOptionMouseUp}
      >
        <div class="content">
          ${e.path?o.qy`<ha-svg-icon .path=${e.path}></ha-svg-icon>`:e.icon||o.s6}
          ${e.label&&!this.hideOptionLabel?o.qy`<span>${e.label}</span>`:o.s6}
        </div>
      </div>
    `}constructor(...e){super(...e),this.disabled=!1,this.vertical=!1,this.hideOptionLabel=!1}}c.styles=o.AH`
    :host {
      display: block;
      --control-select-color: var(--primary-color);
      --control-select-focused-opacity: 0.2;
      --control-select-selected-opacity: 1;
      --control-select-background: var(--disabled-color);
      --control-select-background-opacity: 0.2;
      --control-select-thickness: 40px;
      --control-select-border-radius: 10px;
      --control-select-padding: 4px;
      --control-select-button-border-radius: calc(
        var(--control-select-border-radius) - var(--control-select-padding)
      );
      --mdc-icon-size: 20px;
      height: var(--control-select-thickness);
      width: 100%;
      font-style: normal;
      font-weight: var(--ha-font-weight-medium);
      color: var(--primary-text-color);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      border-radius: var(--control-select-border-radius);
    }
    :host([vertical]) {
      width: var(--control-select-thickness);
      height: 100%;
    }
    .container {
      position: relative;
      height: 100%;
      width: 100%;
      transform: translateZ(0);
      display: flex;
      flex-direction: row;
      padding: var(--control-select-padding);
      box-sizing: border-box;
      outline: none;
      transition: box-shadow 180ms ease-in-out;
    }
    .container::before {
      position: absolute;
      content: "";
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: var(--control-select-background);
      opacity: var(--control-select-background-opacity);
      border-radius: var(--control-select-border-radius);
    }

    .container > *:not(:last-child) {
      margin-right: var(--control-select-padding);
      margin-inline-end: var(--control-select-padding);
      margin-inline-start: initial;
      direction: var(--direction);
    }
    .container[disabled] {
      --control-select-color: var(--disabled-color);
      --control-select-focused-opacity: 0;
      color: var(--disabled-color);
    }

    .container[disabled] .option {
      cursor: not-allowed;
    }

    .option {
      cursor: pointer;
      position: relative;
      flex: 1;
      height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--control-select-button-border-radius);
      /* For safari border-radius overflow */
      z-index: 0;
      outline: none;
      transition: box-shadow 180ms ease-in-out;
    }
    .option:focus-visible {
      box-shadow: 0 0 0 2px var(--control-select-color);
    }
    .content > *:not(:last-child) {
      margin-bottom: 4px;
    }
    .option::before {
      position: absolute;
      content: "";
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background-color: var(--control-select-color);
      opacity: 0;
      border-radius: var(--control-select-button-border-radius);
      transition:
        background-color ease-in-out 180ms,
        opacity ease-in-out 80ms;
    }
    .option:hover::before {
      opacity: var(--control-select-focused-opacity);
    }
    .option.selected {
      color: white;
    }
    .option.selected::before {
      opacity: var(--control-select-selected-opacity);
    }
    .option .content {
      position: relative;
      pointer-events: none;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 2px;
      width: 100%;
      box-sizing: border-box;
    }
    .option .content span {
      display: block;
      width: 100%;
      -webkit-hyphens: auto;
      -moz-hyphens: auto;
      hyphens: auto;
    }
    :host([vertical]) {
      width: var(--control-select-thickness);
      height: auto;
    }
    :host([vertical]) .container {
      flex-direction: column;
    }
    :host([vertical]) .container > *:not(:last-child) {
      margin-right: initial;
      margin-inline-end: initial;
      margin-bottom: var(--control-select-padding);
    }
  `,(0,i.__decorate)([(0,s.MZ)({type:Boolean})],c.prototype,"disabled",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],c.prototype,"options",void 0),(0,i.__decorate)([(0,s.MZ)()],c.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],c.prototype,"vertical",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,attribute:"hide-option-label"})],c.prototype,"hideOptionLabel",void 0),(0,i.__decorate)([(0,s.MZ)({type:String})],c.prototype,"label",void 0),(0,i.__decorate)([(0,s.wk)()],c.prototype,"_activeIndex",void 0),c=(0,i.__decorate)([(0,s.EM)("ha-control-select")],c)},34811:function(e,t,a){a.d(t,{p:()=>d});var i=a(62826),o=a(96196),s=a(77845),r=a(94333),n=a(92542),l=a(99034);a(60961);class d extends o.WF{render(){const e=this.noCollapse?o.s6:o.qy`
          <ha-svg-icon
            .path=${"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"}
            class="summary-icon ${(0,r.H)({expanded:this.expanded})}"
          ></ha-svg-icon>
        `;return o.qy`
      <div class="top ${(0,r.H)({expanded:this.expanded})}">
        <div
          id="summary"
          class=${(0,r.H)({noCollapse:this.noCollapse})}
          @click=${this._toggleContainer}
          @keydown=${this._toggleContainer}
          @focus=${this._focusChanged}
          @blur=${this._focusChanged}
          role="button"
          tabindex=${this.noCollapse?-1:0}
          aria-expanded=${this.expanded}
          aria-controls="sect1"
          part="summary"
        >
          ${this.leftChevron?e:o.s6}
          <slot name="leading-icon"></slot>
          <slot name="header">
            <div class="header">
              ${this.header}
              <slot class="secondary" name="secondary">${this.secondary}</slot>
            </div>
          </slot>
          ${this.leftChevron?o.s6:e}
          <slot name="icons"></slot>
        </div>
      </div>
      <div
        class="container ${(0,r.H)({expanded:this.expanded})}"
        @transitionend=${this._handleTransitionEnd}
        role="region"
        aria-labelledby="summary"
        aria-hidden=${!this.expanded}
        tabindex="-1"
      >
        ${this._showContent?o.qy`<slot></slot>`:""}
      </div>
    `}willUpdate(e){super.willUpdate(e),e.has("expanded")&&(this._showContent=this.expanded,setTimeout((()=>{this._container.style.overflow=this.expanded?"initial":"hidden"}),300))}_handleTransitionEnd(){this._container.style.removeProperty("height"),this._container.style.overflow=this.expanded?"initial":"hidden",this._showContent=this.expanded}async _toggleContainer(e){if(e.defaultPrevented)return;if("keydown"===e.type&&"Enter"!==e.key&&" "!==e.key)return;if(e.preventDefault(),this.noCollapse)return;const t=!this.expanded;(0,n.r)(this,"expanded-will-change",{expanded:t}),this._container.style.overflow="hidden",t&&(this._showContent=!0,await(0,l.E)());const a=this._container.scrollHeight;this._container.style.height=`${a}px`,t||setTimeout((()=>{this._container.style.height="0px"}),0),this.expanded=t,(0,n.r)(this,"expanded-changed",{expanded:this.expanded})}_focusChanged(e){this.noCollapse||this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===e.type)}constructor(...e){super(...e),this.expanded=!1,this.outlined=!1,this.leftChevron=!1,this.noCollapse=!1,this._showContent=this.expanded}}d.styles=o.AH`
    :host {
      display: block;
    }

    .top {
      display: flex;
      align-items: center;
      border-radius: var(--ha-card-border-radius, var(--ha-border-radius-lg));
    }

    .top.expanded {
      border-bottom-left-radius: 0px;
      border-bottom-right-radius: 0px;
    }

    .top.focused {
      background: var(--input-fill-color);
    }

    :host([outlined]) {
      box-shadow: none;
      border-width: 1px;
      border-style: solid;
      border-color: var(--outline-color);
      border-radius: var(--ha-card-border-radius, var(--ha-border-radius-lg));
    }

    .summary-icon {
      transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
      direction: var(--direction);
      margin-left: 8px;
      margin-inline-start: 8px;
      margin-inline-end: initial;
      border-radius: var(--ha-border-radius-circle);
    }

    #summary:focus-visible ha-svg-icon.summary-icon {
      background-color: var(--ha-color-fill-neutral-normal-active);
    }

    :host([left-chevron]) .summary-icon,
    ::slotted([slot="leading-icon"]) {
      margin-left: 0;
      margin-right: 8px;
      margin-inline-start: 0;
      margin-inline-end: 8px;
    }

    #summary {
      flex: 1;
      display: flex;
      padding: var(--expansion-panel-summary-padding, 0 8px);
      min-height: 48px;
      align-items: center;
      cursor: pointer;
      overflow: hidden;
      font-weight: var(--ha-font-weight-medium);
      outline: none;
    }
    #summary.noCollapse {
      cursor: default;
    }

    .summary-icon.expanded {
      transform: rotate(180deg);
    }

    .header,
    ::slotted([slot="header"]) {
      flex: 1;
      overflow-wrap: anywhere;
      color: var(--primary-text-color);
    }

    .container {
      padding: var(--expansion-panel-content-padding, 0 8px);
      overflow: hidden;
      transition: height 300ms cubic-bezier(0.4, 0, 0.2, 1);
      height: 0px;
    }

    .container.expanded {
      height: auto;
    }

    .secondary {
      display: block;
      color: var(--secondary-text-color);
      font-size: var(--ha-font-size-s);
    }
  `,(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],d.prototype,"expanded",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],d.prototype,"outlined",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:"left-chevron",type:Boolean,reflect:!0})],d.prototype,"leftChevron",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:"no-collapse",type:Boolean,reflect:!0})],d.prototype,"noCollapse",void 0),(0,i.__decorate)([(0,s.MZ)()],d.prototype,"header",void 0),(0,i.__decorate)([(0,s.MZ)()],d.prototype,"secondary",void 0),(0,i.__decorate)([(0,s.wk)()],d.prototype,"_showContent",void 0),(0,i.__decorate)([(0,s.P)(".container")],d.prototype,"_container",void 0),d=(0,i.__decorate)([(0,s.EM)("ha-expansion-panel")],d)},70748:function(e,t,a){var i=a(62826),o=a(51978),s=a(94743),r=a(77845),n=a(96196),l=a(76679);class d extends o.n{firstUpdated(e){super.firstUpdated(e),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}d.styles=[s.R,n.AH`
      :host {
        --mdc-typography-button-text-transform: none;
        --mdc-typography-button-font-size: var(--ha-font-size-l);
        --mdc-typography-button-font-family: var(--ha-font-family-body);
        --mdc-typography-button-font-weight: var(--ha-font-weight-medium);
      }
      :host .mdc-fab--extended {
        border-radius: var(
          --ha-button-border-radius,
          var(--ha-border-radius-pill)
        );
      }
      :host .mdc-fab.mdc-fab--extended .ripple {
        border-radius: var(
          --ha-button-border-radius,
          var(--ha-border-radius-pill)
        );
      }
      :host .mdc-fab--extended .mdc-fab__icon {
        margin-inline-start: -8px;
        margin-inline-end: 12px;
        direction: var(--direction);
      }
      :disabled {
        --mdc-theme-secondary: var(--disabled-text-color);
        pointer-events: none;
      }
    `,"rtl"===l.G.document.dir?n.AH`
          :host .mdc-fab--extended .mdc-fab__icon {
            direction: rtl;
          }
        `:n.AH``],d=(0,i.__decorate)([(0,r.EM)("ha-fab")],d)},28608:function(e,t,a){a.r(t),a.d(t,{HaIconNext:()=>n});var i=a(62826),o=a(77845),s=a(76679),r=a(60961);class n extends r.HaSvgIcon{constructor(...e){super(...e),this.path="rtl"===s.G.document.dir?"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z":"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}}(0,i.__decorate)([(0,o.MZ)()],n.prototype,"path",void 0),n=(0,i.__decorate)([(0,o.EM)("ha-icon-next")],n)},23897:function(e,t,a){a.d(t,{G:()=>d,J:()=>l});var i=a(62826),o=a(97154),s=a(82553),r=a(96196),n=a(77845);a(95591);const l=[s.R,r.AH`
    :host {
      --ha-icon-display: block;
      --md-sys-color-primary: var(--primary-text-color);
      --md-sys-color-secondary: var(--secondary-text-color);
      --md-sys-color-surface: var(--card-background-color);
      --md-sys-color-on-surface: var(--primary-text-color);
      --md-sys-color-on-surface-variant: var(--secondary-text-color);
    }
    md-item {
      overflow: var(--md-item-overflow, hidden);
      align-items: var(--md-item-align-items, center);
      gap: var(--ha-md-list-item-gap, 16px);
    }
  `];class d extends o.n{renderRipple(){return"text"===this.type?r.s6:r.qy`<ha-ripple
      part="ripple"
      for="item"
      ?disabled=${this.disabled&&"link"!==this.type}
    ></ha-ripple>`}}d.styles=l,d=(0,i.__decorate)([(0,n.EM)("ha-md-list-item")],d)},42921:function(e,t,a){var i=a(62826),o=a(49838),s=a(11245),r=a(96196),n=a(77845);class l extends o.B{}l.styles=[s.R,r.AH`
      :host {
        --md-sys-color-surface: var(--card-background-color);
      }
    `],l=(0,i.__decorate)([(0,n.EM)("ha-md-list")],l)},9316:function(e,t,a){a.a(e,(async function(e,t){try{var i=a(62826),o=a(96196),s=a(77845),r=a(92542),n=a(39396),l=a(89473),d=(a(60733),a(56768),a(78740),e([l]));l=(d.then?(await d)():d)[0];const c="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",h="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class p extends o.WF{render(){return o.qy`
      ${this._items.map(((e,t)=>{const a=""+(this.itemIndex?` ${t+1}`:"");return o.qy`
          <div class="layout horizontal center-center row">
            <ha-textfield
              .suffix=${this.inputSuffix}
              .prefix=${this.inputPrefix}
              .type=${this.inputType}
              .autocomplete=${this.autocomplete}
              .disabled=${this.disabled}
              dialogInitialFocus=${t}
              .index=${t}
              class="flex-auto"
              .label=${""+(this.label?`${this.label}${a}`:"")}
              .value=${e}
              ?data-last=${t===this._items.length-1}
              @input=${this._editItem}
              @keydown=${this._keyDown}
            ></ha-textfield>
            <ha-icon-button
              .disabled=${this.disabled}
              .index=${t}
              slot="navigationIcon"
              .label=${this.removeLabel??this.hass?.localize("ui.common.remove")??"Remove"}
              @click=${this._removeItem}
              .path=${c}
            ></ha-icon-button>
          </div>
        `}))}
      <div class="layout horizontal">
        <ha-button
          size="small"
          appearance="filled"
          @click=${this._addItem}
          .disabled=${this.disabled}
        >
          <ha-svg-icon slot="start" .path=${h}></ha-svg-icon>
          ${this.addLabel??(this.label?this.hass?.localize("ui.components.multi-textfield.add_item",{item:this.label}):this.hass?.localize("ui.common.add"))??"Add"}
        </ha-button>
      </div>
      ${this.helper?o.qy`<ha-input-helper-text .disabled=${this.disabled}
            >${this.helper}</ha-input-helper-text
          >`:o.s6}
    `}get _items(){return this.value??[]}async _addItem(){const e=[...this._items,""];this._fireChanged(e),await this.updateComplete;const t=this.shadowRoot?.querySelector("ha-textfield[data-last]");t?.focus()}async _editItem(e){const t=e.target.index,a=[...this._items];a[t]=e.target.value,this._fireChanged(a)}async _keyDown(e){"Enter"===e.key&&(e.stopPropagation(),this._addItem())}async _removeItem(e){const t=e.target.index,a=[...this._items];a.splice(t,1),this._fireChanged(a)}_fireChanged(e){this.value=e,(0,r.r)(this,"value-changed",{value:e})}static get styles(){return[n.RF,o.AH`
        .row {
          margin-bottom: 8px;
        }
        ha-textfield {
          display: block;
        }
        ha-icon-button {
          display: block;
        }
      `]}constructor(...e){super(...e),this.disabled=!1,this.itemIndex=!1}}(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],p.prototype,"disabled",void 0),(0,i.__decorate)([(0,s.MZ)()],p.prototype,"label",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"helper",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"inputType",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"inputSuffix",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"inputPrefix",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"autocomplete",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"addLabel",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"removeLabel",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:"item-index",type:Boolean})],p.prototype,"itemIndex",void 0),p=(0,i.__decorate)([(0,s.EM)("ha-multi-textfield")],p),t()}catch(c){t(c)}}))},65300:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845),r=a(32288);a(28608),a(42921),a(23897),a(60961);class n extends o.WF{render(){return o.qy`
      <ha-md-list
        innerRole="menu"
        itemRoles="menuitem"
        innerAriaLabel=${(0,r.J)(this.label)}
      >
        ${this.pages.map((e=>{const t=e.path.endsWith("#external-app-configuration");return o.qy`
            <ha-md-list-item
              .type=${t?"button":"link"}
              .href=${t?void 0:e.path}
              @click=${t?this._handleExternalApp:void 0}
            >
              <div
                slot="start"
                class=${e.iconColor?"icon-background":""}
                .style="background-color: ${e.iconColor||"undefined"}"
              >
                <ha-svg-icon .path=${e.iconPath}></ha-svg-icon>
              </div>
              <span slot="headline">${e.name}</span>
              ${this.hasSecondary?o.qy`<span slot="supporting-text">${e.description}</span>`:""}
              ${this.narrow?"":o.qy`<ha-icon-next slot="end"></ha-icon-next>`}
            </ha-md-list-item>
          `}))}
      </ha-md-list>
    `}_handleExternalApp(){this.hass.auth.external.fireMessage({type:"config_screen/show"})}constructor(...e){super(...e),this.narrow=!1,this.hasSecondary=!1}}n.styles=o.AH`
    ha-svg-icon,
    ha-icon-next {
      color: var(--secondary-text-color);
      height: 24px;
      width: 24px;
      display: block;
    }
    ha-svg-icon {
      padding: 8px;
    }
    .icon-background {
      border-radius: var(--ha-border-radius-circle);
    }
    .icon-background ha-svg-icon {
      color: #fff;
    }
    ha-md-list-item {
      font-size: var(--navigation-list-item-title-font-size);
    }
  `,(0,i.__decorate)([(0,s.MZ)({attribute:!1})],n.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],n.prototype,"narrow",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],n.prototype,"pages",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:"has-secondary",type:Boolean})],n.prototype,"hasSecondary",void 0),(0,i.__decorate)([(0,s.MZ)()],n.prototype,"label",void 0),n=(0,i.__decorate)([(0,s.EM)("ha-navigation-list")],n)},95096:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t),a.d(t,{HaNumberSelector:()=>h});var o=a(62826),s=a(96196),r=a(77845),n=a(94333),l=a(92542),d=(a(56768),a(60808)),c=(a(78740),e([d]));d=(c.then?(await c)():c)[0];class h extends s.WF{willUpdate(e){e.has("value")&&(""!==this._valueStr&&this.value===Number(this._valueStr)||(this._valueStr=null==this.value||isNaN(this.value)?"":this.value.toString()))}render(){const e="box"===this.selector.number?.mode||void 0===this.selector.number?.min||void 0===this.selector.number?.max;let t;if(!e&&(t=this.selector.number.step??1,"any"===t)){t=1;const e=(this.selector.number.max-this.selector.number.min)/100;for(;t>e;)t/=10}const a=this.selector.number?.translation_key;let i=this.selector.number?.unit_of_measurement;return e&&i&&this.localizeValue&&a&&(i=this.localizeValue(`${a}.unit_of_measurement.${i}`)||i),s.qy`
      ${this.label&&!e?s.qy`${this.label}${this.required?"*":""}`:s.s6}
      <div class="input">
        ${e?s.s6:s.qy`
              <ha-slider
                labeled
                .min=${this.selector.number.min}
                .max=${this.selector.number.max}
                .value=${this.value}
                .step=${t}
                .disabled=${this.disabled}
                .required=${this.required}
                @change=${this._handleSliderChange}
                .withMarkers=${this.selector.number?.slider_ticks||!1}
              >
              </ha-slider>
            `}
        <ha-textfield
          .inputMode=${"any"===this.selector.number?.step||(this.selector.number?.step??1)%1!=0?"decimal":"numeric"}
          .label=${e?this.label:void 0}
          .placeholder=${this.placeholder}
          class=${(0,n.H)({single:e})}
          .min=${this.selector.number?.min}
          .max=${this.selector.number?.max}
          .value=${this._valueStr??""}
          .step=${this.selector.number?.step??1}
          helperPersistent
          .helper=${e?this.helper:void 0}
          .disabled=${this.disabled}
          .required=${this.required}
          .suffix=${i}
          type="number"
          autoValidate
          ?no-spinner=${!e}
          @input=${this._handleInputChange}
        >
        </ha-textfield>
      </div>
      ${!e&&this.helper?s.qy`<ha-input-helper-text .disabled=${this.disabled}
            >${this.helper}</ha-input-helper-text
          >`:s.s6}
    `}_handleInputChange(e){e.stopPropagation(),this._valueStr=e.target.value;const t=""===e.target.value||isNaN(e.target.value)?void 0:Number(e.target.value);this.value!==t&&(0,l.r)(this,"value-changed",{value:t})}_handleSliderChange(e){e.stopPropagation();const t=Number(e.target.value);this.value!==t&&(0,l.r)(this,"value-changed",{value:t})}constructor(...e){super(...e),this.required=!0,this.disabled=!1,this._valueStr=""}}h.styles=s.AH`
    .input {
      display: flex;
      justify-content: space-between;
      align-items: center;
      direction: ltr;
    }
    ha-slider {
      flex: 1;
      margin-right: 16px;
      margin-inline-end: 16px;
      margin-inline-start: 0;
    }
    ha-textfield {
      --ha-textfield-input-width: 40px;
    }
    .single {
      --ha-textfield-input-width: unset;
      flex: 1;
    }
  `,(0,o.__decorate)([(0,r.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],h.prototype,"selector",void 0),(0,o.__decorate)([(0,r.MZ)({type:Number})],h.prototype,"value",void 0),(0,o.__decorate)([(0,r.MZ)({type:Number})],h.prototype,"placeholder",void 0),(0,o.__decorate)([(0,r.MZ)()],h.prototype,"label",void 0),(0,o.__decorate)([(0,r.MZ)()],h.prototype,"helper",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],h.prototype,"localizeValue",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],h.prototype,"required",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],h.prototype,"disabled",void 0),h=(0,o.__decorate)([(0,r.EM)("ha-selector-number")],h),i()}catch(h){i(h)}}))},81774:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t),a.d(t,{HaTextSelector:()=>u});var o=a(62826),s=a(96196),r=a(77845),n=a(55376),l=a(92542),d=(a(60733),a(9316)),c=(a(67591),a(78740),e([d]));d=(c.then?(await c)():c)[0];const h="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",p="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z";class u extends s.WF{async focus(){await this.updateComplete,this.renderRoot.querySelector("ha-textarea, ha-textfield")?.focus()}render(){return this.selector.text?.multiple?s.qy`
        <ha-multi-textfield
          .hass=${this.hass}
          .value=${(0,n.e)(this.value??[])}
          .disabled=${this.disabled}
          .label=${this.label}
          .inputType=${this.selector.text?.type}
          .inputSuffix=${this.selector.text?.suffix}
          .inputPrefix=${this.selector.text?.prefix}
          .helper=${this.helper}
          .autocomplete=${this.selector.text?.autocomplete}
          @value-changed=${this._handleChange}
        >
        </ha-multi-textfield>
      `:this.selector.text?.multiline?s.qy`<ha-textarea
        .name=${this.name}
        .label=${this.label}
        .placeholder=${this.placeholder}
        .value=${this.value||""}
        .helper=${this.helper}
        helperPersistent
        .disabled=${this.disabled}
        @input=${this._handleChange}
        autocapitalize="none"
        .autocomplete=${this.selector.text?.autocomplete}
        spellcheck="false"
        .required=${this.required}
        autogrow
      ></ha-textarea>`:s.qy`<ha-textfield
        .name=${this.name}
        .value=${this.value||""}
        .placeholder=${this.placeholder||""}
        .helper=${this.helper}
        helperPersistent
        .disabled=${this.disabled}
        .type=${this._unmaskedPassword?"text":this.selector.text?.type}
        @input=${this._handleChange}
        @change=${this._handleChange}
        .label=${this.label||""}
        .prefix=${this.selector.text?.prefix}
        .suffix=${"password"===this.selector.text?.type?s.qy`<div style="width: 24px"></div>`:this.selector.text?.suffix}
        .required=${this.required}
        .autocomplete=${this.selector.text?.autocomplete}
      ></ha-textfield>
      ${"password"===this.selector.text?.type?s.qy`<ha-icon-button
            .label=${this.hass?.localize(this._unmaskedPassword?"ui.components.selectors.text.hide_password":"ui.components.selectors.text.show_password")||(this._unmaskedPassword?"Hide password":"Show password")}
            @click=${this._toggleUnmaskedPassword}
            .path=${this._unmaskedPassword?p:h}
          ></ha-icon-button>`:""}`}_toggleUnmaskedPassword(){this._unmaskedPassword=!this._unmaskedPassword}_handleChange(e){e.stopPropagation();let t=e.detail?.value??e.target.value;this.value!==t&&((""===t||Array.isArray(t)&&0===t.length)&&!this.required&&(t=void 0),(0,l.r)(this,"value-changed",{value:t}))}constructor(...e){super(...e),this.disabled=!1,this.required=!0,this._unmaskedPassword=!1}}u.styles=s.AH`
    :host {
      display: block;
      position: relative;
    }
    ha-textarea,
    ha-textfield {
      width: 100%;
    }
    ha-icon-button {
      position: absolute;
      top: 8px;
      right: 8px;
      inset-inline-start: initial;
      inset-inline-end: 8px;
      --mdc-icon-button-size: 40px;
      --mdc-icon-size: 20px;
      color: var(--secondary-text-color);
      direction: var(--direction);
    }
  `,(0,o.__decorate)([(0,r.MZ)({attribute:!1})],u.prototype,"hass",void 0),(0,o.__decorate)([(0,r.MZ)()],u.prototype,"value",void 0),(0,o.__decorate)([(0,r.MZ)()],u.prototype,"name",void 0),(0,o.__decorate)([(0,r.MZ)()],u.prototype,"label",void 0),(0,o.__decorate)([(0,r.MZ)()],u.prototype,"placeholder",void 0),(0,o.__decorate)([(0,r.MZ)()],u.prototype,"helper",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],u.prototype,"selector",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],u.prototype,"disabled",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],u.prototype,"required",void 0),(0,o.__decorate)([(0,r.wk)()],u.prototype,"_unmaskedPassword",void 0),u=(0,o.__decorate)([(0,r.EM)("ha-selector-text")],u),i()}catch(h){i(h)}}))},2809:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845);class r extends o.WF{render(){return o.qy`
      <div class="prefix-wrap">
        <slot name="prefix"></slot>
        <div
          class="body"
          ?two-line=${!this.threeLine}
          ?three-line=${this.threeLine}
        >
          <slot name="heading"></slot>
          <div class="secondary"><slot name="description"></slot></div>
        </div>
      </div>
      <div class="content"><slot></slot></div>
    `}constructor(...e){super(...e),this.narrow=!1,this.slim=!1,this.threeLine=!1,this.wrapHeading=!1}}r.styles=o.AH`
    :host {
      display: flex;
      padding: 0 16px;
      align-content: normal;
      align-self: auto;
      align-items: center;
    }
    .body {
      padding-top: 8px;
      padding-bottom: 8px;
      padding-left: 0;
      padding-inline-start: 0;
      padding-right: 16px;
      padding-inline-end: 16px;
      overflow: hidden;
      display: var(--layout-vertical_-_display, flex);
      flex-direction: var(--layout-vertical_-_flex-direction, column);
      justify-content: var(--layout-center-justified_-_justify-content, center);
      flex: var(--layout-flex_-_flex, 1);
      flex-basis: var(--layout-flex_-_flex-basis, 0.000000001px);
    }
    .body[three-line] {
      min-height: 88px;
    }
    :host(:not([wrap-heading])) body > * {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .body > .secondary {
      display: block;
      padding-top: 4px;
      font-family: var(
        --mdc-typography-body2-font-family,
        var(--mdc-typography-font-family, var(--ha-font-family-body))
      );
      font-size: var(--mdc-typography-body2-font-size, var(--ha-font-size-s));
      -webkit-font-smoothing: var(--ha-font-smoothing);
      -moz-osx-font-smoothing: var(--ha-moz-osx-font-smoothing);
      font-weight: var(
        --mdc-typography-body2-font-weight,
        var(--ha-font-weight-normal)
      );
      line-height: normal;
      color: var(--secondary-text-color);
    }
    .body[two-line] {
      min-height: calc(72px - 16px);
      flex: 1;
    }
    .content {
      display: contents;
    }
    :host(:not([narrow])) .content {
      display: var(--settings-row-content-display, flex);
      justify-content: flex-end;
      flex: 1;
      min-width: 0;
      padding: 16px 0;
    }
    .content ::slotted(*) {
      width: var(--settings-row-content-width);
    }
    :host([narrow]) {
      align-items: normal;
      flex-direction: column;
      border-top: 1px solid var(--divider-color);
      padding-bottom: 8px;
    }
    ::slotted(ha-switch) {
      padding: 16px 0;
    }
    .secondary {
      white-space: normal;
    }
    .prefix-wrap {
      display: var(--settings-row-prefix-display);
    }
    :host([narrow]) .prefix-wrap {
      display: flex;
      align-items: center;
    }
    :host([slim]),
    :host([slim]) .content,
    :host([slim]) ::slotted(ha-switch) {
      padding: 0;
    }
    :host([slim]) .body {
      min-height: 0;
    }
  `,(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],r.prototype,"narrow",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],r.prototype,"slim",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,attribute:"three-line"})],r.prototype,"threeLine",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,attribute:"wrap-heading",reflect:!0})],r.prototype,"wrapHeading",void 0),r=(0,i.__decorate)([(0,s.EM)("ha-settings-row")],r)},60808:function(e,t,a){a.a(e,(async function(e,t){try{var i=a(62826),o=a(60346),s=a(96196),r=a(77845),n=a(76679),l=e([o]);o=(l.then?(await l)():l)[0];class d extends o.A{connectedCallback(){super.connectedCallback(),this.dir=n.G.document.dir}static get styles(){return[o.A.styles,s.AH`
        :host {
          --track-size: var(--ha-slider-track-size, 4px);
          --marker-height: calc(var(--ha-slider-track-size, 4px) / 2);
          --marker-width: calc(var(--ha-slider-track-size, 4px) / 2);
          --wa-color-surface-default: var(--card-background-color);
          --wa-color-neutral-fill-normal: var(--disabled-color);
          --wa-tooltip-background-color: var(--secondary-background-color);
          --wa-tooltip-color: var(--primary-text-color);
          --wa-tooltip-font-family: var(
            --ha-tooltip-font-family,
            var(--ha-font-family-body)
          );
          --wa-tooltip-font-size: var(
            --ha-tooltip-font-size,
            var(--ha-font-size-s)
          );
          --wa-tooltip-font-weight: var(
            --ha-tooltip-font-weight,
            var(--ha-font-weight-normal)
          );
          --wa-tooltip-line-height: var(
            --ha-tooltip-line-height,
            var(--ha-line-height-condensed)
          );
          --wa-tooltip-padding: 8px;
          --wa-tooltip-border-radius: var(
            --ha-tooltip-border-radius,
            var(--ha-border-radius-sm)
          );
          --wa-tooltip-arrow-size: var(--ha-tooltip-arrow-size, 8px);
          --wa-z-index-tooltip: var(--ha-tooltip-z-index, 1000);
          min-width: 100px;
          min-inline-size: 100px;
          width: 200px;
        }

        #thumb {
          border: none;
          background-color: var(--ha-slider-thumb-color, var(--primary-color));
        }

        #thumb:after {
          content: "";
          border-radius: 50%;
          position: absolute;
          width: calc(var(--thumb-width) * 2 + 8px);
          height: calc(var(--thumb-height) * 2 + 8px);
          left: calc(-50% - 4px);
          top: calc(-50% - 4px);
          cursor: pointer;
        }

        #slider:focus-visible:not(.disabled) #thumb,
        #slider:focus-visible:not(.disabled) #thumb-min,
        #slider:focus-visible:not(.disabled) #thumb-max {
          outline: var(--wa-focus-ring);
        }

        #track:after {
          content: "";
          position: absolute;
          top: calc(-50% - 4px);
          left: 0;
          width: 100%;
          height: calc(var(--track-size) * 2 + 8px);
          cursor: pointer;
        }

        #indicator {
          background-color: var(
            --ha-slider-indicator-color,
            var(--primary-color)
          );
        }

        :host([size="medium"]) {
          --thumb-width: 20px;
          --thumb-height: 20px;
        }

        :host([size="small"]) {
          --thumb-width: 16px;
          --thumb-height: 16px;
        }
      `]}constructor(...e){super(...e),this.size="small",this.withTooltip=!0}}(0,i.__decorate)([(0,r.MZ)({reflect:!0})],d.prototype,"size",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean,attribute:"with-tooltip"})],d.prototype,"withTooltip",void 0),d=(0,i.__decorate)([(0,r.EM)("ha-slider")],d),t()}catch(d){t(d)}}))},7153:function(e,t,a){var i=a(62826),o=a(4845),s=a(49065),r=a(96196),n=a(77845),l=a(7647);class d extends o.U{firstUpdated(){super.firstUpdated(),this.addEventListener("change",(()=>{this.haptic&&(0,l.j)(this,"light")}))}constructor(...e){super(...e),this.haptic=!1}}d.styles=[s.R,r.AH`
      :host {
        --mdc-theme-secondary: var(--switch-checked-color);
      }
      .mdc-switch.mdc-switch--checked .mdc-switch__thumb {
        background-color: var(--switch-checked-button-color);
        border-color: var(--switch-checked-button-color);
      }
      .mdc-switch.mdc-switch--checked .mdc-switch__track {
        background-color: var(--switch-checked-track-color);
        border-color: var(--switch-checked-track-color);
      }
      .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {
        background-color: var(--switch-unchecked-button-color);
        border-color: var(--switch-unchecked-button-color);
      }
      .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {
        background-color: var(--switch-unchecked-track-color);
        border-color: var(--switch-unchecked-track-color);
      }
    `],(0,i.__decorate)([(0,n.MZ)({type:Boolean})],d.prototype,"haptic",void 0),d=(0,i.__decorate)([(0,n.EM)("ha-switch")],d)},67591:function(e,t,a){var i=a(62826),o=a(11896),s=a(92347),r=a(75057),n=a(96196),l=a(77845);class d extends o.u{updated(e){super.updated(e),this.autogrow&&e.has("value")&&(this.mdcRoot.dataset.value=this.value+'=â€‹"')}constructor(...e){super(...e),this.autogrow=!1}}d.styles=[s.R,r.R,n.AH`
      :host([autogrow]) .mdc-text-field {
        position: relative;
        min-height: 74px;
        min-width: 178px;
        max-height: 200px;
      }
      :host([autogrow]) .mdc-text-field:after {
        content: attr(data-value);
        margin-top: 23px;
        margin-bottom: 9px;
        line-height: var(--ha-line-height-normal);
        min-height: 42px;
        padding: 0px 32px 0 16px;
        letter-spacing: var(
          --mdc-typography-subtitle1-letter-spacing,
          0.009375em
        );
        visibility: hidden;
        white-space: pre-wrap;
      }
      :host([autogrow]) .mdc-text-field__input {
        position: absolute;
        height: calc(100% - 32px);
      }
      :host([autogrow]) .mdc-text-field.mdc-text-field--no-label:after {
        margin-top: 16px;
        margin-bottom: 16px;
      }
      .mdc-floating-label {
        inset-inline-start: 16px !important;
        inset-inline-end: initial !important;
        transform-origin: var(--float-start) top;
      }
      @media only screen and (min-width: 459px) {
        :host([mobile-multiline]) .mdc-text-field__input {
          white-space: nowrap;
          max-height: 16px;
        }
      }
    `],(0,i.__decorate)([(0,l.MZ)({type:Boolean,reflect:!0})],d.prototype,"autogrow",void 0),d=(0,i.__decorate)([(0,l.EM)("ha-textarea")],d)},7647:function(e,t,a){a.d(t,{j:()=>o});var i=a(92542);const o=(e,t)=>{(0,i.r)(e,"haptic",t)}},84125:function(e,t,a){a.d(t,{QC:()=>s,fK:()=>o,p$:()=>i});const i=(e,t,a)=>e(`component.${t}.title`)||a?.name||t,o=(e,t)=>{const a={type:"manifest/list"};return t&&(a.integrations=t),e.callWS(a)},s=(e,t)=>e.callWS({type:"manifest/get",integration:t})},54393:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t);var o=a(62826),s=a(96196),r=a(77845),n=a(5871),l=a(89600),d=(a(371),a(45397),a(39396)),c=e([l]);l=(c.then?(await c)():c)[0];class h extends s.WF{render(){return s.qy`
      ${this.noToolbar?"":s.qy`<div class="toolbar">
            ${this.rootnav||history.state?.root?s.qy`
                  <ha-menu-button
                    .hass=${this.hass}
                    .narrow=${this.narrow}
                  ></ha-menu-button>
                `:s.qy`
                  <ha-icon-button-arrow-prev
                    .hass=${this.hass}
                    @click=${this._handleBack}
                  ></ha-icon-button-arrow-prev>
                `}
          </div>`}
      <div class="content">
        <ha-spinner></ha-spinner>
        ${this.message?s.qy`<div id="loading-text">${this.message}</div>`:s.s6}
      </div>
    `}_handleBack(){(0,n.O)()}static get styles(){return[d.RF,s.AH`
        :host {
          display: block;
          height: 100%;
          background-color: var(--primary-background-color);
        }
        .toolbar {
          display: flex;
          align-items: center;
          font-size: var(--ha-font-size-xl);
          height: var(--header-height);
          padding: 8px 12px;
          pointer-events: none;
          background-color: var(--app-header-background-color);
          font-weight: var(--ha-font-weight-normal);
          color: var(--app-header-text-color, white);
          border-bottom: var(--app-header-border-bottom, none);
          box-sizing: border-box;
        }
        @media (max-width: 599px) {
          .toolbar {
            padding: 4px;
          }
        }
        ha-menu-button,
        ha-icon-button-arrow-prev {
          pointer-events: auto;
        }
        .content {
          height: calc(100% - var(--header-height));
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
        }
        #loading-text {
          max-width: 350px;
          margin-top: 16px;
        }
      `]}constructor(...e){super(...e),this.noToolbar=!1,this.rootnav=!1,this.narrow=!1}}(0,o.__decorate)([(0,r.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean,attribute:"no-toolbar"})],h.prototype,"noToolbar",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],h.prototype,"rootnav",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean})],h.prototype,"narrow",void 0),(0,o.__decorate)([(0,r.MZ)()],h.prototype,"message",void 0),h=(0,o.__decorate)([(0,r.EM)("hass-loading-screen")],h),i()}catch(h){i(h)}}))},29937:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845),r=a(39501),n=a(5871),l=(a(371),a(45397),a(39396));class d extends o.WF{render(){return o.qy`
      <div class="toolbar">
        <div class="toolbar-content">
          ${this.mainPage||history.state?.root?o.qy`
                <ha-menu-button
                  .hassio=${this.supervisor}
                  .hass=${this.hass}
                  .narrow=${this.narrow}
                ></ha-menu-button>
              `:this.backPath?o.qy`
                  <a href=${this.backPath}>
                    <ha-icon-button-arrow-prev
                      .hass=${this.hass}
                    ></ha-icon-button-arrow-prev>
                  </a>
                `:o.qy`
                  <ha-icon-button-arrow-prev
                    .hass=${this.hass}
                    @click=${this._backTapped}
                  ></ha-icon-button-arrow-prev>
                `}

          <div class="main-title">
            <slot name="header">${this.header}</slot>
          </div>
          <slot name="toolbar-icon"></slot>
        </div>
      </div>
      <div class="content ha-scrollbar" @scroll=${this._saveScrollPos}>
        <slot></slot>
      </div>
      <div id="fab">
        <slot name="fab"></slot>
      </div>
    `}_saveScrollPos(e){this._savedScrollPos=e.target.scrollTop}_backTapped(){this.backCallback?this.backCallback():(0,n.O)()}static get styles(){return[l.dp,o.AH`
        :host {
          display: block;
          height: 100%;
          background-color: var(--primary-background-color);
          overflow: hidden;
          position: relative;
        }

        :host([narrow]) {
          width: 100%;
          position: fixed;
        }

        .toolbar {
          background-color: var(--app-header-background-color);
          padding-top: var(--safe-area-inset-top);
          padding-right: var(--safe-area-inset-right);
        }
        :host([narrow]) .toolbar {
          padding-left: var(--safe-area-inset-left);
        }

        .toolbar-content {
          display: flex;
          align-items: center;
          font-size: var(--ha-font-size-xl);
          height: var(--header-height);
          font-weight: var(--ha-font-weight-normal);
          color: var(--app-header-text-color, white);
          border-bottom: var(--app-header-border-bottom, none);
          box-sizing: border-box;
          padding: 8px 12px;
        }

        .toolbar a {
          color: var(--sidebar-text-color);
          text-decoration: none;
        }

        ha-menu-button,
        ha-icon-button-arrow-prev,
        ::slotted([slot="toolbar-icon"]) {
          pointer-events: auto;
          color: var(--sidebar-icon-color);
        }

        .main-title {
          margin: var(--margin-title);
          line-height: var(--ha-line-height-normal);
          min-width: 0;
          flex-grow: 1;
          overflow-wrap: break-word;
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .content {
          position: relative;
          width: calc(100% - var(--safe-area-inset-right, 0px));
          height: calc(
            100% -
              1px - var(--header-height, 0px) - var(
                --safe-area-inset-top,
                0px
              ) - var(
                --hass-subpage-bottom-inset,
                var(--safe-area-inset-bottom, 0px)
              )
          );
          margin-bottom: var(
            --hass-subpage-bottom-inset,
            var(--safe-area-inset-bottom)
          );
          margin-right: var(--safe-area-inset-right);
          overflow-y: auto;
          overflow: auto;
          -webkit-overflow-scrolling: touch;
        }
        :host([narrow]) .content {
          width: calc(
            100% - var(--safe-area-inset-left, 0px) - var(
                --safe-area-inset-right,
                0px
              )
          );
          margin-left: var(--safe-area-inset-left);
        }

        #fab {
          position: absolute;
          right: calc(16px + var(--safe-area-inset-right, 0px));
          inset-inline-end: calc(16px + var(--safe-area-inset-right, 0px));
          inset-inline-start: initial;
          bottom: calc(16px + var(--safe-area-inset-bottom, 0px));
          z-index: 1;
          display: flex;
          flex-wrap: wrap;
          justify-content: flex-end;
          gap: var(--ha-space-2);
        }
        :host([narrow]) #fab.tabs {
          bottom: calc(84px + var(--safe-area-inset-bottom, 0px));
        }
        #fab[is-wide] {
          bottom: calc(24px + var(--safe-area-inset-bottom, 0px));
          right: calc(24px + var(--safe-area-inset-right, 0px));
          inset-inline-end: calc(24px + var(--safe-area-inset-right, 0px));
          inset-inline-start: initial;
        }
      `]}constructor(...e){super(...e),this.mainPage=!1,this.narrow=!1,this.supervisor=!1}}(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)()],d.prototype,"header",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,attribute:"main-page"})],d.prototype,"mainPage",void 0),(0,i.__decorate)([(0,s.MZ)({type:String,attribute:"back-path"})],d.prototype,"backPath",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"backCallback",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],d.prototype,"narrow",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],d.prototype,"supervisor",void 0),(0,i.__decorate)([(0,r.a)(".content")],d.prototype,"_savedScrollPos",void 0),(0,i.__decorate)([(0,s.Ls)({passive:!0})],d.prototype,"_saveScrollPos",null),d=(0,i.__decorate)([(0,s.EM)("hass-subpage")],d)},25879:function(e,t,a){a.a(e,(async function(e,i){try{a.d(t,{Y:()=>c});var o=a(96196),s=(a(17963),a(95379),a(34811),a(70105),a(81774)),r=a(75877),n=a(53003),l=a(76674),d=e([s,r]);[s,r]=d.then?(await d)():d;const c=(e,t,a,i,s=e=>e)=>{const r=t.device_info?(0,n.OM)(e,t.device_info):void 0,d=r?r.name_by_user??r.name:"",c=(0,l.W)(i);return o.qy`
    <ha-card outlined>
      <h1 class="card-header">${s("entity.title")}</h1>
      <p class="card-content">${s("entity.description")}</p>
      ${i&&c?o.qy`<ha-alert
              .alertType=${"error"}
              .title=${c.error_message}
            ></ha-alert>`:o.s6}
      <ha-expansion-panel
        header=${s("entity.name_title")}
        secondary=${s("entity.name_description")}
        expanded
        .noCollapse=${!0}
      >
        <knx-device-picker
          .hass=${e}
          .key=${"entity.device_info"}
          .helper=${s("entity.device_description")}
          .value=${t.device_info??void 0}
          @value-changed=${a}
        ></knx-device-picker>
        <ha-selector-text
          .hass=${e}
          label=${s("entity.entity_label")}
          helper=${s("entity.entity_description")}
          .required=${!r}
          .selector=${{text:{type:"text",prefix:d}}}
          .key=${"entity.name"}
          .value=${t.name}
          @value-changed=${a}
        ></ha-selector-text>
      </ha-expansion-panel>
      <ha-expansion-panel .header=${s("entity.entity_category_title")} outlined>
        <ha-selector-select
          .hass=${e}
          .label=${s("entity.entity_category_title")}
          .helper=${s("entity.entity_category_description")}
          .required=${!1}
          .selector=${{select:{multiple:!1,custom_value:!1,mode:"dropdown",options:[{value:"config",label:e.localize("ui.panel.config.devices.entities.config")},{value:"diagnostic",label:e.localize("ui.panel.config.devices.entities.diagnostic")}]}}}
          .key=${"entity.entity_category"}
          .value=${t.entity_category}
          @value-changed=${a}
        ></ha-selector-select>
      </ha-expansion-panel>
    </ha-card>
  `};i()}catch(c){i(c)}}))},66820:function(e,t,a){a.a(e,(async function(e,t){try{var i=a(62826),o=a(96196),s=a(77845),r=a(52682),n=a(29485),l=(a(17963),a(95379),a(46757),a(60961),a(34811),a(87156),a(2809),a(76679)),d=a(92542),c=(a(18239),a(77812),a(35672)),h=a(25879),p=a(78577),u=a(13384),v=a(76674),g=a(36376),_=e([c,g,h]);[c,g,h]=_.then?(await _)():_;const m=new p.Q("knx-configure-entity");class y extends o.WF{connectedCallback(){if(super.connectedCallback(),this.platformStyle=(0,g.N)(this.platform),!this.config){this.config={entity:{},knx:{}};const e=new URLSearchParams(l.G.location.search),t=Object.fromEntries(e.entries());for(const[a,i]of Object.entries(t))(0,u.F)(this.config,a,i,m),(0,d.r)(this,"knx-entity-configuration-changed",this.config)}}render(){const e=(0,v.a)(this.validationErrors,"data"),t=(0,v.a)(e,"knx"),a=(0,v.W)(t);return o.qy`
      <div class="header">
        <h1>
          <ha-svg-icon
            .path=${this.platformStyle.iconPath}
            style=${(0,n.W)({"background-color":this.platformStyle.color})}
          ></ha-svg-icon>
          ${this.hass.localize(`component.${this.platform}.title`)||this.platform}
        </h1>
        <p>${this._backendLocalize("description")}</p>
      </div>
      <slot name="knx-validation-error"></slot>
      <ha-card outlined>
        <h1 class="card-header">${this._backendLocalize("knx.title")}</h1>
        ${a?o.qy`<ha-alert .alertType=${"error"} .title=${a.error_message}></ha-alert>`:o.s6}
        ${this.generateRootGroups(this.schema,t)}
      </ha-card>
      ${(0,h.Y)(this.hass,this.config.entity??{},this._updateConfig,(0,v.a)(e,"entity"),this._backendLocalize)}
    `}generateRootGroups(e,t){return this._generateItems(e,"knx",t)}_generateSection(e,t,a){const i=(0,v.W)(a);return o.qy` <ha-expansion-panel
      .header=${this._backendLocalize(`${t}.title`)}
      .secondary=${this._backendLocalize(`${t}.description`)}
      .expanded=${!e.collapsible||this._groupHasGroupAddressInConfig(e,t)}
      .noCollapse=${!e.collapsible}
      .outlined=${!!e.collapsible}
    >
      ${i?o.qy` <ha-alert .alertType=${"error"} .title=${"Validation error"}>
            ${i.error_message}
          </ha-alert>`:o.s6}
      ${this._generateItems(e.schema,t,a)}
    </ha-expansion-panel>`}_generateGroupSelect(e,t,a){const i=(0,v.W)(a);t in this._selectedGroupSelectOptions||(this._selectedGroupSelectOptions[t]=this._getOptionIndex(e,t));const s=this._selectedGroupSelectOptions[t],n=e.schema[s];void 0===n&&m.error("No option for index",s,e.schema);const l=e.schema.map(((e,a)=>({value:a.toString(),label:this._backendLocalize(`${t}.options.${e.translation_key}.label`)})));return o.qy` <ha-expansion-panel
      .header=${this._backendLocalize(`${t}.title`)}
      .secondary=${this._backendLocalize(`${t}.description`)}
      .expanded=${!e.collapsible||this._groupHasGroupAddressInConfig(e,t)}
      .noCollapse=${!e.collapsible}
      outlined
    >
      ${i?o.qy` <ha-alert .alertType=${"error"} .title=${"Validation error"}>
            ${i.error_message}
          </ha-alert>`:o.s6}
      <ha-control-select
        .options=${l}
        .value=${s.toString()}
        .key=${t}
        @value-changed=${this._updateGroupSelectOption}
      ></ha-control-select>
      ${n?o.qy` <p class="group-description">
              ${this._backendLocalize(`${t}.options.${n.translation_key}.description`)}
            </p>
            <div class="group-selection">
              ${(0,r.D)(s,this._generateItems(n.schema,t,a))}
            </div>`:o.s6}
    </ha-expansion-panel>`}_generateItems(e,t,a){const i=[];let s,r=[];const n=()=>{if(0===r.length||void 0===s)return;const e=t+"."+s.name,n=!s.collapsible||r.some((e=>"knx_group_address"===e.type&&this._hasGroupAddressInConfig(e,t)));i.push(o.qy`<ha-expansion-panel
          .header=${this._backendLocalize(`${e}.title`)}
          .secondary=${this._backendLocalize(`${e}.description`)}
          .expanded=${n}
          .noCollapse=${!s.collapsible}
          .outlined=${!!s.collapsible}
        >
          ${r.map((e=>this._generateItem(e,t,a)))}
        </ha-expansion-panel> `),r=[]};for(const o of e)"knx_section_flat"!==o.type?(["knx_section","knx_group_select","knx_sync_state"].includes(o.type)&&(n(),s=void 0),void 0===s?i.push(this._generateItem(o,t,a)):r.push(o)):(n(),s=o);return n(),i}_generateItem(e,t,a){const i=t+"."+e.name,s=(0,v.a)(a,e.name);switch(e.type){case"knx_section":return this._generateSection(e,i,s);case"knx_group_select":return this._generateGroupSelect(e,i,s);case"knx_group_address":return o.qy`
          <knx-group-address-selector
            .hass=${this.hass}
            .knx=${this.knx}
            .key=${i}
            .required=${e.required}
            .label=${this._backendLocalize(`${i}.label`)}
            .config=${(0,u.L)(this.config,i)??{}}
            .options=${e.options}
            .validationErrors=${s}
            .localizeFunction=${this._backendLocalize}
            @value-changed=${this._updateConfig}
          ></knx-group-address-selector>
        `;case"knx_sync_state":return o.qy`
          <ha-expansion-panel
            .header=${this._backendLocalize(`${i}.title`)}
            .secondary=${this._backendLocalize(`${i}.description`)}
            .outlined=${!0}
          >
            <knx-sync-state-selector-row
              .hass=${this.hass}
              .key=${i}
              .value=${(0,u.L)(this.config,i)??!0}
              .allowFalse=${e.allow_false}
              .localizeFunction=${this._backendLocalize}
              @value-changed=${this._updateConfig}
            ></knx-sync-state-selector-row>
          </ha-expansion-panel>
        `;case"ha_selector":return o.qy`
          <knx-selector-row
            .hass=${this.hass}
            .key=${i}
            .selector=${e}
            .value=${(0,u.L)(this.config,i)}
            .validationErrors=${s}
            .localizeFunction=${this._backendLocalize}
            @value-changed=${this._updateConfig}
          ></knx-selector-row>
        `;default:return m.error("Unknown selector type",e),o.s6}}_groupHasGroupAddressInConfig(e,t){return void 0!==this.config&&("knx_group_select"===e.type?!!(0,u.L)(this.config,t):e.schema.some((e=>{if("knx_group_address"===e.type)return this._hasGroupAddressInConfig(e,t);if("knx_section"===e.type||"knx_group_select"===e.type){const a=t+"."+e.name;return this._groupHasGroupAddressInConfig(e,a)}return!1})))}_hasGroupAddressInConfig(e,t){const a=(0,u.L)(this.config,t+"."+e.name);return!!a&&(void 0!==a.write||(void 0!==a.state||!!a.passive?.length))}_getRequiredKeys(e){const t=[];return e.forEach((e=>{"knx_section"!==e.type?("knx_group_address"===e.type&&e.required||"ha_selector"===e.type&&e.required)&&t.push(e.name):t.push(...this._getRequiredKeys(e.schema))})),t}_getOptionIndex(e,t){const a=(0,u.L)(this.config,t);if(void 0===a)return m.debug("No config found for group select",t),0;const i=e.schema.findIndex((e=>{const i=this._getRequiredKeys(e.schema);return 0===i.length?(m.warn("No required keys for GroupSelect option",t,e),!1):i.every((e=>e in a))}));return-1===i?(m.debug("No valid option found for group select",t,a),0):i}_updateGroupSelectOption(e){e.stopPropagation();const t=e.target.key,a=parseInt(e.detail.value,10);(0,u.F)(this.config,t,void 0,m),this._selectedGroupSelectOptions[t]=a,(0,d.r)(this,"knx-entity-configuration-changed",this.config),this.requestUpdate()}_updateConfig(e){e.stopPropagation();const t=e.target.key,a=e.detail.value;(0,u.F)(this.config,t,a,m),(0,d.r)(this,"knx-entity-configuration-changed",this.config),this.requestUpdate()}constructor(...e){super(...e),this._selectedGroupSelectOptions={},this._backendLocalize=e=>this.hass.localize(`component.knx.config_panel.entities.create.${this.platform}.${e}`)||this.hass.localize(`component.knx.config_panel.entities.create._.${e}`)}}y.styles=o.AH`
    p {
      color: var(--secondary-text-color);
    }

    .header {
      color: var(--ha-card-header-color, --primary-text-color);
      font-family: var(--ha-card-header-font-family, inherit);
      padding: 0 16px 16px;

      & h1 {
        display: inline-flex;
        align-items: center;
        font-size: 26px;
        letter-spacing: -0.012em;
        line-height: 48px;
        font-weight: normal;
        margin-bottom: 14px;

        & ha-svg-icon {
          color: var(--text-primary-color);
          padding: 8px;
          background-color: var(--blue-color);
          border-radius: 50%;
          margin-right: 8px;
        }
      }

      & p {
        margin-top: -8px;
        line-height: 24px;
      }
    }

    ::slotted(ha-alert) {
      margin-top: 0 !important;
    }

    ha-card {
      margin-bottom: 24px;
      padding: 16px;

      & .card-header {
        display: inline-flex;
        align-items: center;
      }
    }

    ha-expansion-panel {
      margin-bottom: 16px;
    }
    ha-expansion-panel > :first-child:not(ha-settings-row) {
      margin-top: 16px; /* ha-settings-row has this margin internally */
    }
    ha-expansion-panel > ha-settings-row:first-child,
    ha-expansion-panel > knx-selector-row:first-child {
      border: 0;
    }
    ha-expansion-panel > * {
      margin-left: 8px;
      margin-right: 8px;
    }

    ha-settings-row {
      margin-bottom: 8px;
      padding: 0;
    }
    ha-control-select {
      padding: 0;
      margin-left: 0;
      margin-right: 0;
      margin-bottom: 16px;
    }

    .group-description {
      align-items: center;
      margin-top: -8px;
      padding-left: 8px;
      padding-bottom: 8px;
    }

    .group-selection {
      padding-left: 8px;
      padding-right: 8px;
      & ha-settings-row:first-child {
        border-top: 0;
      }
    }

    knx-group-address-selector,
    ha-selector,
    ha-selector-text,
    ha-selector-select,
    knx-sync-state-selector-row,
    knx-device-picker {
      display: block;
      margin-bottom: 16px;
    }

    ha-alert {
      display: block;
      margin: 20px auto;
      max-width: 720px;

      & summary {
        padding: 10px;
      }
    }
  `,(0,i.__decorate)([(0,s.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],y.prototype,"knx",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],y.prototype,"platform",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],y.prototype,"config",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],y.prototype,"schema",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],y.prototype,"validationErrors",void 0),(0,i.__decorate)([(0,s.wk)()],y.prototype,"_selectedGroupSelectOptions",void 0),y=(0,i.__decorate)([(0,s.EM)("knx-configure-entity")],y),t()}catch(m){t(m)}}))},75877:function(e,t,a){a.a(e,(async function(e,t){try{var i=a(62826),o=a(96196),s=a(77845),r=a(94333),n=a(22786),l=(a(34887),a(56565),a(48011)),d=a(92542),c=a(45336),h=a(25749),p=a(53003),u=e([l]);l=(u.then?(await u)():u)[0];const v=e=>o.qy`<ha-list-item
    class=${(0,r.H)({"add-new":"add_new"===e.id})}
    .twoline=${!!e.area}
  >
    <span>${e.name}</span>
    <span slot="secondary">${e.area}</span>
  </ha-list-item>`;class g extends o.WF{async _addDevice(e){const t=[...(0,p.L0)(this.hass),e],a=this._getDevices(t,this.hass.areas);this.comboBox.items=a,this.comboBox.filteredItems=a,await this.updateComplete,await this.comboBox.updateComplete}async open(){await this.updateComplete,await(this.comboBox?.open())}async focus(){await this.updateComplete,await(this.comboBox?.focus())}updated(e){if(!this._init&&this.hass||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getDevices((0,p.L0)(this.hass),this.hass.areas),t=this.value?e.find((e=>e.identifier===this.value))?.id:void 0;this.comboBox.value=t,this._deviceId=t,this.comboBox.items=e,this.comboBox.filteredItems=e}}render(){return o.qy`
      <ha-combo-box
        .hass=${this.hass}
        .label=${void 0===this.label&&this.hass?this.hass.localize("ui.components.device-picker.device"):this.label}
        .helper=${this.helper}
        .value=${this._deviceId}
        .renderer=${v}
        item-id-path="id"
        item-value-path="id"
        item-label-path="name"
        @filter-changed=${this._filterChanged}
        @opened-changed=${this._openedChanged}
        @value-changed=${this._deviceChanged}
      ></ha-combo-box>
      ${this._showCreateDeviceDialog?this._renderCreateDeviceDialog():o.s6}
    `}_filterChanged(e){const t=e.target,a=e.detail.value;if(!a)return void(this.comboBox.filteredItems=this.comboBox.items);const i=(0,c.H)(a,t.items||[]);this._suggestion=a,this.comboBox.filteredItems=[...i,{id:"add_new_suggestion",name:`Add new device '${this._suggestion}'`}]}_openedChanged(e){this._opened=e.detail.value}_deviceChanged(e){e.stopPropagation();let t=e.detail.value;"no_devices"===t&&(t=""),["add_new_suggestion","add_new"].includes(t)?(e.target.value=this._deviceId,this._openCreateDeviceDialog()):t!==this._deviceId&&this._setValue(t)}_setValue(e){const t=this.comboBox.items.find((t=>t.id===e)),a=t?.identifier;this.value=a,this._deviceId=t?.id,setTimeout((()=>{(0,d.r)(this,"value-changed",{value:a}),(0,d.r)(this,"change")}),0)}_renderCreateDeviceDialog(){return o.qy`
      <knx-device-create-dialog
        .hass=${this.hass}
        @create-device-dialog-closed=${this._closeCreateDeviceDialog}
        .deviceName=${this._suggestion}
      ></knx-device-create-dialog>
    `}_openCreateDeviceDialog(){this._showCreateDeviceDialog=!0}async _closeCreateDeviceDialog(e){const t=e.detail.newDevice;t?await this._addDevice(t):this.comboBox.setInputValue(""),this._setValue(t?.id),this._suggestion=void 0,this._showCreateDeviceDialog=!1}constructor(...e){super(...e),this._showCreateDeviceDialog=!1,this._init=!1,this._getDevices=(0,n.A)(((e,t)=>[{id:"add_new",name:"Add new deviceâ€¦",area:"",strings:[]},...e.map((e=>{const a=e.name_by_user??e.name??"";return{id:e.id,identifier:(0,p.dd)(e),name:a,area:e.area_id&&t[e.area_id]?t[e.area_id].name:this.hass.localize("ui.components.device-picker.no_area"),strings:[a||""]}})).sort(((e,t)=>(0,h.xL)(e.name||"",t.name||"",this.hass.locale.language)))]))}}(0,i.__decorate)([(0,s.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)()],g.prototype,"label",void 0),(0,i.__decorate)([(0,s.MZ)()],g.prototype,"helper",void 0),(0,i.__decorate)([(0,s.MZ)()],g.prototype,"value",void 0),(0,i.__decorate)([(0,s.wk)()],g.prototype,"_opened",void 0),(0,i.__decorate)([(0,s.P)("ha-combo-box",!0)],g.prototype,"comboBox",void 0),(0,i.__decorate)([(0,s.wk)()],g.prototype,"_showCreateDeviceDialog",void 0),g=(0,i.__decorate)([(0,s.EM)("knx-device-picker")],g),t()}catch(v){t(v)}}))},18239:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845),r=a(94333),n=a(16527),l=a(22786),d=(a(60733),a(92542));a(48543),a(1958);class c extends o.WF{render(){return o.qy`
      ${this.label?o.qy`<div class="title">${this.label}</div>`:o.s6}
      ${this.options.map((e=>o.qy`
          <div class="formfield">
            <ha-radio
              .checked=${e.value===this.value}
              .value=${e.value}
              .disabled=${this.disabled}
              @change=${this._valueChanged}
            ></ha-radio>
            <label .value=${e.value} @click=${this._valueChanged}>
              <p>
                ${this.localizeValue(this.translation_key+".options."+e.translation_key)}
              </p>
              <p class="secondary">DPT ${e.value}</p>
            </label>
          </div>
        `))}
      ${this.invalidMessage?o.qy`<p class="invalid-message">${this.invalidMessage}</p>`:o.s6}
    `}_valueChanged(e){e.stopPropagation();const t=e.target.value;this.disabled||void 0===t||t===(this.value??"")||(0,d.r)(this,"value-changed",{value:t})}constructor(...e){super(...e),this.disabled=!1,this.invalid=!1,this.localizeValue=e=>e}}c.styles=[o.AH`
      :host([invalid]) {
        color: var(--error-color);
      }

      .title {
        padding-left: 12px;
      }

      .formfield {
        display: flex;
        align-items: center;
      }

      label {
        min-width: 200px; /* to make it easier to click */
      }

      p {
        pointer-events: none;
        color: var(--primary-text-color);
        margin: 0px;
      }

      .secondary {
        padding-top: 4px;
        font-family: var(
          --mdc-typography-body2-font-family,
          var(--mdc-typography-font-family, Roboto, sans-serif)
        );
        -webkit-font-smoothing: antialiased;
        font-size: var(--mdc-typography-body2-font-size, 0.875rem);
        font-weight: var(--mdc-typography-body2-font-weight, 400);
        line-height: normal;
        color: var(--secondary-text-color);
      }

      .invalid-message {
        font-size: 0.75rem;
        color: var(--error-color);
        padding-left: 16px;
      }
    `],(0,i.__decorate)([(0,s.MZ)({type:Array})],c.prototype,"options",void 0),(0,i.__decorate)([(0,s.MZ)()],c.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)()],c.prototype,"label",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],c.prototype,"disabled",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],c.prototype,"invalid",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],c.prototype,"invalidMessage",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],c.prototype,"localizeValue",void 0),(0,i.__decorate)([(0,s.MZ)({type:String})],c.prototype,"translation_key",void 0),c=(0,i.__decorate)([(0,s.EM)("knx-dpt-option-selector")],c);class h extends o.WF{render(){return o.qy`
      <div class="title">${this._baseTranslation("dpt")}</div>
      <div class="knx-dpt-selector">
        <ha-icon-button
          class="menu-button"
          .path=${"M21,15.61L19.59,17L14.58,12L19.59,7L21,8.39L17.44,12L21,15.61M3,6H16V8H3V6M3,13V11H13V13H3M3,18V16H16V18H3Z"}
          @click=${this._openDialog}
          .label=${this._baseTranslation("dpt_select")}
        ></ha-icon-button>

        ${this.value?o.qy`<div class="selection">
                <div class="dpt-number">${this.value}</div>
                <div class="dpt-name">
                  ${this.hass.localize(`component.knx.config_panel.dpt.options.${this.value.replace(".","_")}`)||this.knx.dptMetadata[this.value]?.name}
                </div>
                <div class="dpt-unit">${this.knx.dptMetadata[this.value]?.unit??""}</div>
              </div>
              <ha-icon-button
                class="clear-button"
                .path=${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}
                .label=${this.hass.localize("ui.common.clear")}
                @click=${this._clearSelection}
              ></ha-icon-button>`:o.qy`<div no-selection class="selection">
              ${this._baseTranslation("dpt_no_selection")}
            </div>`}
      </div>
      ${this.invalidMessage?o.qy`<p class="invalid-message">${this.invalidMessage}</p>`:o.s6}
    `}_clearSelection(){this.value&&(this.value=void 0,(0,d.r)(this,"value-changed",{value:this.value}))}_openDialog(){(0,d.r)(this,"show-dialog",{dialogTag:"knx-dpt-select-dialog",dialogImport:()=>a.e("750").then(a.bind(a,42957)),dialogParams:(()=>{const e=(()=>{if(this.validDPTs&&this.validDPTs.length){const e=new Set(this.validDPTs);return Object.fromEntries(Object.entries(this.knx.dptMetadata).filter((([t])=>e.has(t))))}return{...this.knx.dptMetadata}})();return{title:`${this.parentLabel?this.parentLabel+" - ":""}${this._baseTranslation("dpt_select")}`,dpts:e,initialSelection:this.value,onClose:e=>{e&&e!==this.value&&(this.value=e,(0,d.r)(this,"value-changed",{value:this.value}))}}})()})}constructor(...e){super(...e),this.disabled=!1,this.invalid=!1,this._baseTranslation=(e,t)=>this.hass.localize(`component.knx.config_panel.entities.create._.knx.knx_group_address.${e}`,t)}}h.styles=[o.AH`
      :host([invalid]) {
        color: var(--error-color);
      }

      .title {
        padding-left: 12px;
      }

      p {
        pointer-events: none;
        color: var(--primary-text-color);
        margin: 0px;
      }

      .invalid-message {
        font-size: 0.75rem;
        color: var(--error-color);
        padding-left: 16px;
      }

      .knx-dpt-selector {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .knx-dpt-selector .selection {
        display: grid;
        /* first column adapts to content, middle column gets remaining space (shrinkable)
           last column adapts to content as well (auto) â€” only the middle column truncates */
        grid-template-columns: auto minmax(0, 1fr) auto;
        align-items: center;
        gap: 8px;
        flex: 1 1 auto;
        min-width: 160px;
      }

      .selection[no-selection] {
        color: var(--secondary-text-color);
        font-style: italic;
      }

      .menu-button {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 0;
      }

      .clear-button {
        margin-left: 8px;
      }

      .dpt-number {
        font-family:
          ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
        color: var(--secondary-text-color);
        white-space: nowrap;
      }

      .dpt-name {
        font-weight: 500;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        /* allow the grid to shrink this column correctly */
        min-width: 0;
      }

      .dpt-unit {
        text-align: right;
        color: var(--secondary-text-color);
        white-space: nowrap;
        padding-left: 6px;
      }
    `],(0,i.__decorate)([(0,s.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],h.prototype,"knx",void 0),(0,i.__decorate)([(0,s.MZ)({type:String})],h.prototype,"key",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],h.prototype,"parentLabel",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1,type:Array})],h.prototype,"validDPTs",void 0),(0,i.__decorate)([(0,s.MZ)()],h.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],h.prototype,"disabled",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],h.prototype,"invalid",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],h.prototype,"invalidMessage",void 0),(0,i.__decorate)([(0,s.MZ)({type:String})],h.prototype,"translation_key",void 0),h=(0,i.__decorate)([(0,s.EM)("knx-dpt-dialog-selector")],h);a(78740);class p extends o.WF{willUpdate(e){if(e.has("invalidMessage")&&(this.invalid=!!this.invalidMessage),(e.has("value")||e.has("groupAddresses")||e.has("knx"))&&this.knx.projectData){let e=this.groupAddresses?.find((e=>e.address===this.value));e||(e=Object.values(this.knx.projectData.group_addresses).find((e=>e.address===this.value))),this._currentName=e?.name}}updated(){const e=this._textField?.shadowRoot?.querySelector("label");e&&(this.invalid?e.classList.add("mdc-text-field--invalid"):e.classList.remove("mdc-text-field--invalid"))}render(){const e=!!this._currentName,t=!this.value&&0===this.groupAddresses.length,a=this.knx?.projectData?this._currentName??(this.value?this._baseTranslation("group_address_unknown"):t?this._baseTranslation("group_address_none_for_dpt"):""):void 0;return o.qy`
      <div class="container">
        ${this.knx?.projectData?o.qy`<ha-icon-button
              class="menu-button"
              .disabled=${this.disabled||0===this.groupAddresses.length}
              .path=${"M9 6V8H2V6H9M9 11V13H2V11H9M18 16V18H2V16H18M19.31 11.5C19.75 10.82 20 10 20 9.11C20 6.61 18 4.61 15.5 4.61S11 6.61 11 9.11 13 13.61 15.5 13.61C16.37 13.61 17.19 13.36 17.88 12.93L21 16L22.39 14.61L19.31 11.5M15.5 11.61C14.12 11.61 13 10.5 13 9.11S14.12 6.61 15.5 6.61 18 7.73 18 9.11 16.88 11.61 15.5 11.61Z"}
              .label=${this._baseTranslation("group_address_search")}
              @click=${this._openDialog}
            ></ha-icon-button>`:o.s6}

        <div class="input-wrap">
          <div class="input-row">
            <ha-textfield
              .disabled=${this.disabled}
              .required=${this.required}
              .value=${this.value??""}
              .label=${this.label??""}
              @input=${this._onInput}
            ></ha-textfield>
            ${a?o.qy`<div
                  class="ga-name"
                  ?unknown-ga=${!e||t}
                  title=${a}
                >
                  ${a}
                </div>`:o.s6}
          </div>
        </div>
      </div>
      ${this.hintMessage?o.qy`<p class="hint-message">${this.hintMessage}</p>`:o.s6}
      ${this.invalidMessage?o.qy`<p class="invalid-message">${this.invalidMessage}</p>`:o.s6}
    `}_onInput(e){const t=e.target,a=t?.value??"";this.value=a||void 0,(0,d.r)(this,"value-changed",{value:this.value})}_openDialog(){(0,d.r)(this,"show-dialog",{dialogTag:"knx-ga-select-dialog",dialogImport:()=>a.e("2154").then(a.bind(a,193)),dialogParams:{title:`${this.parentLabel?this.parentLabel+" - ":""}${this.label??""}`,groupAddresses:this.groupAddresses??[],initialSelection:this.value,knx:this.knx,onClose:e=>{e&&e!==this.value&&(this.value=e,(0,d.r)(this,"value-changed",{value:this.value}))}}})}constructor(...e){super(...e),this.groupAddresses=[],this.disabled=!1,this.invalid=!1,this.required=!1,this._baseTranslation=(e,t)=>this.hass.localize(`component.knx.config_panel.entities.create._.knx.knx_group_address.${e}`,t)}}p.styles=o.AH`
    :host {
      display: block;
      margin-bottom: 16px;
      transition:
        box-shadow 250ms,
        opacity 250ms;
    }

    :host([invalid]) {
      color: var(--error-color);
    }

    .container {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }

    .menu-button {
      display: inline-flex;
      align-items: center;
      padding: 4px 0;
    }

    .input-wrap {
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      gap: 4px;
      align-items: stretch;
      min-width: 0;
    }

    .input-row {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }

    ha-textfield {
      width: 18ch; /* account for label in various languages, not only GA strings */
      flex: 0 0 auto;
      /* prevent content from expanding the field */
      --text-field-overflow: hidden;
    }

    .ga-name {
      flex: 1 1 auto;
      min-width: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: normal;
      word-break: break-word;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      line-height: 1.2;
      max-height: calc(2 * 1.2em);
      color: var(--primary-text-color);
    }

    .ga-name[unknown-ga] {
      font-style: italic;
      color: var(--secondary-text-color);
    }

    .invalid-message,
    .hint-message {
      font-size: 0.75rem;
      color: var(--error-color);
      padding-left: 16px;
      margin: 4px 0 0 0;
    }

    .hint-message {
      color: var(--warning-color);
    }
  `,(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"knx",void 0),(0,i.__decorate)([(0,s.MZ)({type:String})],p.prototype,"key",void 0),(0,i.__decorate)([(0,s.MZ)({type:Number})],p.prototype,"index",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"groupAddresses",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"hintMessage",void 0),(0,i.__decorate)([(0,s.MZ)({type:String})],p.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)()],p.prototype,"label",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"parentLabel",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],p.prototype,"disabled",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean,reflect:!0})],p.prototype,"invalid",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"invalidMessage",void 0),(0,i.__decorate)([(0,s.MZ)({type:Boolean})],p.prototype,"required",void 0),(0,i.__decorate)([(0,s.wk)()],p.prototype,"_currentName",void 0),(0,i.__decorate)([(0,s.P)("ha-textfield")],p.prototype,"_textField",void 0),p=(0,i.__decorate)([(0,s.EM)("knx-single-address-selector")],p);var u=a(56803),v=a(19337),g=a(76674);class _ extends o.WF{_getAcceptedDPTs(){const e=this.options.validDPTs,t=this.options.dptClasses?this._getDPTsFromClasses(this.options.dptClasses):void 0,a=this.options.dptSelect?.map((e=>e.dpt));return e??t??a??[]}getValidGroupAddresses(e){return this.knx.projectData?Object.values(this.knx.projectData.group_addresses).filter((t=>!!t.dpt&&(0,v.HG)(t.dpt,e))):[]}getDptByValue(e){if(e)return this.options.dptSelect?this.options.dptSelect?.find((t=>t.value===e))?.dpt:this.options.dptClasses?(0,v.$k)(e)??void 0:void 0}shouldUpdate(e){return!(1===e.size&&e.has("hass"))}willUpdate(e){if(e.has("options")&&(this.validGroupAddresses=this.getValidGroupAddresses(this._getAcceptedDPTs()),this.filteredGroupAddresses=this.validGroupAddresses),e.has("config")){this._selectedDPTValue=this.config.dpt??this._selectedDPTValue;const e=this.getDptByValue(this._selectedDPTValue);if(this.setFilteredGroupAddresses(e),e&&this.knx.projectData){const t=[this.config.write,this.config.state,...this.config.passive??[]].filter((e=>!!e));this.dptSelectorDisabled=t.length>0&&t.every((t=>{const a=this.knx.projectData.group_addresses[t]?.dpt;return!!a&&(0,v.HG)(a,[e])}))}else this.dptSelectorDisabled=!1}this._validGADropTarget=this._dragDropContext?.groupAddress?this.filteredGroupAddresses.includes(this._dragDropContext.groupAddress):void 0}render(){const e=!0===this._validGADropTarget,t=!1===this._validGADropTarget,a=(0,g.W)(this.validationErrors),i=this.localizeFunction(this.key+".description"),s=this.required?this.hass.localize("ui.common.error_required"):void 0;return o.qy`
      <p class="title">${this.label}</p>
      ${s?o.qy`<p class="description">${s}</p>`:o.s6}
      ${i?o.qy`<p class="description">${i}</p>`:o.s6}
      ${a?o.qy`<p class="error">
            <ha-svg-icon .path=${"M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"}></ha-svg-icon>
            <b>Validation error:</b>
            ${a.error_message}
          </p>`:o.s6}
      <div class="main">
        <div class="selectors">
          ${this.options.write?o.qy`<knx-single-address-selector
                class=${(0,r.H)({"valid-drop-zone":e,"invalid-drop-zone":t})}
                .hass=${this.hass}
                .knx=${this.knx}
                .label=${this._baseTranslation("send_address")}
                .parentLabel=${this.label}
                .required=${this.options.write.required}
                .groupAddresses=${this.filteredGroupAddresses}
                .key=${"write"}
                .value=${this.config.write??void 0}
                .invalidMessage=${(0,g.W)(this.validationErrors,"write")?.error_message}
                .hintMessage=${this._isGaDptMismatch(this.config.write)?this._dptMismatchMessage(this.config.write):void 0}
                @value-changed=${this._valueChanged}
                @dragover=${this._dragOverHandler}
                @drop=${this._dropHandler}
              ></knx-single-address-selector>`:o.s6}
          ${this.options.state?o.qy`<knx-single-address-selector
                class=${(0,r.H)({"valid-drop-zone":e,"invalid-drop-zone":t})}
                .hass=${this.hass}
                .knx=${this.knx}
                .label=${this._baseTranslation("state_address")}
                .parentLabel=${this.label}
                .required=${this.options.state.required}
                .groupAddresses=${this.filteredGroupAddresses}
                .key=${"state"}
                .value=${this.config.state??void 0}
                .invalidMessage=${(0,g.W)(this.validationErrors,"state")?.error_message}
                .hintMessage=${this._isGaDptMismatch(this.config.state)?this._dptMismatchMessage(this.config.state):void 0}
                @value-changed=${this._valueChanged}
                @dragover=${this._dragOverHandler}
                @drop=${this._dropHandler}
              ></knx-single-address-selector>`:o.s6}
        </div>
      </div>
      ${this.options.passive?o.qy`<div class="passive-list">
            ${[...this.config.passive??[],...this._showEmptyPassiveField?[void 0]:[]].map(((a,i)=>{const s=this._getPassiveValidationForIndex(i);return o.qy`<div class="passive-row">
                <knx-single-address-selector
                  class=${(0,r.H)({"valid-drop-zone":e,"invalid-drop-zone":t})}
                  .hass=${this.hass}
                  .knx=${this.knx}
                  .label=${this._baseTranslation("passive_address")}
                  .parentLabel=${this.label}
                  .required=${!1}
                  .groupAddresses=${this.filteredGroupAddresses}
                  .key=${"passive"}
                  .index=${i}
                  .value=${a??void 0}
                  .invalidMessage=${s?.error_message}
                  .hintMessage=${this._isGaDptMismatch(a)?this._dptMismatchMessage(a):void 0}
                  @value-changed=${this._valueChangedPassive}
                  @dragover=${this._dragOverHandler}
                  @drop=${this._dropHandler}
                ></knx-single-address-selector>
                <ha-icon-button
                  class="remove-passive"
                  .path=${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}
                  .label=${this.hass.localize("ui.common.remove")}
                  data-index=${i}
                  @click=${this._onRemovePassiveClick}
                ></ha-icon-button>
              </div>`}))}
          </div>`:o.s6}
      ${this.options.validDPTs||this.options.passive?o.qy`<div class="footer-row">
            ${this.options.validDPTs?o.qy`<p class="valid-dpts">
                  ${this._baseTranslation("valid_dpts")}:
                  ${this.options.validDPTs.map((e=>(0,v.Vt)(e))).join(", ")}
                </p>`:o.s6}
            ${this.options.passive?o.qy`<a
                  href="#"
                  @click=${this._addPassiveSelector}
                  class="add-passive-link"
                  ?disabled=${this._showEmptyPassiveField}
                >
                  ${this._baseTranslation("add_passive_address")}
                </a>`:o.s6}
          </div>`:o.s6}
      ${this.options.dptSelect?this._renderDptOptionSelector():o.s6}
      ${this.options.dptClasses?this._renderDptDialogSelector():o.s6}
    `}_renderDptOptionSelector(){const e=(0,g.W)(this.validationErrors,"dpt");return o.qy`<knx-dpt-option-selector
      .key=${"dpt"}
      .label=${this._baseTranslation("dpt")}
      .options=${this.options.dptSelect}
      .value=${this._selectedDPTValue}
      .disabled=${this.dptSelectorDisabled}
      .invalid=${!!e}
      .invalidMessage=${e?.error_message}
      .localizeValue=${this.localizeFunction}
      .translation_key=${this.key}
      @value-changed=${this._valueChanged}
    >
    </knx-dpt-option-selector>`}_renderDptDialogSelector(){const e=(0,g.W)(this.validationErrors,"dpt");return o.qy`<knx-dpt-dialog-selector
      .key=${"dpt"}
      .hass=${this.hass}
      .knx=${this.knx}
      .parentLabel=${this.label}
      .validDPTs=${this._getDptStringsFromClasses(this.options.dptClasses)}
      .value=${this._selectedDPTValue}
      .disabled=${this.dptSelectorDisabled}
      .invalid=${!!e}
      .invalidMessage=${e?.error_message}
      .translation_key=${this.key}
      @value-changed=${this._valueChanged}
    >
    </knx-dpt-dialog-selector>`}_valueChanged(e){e.stopPropagation();const t=e.target,a=e.detail.value,i={...this.config,[t.key]:a};this._updateConfig(i,t.key)}_updateConfig(e,t){const a=[e.write,e.state,...e.passive??[]].some((e=>!!e));this._updateDptSelector(t,e,a),this.config=e;const i=a?e:void 0;(0,d.r)(this,"value-changed",{value:i}),this.requestUpdate()}_updateDptSelector(e,t,a){if(!this.options.dptSelect&&!this.options.dptClasses)return;if("dpt"===e)this._selectedDPTValue=t.dpt;else{if(!a)return t.dpt=void 0,void(this._selectedDPTValue=void 0);t.dpt=this._selectedDPTValue}if(!this.knx.projectData)return;const i=this._getAddedGroupAddress(e,t);if(!i||void 0!==this._selectedDPTValue)return;const o=this.validGroupAddresses.find((e=>e.address===i))?.dpt;if(o)if(this.options.dptSelect){const e=this.options.dptSelect.find((e=>e.dpt.main===o.main&&e.dpt.sub===o.sub));t.dpt=e?e.value:this.options.dptSelect.find((e=>(0,v.HG)(o,[e.dpt])))?.value}else if(this.options.dptClasses){const e=(0,v.Vt)(o),a=this._getDptStringsFromClasses(this.options.dptClasses);t.dpt=a.includes(e)?e:void 0}}_getAddedGroupAddress(e,t){return"write"===e||"state"===e?t[e]:"passive"===e?t.passive?.find((e=>!!e&&!this.config.passive?.includes(e))):void 0}_isGaDptMismatch(e){if(!e||!this.knx.projectData)return!1;const t=this.knx.projectData.group_addresses[e];return!!t&&!this.filteredGroupAddresses.find((e=>e===t))}_dptMismatchMessage(e){if(!e||!this.knx.projectData)return;const t=(0,v.Vt)(this.knx.projectData.group_addresses[e]?.dpt)??"?";return this._baseTranslation("dpt_incompatible",{dpt:t})}_dragOverHandler(e){if(![...e.dataTransfer.types].includes("text/group-address"))return;e.preventDefault(),e.dataTransfer.dropEffect="move";const t=e.target;this._dragOverTimeout[t.key]?clearTimeout(this._dragOverTimeout[t.key]):t.classList.add("active-drop-zone"),this._dragOverTimeout[t.key]=setTimeout((()=>{delete this._dragOverTimeout[t.key],t.classList.remove("active-drop-zone")}),100)}_getPassiveValidationForIndex(e){const t=(0,g.a)(this.validationErrors,"passive");if(!t)return;const a=String(e);return t.find((e=>Array.isArray(e.path)&&e.path[0]===a))??(0,g.W)(t)}_dropHandler(e){e.stopPropagation(),e.preventDefault();const t=e.dataTransfer.getData("text/group-address");if(!t)return;const a=e.target;if("passive"===a.key&&"number"==typeof a.index)return void this._updatePassiveAtIndex(a.index,t);const i={...this.config};i[a.key]=t,this._updateConfig(i,a.key)}constructor(...e){super(...e),this.config={},this.localizeFunction=e=>e,this._showEmptyPassiveField=!1,this.validGroupAddresses=[],this.filteredGroupAddresses=[],this.dptSelectorDisabled=!1,this._dragOverTimeout={},this._baseTranslation=(e,t)=>this.hass.localize(`component.knx.config_panel.entities.create._.knx.knx_group_address.${e}`,t),this.setFilteredGroupAddresses=(0,l.A)((e=>{this.filteredGroupAddresses=e?this.getValidGroupAddresses([e]):this.validGroupAddresses})),this._getDPTsFromClasses=(0,l.A)((e=>{if(!e?.length||!this.knx.dptMetadata)return[];const t=new Set(e);return Object.values(this.knx.dptMetadata).filter((e=>t.has(e.dpt_class))).map((e=>({main:e.main,sub:e.sub})))})),this._getDptStringsFromClasses=(0,l.A)((e=>this._getDPTsFromClasses(e).map(v.Vt))),this._addPassiveSelector=e=>{e&&e.preventDefault(),this._showEmptyPassiveField||(this._showEmptyPassiveField=!0,this.requestUpdate())},this._onRemovePassiveClick=e=>{const t=parseInt(e.currentTarget.getAttribute("data-index")||"-1",10);t>=0&&this._removePassiveSelector(t)},this._removePassiveSelector=e=>{if(e<(this.config.passive?.length??0)){const t={...this.config},a=[...t.passive??[]];a.splice(e,1),0===a.length?delete t.passive:t.passive=a,this._updateConfig(t,"passive")}else this._showEmptyPassiveField=!1,this.requestUpdate()},this._valueChangedPassive=e=>{e.stopPropagation();const t=e.target.index,a=e.detail.value;this._updatePassiveAtIndex(t,a)},this._updatePassiveAtIndex=(e,t)=>{const a=this.config.passive?.length??0,i={...this.config};if(e<a){const o=[...i.passive??[]];o[e]=t,i.passive=o.filter((e=>!!e)),0===i.passive.length&&delete i.passive,e!==a-1||t||(this._showEmptyPassiveField=!0)}else{if(!t)return;i.passive=[...i.passive??[],t],this._showEmptyPassiveField=!1}this._updateConfig(i,"passive")}}}_.styles=o.AH`
    .main {
      display: flex;
      flex-direction: row;
    }

    .selectors {
      flex: 1;
    }

    .options {
      width: 48px;
      display: flex;
      flex-direction: column-reverse;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .passive {
      overflow: hidden;
      transition: height 150ms cubic-bezier(0.4, 0, 0.2, 1);
      height: 0px;
      margin-right: 64px; /* compensate for .options */
    }

    .passive.expanded {
      height: auto;
    }

    .passive-row {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .passive-row knx-single-address-selector {
      flex: 1 1 auto;
    }

    .title {
      margin-bottom: 12px;
    }
    .description {
      margin-top: -10px;
      margin-bottom: 12px;
      color: var(--secondary-text-color);
      font-size: var(--ha-font-size-s);
    }

    .footer-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-top: -8px;
      margin-bottom: 12px;
      margin-left: 16px;
      margin-right: 0;
    }

    .valid-dpts {
      margin: 0;
      color: var(--secondary-text-color);
      font-size: var(--ha-font-size-s);
      flex: 1 1 auto;
    }

    .add-passive-link {
      color: var(--primary-color);
      text-decoration: none;
      font-size: var(--ha-font-size-s);
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
      white-space: nowrap;
      transition: background-color 200ms;
      margin-left: auto;
    }

    .add-passive-link:not([disabled]):hover {
      background-color: rgba(var(--rgb-primary-color), 0.1);
      text-decoration: underline;
    }

    .add-passive-link[disabled] {
      color: var(--disabled-text-color);
      opacity: 0.5;
      cursor: default;
    }

    knx-dpt-dialog-selector,
    knx-dpt-option-selector {
      display: block;
      margin-top: -12px; /* move towards footer-row when validDPTs isn't shown */
    }

    knx-single-address-selector {
      display: block;
      margin-bottom: 16px;
      transition:
        box-shadow 250ms,
        opacity 250ms;
    }

    .valid-drop-zone {
      box-shadow: 0px 0px 5px 2px rgba(var(--rgb-primary-color), 0.5);
    }

    .valid-drop-zone.active-drop-zone {
      box-shadow: 0px 0px 5px 2px var(--primary-color);
    }

    .invalid-drop-zone {
      opacity: 0.5;
    }

    .invalid-drop-zone.active-drop-zone {
      box-shadow: 0px 0px 5px 2px var(--error-color);
    }

    .error {
      color: var(--error-color);
    }
  `,(0,i.__decorate)([(0,n.Fg)({context:u.B,subscribe:!0})],_.prototype,"_dragDropContext",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"knx",void 0),(0,i.__decorate)([(0,s.MZ)()],_.prototype,"label",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"config",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"options",void 0),(0,i.__decorate)([(0,s.MZ)({reflect:!0})],_.prototype,"key",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"required",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"validationErrors",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"localizeFunction",void 0),(0,i.__decorate)([(0,s.wk)()],_.prototype,"_showEmptyPassiveField",void 0),_=(0,i.__decorate)([(0,s.EM)("knx-group-address-selector")],_)},42615:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845),r=a(4937),n=a(16527),l=(a(17963),a(60961),a(78577)),d=a(56803),c=a(19337);const h=new l.Q("knx-project-device-tree");class p extends o.WF{connectedCallback(){super.connectedCallback();const e=this.validDPTs?.length?(0,c.Ah)(this.data,this.validDPTs):this.data.communication_objects,t=Object.values(this.data.devices).map((t=>{const a=[],i=Object.fromEntries(Object.entries(t.channels).map((([e,t])=>[e,{name:t.name,comObjects:[]}])));for(const s of t.communication_object_ids){if(!(s in e))continue;const t=e[s];t.channel&&t.channel in i?i[t.channel].comObjects.push(t):a.push(t)}const o=Object.entries(i).reduce(((e,[t,a])=>(a.comObjects.length&&(e[t]=a),e)),{});return{ia:t.individual_address,name:t.name,manufacturer:t.manufacturer_name,description:t.description.split(/[\r\n]/,1)[0],noChannelComObjects:a,channels:o}}));this.deviceTree=t.filter((e=>!!e.noChannelComObjects.length||!!Object.keys(e.channels).length))}render(){return o.qy`<div class="device-tree-view">
      ${this._selectedDevice?this._renderSelectedDevice(this._selectedDevice):this._renderDevices()}
    </div>`}_renderDevices(){return this.deviceTree.length?o.qy`<ul class="devices">
      ${(0,r.u)(this.deviceTree,(e=>e.ia),(e=>o.qy`<li class="clickable" @click=${this._selectDevice} .device=${e}>
            ${this._renderDevice(e)}
          </li>`))}
    </ul>`:o.qy`<ha-alert alert-type="info">No suitable device found in project data.</ha-alert>`}_renderDevice(e){return o.qy`<div class="item">
      <span class="icon ia">
        <ha-svg-icon .path=${"M15,20A1,1 0 0,0 14,19H13V17H17A2,2 0 0,0 19,15V5A2,2 0 0,0 17,3H7A2,2 0 0,0 5,5V15A2,2 0 0,0 7,17H11V19H10A1,1 0 0,0 9,20H2V22H9A1,1 0 0,0 10,23H14A1,1 0 0,0 15,22H22V20H15M7,15V5H17V15H7Z"}></ha-svg-icon>
        <span>${e.ia}</span>
      </span>
      <div class="description">
        <p>${e.manufacturer}</p>
        <p>${e.name}</p>
        ${e.description?o.qy`<p>${e.description}</p>`:o.s6}
      </div>
    </div>`}_renderSelectedDevice(e){return o.qy`<ul class="selected-device">
      <li class="back-item clickable" @click=${this._selectDevice}>
        <div class="item">
          <ha-svg-icon class="back-icon" .path=${"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}></ha-svg-icon>
          ${this._renderDevice(e)}
        </div>
      </li>
      ${this._renderChannels(e)}
    </ul>`}_renderChannels(e){return o.qy`${this._renderComObjects(e.noChannelComObjects)}
    ${(0,r.u)(Object.entries(e.channels),(([t,a])=>`${e.ia}_ch_${t}`),(([e,t])=>t.comObjects.length?o.qy`<li class="channel">${t.name}</li>
              ${this._renderComObjects(t.comObjects)}`:o.s6))} `}_renderComObjects(e){return o.qy`${(0,r.u)(e,(e=>`${e.device_address}_co_${e.number}`),(e=>{return o.qy`<li class="com-object">
          <div class="item">
            <span class="icon co"
              ><ha-svg-icon .path=${"M22 12C22 6.5 17.5 2 12 2S2 6.5 2 12 6.5 22 12 22 22 17.5 22 12M15 6.5L18.5 10L15 13.5V11H11V9H15V6.5M9 17.5L5.5 14L9 10.5V13H13V15H9V17.5Z"}></ha-svg-icon
              ><span>${e.number}</span></span
            >
            <div class="description">
              <p>
                ${e.text}${e.function_text?" - "+e.function_text:""}
              </p>
              <p class="co-info">${t=e.flags,`${t.read?"R":"â€“"} ${t.write?"W":"â€“"} ${t.transmit?"T":"â€“"} ${t.update?"U":"â€“"}`}</p>
            </div>
          </div>
          <ul class="group-addresses">
            ${this._renderGroupAddresses(e.group_address_links)}
          </ul>
        </li>`;var t}))} `}_renderGroupAddresses(e){const t=e.map((e=>this.data.group_addresses[e]));return o.qy`${(0,r.u)(t,(e=>e.identifier),(e=>o.qy`<li
          draggable="true"
          @dragstart=${this._dragDropContext?.gaDragStartHandler}
          @dragend=${this._dragDropContext?.gaDragEndHandler}
          @mouseover=${this._dragDropContext?.gaDragIndicatorStartHandler}
          @focus=${this._dragDropContext?.gaDragIndicatorStartHandler}
          @mouseout=${this._dragDropContext?.gaDragIndicatorEndHandler}
          @blur=${this._dragDropContext?.gaDragIndicatorEndHandler}
          .ga=${e}
        >
          <div class="item">
            <ha-svg-icon
              class="drag-icon"
              .path=${"M9,3H11V5H9V3M13,3H15V5H13V3M9,7H11V9H9V7M13,7H15V9H13V7M9,11H11V13H9V11M13,11H15V13H13V11M9,15H11V17H9V15M13,15H15V17H13V15M9,19H11V21H9V19M13,19H15V21H13V19Z"}
              .viewBox=${"4 0 16 24"}
            ></ha-svg-icon>
            <span class="icon ga">
              <span>${e.address}</span>
            </span>
            <div class="description">
              <p>${e.name}</p>
              <p class="ga-info">${(e=>{const t=(0,c.Vt)(e.dpt);return t?`DPT ${t}`:""})(e)}</p>
            </div>
          </div>
        </li>`))} `}_selectDevice(e){const t=e.target.device;h.debug("select device",t),this._selectedDevice=t,this.scrollTop=0}constructor(...e){super(...e),this.deviceTree=[]}}p.styles=o.AH`
    :host {
      display: block;
      box-sizing: border-box;
      margin: 0;
      height: 100%;
      overflow-y: scroll;
      overflow-x: hidden;
      background-color: var(--sidebar-background-color);
      color: var(--sidebar-menu-button-text-color, --primary-text-color);
      margin-right: env(safe-area-inset-right);
      border-left: 1px solid var(--divider-color);
      padding-left: 8px;
    }

    ha-alert {
      display: block;
      margin-right: 8px;
      margin-top: 8px;
    }

    ul {
      list-style-type: none;
      padding: 0;
      margin-block-start: 8px;
    }

    li {
      display: block;
      margin-bottom: 4px;
      & div.item {
        /* icon and text */
        display: flex;
        align-items: center;
        pointer-events: none;
        & > div {
          /* optional container for multiple paragraphs */
          min-width: 0;
          width: 100%;
        }
      }
    }

    li p {
      margin: 0;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
    }

    span.icon {
      flex: 0 0 auto;
      display: inline-flex;
      /* align-self: stretch; */
      align-items: center;

      color: var(--text-primary-color);
      font-size: 1rem;
      font-weight: 700;
      border-radius: 12px;
      padding: 3px 6px;
      margin-right: 4px;

      & > ha-svg-icon {
        float: left;
        width: 16px;
        height: 16px;
        margin-right: 4px;
      }

      & > span {
        /* icon text */
        flex: 1;
        text-align: center;
      }
    }

    span.ia {
      flex-basis: 70px;
      background-color: var(--label-badge-grey);
      & > ha-svg-icon {
        transform: rotate(90deg);
      }
    }

    span.co {
      flex-basis: 44px;
      background-color: var(--amber-color);
    }

    span.ga {
      flex-basis: 54px;
      background-color: var(--knx-green);
    }

    .description {
      margin-top: 4px;
      margin-bottom: 4px;
    }

    p.co-info,
    p.ga-info {
      font-size: 0.85rem;
      font-weight: 300;
    }

    .back-item {
      margin-left: -8px; /* revert host padding to have gapless border */
      padding-left: 8px;
      margin-top: -8px; /* revert ul margin-block-start to have gapless hover effect */
      padding-top: 8px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--divider-color);
      margin-bottom: 8px;
    }

    .back-icon {
      margin-right: 8px;
      color: var(--label-badge-grey);
    }

    li.channel {
      border-top: 1px solid var(--divider-color);
      border-bottom: 1px solid var(--divider-color);
      padding: 4px 16px;
      font-weight: 500;
    }

    li.clickable {
      cursor: pointer;
    }
    li.clickable:hover {
      background-color: rgba(var(--rgb-primary-text-color), 0.04);
    }

    li[draggable="true"] {
      cursor: grab;
    }
    li[draggable="true"]:hover {
      border-radius: 12px;
      background-color: rgba(var(--rgb-primary-color), 0.2);
    }

    ul.group-addresses {
      margin-top: 0;
      margin-bottom: 8px;

      & > li:not(:first-child) {
        /* passive addresses for this com-object */
        opacity: 0.8;
      }
    }
  `,(0,i.__decorate)([(0,n.Fg)({context:d.B})],p.prototype,"_dragDropContext",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"data",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],p.prototype,"validDPTs",void 0),(0,i.__decorate)([(0,s.wk)()],p.prototype,"_selectedDevice",void 0),p=(0,i.__decorate)([(0,s.EM)("knx-project-device-tree")],p)},77812:function(e,t,a){var i=a(62826),o=a(96196),s=a(77845),r=a(94333),n=a(92542),l=(a(70524),a(87156),a(7153),a(76674));class d extends o.WF{willUpdate(e){if(e.has("selector")||e.has("key")){const e=!!this.selector.required,t="boolean"in this.selector.selector,a="number"in this.selector.selector;if(this._inlineSelector=e&&(t||a),this._optionalBooleanSelector=!e&&t,this._optionalBooleanSelector){const e=!!this.selector.default;this._haSelectorValue=!e,this._enabled=this.value??e}else this._enabled=e||void 0!==this.value,this._haSelectorValue=this.value??this.selector.default??null}}render(){const e=(0,l.W)(this.validationErrors),t=this._optionalBooleanSelector?o.s6:o.qy`<ha-selector
          class=${(0,r.H)({"newline-selector":!this._inlineSelector})}
          .hass=${this.hass}
          .selector=${this.selector.selector}
          .disabled=${!this._enabled}
          .value=${this._haSelectorValue}
          .localizeValue=${this.hass.localize}
          @value-changed=${this._valueChange}
        ></ha-selector>`;return o.qy`
      <div class="body">
        <div class="text">
          <p class="heading ${(0,r.H)({invalid:!!e})}">
            ${this.localizeFunction(`${this.key}.label`)}
          </p>
          <p class="description">${this.localizeFunction(`${this.key}.description`)}</p>
        </div>
        ${this.selector.required?o.s6:o.qy`<ha-selector
              class="optional-switch"
              .selector=${{boolean:{}}}
              .value=${this._enabled}
              @value-changed=${this._toggleEnabled}
            ></ha-selector>`}
        ${this._inlineSelector?t:o.s6}
      </div>
      ${this._inlineSelector?o.s6:t}
      ${e?o.qy`<p class="invalid-message">${e.error_message}</p>`:o.s6}
    `}_toggleEnabled(e){e.stopPropagation(),this._enabled=!this._enabled,this._propagateValue()}_valueChange(e){e.stopPropagation(),this._haSelectorValue=e.detail.value,this._propagateValue()}_propagateValue(){this._optionalBooleanSelector?(0,n.r)(this,"value-changed",{value:this._enabled===this._haSelectorValue?this._haSelectorValue:void 0}):(0,n.r)(this,"value-changed",{value:this._enabled?this._haSelectorValue:void 0})}constructor(...e){super(...e),this.localizeFunction=e=>e,this._enabled=!0,this._haSelectorValue=null,this._inlineSelector=!1,this._optionalBooleanSelector=!1}}d.styles=o.AH`
    :host {
      display: block;
      padding: 8px 16px 8px 0;
      border-top: 1px solid var(--divider-color);
    }
    .newline-selector {
      display: block;
      padding-top: 8px;
    }
    .body {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      row-gap: 8px;
    }
    .body > * {
      flex-grow: 1;
    }
    .text {
      flex-basis: 260px; /* min size of text - if inline selector is too big it will be pushed to next row */
    }
    .heading {
      margin: 0;
    }
    .description {
      margin: 0;
      display: block;
      padding-top: 4px;
      font-family: var(
        --mdc-typography-body2-font-family,
        var(--mdc-typography-font-family, Roboto, sans-serif)
      );
      -webkit-font-smoothing: antialiased;
      font-size: var(--mdc-typography-body2-font-size, 0.875rem);
      font-weight: var(--mdc-typography-body2-font-weight, 400);
      line-height: normal;
      color: var(--secondary-text-color);
    }

    .invalid {
      color: var(--error-color);
    }
    .invalid-message {
      font-size: 0.75rem;
      color: var(--error-color);
      padding-left: 16px;
    }
  `,(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)()],d.prototype,"key",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"selector",void 0),(0,i.__decorate)([(0,s.MZ)()],d.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"validationErrors",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"localizeFunction",void 0),(0,i.__decorate)([(0,s.wk)()],d.prototype,"_enabled",void 0),d=(0,i.__decorate)([(0,s.EM)("knx-selector-row")],d)},35672:function(e,t,a){a.a(e,(async function(e,t){try{var i=a(62826),o=a(96196),s=a(77845),r=a(92542),n=a(95096),l=(a(70105),e([n]));n=(l.then?(await l)():l)[0];class d extends o.WF{get _options(){return this.allowFalse?["true","init","expire","every","false"]:["true","init","expire","every"]}_hasMinutes(e){return"expire"===e||"every"===e}willUpdate(){if("boolean"==typeof this.value)return void(this._strategy=this.value?"true":"false");const[e,t]=this.value.split(" ");["true","false","init","expire","every"].includes(e)?this._strategy=e:this._strategy="true",+t&&(this._minutes=+t)}render(){return o.qy` <div class="inline">
      <ha-selector-select
        .hass=${this.hass}
        .label=${this.localizeFunction(`${this.key}.title`)}
        .localizeValue=${this.localizeFunction}
        .selector=${{select:{translation_key:this.key,multiple:!1,custom_value:!1,mode:"dropdown",options:this._options}}}
        .key=${"strategy"}
        .value=${this._strategy}
        @value-changed=${this._handleChange}
      >
      </ha-selector-select>
      <ha-selector-number
        .hass=${this.hass}
        .disabled=${!this._hasMinutes(this._strategy)}
        .selector=${{number:{min:2,max:1440,step:1,unit_of_measurement:"minutes"}}}
        .key=${"minutes"}
        .value=${this._minutes}
        @value-changed=${this._handleChange}
      >
      </ha-selector-number>
    </div>`}_handleChange(e){let t,a,i;e.stopPropagation(),"strategy"===e.target.key?(t=e.detail.value,a=this._minutes):(t=this._strategy,a=e.detail.value),i=this._hasMinutes(t)?`${t} ${a}`:"true"===t||"false"!==t&&t,(0,r.r)(this,"value-changed",{value:i})}constructor(...e){super(...e),this.value=!0,this.key="sync_state",this.allowFalse=!1,this.localizeFunction=e=>e,this._strategy="true",this._minutes=60}}d.styles=o.AH`
    .description {
      margin: 0;
      display: block;
      padding-top: 4px;
      padding-bottom: 8px;
      font-family: var(
        --mdc-typography-body2-font-family,
        var(--mdc-typography-font-family, Roboto, sans-serif)
      );
      -webkit-font-smoothing: antialiased;
      font-size: var(--mdc-typography-body2-font-size, 0.875rem);
      font-weight: var(--mdc-typography-body2-font-weight, 400);
      line-height: normal;
      color: var(--secondary-text-color);
    }
    .inline {
      width: 100%;
      display: inline-flex;
      flex-flow: row wrap;
      gap: 16px;
      justify-content: space-between;
    }
    .inline > * {
      flex: 1;
      width: 100%; /* to not overflow when wrapped */
    }
  `,(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)()],d.prototype,"value",void 0),(0,i.__decorate)([(0,s.MZ)()],d.prototype,"key",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"allowFalse",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],d.prototype,"localizeFunction",void 0),d=(0,i.__decorate)([(0,s.EM)("knx-sync-state-selector-row")],d),t()}catch(d){t(d)}}))},48011:function(e,t,a){a.a(e,(async function(e,t){try{var i=a(62826),o=a(96196),s=a(77845),r=a(5871),n=a(53907),l=(a(95637),a(89473)),d=a(81774),c=a(92542),h=a(39396),p=a(65294),u=a(78577),v=e([n,l,d]);[n,l,d]=v.then?(await v)():v;const g=new u.Q("create_device_dialog");class _ extends o.WF{closeDialog(e){(0,c.r)(this,"create-device-dialog-closed",{newDevice:this._deviceEntry},{bubbles:!1})}_createDevice(){(0,p.Jv)(this.hass,{name:this.deviceName,area_id:this.area}).then((e=>{this._deviceEntry=e})).catch((e=>{g.error("getGroupMonitorInfo",e),(0,r.o)("/knx/error",{replace:!0,data:e})})).finally((()=>{this.closeDialog(void 0)}))}render(){return o.qy`<ha-dialog
      open
      .heading=${"Create new device"}
      scrimClickAction
      escapeKeyAction
      defaultAction="ignore"
    >
      <ha-selector-text
        .hass=${this.hass}
        .label=${"Name"}
        .required=${!0}
        .selector=${{text:{}}}
        .key=${"deviceName"}
        .value=${this.deviceName}
        @value-changed=${this._valueChanged}
      ></ha-selector-text>
      <ha-area-picker
        .hass=${this.hass}
        .label=${"Area"}
        .key=${"area"}
        .value=${this.area}
        @value-changed=${this._valueChanged}
      >
      </ha-area-picker>
      <ha-button slot="secondaryAction" @click=${this.closeDialog}>
        ${this.hass.localize("ui.common.cancel")}
      </ha-button>
      <ha-button slot="primaryAction" @click=${this._createDevice}>
        ${this.hass.localize("ui.common.add")}
      </ha-button>
    </ha-dialog>`}_valueChanged(e){e.stopPropagation();const t=e.target;t?.key&&(this[t.key]=e.detail.value)}static get styles(){return[h.nA,o.AH`
        @media all and (min-width: 600px) {
          ha-dialog {
            --mdc-dialog-min-width: 480px;
          }
        }
      `]}}(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,i.__decorate)([(0,s.MZ)({attribute:!1})],_.prototype,"deviceName",void 0),(0,i.__decorate)([(0,s.wk)()],_.prototype,"area",void 0),_=(0,i.__decorate)([(0,s.EM)("knx-device-create-dialog")],_),t()}catch(g){t(g)}}))},36376:function(e,t,a){a.a(e,(async function(e,i){try{a.d(t,{N:()=>l});var o=a(43197),s=e([o]);o=(s.then?(await s)():s)[0];const n={binary_sensor:{iconPath:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",color:"var(--green-color)"},button:{iconPath:"M20 20.5C20 21.3 19.3 22 18.5 22H13C12.6 22 12.3 21.9 12 21.6L8 17.4L8.7 16.6C8.9 16.4 9.2 16.3 9.5 16.3H9.7L12 18V9C12 8.4 12.4 8 13 8S14 8.4 14 9V13.5L15.2 13.6L19.1 15.8C19.6 16 20 16.6 20 17.1V20.5M20 2H4C2.9 2 2 2.9 2 4V12C2 13.1 2.9 14 4 14H8V12H4V4H20V12H18V14H20C21.1 14 22 13.1 22 12V4C22 2.9 21.1 2 20 2Z",color:"var(--purple-color)"},climate:{color:"var(--red-color)"},cover:{iconPath:"M3 4H21V8H19V20H17V8H7V20H5V8H3V4M8 9H16V11H8V9M8 12H16V14H8V12M8 15H16V17H8V15M8 18H16V20H8V18Z",color:"var(--cyan-color)"},date:{color:"var(--lime-color)"},event:{iconPath:"M13 11H11V5H13M13 15H11V13H13M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z",color:"var(--deep-orange-color)"},fan:{iconPath:"M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11M12.5,2C17,2 17.11,5.57 14.75,6.75C13.76,7.24 13.32,8.29 13.13,9.22C13.61,9.42 14.03,9.73 14.35,10.13C18.05,8.13 22.03,8.92 22.03,12.5C22.03,17 18.46,17.1 17.28,14.73C16.78,13.74 15.72,13.3 14.79,13.11C14.59,13.59 14.28,14 13.88,14.34C15.87,18.03 15.08,22 11.5,22C7,22 6.91,18.42 9.27,17.24C10.25,16.75 10.69,15.71 10.89,14.79C10.4,14.59 9.97,14.27 9.65,13.87C5.96,15.85 2,15.07 2,11.5C2,7 5.56,6.89 6.74,9.26C7.24,10.25 8.29,10.68 9.22,10.87C9.41,10.39 9.73,9.97 10.14,9.65C8.15,5.96 8.94,2 12.5,2Z",color:"var(--light-grey-color)"},light:{color:"var(--amber-color)"},notify:{color:"var(--pink-color)"},number:{color:"var(--teal-color)"},scene:{color:"var(--deep-purple-color)"},select:{color:"var(--indigo-color)"},sensor:{color:"var(--orange-color)"},switch:{iconPath:"M18.4 1.6C18 1.2 17.5 1 17 1H7C6.5 1 6 1.2 5.6 1.6C5.2 2 5 2.5 5 3V21C5 21.5 5.2 22 5.6 22.4C6 22.8 6.5 23 7 23H17C17.5 23 18 22.8 18.4 22.4C18.8 22 19 21.5 19 21V3C19 2.5 18.8 2 18.4 1.6M16 7C16 7.6 15.6 8 15 8H9C8.4 8 8 7.6 8 7V5C8 4.4 8.4 4 9 4H15C15.6 4 16 4.4 16 5V7Z",color:"var(--blue-color)"},text:{color:"var(--brown-color)"},time:{color:"var(--light-green-color)"},valve:{iconPath:"M4 22H2V2H4M22 2H20V22H22M17.24 5.34L13.24 9.34A3 3 0 0 0 9.24 13.34L5.24 17.34L6.66 18.76L10.66 14.76A3 3 0 0 0 14.66 10.76L18.66 6.76Z",color:"var(--light-blue-color)"},weather:{color:"var(--yellow-color)"}};function l(e){return{iconPath:o.l[e],color:"var(--dark-grey-color)",...n[e]}}i()}catch(r){i(r)}}))},13384:function(e,t,a){function i(e,t,a,o){const s=t.split("."),r=s.pop();if(!r)return;let n=e;for(const i of s){if(!(i in n)){if(void 0===a)return;n[i]={}}n=n[i]}void 0===a?(o&&o.debug(`remove ${r} at ${t}`),delete n[r],!Object.keys(n).length&&s.length>0&&i(e,s.join("."),void 0)):(o&&o.debug(`update ${r} at ${t} with value`,a),n[r]=a)}function o(e,t){const a=t.split(".");let i=e;for(const o of a){if(!(o in i))return;i=i[o]}return i}a.d(t,{F:()=>i,L:()=>o})},53003:function(e,t,a){a.d(t,{L0:()=>s,OM:()=>r,dd:()=>n});const i=e=>"knx"===e[0],o=e=>e.identifiers.some(i),s=e=>Object.values(e.devices).filter(o),r=(e,t)=>Object.values(e.devices).find((e=>e.identifiers.find((e=>i(e)&&e[1]===t)))),n=e=>{const t=e.identifiers.find(i);return t?t[1]:void 0}},19337:function(e,t,a){a.d(t,{$k:()=>d,Ah:()=>s,HG:()=>o,Vt:()=>l,Yb:()=>n,_O:()=>c,oJ:()=>h});var i=a(22786);const o=(e,t)=>t.some((t=>e.main===t.main&&(!t.sub||e.sub===t.sub))),s=(e,t)=>{const a=((e,t)=>Object.entries(e.group_addresses).reduce(((e,[a,i])=>(i.dpt&&o(i.dpt,t)&&(e[a]=i),e)),{}))(e,t);return Object.entries(e.communication_objects).reduce(((e,[t,i])=>(i.group_address_links.some((e=>e in a))&&(e[t]=i),e)),{})};function r(e,t){const a=[];return e.forEach((e=>{"knx_group_address"!==e.type?"schema"in e&&a.push(...r(e.schema,t)):e.options.validDPTs?a.push(...e.options.validDPTs):e.options.dptSelect?a.push(...e.options.dptSelect.map((e=>e.dpt))):e.options.dptClasses&&a.push(...Object.values(t).filter((t=>e.options.dptClasses.includes(t.dpt_class))).map((e=>({main:e.main,sub:e.sub}))))})),a}const n=(0,i.A)(((e,t)=>r(e,t).reduce(((e,t)=>e.some((e=>{return i=t,(a=e).main===i.main&&a.sub===i.sub;var a,i}))?e:e.concat([t])),[]))),l=e=>null==e?"":e.main+(null!=e.sub?"."+e.sub.toString().padStart(3,"0"):""),d=e=>{if(!e)return null;const t=e.trim().split(".");if(0===t.length||t.length>2)return null;const a=Number.parseInt(t[0],10);if(Number.isNaN(a))return null;if(1===t.length)return{main:a,sub:null};const i=Number.parseInt(t[1],10);return Number.isNaN(i)?null:{main:a,sub:i}},c=(e,t)=>{if(e.main!==t.main)return e.main-t.main;return(e.sub??-1)-(t.sub??-1)},h=(e,t,a)=>{const i=a[l(e)];return!!i&&t.includes(i.dpt_class)}},56803:function(e,t,a){a.d(t,{B:()=>n,J:()=>r});var i=a(16527);const o=new(a(78577).Q)("knx-drag-drop-context"),s=Symbol("drag-drop-context");class r{get groupAddress(){return this._groupAddress}constructor(e){this.gaDragStartHandler=e=>{const t=e.target,a=t.ga;a?(this._groupAddress=a,o.debug("dragstart",a.address,this),e.dataTransfer?.setData("text/group-address",a.address),this._updateObservers()):o.warn("dragstart: no 'ga' property found",t)},this.gaDragEndHandler=e=>{o.debug("dragend",this),this._groupAddress=void 0,this._updateObservers()},this.gaDragIndicatorStartHandler=e=>{const t=e.target.ga;t&&(this._groupAddress=t,o.debug("drag indicator start",t.address,this),this._updateObservers())},this.gaDragIndicatorEndHandler=e=>{o.debug("drag indicator end",this),this._groupAddress=void 0,this._updateObservers()},this._updateObservers=e}}const n=(0,i.q6)(s)},76674:function(e,t,a){a.d(t,{W:()=>o,a:()=>i});const i=(e,t)=>{if(!e)return;const a=[];for(const i of e)if(i.path){const[e,...o]=i.path;e===t&&a.push({...i,path:o})}return a.length?a:void 0},o=(e,t=void 0)=>(t&&(e=i(e,t)),e?.find((e=>0===e.path?.length)))},75270:function(e,t,a){a.a(e,(async function(e,i){try{a.r(t),a.d(t,{KNXCreateEntity:()=>w});var o=a(62826),s=a(96196),r=a(77845),n=a(16527),l=a(89302),d=a(54393),c=(a(29937),a(17963),a(95379),a(70748),a(60961),a(65300),a(5871)),h=a(76679),p=a(92542),u=a(62111),v=a(66820),g=(a(42615),a(65294)),_=a(36376),m=a(19337),y=a(56803),b=a(78577),f=e([d,v,_]);[d,v,_]=f.then?(await f)():f;const x="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",$="M5,3A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5.5L18.5,3H17V9A1,1 0 0,1 16,10H8A1,1 0 0,1 7,9V3H5M12,4V9H15V4H12M7,12H17A1,1 0 0,1 18,13V19H6V13A1,1 0 0,1 7,12Z",k=new b.Q("knx-create-entity");class w extends s.WF{willUpdate(e){if(e.has("route")){const e=this.route.prefix.split("/").at(-1);if("create"!==e&&"edit"!==e)return k.error("Unknown intent",e),void(this._intent=void 0);this._intent=e,this._config=void 0,this._validationErrors=void 0,this._validationBaseError=void 0,"create"===e?(this.entityId=void 0,this.entityPlatform=this.route.path.split("/")[1]):"edit"===e&&(this.entityId=this.route.path.split("/")[1])}}render(){return this.hass&&this._intent?this._projectLoadTask.render({initial:()=>s.qy`
        <hass-loading-screen .message=${"Waiting to fetch project data."}></hass-loading-screen>
      `,pending:()=>s.qy`
        <hass-loading-screen .message=${"Loading KNX project data."}></hass-loading-screen>
      `,error:e=>this._renderError("Error loading KNX project",e),complete:()=>"edit"===this._intent?this._renderEdit():this._renderCreate()}):s.qy` <hass-loading-screen></hass-loading-screen> `}_renderCreate(){return this.entityPlatform?this.knx.supportedPlatforms.includes(this.entityPlatform)?this._renderLoadSchema():(k.error("Unknown platform",this.entityPlatform),this._renderTypeSelection()):this._renderTypeSelection()}_renderEdit(){return this._entityConfigLoadTask.render({initial:()=>s.qy`
        <hass-loading-screen .message=${"Waiting to fetch entity data."}></hass-loading-screen>
      `,pending:()=>s.qy`
        <hass-loading-screen .message=${"Loading entity data."}></hass-loading-screen>
      `,error:e=>this._renderError(s.qy`${this.hass.localize("ui.card.common.entity_not_found")}:
            <code>${this.entityId}</code>`,e),complete:()=>this.entityPlatform?this.knx.supportedPlatforms.includes(this.entityPlatform)?this._renderLoadSchema():this._renderError("Unsupported platform","Unsupported platform: "+this.entityPlatform):this._renderError(s.qy`${this.hass.localize("ui.card.common.entity_not_found")}:
              <code>${this.entityId}</code>`,new Error("Entity platform unknown"))})}_renderLoadSchema(){return this._schemaLoadTask.render({initial:()=>s.qy`
        <hass-loading-screen .message=${"Waiting to fetch schema."}></hass-loading-screen>
      `,pending:()=>s.qy`
        <hass-loading-screen .message=${"Loading entity platform schema."}></hass-loading-screen>
      `,error:e=>this._renderError("Error loading schema",e),complete:()=>this._renderEntityConfig(this.entityPlatform)})}_renderError(e,t){return k.error("Error in create/edit entity",t),s.qy`
      <hass-subpage
        .hass=${this.hass}
        .narrow=${this.narrow}
        .back-path=${this.backPath}
        .header=${this.hass.localize("ui.panel.config.integrations.config_flow.error")}
      >
        <div class="content">
          <ha-alert alert-type="error"> ${e} </ha-alert>
        </div>
      </hass-subpage>
    `}_renderTypeSelection(){return s.qy`
      <hass-subpage
        .hass=${this.hass}
        .narrow=${this.narrow}
        .back-path=${this.backPath}
        .header=${this.hass.localize("component.knx.config_panel.entities.create.title")}
      >
        <div class="type-selection">
          <ha-card
            outlined
            .header=${this.hass.localize("component.knx.config_panel.entities.create.type_selection.header")}
          >
            <!-- <p>Some help text</p> -->
            <ha-navigation-list
              .hass=${this.hass}
              .narrow=${this.narrow}
              .pages=${this.knx.supportedPlatforms.map((e=>{const t=(0,_.N)(e);return{name:`${this.hass.localize(`component.${e}.title`)}`,description:`${this.hass.localize(`component.knx.config_panel.entities.create.${e}.description`)}`,iconPath:t.iconPath,iconColor:t.color,path:`/knx/entities/create/${e}`}}))}
              has-secondary
              .label=${this.hass.localize("component.knx.config_panel.entities.create.type_selection.header")}
            ></ha-navigation-list>
          </ha-card>
        </div>
      </hass-subpage>
    `}_renderEntityConfig(e){const t="create"===this._intent,a=this.knx.schema[e];return s.qy`<hass-subpage
      .hass=${this.hass}
      .narrow=${this.narrow}
      .back-path=${this.backPath}
      .header=${t?this.hass.localize("component.knx.config_panel.entities.create.title"):`${this.hass.localize("ui.common.edit")}: ${this.entityId}`}
    >
      <div class="content">
        <div class="entity-config">
          <knx-configure-entity
            .hass=${this.hass}
            .knx=${this.knx}
            .platform=${e}
            .config=${this._config}
            .schema=${a}
            .validationErrors=${this._validationErrors}
            @knx-entity-configuration-changed=${this._configChanged}
          >
            ${this._validationBaseError?s.qy`<ha-alert slot="knx-validation-error" alert-type="error">
                  <details>
                    <summary><b>Validation error</b></summary>
                    <p>Base error: ${this._validationBaseError}</p>
                    ${this._validationErrors?.map((e=>s.qy`<p>
                          ${e.error_class}: ${e.error_message} in ${e.path?.join(" / ")}
                        </p>`))??s.s6}
                  </details>
                </ha-alert>`:s.s6}
          </knx-configure-entity>
          <ha-fab
            .label=${t?this.hass.localize("ui.common.create"):this.hass.localize("ui.common.save")}
            extended
            @click=${t?this._entityCreate:this._entityUpdate}
            ?disabled=${void 0===this._config}
          >
            <ha-svg-icon slot="icon" .path=${t?x:$}></ha-svg-icon>
          </ha-fab>
        </div>
        ${this.knx.projectData?s.qy` <div class="panel">
              <knx-project-device-tree
                .data=${this.knx.projectData}
                .validDPTs=${(0,m.Yb)(a,this.knx.dptMetadata)}
              ></knx-project-device-tree>
            </div>`:s.s6}
      </div>
    </hass-subpage>`}_configChanged(e){e.stopPropagation(),k.debug("configChanged",e.detail),this._config=e.detail,this._validationErrors&&this._entityValidate()}_entityCreate(e){e.stopPropagation(),void 0!==this._config&&void 0!==this.entityPlatform?(0,g.S$)(this.hass,{platform:this.entityPlatform,data:this._config}).then((e=>{this._handleValidationError(e,!0)||(k.debug("Successfully created entity",e.entity_id),(0,c.o)("/knx/entities",{replace:!0}),e.entity_id?this._entityMoreInfoSettings(e.entity_id):k.error("entity_id not found after creation."))})).catch((e=>{k.error("Error creating entity",e),(0,c.o)("/knx/error",{replace:!0,data:e})})):k.error("No config found.")}_entityUpdate(e){e.stopPropagation(),void 0!==this._config&&void 0!==this.entityId&&void 0!==this.entityPlatform?(0,g.zU)(this.hass,{platform:this.entityPlatform,entity_id:this.entityId,data:this._config}).then((e=>{this._handleValidationError(e,!0)||(k.debug("Successfully updated entity",this.entityId),(0,c.o)("/knx/entities",{replace:!0}))})).catch((e=>{k.error("Error updating entity",e),(0,c.o)("/knx/error",{replace:!0,data:e})})):k.error("No config found.")}_handleValidationError(e,t){return!1===e.success?(k.warn("Validation error",e),this._validationErrors=e.errors,this._validationBaseError=e.error_base,t&&setTimeout((()=>this._alertElement.scrollIntoView({behavior:"smooth"}))),!0):(this._validationErrors=void 0,this._validationBaseError=void 0,k.debug("Validation passed",e.entity_id),!1)}_entityMoreInfoSettings(e){(0,p.r)(h.G.document.querySelector("home-assistant"),"hass-more-info",{entityId:e,view:"settings"})}constructor(...e){super(...e),this._projectLoadTask=new l.YZ(this,{args:()=>[],task:async()=>{this.knx.projectInfo&&(this.knx.projectData||await this.knx.loadProject())}}),this._schemaLoadTask=new l.YZ(this,{args:()=>[this.entityPlatform],task:async([e])=>{e&&await this.knx.loadSchema(e)}}),this._entityConfigLoadTask=new l.YZ(this,{args:()=>[this.entityId],task:async([e])=>{if(!e)return;const{platform:t,data:a}=await(0,g.wE)(this.hass,e);this.entityPlatform=t,this._config=a}}),this._dragDropContextProvider=new n.DT(this,{context:y.B,initialValue:new y.J((()=>{this._dragDropContextProvider.updateObservers()}))}),this._entityValidate=(0,u.n)((()=>{k.debug("validate",this._config),void 0!==this._config&&void 0!==this.entityPlatform&&(0,g.UD)(this.hass,{platform:this.entityPlatform,data:this._config}).then((e=>{this._handleValidationError(e,!1)})).catch((e=>{k.error("validateEntity",e),(0,c.o)("/knx/error",{replace:!0,data:e})}))}),250)}}w.styles=s.AH`
    hass-loading-screen {
      --app-header-background-color: var(--sidebar-background-color);
      --app-header-text-color: var(--sidebar-text-color);
    }

    .type-selection {
      margin: 20px auto 80px;
      max-width: 720px;
    }

    ha-card {
      overflow: hidden; /* don't cover rounded corner border by content */
    }

    @media screen and (max-width: 600px) {
      .panel {
        display: none;
      }
    }

    .content {
      display: flex;
      flex-direction: row;
      height: 100%;
      width: 100%;

      & > .entity-config {
        flex-grow: 1;
        flex-shrink: 1;
        height: 100%;
        overflow-y: scroll;
      }

      & > .panel {
        flex-grow: 0;
        flex-shrink: 3;
        width: 480px;
        min-width: 280px;
      }
    }

    knx-configure-entity {
      display: block;
      margin: 20px auto 40px; /* leave 80px space for fab */
      max-width: 720px;
    }

    ha-alert {
      display: block;
      margin: 20px auto;
      max-width: 720px;

      & summary {
        padding: 10px;
      }
    }

    ha-fab {
      /* not slot="fab" to move out of panel */
      float: right;
      margin-right: calc(16px + env(safe-area-inset-right));
      margin-bottom: 40px;
      z-index: 1;
    }
  `,(0,o.__decorate)([(0,r.MZ)({type:Object})],w.prototype,"hass",void 0),(0,o.__decorate)([(0,r.MZ)({attribute:!1})],w.prototype,"knx",void 0),(0,o.__decorate)([(0,r.MZ)({type:Object})],w.prototype,"route",void 0),(0,o.__decorate)([(0,r.MZ)({type:Boolean,reflect:!0})],w.prototype,"narrow",void 0),(0,o.__decorate)([(0,r.MZ)({type:String,attribute:"back-path"})],w.prototype,"backPath",void 0),(0,o.__decorate)([(0,r.wk)()],w.prototype,"_config",void 0),(0,o.__decorate)([(0,r.wk)()],w.prototype,"_validationErrors",void 0),(0,o.__decorate)([(0,r.wk)()],w.prototype,"_validationBaseError",void 0),(0,o.__decorate)([(0,r.P)("ha-alert")],w.prototype,"_alertElement",void 0),w=(0,o.__decorate)([(0,r.EM)("knx-create-entity")],w),i()}catch(x){i(x)}}))}};
//# sourceMappingURL=8207.b7890be122ee0e6e.js.map