{"version":3,"file":"6247.c4e3a2dd05516f15.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-alert.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-qr-code.ts"],"sourcesContent":["import {\n  mdiAlertCircleOutline,\n  mdiAlertOutline,\n  mdiCheckboxMarkedCircleOutline,\n  mdiClose,\n  mdiInformationOutline,\n} from \"@mdi/js\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport \"./ha-icon-button\";\nimport \"./ha-svg-icon\";\n\nconst ALERT_ICONS = {\n  info: mdiInformationOutline,\n  warning: mdiAlertOutline,\n  error: mdiAlertCircleOutline,\n  success: mdiCheckboxMarkedCircleOutline,\n};\n\ndeclare global {\n  interface HASSDomEvents {\n    \"alert-dismissed-clicked\": undefined;\n  }\n}\n\n@customElement(\"ha-alert\")\nclass HaAlert extends LitElement {\n  // eslint-disable-next-line lit/no-native-attributes\n  @property() public title = \"\";\n\n  @property({ attribute: \"alert-type\" }) public alertType:\n    | \"info\"\n    | \"warning\"\n    | \"error\"\n    | \"success\" = \"info\";\n\n  @property({ type: Boolean }) public dismissable = false;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  public render() {\n    return html`\n      <div\n        class=\"issue-type ${classMap({\n          [this.alertType]: true,\n        })}\"\n        role=\"alert\"\n      >\n        <div class=\"icon ${this.title ? \"\" : \"no-title\"}\">\n          <slot name=\"icon\">\n            <ha-svg-icon .path=${ALERT_ICONS[this.alertType]}></ha-svg-icon>\n          </slot>\n        </div>\n        <div class=${classMap({ content: true, narrow: this.narrow })}>\n          <div class=\"main-content\">\n            ${this.title\n              ? html`<div class=\"title\">${this.title}</div>`\n              : nothing}\n            <slot></slot>\n          </div>\n          <div class=\"action\">\n            <slot name=\"action\">\n              ${this.dismissable\n                ? html`<ha-icon-button\n                    @click=${this._dismissClicked}\n                    label=\"Dismiss alert\"\n                    .path=${mdiClose}\n                  ></ha-icon-button>`\n                : nothing}\n            </slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _dismissClicked() {\n    fireEvent(this, \"alert-dismissed-clicked\");\n  }\n\n  static styles = css`\n    .issue-type {\n      position: relative;\n      padding: 8px;\n      display: flex;\n    }\n    .icon {\n      height: var(--ha-alert-icon-size, 24px);\n      width: var(--ha-alert-icon-size, 24px);\n    }\n    .issue-type::after {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      opacity: 0.12;\n      pointer-events: none;\n      content: \"\";\n      border-radius: var(--ha-border-radius-sm);\n    }\n    .icon.no-title {\n      align-self: center;\n    }\n    .content {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n      text-align: var(--float-start);\n    }\n    .content.narrow {\n      flex-direction: column;\n      align-items: flex-end;\n    }\n    .action {\n      z-index: 1;\n      width: min-content;\n      --mdc-theme-primary: var(--primary-text-color);\n    }\n    .main-content {\n      overflow-wrap: anywhere;\n      word-break: break-word;\n      line-height: normal;\n      margin-left: 8px;\n      margin-right: 0;\n      margin-inline-start: 8px;\n      margin-inline-end: 8px;\n    }\n    .title {\n      margin-top: 2px;\n      font-weight: var(--ha-font-weight-bold);\n    }\n    .action ha-icon-button {\n      --mdc-theme-primary: var(--primary-text-color);\n      --mdc-icon-button-size: 36px;\n    }\n    .issue-type.info > .icon {\n      color: var(--info-color);\n    }\n    .issue-type.info::after {\n      background-color: var(--info-color);\n    }\n\n    .issue-type.warning > .icon {\n      color: var(--warning-color);\n    }\n    .issue-type.warning::after {\n      background-color: var(--warning-color);\n    }\n\n    .issue-type.error > .icon {\n      color: var(--error-color);\n    }\n    .issue-type.error::after {\n      background-color: var(--error-color);\n    }\n\n    .issue-type.success > .icon {\n      color: var(--success-color);\n    }\n    .issue-type.success::after {\n      background-color: var(--success-color);\n    }\n    :host ::slotted(ul) {\n      margin: 0;\n      padding-inline-start: 20px;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-alert\": HaAlert;\n  }\n}\n","import type { PropertyValues } from \"lit\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport QRCode from \"qrcode\";\nimport \"./ha-alert\";\nimport { rgb2hex } from \"../common/color/convert-color\";\n\n@customElement(\"ha-qr-code\")\nexport class HaQrCode extends LitElement {\n  @property() public data?: string;\n\n  @property({ attribute: \"error-correction-level\" })\n  public errorCorrectionLevel: \"low\" | \"medium\" | \"quartile\" | \"high\" =\n    \"medium\";\n\n  @property({ type: Number })\n  public width = 4;\n\n  @property({ type: Number })\n  public scale = 4;\n\n  @property({ type: Number })\n  public margin = 4;\n\n  @property({ attribute: false, type: Number })\n  public maskPattern?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7;\n\n  @property({ attribute: \"center-image\" }) public centerImage?: string;\n\n  @state() private _error?: string;\n\n  @query(\"canvas\") private _canvas?: HTMLCanvasElement;\n\n  protected willUpdate(changedProperties: PropertyValues): void {\n    super.willUpdate(changedProperties);\n    if (\n      (changedProperties.has(\"data\") ||\n        changedProperties.has(\"scale\") ||\n        changedProperties.has(\"width\") ||\n        changedProperties.has(\"margin\") ||\n        changedProperties.has(\"maskPattern\") ||\n        changedProperties.has(\"errorCorrectionLevel\")) &&\n      this._error\n    ) {\n      this._error = undefined;\n    }\n  }\n\n  updated(changedProperties: PropertyValues) {\n    const canvas = this._canvas;\n    if (\n      canvas &&\n      this.data &&\n      (changedProperties.has(\"data\") ||\n        changedProperties.has(\"scale\") ||\n        changedProperties.has(\"width\") ||\n        changedProperties.has(\"margin\") ||\n        changedProperties.has(\"maskPattern\") ||\n        changedProperties.has(\"errorCorrectionLevel\") ||\n        changedProperties.has(\"centerImage\"))\n    ) {\n      const computedStyles = getComputedStyle(this);\n      const textRgb = computedStyles.getPropertyValue(\n        \"--rgb-primary-text-color\"\n      );\n      const backgroundRgb = computedStyles.getPropertyValue(\n        \"--rgb-card-background-color\"\n      );\n      const textHex = rgb2hex(\n        textRgb.split(\",\").map((a) => parseInt(a, 10)) as [\n          number,\n          number,\n          number,\n        ]\n      );\n      const backgroundHex = rgb2hex(\n        backgroundRgb.split(\",\").map((a) => parseInt(a, 10)) as [\n          number,\n          number,\n          number,\n        ]\n      );\n\n      QRCode.toCanvas(canvas, this.data, {\n        errorCorrectionLevel:\n          this.errorCorrectionLevel || (this.centerImage ? \"Q\" : \"M\"),\n        width: this.width,\n        scale: this.scale,\n        margin: this.margin,\n        maskPattern: this.maskPattern,\n        color: {\n          light: backgroundHex,\n          dark: textHex,\n        },\n      }).catch((err) => {\n        this._error = err.message;\n      });\n\n      if (this.centerImage) {\n        const context = this._canvas!.getContext(\"2d\");\n        const imageObj = new Image();\n        imageObj.src = this.centerImage;\n        imageObj.onload = () => {\n          context?.drawImage(\n            imageObj,\n            canvas.width * 0.375,\n            canvas.height * 0.375,\n            canvas.width / 4,\n            canvas.height / 4\n          );\n        };\n      }\n    }\n  }\n\n  render() {\n    if (!this.data) {\n      return nothing;\n    }\n    if (this._error) {\n      return html`<ha-alert alert-type=\"error\">${this._error}</ha-alert>`;\n    }\n    return html`<canvas></canvas>`;\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-qr-code\": HaQrCode;\n  }\n}\n"],"names":["ALERT_ICONS","info","warning","error","success","HaAlert","_LitElement","_this","_callSuper","concat","args","title","alertType","dismissable","narrow","html","_t","_","classMap","this","content","_t2","nothing","_t3","_dismissClicked","key","value","fireEvent","LitElement","styles","css","_t4","attribute","type","Boolean","HaQrCode","errorCorrectionLevel","width","scale","margin","changedProperties","_superPropGet","has","_error","undefined","canvas","_canvas","data","computedStyles","getComputedStyle","textRgb","getPropertyValue","backgroundRgb","textHex","rgb2hex","split","map","a","parseInt","backgroundHex","QRCode","centerImage","maskPattern","color","light","dark","catch","err","message","context","getContext","imageObj","Image","src","onload","drawImage","height","Number"],"mappings":"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"}