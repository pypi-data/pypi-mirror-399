{"version":3,"file":"1364.d22e13ab5d066b82.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-checkbox.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-form/ha-form-integer.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-slider.ts"],"sourcesContent":["import { CheckboxBase } from \"@material/mwc-checkbox/mwc-checkbox-base\";\nimport { styles } from \"@material/mwc-checkbox/mwc-checkbox.css\";\nimport { css } from \"lit\";\nimport { customElement } from \"lit/decorators\";\n\n@customElement(\"ha-checkbox\")\nexport class HaCheckbox extends CheckboxBase {\n  static override styles = [\n    styles,\n    css`\n      :host {\n        --mdc-theme-secondary: var(--primary-color);\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-checkbox\": HaCheckbox;\n  }\n}\n","import type { PropertyValues, TemplateResult } from \"lit\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { HaCheckbox } from \"../ha-checkbox\";\nimport \"../ha-slider\";\nimport \"../ha-checkbox\";\nimport \"../ha-input-helper-text\";\nimport \"../ha-textfield\";\nimport type { HaTextField } from \"../ha-textfield\";\nimport type {\n  HaFormElement,\n  HaFormIntegerData,\n  HaFormIntegerSchema,\n} from \"./types\";\nimport type { LocalizeFunc } from \"../../common/translations/localize\";\n\n@customElement(\"ha-form-integer\")\nexport class HaFormInteger extends LitElement implements HaFormElement {\n  @property({ attribute: false }) public localize?: LocalizeFunc;\n\n  @property({ attribute: false }) public schema!: HaFormIntegerSchema;\n\n  @property({ attribute: false }) public data?: HaFormIntegerData;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @query(\"ha-textfield ha-slider\") private _input?:\n    | HaTextField\n    | HTMLInputElement;\n\n  private _lastValue?: HaFormIntegerData;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    if (\n      this.schema.valueMin !== undefined &&\n      this.schema.valueMax !== undefined &&\n      this.schema.valueMax - this.schema.valueMin < 256\n    ) {\n      return html`\n        <div>\n          ${this.label}\n          <div class=\"flex\">\n            ${!this.schema.required\n              ? html`\n                  <ha-checkbox\n                    @change=${this._handleCheckboxChange}\n                    .checked=${this.data !== undefined}\n                    .disabled=${this.disabled}\n                  ></ha-checkbox>\n                `\n              : \"\"}\n            <ha-slider\n              labeled\n              .value=${this._value}\n              .min=${this.schema.valueMin}\n              .max=${this.schema.valueMax}\n              .disabled=${this.disabled ||\n              (this.data === undefined && !this.schema.required)}\n              @change=${this._valueChanged}\n            ></ha-slider>\n          </div>\n          ${this.helper\n            ? html`<ha-input-helper-text .disabled=${this.disabled}\n                >${this.helper}</ha-input-helper-text\n              >`\n            : \"\"}\n        </div>\n      `;\n    }\n\n    return html`\n      <ha-textfield\n        type=\"number\"\n        inputMode=\"numeric\"\n        .label=${this.label}\n        .helper=${this.helper}\n        helperPersistent\n        .value=${this.data !== undefined ? this.data : \"\"}\n        .disabled=${this.disabled}\n        .required=${this.schema.required}\n        .autoValidate=${this.schema.required}\n        .suffix=${this.schema.description?.suffix}\n        .validationMessage=${this.schema.required\n          ? this.localize?.(\"ui.common.error_required\")\n          : undefined}\n        @input=${this._valueChanged}\n      ></ha-textfield>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"schema\")) {\n      this.toggleAttribute(\n        \"own-margin\",\n        !(\"valueMin\" in this.schema && \"valueMax\" in this.schema) &&\n          !!this.schema.required\n      );\n    }\n  }\n\n  private get _value() {\n    if (this.data !== undefined) {\n      return this.data;\n    }\n\n    if (!this.schema.required) {\n      return this.schema.valueMin || 0;\n    }\n\n    return (\n      (this.schema.description?.suggested_value !== undefined &&\n        this.schema.description?.suggested_value !== null) ||\n      this.schema.default ||\n      this.schema.valueMin ||\n      0\n    );\n  }\n\n  private _handleCheckboxChange(ev: Event) {\n    const checked = (ev.target as HaCheckbox).checked;\n    let value: HaFormIntegerData | undefined;\n    if (checked) {\n      for (const candidate of [\n        this._lastValue,\n        this.schema.description?.suggested_value as HaFormIntegerData,\n        this.schema.default,\n        0,\n      ]) {\n        if (candidate !== undefined) {\n          value = candidate;\n          break;\n        }\n      }\n    } else {\n      // We track last value so user can disable and enable a field without losing\n      // their value.\n      this._lastValue = this.data;\n    }\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n\n  private _valueChanged(ev: Event) {\n    const source = ev.target as HaTextField | HTMLInputElement;\n    const rawValue = source.value;\n\n    let value: number | undefined;\n\n    if (rawValue !== \"\") {\n      value = parseInt(String(rawValue));\n    }\n\n    if (this.data === value) {\n      // parseInt will drop invalid text at the end, in that case update textfield\n      const newRawValue = value === undefined ? \"\" : String(value);\n      if (source.value !== newRawValue) {\n        source.value = newRawValue;\n      }\n      return;\n    }\n\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n\n  static styles = css`\n    :host([own-margin]) {\n      margin-bottom: 5px;\n    }\n    .flex {\n      display: flex;\n    }\n    ha-slider {\n      flex: 1;\n    }\n    ha-textfield {\n      display: block;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-integer\": HaFormInteger;\n  }\n}\n","import Slider from \"@home-assistant/webawesome/dist/components/slider/slider\";\nimport { css, type CSSResultGroup } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { mainWindow } from \"../common/dom/get_main_window\";\n\n@customElement(\"ha-slider\")\nexport class HaSlider extends Slider {\n  @property({ reflect: true }) size: \"small\" | \"medium\" = \"small\";\n\n  @property({ type: Boolean, attribute: \"with-tooltip\" }) withTooltip = true;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this.dir = mainWindow.document.dir;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      Slider.styles,\n      css`\n        :host {\n          --track-size: var(--ha-slider-track-size, 4px);\n          --marker-height: calc(var(--ha-slider-track-size, 4px) / 2);\n          --marker-width: calc(var(--ha-slider-track-size, 4px) / 2);\n          --wa-color-surface-default: var(--card-background-color);\n          --wa-color-neutral-fill-normal: var(--disabled-color);\n          --wa-tooltip-background-color: var(--secondary-background-color);\n          --wa-tooltip-color: var(--primary-text-color);\n          --wa-tooltip-font-family: var(\n            --ha-tooltip-font-family,\n            var(--ha-font-family-body)\n          );\n          --wa-tooltip-font-size: var(\n            --ha-tooltip-font-size,\n            var(--ha-font-size-s)\n          );\n          --wa-tooltip-font-weight: var(\n            --ha-tooltip-font-weight,\n            var(--ha-font-weight-normal)\n          );\n          --wa-tooltip-line-height: var(\n            --ha-tooltip-line-height,\n            var(--ha-line-height-condensed)\n          );\n          --wa-tooltip-padding: 8px;\n          --wa-tooltip-border-radius: var(\n            --ha-tooltip-border-radius,\n            var(--ha-border-radius-sm)\n          );\n          --wa-tooltip-arrow-size: var(--ha-tooltip-arrow-size, 8px);\n          --wa-z-index-tooltip: var(--ha-tooltip-z-index, 1000);\n          min-width: 100px;\n          min-inline-size: 100px;\n          width: 200px;\n        }\n\n        #thumb {\n          border: none;\n          background-color: var(--ha-slider-thumb-color, var(--primary-color));\n        }\n\n        #thumb:after {\n          content: \"\";\n          border-radius: 50%;\n          position: absolute;\n          width: calc(var(--thumb-width) * 2 + 8px);\n          height: calc(var(--thumb-height) * 2 + 8px);\n          left: calc(-50% - 4px);\n          top: calc(-50% - 4px);\n          cursor: pointer;\n        }\n\n        #slider:focus-visible:not(.disabled) #thumb,\n        #slider:focus-visible:not(.disabled) #thumb-min,\n        #slider:focus-visible:not(.disabled) #thumb-max {\n          outline: var(--wa-focus-ring);\n        }\n\n        #track:after {\n          content: \"\";\n          position: absolute;\n          top: calc(-50% - 4px);\n          left: 0;\n          width: 100%;\n          height: calc(var(--track-size) * 2 + 8px);\n          cursor: pointer;\n        }\n\n        #indicator {\n          background-color: var(\n            --ha-slider-indicator-color,\n            var(--primary-color)\n          );\n        }\n\n        :host([size=\"medium\"]) {\n          --thumb-width: 20px;\n          --thumb-height: 20px;\n        }\n\n        :host([size=\"small\"]) {\n          --thumb-width: 16px;\n          --thumb-height: 16px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-slider\": HaSlider;\n  }\n}\n"],"names":["HaCheckbox","_CheckboxBase","_classCallCheck","_callSuper","arguments","_inherits","_createClass","CheckboxBase","styles","css","_t","HaFormInteger","_LitElement","_this","concat","args","disabled","this","_input","focus","key","value","_this$schema$descript","_this$localize","undefined","schema","valueMin","valueMax","html","_","label","required","_t2","_handleCheckboxChange","data","_value","_valueChanged","helper","_t3","_t4","description","suffix","localize","call","changedProps","has","toggleAttribute","get","_this$schema$descript2","_this$schema$descript3","suggested_value","default","ev","target","checked","_i","_arr","_lastValue","_this$schema$descript4","length","candidate","fireEvent","source","rawValue","parseInt","String","newRawValue","LitElement","_t5","attribute","type","Boolean","HaSlider","_Slider","size","withTooltip","_superPropGet","dir","mainWindow","Slider","reflect"],"mappings":"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"}