{"version":3,"file":"8081.6ba51c74d884e693.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/config/is_component_loaded.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/datetime/first_weekday.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/datetime/relative_time.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/datetime/weekday.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/util/debounce.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/util/select-unit.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-alert.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/translation.ts","webpack://knx-frontend/./src/utils/format.ts"],"sourcesContent":["import type { HomeAssistant } from \"../../types\";\n\n/** Return if a component is loaded. */\nexport const isComponentLoaded = (\n  hass: HomeAssistant,\n  component: string\n): boolean => hass && hass.config.components.includes(component);\n","import { getWeekStartByLocale } from \"weekstart\";\nimport type { FrontendLocaleData } from \"../../data/translation\";\nimport { FirstWeekday } from \"../../data/translation\";\nimport { WEEKDAYS_LONG, type WeekdayIndex } from \"./weekday\";\n\nexport const firstWeekdayIndex = (locale: FrontendLocaleData): WeekdayIndex => {\n  if (locale.first_weekday === FirstWeekday.language) {\n    // @ts-ignore\n    if (\"weekInfo\" in Intl.Locale.prototype) {\n      // @ts-ignore\n      return new Intl.Locale(locale.language).weekInfo.firstDay % 7;\n    }\n    return (getWeekStartByLocale(locale.language) % 7) as WeekdayIndex;\n  }\n  return WEEKDAYS_LONG.includes(locale.first_weekday)\n    ? (WEEKDAYS_LONG.indexOf(locale.first_weekday) as WeekdayIndex)\n    : 1;\n};\n\nexport const firstWeekday = (locale: FrontendLocaleData) => {\n  const index = firstWeekdayIndex(locale);\n  return WEEKDAYS_LONG[index];\n};\n","import memoizeOne from \"memoize-one\";\nimport type { FrontendLocaleData } from \"../../data/translation\";\nimport { selectUnit } from \"../util/select-unit\";\n\nconst formatRelTimeMem = memoizeOne(\n  (locale: FrontendLocaleData) =>\n    new Intl.RelativeTimeFormat(locale.language, { numeric: \"auto\" })\n);\n\nexport const relativeTime = (\n  from: Date,\n  locale: FrontendLocaleData,\n  to?: Date,\n  includeTense = true\n): string => {\n  const diff = selectUnit(from, to, locale);\n  if (includeTense) {\n    return formatRelTimeMem(locale).format(diff.value, diff.unit);\n  }\n  return Intl.NumberFormat(locale.language, {\n    style: \"unit\",\n    unit: diff.unit,\n    unitDisplay: \"long\",\n  }).format(Math.abs(diff.value));\n};\n","export type WeekdayIndex = 0 | 1 | 2 | 3 | 4 | 5 | 6;\n\nexport type WeekdayShort =\n  | \"sun\"\n  | \"mon\"\n  | \"tue\"\n  | \"wed\"\n  | \"thu\"\n  | \"fri\"\n  | \"sat\";\n\nexport type WeekdayLong =\n  | \"sunday\"\n  | \"monday\"\n  | \"tuesday\"\n  | \"wednesday\"\n  | \"thursday\"\n  | \"friday\"\n  | \"saturday\";\n\nexport const WEEKDAYS_SHORT = [\n  \"sun\",\n  \"mon\",\n  \"tue\",\n  \"wed\",\n  \"thu\",\n  \"fri\",\n  \"sat\",\n] as const satisfies readonly WeekdayShort[];\n\nexport const WEEKDAYS_LONG = [\n  \"sunday\",\n  \"monday\",\n  \"tuesday\",\n  \"wednesday\",\n  \"thursday\",\n  \"friday\",\n  \"saturday\",\n] as const satisfies readonly WeekdayLong[];\n\nexport const WEEKDAY_MAP = {\n  0: \"sun\",\n  1: \"mon\",\n  2: \"tue\",\n  3: \"wed\",\n  4: \"thu\",\n  5: \"fri\",\n  6: \"sat\",\n} as const satisfies Record<WeekdayIndex, WeekdayShort>;\n\nexport const WEEKDAY_SHORT_TO_LONG = {\n  sun: \"sunday\",\n  mon: \"monday\",\n  tue: \"tuesday\",\n  wed: \"wednesday\",\n  thu: \"thursday\",\n  fri: \"friday\",\n  sat: \"saturday\",\n} as const satisfies Record<WeekdayShort, WeekdayLong>;\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge and on the trailing.\n\nexport const debounce = <T extends any[]>(\n  func: (...args: T) => void,\n  wait: number,\n  immediate = false\n) => {\n  let timeout: number | undefined;\n  const debouncedFunc = (...args: T): void => {\n    const later = () => {\n      timeout = undefined;\n      func(...args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = window.setTimeout(later, wait);\n    if (callNow) {\n      func(...args);\n    }\n  };\n  debouncedFunc.cancel = () => {\n    clearTimeout(timeout);\n  };\n  return debouncedFunc;\n};\n","import { differenceInDays, differenceInWeeks, startOfWeek } from \"date-fns\";\nimport type { FrontendLocaleData } from \"../../data/translation\";\nimport { firstWeekdayIndex } from \"../datetime/first_weekday\";\n\nexport type Unit =\n  | \"second\"\n  | \"minute\"\n  | \"hour\"\n  | \"day\"\n  | \"week\"\n  | \"month\"\n  | \"quarter\"\n  | \"year\";\n\nconst MS_PER_SECOND = 1e3;\nconst SECS_PER_MIN = 60;\nconst SECS_PER_HOUR = SECS_PER_MIN * 60;\n\n// Adapted from https://github.com/formatjs/formatjs/blob/186cef62f980ec66252ee232f438a42d0b51b9f9/packages/intl-utils/src/diff.ts\nexport function selectUnit(\n  from: Date | number,\n  // eslint-disable-next-line default-param-last\n  to: Date | number = Date.now(),\n  locale: FrontendLocaleData,\n  thresholds: Partial<Thresholds> = {}\n): { value: number; unit: Unit } {\n  const resolvedThresholds: Thresholds = {\n    ...DEFAULT_THRESHOLDS,\n    ...(thresholds || {}),\n  };\n\n  const secs = (+from - +to) / MS_PER_SECOND;\n  if (Math.abs(secs) < resolvedThresholds.second) {\n    return {\n      value: Math.round(secs),\n      unit: \"second\",\n    };\n  }\n\n  const mins = secs / SECS_PER_MIN;\n  if (Math.abs(mins) < resolvedThresholds.minute) {\n    return {\n      value: Math.round(mins),\n      unit: \"minute\",\n    };\n  }\n\n  const hours = secs / SECS_PER_HOUR;\n  if (Math.abs(hours) < resolvedThresholds.hour) {\n    return {\n      value: Math.round(hours),\n      unit: \"hour\",\n    };\n  }\n\n  const fromDate = new Date(from);\n  const toDate = new Date(to);\n\n  // Set time component to zero, which allows us to compare only the days\n  fromDate.setHours(0, 0, 0, 0);\n  toDate.setHours(0, 0, 0, 0);\n\n  const days = differenceInDays(fromDate, toDate);\n  if (days === 0) {\n    return {\n      value: Math.round(hours),\n      unit: \"hour\",\n    };\n  }\n  if (Math.abs(days) < resolvedThresholds.day) {\n    return {\n      value: days,\n      unit: \"day\",\n    };\n  }\n\n  const firstWeekday = firstWeekdayIndex(locale);\n  const fromWeek = startOfWeek(fromDate, { weekStartsOn: firstWeekday });\n  const toWeek = startOfWeek(toDate, { weekStartsOn: firstWeekday });\n\n  const weeks = differenceInWeeks(fromWeek, toWeek);\n  if (weeks === 0) {\n    return {\n      value: days,\n      unit: \"day\",\n    };\n  }\n  if (Math.abs(weeks) < resolvedThresholds.week) {\n    return {\n      value: weeks,\n      unit: \"week\",\n    };\n  }\n\n  const years = fromDate.getFullYear() - toDate.getFullYear();\n  const months = years * 12 + fromDate.getMonth() - toDate.getMonth();\n  if (months === 0) {\n    return {\n      value: weeks,\n      unit: \"week\",\n    };\n  }\n  if (Math.abs(months) < resolvedThresholds.month || years === 0) {\n    return {\n      value: months,\n      unit: \"month\",\n    };\n  }\n\n  return {\n    value: Math.round(years),\n    unit: \"year\",\n  };\n}\n\ntype Thresholds = Record<\n  \"second\" | \"minute\" | \"hour\" | \"day\" | \"week\" | \"month\",\n  number\n>;\n\nexport const DEFAULT_THRESHOLDS: Thresholds = {\n  second: 59, // seconds to minute\n  minute: 59, // minutes to hour\n  hour: 22, // hour to day\n  day: 5, // day to week\n  week: 4, // week to months\n  month: 11, // month to years\n};\n","import {\n  mdiAlertCircleOutline,\n  mdiAlertOutline,\n  mdiCheckboxMarkedCircleOutline,\n  mdiClose,\n  mdiInformationOutline,\n} from \"@mdi/js\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport \"./ha-icon-button\";\nimport \"./ha-svg-icon\";\n\nconst ALERT_ICONS = {\n  info: mdiInformationOutline,\n  warning: mdiAlertOutline,\n  error: mdiAlertCircleOutline,\n  success: mdiCheckboxMarkedCircleOutline,\n};\n\ndeclare global {\n  interface HASSDomEvents {\n    \"alert-dismissed-clicked\": undefined;\n  }\n}\n\n@customElement(\"ha-alert\")\nclass HaAlert extends LitElement {\n  // eslint-disable-next-line lit/no-native-attributes\n  @property() public title = \"\";\n\n  @property({ attribute: \"alert-type\" }) public alertType:\n    | \"info\"\n    | \"warning\"\n    | \"error\"\n    | \"success\" = \"info\";\n\n  @property({ type: Boolean }) public dismissable = false;\n\n  @property({ type: Boolean }) public narrow = false;\n\n  public render() {\n    return html`\n      <div\n        class=\"issue-type ${classMap({\n          [this.alertType]: true,\n        })}\"\n        role=\"alert\"\n      >\n        <div class=\"icon ${this.title ? \"\" : \"no-title\"}\">\n          <slot name=\"icon\">\n            <ha-svg-icon .path=${ALERT_ICONS[this.alertType]}></ha-svg-icon>\n          </slot>\n        </div>\n        <div class=${classMap({ content: true, narrow: this.narrow })}>\n          <div class=\"main-content\">\n            ${this.title\n              ? html`<div class=\"title\">${this.title}</div>`\n              : nothing}\n            <slot></slot>\n          </div>\n          <div class=\"action\">\n            <slot name=\"action\">\n              ${this.dismissable\n                ? html`<ha-icon-button\n                    @click=${this._dismissClicked}\n                    label=\"Dismiss alert\"\n                    .path=${mdiClose}\n                  ></ha-icon-button>`\n                : nothing}\n            </slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _dismissClicked() {\n    fireEvent(this, \"alert-dismissed-clicked\");\n  }\n\n  static styles = css`\n    .issue-type {\n      position: relative;\n      padding: 8px;\n      display: flex;\n    }\n    .icon {\n      height: var(--ha-alert-icon-size, 24px);\n      width: var(--ha-alert-icon-size, 24px);\n    }\n    .issue-type::after {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      opacity: 0.12;\n      pointer-events: none;\n      content: \"\";\n      border-radius: var(--ha-border-radius-sm);\n    }\n    .icon.no-title {\n      align-self: center;\n    }\n    .content {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      width: 100%;\n      text-align: var(--float-start);\n    }\n    .content.narrow {\n      flex-direction: column;\n      align-items: flex-end;\n    }\n    .action {\n      z-index: 1;\n      width: min-content;\n      --mdc-theme-primary: var(--primary-text-color);\n    }\n    .main-content {\n      overflow-wrap: anywhere;\n      word-break: break-word;\n      line-height: normal;\n      margin-left: 8px;\n      margin-right: 0;\n      margin-inline-start: 8px;\n      margin-inline-end: 8px;\n    }\n    .title {\n      margin-top: 2px;\n      font-weight: var(--ha-font-weight-bold);\n    }\n    .action ha-icon-button {\n      --mdc-theme-primary: var(--primary-text-color);\n      --mdc-icon-button-size: 36px;\n    }\n    .issue-type.info > .icon {\n      color: var(--info-color);\n    }\n    .issue-type.info::after {\n      background-color: var(--info-color);\n    }\n\n    .issue-type.warning > .icon {\n      color: var(--warning-color);\n    }\n    .issue-type.warning::after {\n      background-color: var(--warning-color);\n    }\n\n    .issue-type.error > .icon {\n      color: var(--error-color);\n    }\n    .issue-type.error::after {\n      background-color: var(--error-color);\n    }\n\n    .issue-type.success > .icon {\n      color: var(--success-color);\n    }\n    .issue-type.success::after {\n      background-color: var(--success-color);\n    }\n    :host ::slotted(ul) {\n      margin: 0;\n      padding-inline-start: 20px;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-alert\": HaAlert;\n  }\n}\n","import type { HomeAssistant } from \"../types\";\nimport { saveFrontendUserData, subscribeFrontendUserData } from \"./frontend\";\n\nexport enum NumberFormat {\n  language = \"language\",\n  system = \"system\",\n  comma_decimal = \"comma_decimal\",\n  decimal_comma = \"decimal_comma\",\n  quote_decimal = \"quote_decimal\",\n  space_comma = \"space_comma\",\n  none = \"none\",\n}\n\nexport enum TimeFormat {\n  language = \"language\",\n  system = \"system\",\n  am_pm = \"12\",\n  twenty_four = \"24\",\n}\n\nexport enum TimeZone {\n  local = \"local\",\n  server = \"server\",\n}\n\nexport enum DateFormat {\n  language = \"language\",\n  system = \"system\",\n  DMY = \"DMY\",\n  MDY = \"MDY\",\n  YMD = \"YMD\",\n}\n\nexport enum FirstWeekday {\n  language = \"language\",\n  monday = \"monday\",\n  tuesday = \"tuesday\",\n  wednesday = \"wednesday\",\n  thursday = \"thursday\",\n  friday = \"friday\",\n  saturday = \"saturday\",\n  sunday = \"sunday\",\n}\n\nexport interface FrontendLocaleData {\n  language: string;\n  number_format: NumberFormat;\n  time_format: TimeFormat;\n  date_format: DateFormat;\n  first_weekday: FirstWeekday;\n  time_zone: TimeZone;\n}\n\ndeclare global {\n  interface FrontendUserData {\n    language: FrontendLocaleData;\n  }\n}\n\nexport type TranslationCategory =\n  | \"title\"\n  | \"state\"\n  | \"entity\"\n  | \"entity_component\"\n  | \"exceptions\"\n  | \"config\"\n  | \"config_subentries\"\n  | \"config_panel\"\n  | \"options\"\n  | \"device_automation\"\n  | \"mfa_setup\"\n  | \"system_health\"\n  | \"application_credentials\"\n  | \"issues\"\n  | \"preview_features\"\n  | \"selector\"\n  | \"services\"\n  | \"triggers\"\n  | \"conditions\";\n\nexport const subscribeTranslationPreferences = (\n  hass: HomeAssistant,\n  callback: (data: { value: FrontendLocaleData | null }) => void\n) => subscribeFrontendUserData(hass.connection, \"language\", callback);\n\nexport const saveTranslationPreferences = (\n  hass: HomeAssistant,\n  data: FrontendLocaleData\n) => saveFrontendUserData(hass.connection, \"language\", data);\n\nexport const getHassTranslations = async (\n  hass: HomeAssistant,\n  language: string,\n  category: TranslationCategory,\n  integration?: string | string[],\n  config_flow?: boolean\n): Promise<Record<string, unknown>> => {\n  const result = await hass.callWS<{ resources: Record<string, unknown> }>({\n    type: \"frontend/get_translations\",\n    language,\n    category,\n    integration,\n    config_flow,\n  });\n  return result.resources;\n};\n\nexport const getHassTranslationsPre109 = async (\n  hass: HomeAssistant,\n  language: string\n): Promise<Record<string, unknown>> => {\n  const result = await hass.callWS<{ resources: Record<string, unknown> }>({\n    type: \"frontend/get_translations\",\n    language,\n  });\n  return result.resources;\n};\n","import { dump } from \"js-yaml\";\nimport type { TelegramDict } from \"../types/websocket\";\nimport type { TimePrecision } from \"../features/group-monitor\";\n\nexport const TelegramDictFormatter = {\n  payload: (telegram: TelegramDict): string => {\n    if (telegram.payload == null) return \"\";\n    return Array.isArray(telegram.payload)\n      ? telegram.payload.reduce((res, curr) => res + curr.toString(16).padStart(2, \"0\"), \"0x\")\n      : telegram.payload.toString();\n  },\n\n  valueWithUnit: (telegram: TelegramDict): string => {\n    if (telegram.value == null) return \"\";\n    if (\n      typeof telegram.value === \"number\" ||\n      typeof telegram.value === \"boolean\" ||\n      typeof telegram.value === \"string\"\n    ) {\n      return telegram.value.toString() + (telegram.unit ? \" \" + telegram.unit : \"\");\n    }\n    return dump(telegram.value);\n  },\n\n  timeWithMilliseconds: (telegram: TelegramDict): string => {\n    const date = new Date(telegram.timestamp);\n    return date.toLocaleTimeString([\"en-US\"], {\n      hour12: false,\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      fractionalSecondDigits: 3,\n    });\n  },\n\n  dateWithMilliseconds: (telegram: TelegramDict): string => {\n    const date = new Date(telegram.timestamp);\n    return date.toLocaleTimeString([], {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n      fractionalSecondDigits: 3,\n    });\n  },\n\n  dptNumber: (telegram: TelegramDict): string => {\n    if (telegram.dpt_main == null) return \"\";\n    return telegram.dpt_sub == null\n      ? telegram.dpt_main.toString()\n      : telegram.dpt_main.toString() + \".\" + telegram.dpt_sub.toString().padStart(3, \"0\");\n  },\n\n  dptNameNumber: (telegram: TelegramDict): string => {\n    const dptNumber = TelegramDictFormatter.dptNumber(telegram);\n    if (telegram.dpt_name == null) return `DPT ${dptNumber}`;\n    return dptNumber ? `DPT ${dptNumber} ${telegram.dpt_name}` : telegram.dpt_name;\n  },\n};\n\n/**\n * Format a Date object to a time string with milliseconds.\n */\nexport const formatTimeWithMilliseconds = (date: Date): string =>\n  date.toLocaleTimeString(undefined, {\n    hour12: false,\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    fractionalSecondDigits: 3,\n  });\n\n/**\n * Format a Date object to a date and time string with milliseconds.\n */\nexport const formatDateTimeWithMilliseconds = (date: Date): string =>\n  date.toLocaleDateString(undefined, {\n    year: \"numeric\",\n    month: \"2-digit\",\n    day: \"2-digit\",\n  }) +\n  \", \" +\n  date.toLocaleTimeString(undefined, {\n    hour12: false,\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    fractionalSecondDigits: 3,\n  });\n\n/**\n * Format an ISO timestamp string to a date and time string with microsecond precision.\n *\n * @param timestampIso - The ISO timestamp string containing microsecond precision\n * @returns Formatted date and time string with microsecond precision\n */\nexport const formatIsoTimestampWithMicroseconds = (timestampIso: string): string => {\n  // Create Date object from ISO timestamp\n  const date = new Date(timestampIso);\n\n  // Extract microseconds from ISO timestamp (format: YYYY-MM-DDTHH:MM:SS.ffffff)\n  const microsecondMatch = timestampIso.match(/\\.(\\d{6})/);\n  const microseconds = microsecondMatch ? microsecondMatch[1] : \"000000\";\n\n  return (\n    date.toLocaleDateString(undefined, {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n    }) +\n    \", \" +\n    date.toLocaleTimeString(undefined, {\n      hour12: false,\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      second: \"2-digit\",\n    }) +\n    \".\" +\n    microseconds\n  );\n};\n\n// Time conversion constants\nexport const MICROSECONDS_PER_MILLISECOND = 1_000;\nexport const MILLISECONDS_PER_SECOND = 1_000;\nexport const SECONDS_PER_MINUTE = 60;\nexport const MINUTES_PER_HOUR = 60;\n\n// Derived constants for milliseconds\nexport const MILLISECONDS_PER_MINUTE = MILLISECONDS_PER_SECOND * SECONDS_PER_MINUTE;\nexport const MILLISECONDS_PER_HOUR = MILLISECONDS_PER_MINUTE * MINUTES_PER_HOUR;\n\n// Derived constants for microseconds\nexport const MICROSECONDS_PER_SECOND = MICROSECONDS_PER_MILLISECOND * MILLISECONDS_PER_SECOND;\nexport const MICROSECONDS_PER_MINUTE = MICROSECONDS_PER_SECOND * SECONDS_PER_MINUTE;\nexport const MICROSECONDS_PER_HOUR = MICROSECONDS_PER_MINUTE * MINUTES_PER_HOUR;\n\n// Padding constants\nconst TIME_COMPONENT_PADDING = 2;\nconst FRACTIONAL_COMPONENT_PADDING = 3;\n\n/**\n * Converts any ISO-8601 timestamp to microseconds since Unix epoch.\n *\n * @param iso - ISO timestamp, e.g. \"2025-07-13T22:11:08.273496+02:00\"\n * @returns Microseconds since 1970-01-01T00:00:00Z\n */\nexport function extractMicrosecondsFromIso(iso: string): number {\n  const dotPos = iso.indexOf(\".\");\n\n  // Fast path – no fractional part\n  if (dotPos === -1) return Date.parse(iso) * 1_000;\n\n  // Locate start of timezone designator (Z / + / -) after the dot\n  let tzPos = iso.indexOf(\"Z\", dotPos);\n  if (tzPos === -1) {\n    tzPos = iso.indexOf(\"+\", dotPos);\n    if (tzPos === -1) tzPos = iso.indexOf(\"-\", dotPos);\n  }\n  if (tzPos === -1) tzPos = iso.length; // ISO without explicit TZ (rare but valid)\n\n  // -------- milliseconds part (safe, no rounding) ----------\n  const baseIso = iso.slice(0, dotPos) + iso.slice(tzPos); // strip fractional secs\n  const msSinceEpoch = Date.parse(baseIso); // single parse\n\n  // -------- microseconds part ------------------------------\n  let frac = iso.slice(dotPos + 1, tzPos); // digits after '.'\n  if (frac.length < 6)\n    frac = frac.padEnd(6, \"0\"); // e.g. \".27\" -> \"270000\"\n  else if (frac.length > 6) frac = frac.slice(0, 6); // ignore >µs precision\n\n  return msSinceEpoch * 1_000 + Number(frac);\n}\n\n/**\n * Formats a time duration into a human-readable string with microsecond precision support.\n *\n * Output formats:\n * - Under 1 hour: MM:SS.mmm (or MM:SS.mmmuu with microsecond precision)\n * - 1 hour or more: HH:MM:SS.mmm (or HH:MM:SS.mmmuu with microsecond precision)\n * - Negative values: prefixed with \"-\"\n * - Null input: \"—\" (em dash)\n *\n * @param offsetMicros - Duration in microseconds (null for no previous event)\n * @param precision - \"milliseconds\" (default, rounds to 3 decimals) or \"microseconds\" (6 decimals)\n * @returns Formatted time delta string or \"—\" for null input\n *\n * @example\n * formatTimeDelta(150500000) // \"02:30.500\"\n * formatTimeDelta(1123456, \"microseconds\") // \"00:01.123456\"\n */\nexport function formatTimeDelta(\n  offsetMicros: number | null,\n  precision: TimePrecision = \"milliseconds\",\n): string {\n  if (offsetMicros == null) {\n    return \"—\";\n  }\n\n  const sign = offsetMicros < 0 ? \"-\" : \"\";\n  const micros = Math.abs(offsetMicros);\n\n  // Convert to total milliseconds (rounded or floored)\n  const totalMs =\n    precision === \"milliseconds\"\n      ? Math.round(micros / MICROSECONDS_PER_MILLISECOND)\n      : Math.floor(micros / MICROSECONDS_PER_MILLISECOND);\n\n  // Remaining microseconds for microsecond precision\n  const extraMicros = precision === \"microseconds\" ? micros % MICROSECONDS_PER_MILLISECOND : 0;\n\n  // Break down into hours, minutes, seconds, milliseconds\n  const hours = Math.floor(totalMs / MILLISECONDS_PER_HOUR);\n  const minutes = Math.floor((totalMs % MILLISECONDS_PER_HOUR) / MILLISECONDS_PER_MINUTE);\n  const seconds = Math.floor((totalMs % MILLISECONDS_PER_MINUTE) / MILLISECONDS_PER_SECOND);\n  const milliseconds = totalMs % MILLISECONDS_PER_SECOND;\n\n  // Helpers for zero-padding\n  const padTime = (n: number) => n.toString().padStart(TIME_COMPONENT_PADDING, \"0\");\n  const padFractional = (n: number) => n.toString().padStart(FRACTIONAL_COMPONENT_PADDING, \"0\");\n\n  // Build fractional part\n  const fractional =\n    precision === \"microseconds\"\n      ? `.${padFractional(milliseconds)}${padFractional(extraMicros)}`\n      : `.${padFractional(milliseconds)}`;\n\n  // Assemble base time (MM:SS) and prefix hours if needed\n  const base = `${padTime(minutes)}:${padTime(seconds)}`;\n  const time = hours > 0 ? `${padTime(hours)}:${base}` : base;\n\n  return `${sign}${time}${fractional}`;\n}\n"],"names":["isComponentLoaded","hass","component","config","components","includes","firstWeekdayIndex","locale","first_weekday","FirstWeekday","Intl","Locale","prototype","language","weekInfo","firstDay","getWeekStartByLocale","WEEKDAYS_LONG","formatRelTimeMem","memoizeOne","RelativeTimeFormat","numeric","relativeTime","from","to","includeTense","arguments","length","undefined","diff","selectUnit","format","value","unit","NumberFormat","style","unitDisplay","Math","abs","debounce","func","wait","timeout","immediate","debouncedFunc","_len","args","Array","_key","callNow","clearTimeout","window","setTimeout","later","apply","cancel","MS_PER_SECOND","SECS_PER_MIN","SECS_PER_HOUR","Date","now","thresholds","resolvedThresholds","Object","assign","DEFAULT_THRESHOLDS","secs","second","round","mins","minute","hours","hour","fromDate","toDate","setHours","days","differenceInDays","day","firstWeekday","fromWeek","startOfWeek","weekStartsOn","toWeek","weeks","differenceInWeeks","week","years","getFullYear","months","getMonth","month","ALERT_ICONS","info","warning","error","success","HaAlert","_LitElement","_this","_callSuper","concat","title","alertType","dismissable","narrow","html","_t","_","classMap","this","content","_t2","nothing","_t3","_dismissClicked","key","fireEvent","LitElement","styles","css","_t4","attribute","type","Boolean","TimeFormat","TimeZone","DateFormat","TelegramDictFormatter","payload","telegram","isArray","reduce","res","curr","toString","padStart","valueWithUnit","dump","timeWithMilliseconds","timestamp","toLocaleTimeString","hour12","fractionalSecondDigits","dateWithMilliseconds","year","dptNumber","dpt_main","dpt_sub","dptNameNumber","dpt_name","formatTimeWithMilliseconds","date","formatDateTimeWithMilliseconds","toLocaleDateString","formatIsoTimestampWithMicroseconds","timestampIso","microsecondMatch","match","microseconds","MICROSECONDS_PER_MILLISECOND","MILLISECONDS_PER_SECOND","MILLISECONDS_PER_MINUTE","MILLISECONDS_PER_HOUR","TIME_COMPONENT_PADDING","FRACTIONAL_COMPONENT_PADDING","extractMicrosecondsFromIso","iso","dotPos","indexOf","parse","tzPos","baseIso","slice","msSinceEpoch","frac","padEnd","Number","formatTimeDelta","offsetMicros","precision","sign","micros","totalMs","floor","extraMicros","minutes","seconds","milliseconds","padTime","n","padFractional","fractional","base"],"mappings":"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"}