{"version":3,"file":"7228.d9d4677693abbb15.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-combo-box-textfield.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-combo-box.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-config-entry-picker.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-config-entry.ts","webpack://knx-frontend/./homeassistant-frontend/src/util/brands-url.ts","webpack://knx-frontend/./node_modules/lit-html/src/async-directive.ts"],"sourcesContent":["import type { PropertyValues } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { HaTextField } from \"./ha-textfield\";\n\n@customElement(\"ha-combo-box-textfield\")\nexport class HaComboBoxTextField extends HaTextField {\n  @property({ type: Boolean, attribute: \"force-blank-value\" })\n  public forceBlankValue = false;\n\n  protected willUpdate(changedProps: PropertyValues): void {\n    super.willUpdate(changedProps);\n    if (changedProps.has(\"value\") || changedProps.has(\"forceBlankValue\")) {\n      if (this.forceBlankValue && this.value) {\n        this.value = \"\";\n      }\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-combo-box-textfield\": HaComboBoxTextField;\n  }\n}\n","import { mdiClose, mdiMenuDown, mdiMenuUp } from \"@mdi/js\";\nimport type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { comboBoxRenderer } from \"@vaadin/combo-box/lit\";\nimport \"@vaadin/combo-box/theme/material/vaadin-combo-box-light\";\nimport type {\n  ComboBoxDataProvider,\n  ComboBoxLight,\n  ComboBoxLightFilterChangedEvent,\n  ComboBoxLightOpenedChangedEvent,\n  ComboBoxLightValueChangedEvent,\n} from \"@vaadin/combo-box/vaadin-combo-box-light\";\nimport { registerStyles } from \"@vaadin/vaadin-themable-mixin/register-styles\";\nimport type { TemplateResult } from \"lit\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { ifDefined } from \"lit/directives/if-defined\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-combo-box-item\";\nimport \"./ha-combo-box-textfield\";\nimport \"./ha-icon-button\";\nimport \"./ha-input-helper-text\";\nimport \"./ha-textfield\";\nimport type { HaTextField } from \"./ha-textfield\";\n\nregisterStyles(\n  \"vaadin-combo-box-item\",\n  css`\n    :host {\n      padding: 0 !important;\n    }\n    :host([focused]:not([disabled])) {\n      background-color: rgba(var(--rgb-primary-text-color, 0, 0, 0), 0.12);\n    }\n    :host([selected]:not([disabled])) {\n      background-color: transparent;\n      color: var(--mdc-theme-primary);\n      --mdc-ripple-color: var(--mdc-theme-primary);\n      --mdc-theme-text-primary-on-background: var(--mdc-theme-primary);\n    }\n    :host([selected]:not([disabled])):before {\n      background-color: var(--mdc-theme-primary);\n      opacity: 0.12;\n      content: \"\";\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n    }\n    :host([selected][focused]:not([disabled])):before {\n      opacity: 0.24;\n    }\n    :host(:hover:not([disabled])) {\n      background-color: transparent;\n    }\n    [part=\"content\"] {\n      width: 100%;\n    }\n    [part=\"checkmark\"] {\n      display: none;\n    }\n  `\n);\n\n@customElement(\"ha-combo-box\")\nexport class HaComboBox extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @property() public label?: string;\n\n  @property() public value?: string;\n\n  @property() public placeholder?: string;\n\n  @property({ attribute: false }) public validationMessage?: string;\n\n  @property() public helper?: string;\n\n  @property({ attribute: \"error-message\" }) public errorMessage?: string;\n\n  @property({ type: Boolean }) public invalid = false;\n\n  @property({ type: Boolean }) public icon = false;\n\n  @property({ attribute: false }) public items?: any[];\n\n  @property({ attribute: false }) public filteredItems?: any[];\n\n  @property({ attribute: false })\n  public dataProvider?: ComboBoxDataProvider<any>;\n\n  @property({ attribute: \"allow-custom-value\", type: Boolean })\n  public allowCustomValue = false;\n\n  @property({ attribute: \"item-value-path\" }) public itemValuePath = \"value\";\n\n  @property({ attribute: \"item-label-path\" }) public itemLabelPath = \"label\";\n\n  @property({ attribute: \"item-id-path\" }) public itemIdPath?: string;\n\n  @property({ attribute: false }) public renderer?: ComboBoxLitRenderer<any>;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean, reflect: true }) public opened = false;\n\n  @property({ type: Boolean, attribute: \"hide-clear-icon\" })\n  public hideClearIcon = false;\n\n  @property({ type: Boolean, attribute: \"clear-initial-value\" })\n  public clearInitialValue = false;\n\n  @query(\"vaadin-combo-box-light\", true) private _comboBox!: ComboBoxLight;\n\n  @query(\"ha-combo-box-textfield\", true) private _inputElement!: HaTextField;\n\n  @state({ type: Boolean }) private _forceBlankValue = false;\n\n  private _overlayMutationObserver?: MutationObserver;\n\n  private _bodyMutationObserver?: MutationObserver;\n\n  public async open() {\n    await this.updateComplete;\n    this._comboBox?.open();\n  }\n\n  public async focus() {\n    await this.updateComplete;\n    await this._inputElement?.updateComplete;\n    this._inputElement?.focus();\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    if (this._overlayMutationObserver) {\n      this._overlayMutationObserver.disconnect();\n      this._overlayMutationObserver = undefined;\n    }\n    if (this._bodyMutationObserver) {\n      this._bodyMutationObserver.disconnect();\n      this._bodyMutationObserver = undefined;\n    }\n  }\n\n  public get selectedItem() {\n    return this._comboBox.selectedItem;\n  }\n\n  public setInputValue(value: string) {\n    this._comboBox.value = value;\n  }\n\n  public setTextFieldValue(value: string) {\n    this._inputElement.value = value;\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <!-- @ts-ignore Tag definition is not included in theme folder -->\n      <vaadin-combo-box-light\n        .itemValuePath=${this.itemValuePath}\n        .itemIdPath=${this.itemIdPath}\n        .itemLabelPath=${this.itemLabelPath}\n        .items=${this.items}\n        .value=${this.value || \"\"}\n        .filteredItems=${this.filteredItems}\n        .dataProvider=${this.dataProvider}\n        .allowCustomValue=${this.allowCustomValue}\n        .disabled=${this.disabled}\n        .required=${this.required}\n        ${comboBoxRenderer(this.renderer || this._defaultRowRenderer)}\n        @opened-changed=${this._openedChanged}\n        @filter-changed=${this._filterChanged}\n        @value-changed=${this._valueChanged}\n        attr-for-value=\"value\"\n      >\n        <ha-combo-box-textfield\n          label=${ifDefined(this.label)}\n          placeholder=${ifDefined(this.placeholder)}\n          ?disabled=${this.disabled}\n          ?required=${this.required}\n          validationMessage=${ifDefined(this.validationMessage)}\n          .errorMessage=${this.errorMessage}\n          class=\"input\"\n          autocapitalize=\"none\"\n          autocomplete=\"off\"\n          .autocorrect=${false}\n          input-spellcheck=\"false\"\n          .suffix=${html`<div\n            style=\"width: 28px;\"\n            role=\"none presentation\"\n          ></div>`}\n          .icon=${this.icon}\n          .invalid=${this.invalid}\n          .forceBlankValue=${this._forceBlankValue}\n        >\n          <slot name=\"icon\" slot=\"leadingIcon\"></slot>\n        </ha-combo-box-textfield>\n        ${this.value && !this.hideClearIcon\n          ? html`<ha-svg-icon\n              role=\"button\"\n              tabindex=\"-1\"\n              aria-label=${ifDefined(this.hass?.localize(\"ui.common.clear\"))}\n              class=${`clear-button ${this.label ? \"\" : \"no-label\"}`}\n              .path=${mdiClose}\n              ?disabled=${this.disabled}\n              @click=${this._clearValue}\n            ></ha-svg-icon>`\n          : \"\"}\n        <ha-svg-icon\n          role=\"button\"\n          tabindex=\"-1\"\n          aria-label=${ifDefined(this.label)}\n          aria-expanded=${this.opened ? \"true\" : \"false\"}\n          class=${`toggle-button ${this.label ? \"\" : \"no-label\"}`}\n          .path=${this.opened ? mdiMenuUp : mdiMenuDown}\n          ?disabled=${this.disabled}\n          @click=${this._toggleOpen}\n        ></ha-svg-icon>\n      </vaadin-combo-box-light>\n      ${this._renderHelper()}\n    `;\n  }\n\n  private _renderHelper() {\n    return this.helper\n      ? html`<ha-input-helper-text .disabled=${this.disabled}\n          >${this.helper}</ha-input-helper-text\n        >`\n      : \"\";\n  }\n\n  private _defaultRowRenderer: ComboBoxLitRenderer<\n    string | Record<string, any>\n  > = (item) => html`\n    <ha-combo-box-item type=\"button\">\n      ${this.itemLabelPath ? item[this.itemLabelPath] : item}\n    </ha-combo-box-item>\n  `;\n\n  private _clearValue(ev: Event) {\n    ev.stopPropagation();\n    fireEvent(this, \"value-changed\", { value: undefined });\n  }\n\n  private _toggleOpen(ev: Event) {\n    if (this.opened) {\n      this._comboBox?.close();\n      ev.stopPropagation();\n    } else {\n      this._comboBox?.inputElement.focus();\n    }\n  }\n\n  private _openedChanged(ev: ComboBoxLightOpenedChangedEvent) {\n    ev.stopPropagation();\n    const opened = ev.detail.value;\n    // delay this so we can handle click event for toggle button before setting _opened\n    setTimeout(() => {\n      this.opened = opened;\n      fireEvent(this, \"opened-changed\", { value: ev.detail.value });\n    }, 0);\n\n    if (this.clearInitialValue) {\n      this.setTextFieldValue(\"\");\n      if (opened) {\n        // Wait 100ms to be sure vaddin-combo-box-light already tried to set the value\n        setTimeout(() => {\n          this._forceBlankValue = false;\n        }, 100);\n      } else {\n        this._forceBlankValue = true;\n      }\n    }\n\n    if (opened) {\n      const overlay = document.querySelector<HTMLElement>(\n        \"vaadin-combo-box-overlay\"\n      );\n\n      if (overlay) {\n        this._removeInert(overlay);\n      }\n      this._observeBody();\n    } else {\n      this._bodyMutationObserver?.disconnect();\n      this._bodyMutationObserver = undefined;\n    }\n  }\n\n  private _observeBody() {\n    if (\"MutationObserver\" in window && !this._bodyMutationObserver) {\n      this._bodyMutationObserver = new MutationObserver((mutations) => {\n        mutations.forEach((mutation) => {\n          mutation.addedNodes.forEach((node) => {\n            if (node.nodeName === \"VAADIN-COMBO-BOX-OVERLAY\") {\n              this._removeInert(node as HTMLElement);\n            }\n          });\n          mutation.removedNodes.forEach((node) => {\n            if (node.nodeName === \"VAADIN-COMBO-BOX-OVERLAY\") {\n              this._overlayMutationObserver?.disconnect();\n              this._overlayMutationObserver = undefined;\n            }\n          });\n        });\n      });\n\n      this._bodyMutationObserver.observe(document.body, {\n        childList: true,\n      });\n    }\n  }\n\n  private _removeInert(overlay: HTMLElement) {\n    if (overlay.inert) {\n      overlay.inert = false;\n      this._overlayMutationObserver?.disconnect();\n      this._overlayMutationObserver = undefined;\n      return;\n    }\n    if (\"MutationObserver\" in window && !this._overlayMutationObserver) {\n      this._overlayMutationObserver = new MutationObserver((mutations) => {\n        mutations.forEach((mutation) => {\n          if (mutation.attributeName === \"inert\") {\n            const target = mutation.target as HTMLElement;\n            if (target.inert) {\n              this._overlayMutationObserver?.disconnect();\n              this._overlayMutationObserver = undefined;\n              target.inert = false;\n            }\n          }\n        });\n      });\n\n      this._overlayMutationObserver.observe(overlay, {\n        attributes: true,\n      });\n    }\n  }\n\n  private _filterChanged(ev: ComboBoxLightFilterChangedEvent) {\n    ev.stopPropagation();\n    fireEvent(this, \"filter-changed\", { value: ev.detail.value });\n  }\n\n  private _valueChanged(ev: ComboBoxLightValueChangedEvent) {\n    ev.stopPropagation();\n    if (!this.allowCustomValue) {\n      // @ts-ignore\n      this._comboBox._closeOnBlurIsPrevented = true;\n    }\n    if (!this.opened) {\n      return;\n    }\n    const newValue = ev.detail.value;\n    if (newValue !== this.value) {\n      fireEvent(this, \"value-changed\", { value: newValue || undefined });\n    }\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n      width: 100%;\n    }\n    vaadin-combo-box-light {\n      position: relative;\n    }\n    ha-combo-box-textfield {\n      width: 100%;\n    }\n    ha-combo-box-textfield > ha-icon-button {\n      --mdc-icon-button-size: 24px;\n      padding: 2px;\n      color: var(--secondary-text-color);\n    }\n    ha-svg-icon {\n      color: var(--input-dropdown-icon-color);\n      position: absolute;\n      cursor: pointer;\n    }\n    .toggle-button {\n      right: 12px;\n      top: -10px;\n      inset-inline-start: initial;\n      inset-inline-end: 12px;\n      direction: var(--direction);\n    }\n    :host([opened]) .toggle-button {\n      color: var(--primary-color);\n    }\n    .toggle-button[disabled],\n    .clear-button[disabled] {\n      color: var(--disabled-text-color);\n      pointer-events: none;\n    }\n    .toggle-button.no-label {\n      top: -3px;\n    }\n    .clear-button {\n      --mdc-icon-size: 20px;\n      top: -7px;\n      right: 36px;\n      inset-inline-start: initial;\n      inset-inline-end: 36px;\n      direction: var(--direction);\n    }\n    .clear-button.no-label {\n      top: 0;\n    }\n    ha-input-helper-text {\n      margin-top: 4px;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-combo-box\": HaComboBox;\n  }\n}\n\ndeclare global {\n  interface HASSDomEvents {\n    \"filter-changed\": { value: string };\n    \"opened-changed\": { value: boolean };\n  }\n}\n","import type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { caseInsensitiveStringCompare } from \"../common/string/compare\";\nimport type { ConfigEntry } from \"../data/config_entries\";\nimport { getConfigEntries } from \"../data/config_entries\";\nimport { domainToName } from \"../data/integration\";\nimport type { ValueChangedEvent, HomeAssistant } from \"../types\";\nimport { brandsUrl } from \"../util/brands-url\";\nimport \"./ha-combo-box\";\nimport type { HaComboBox } from \"./ha-combo-box\";\nimport \"./ha-combo-box-item\";\n\nexport interface ConfigEntryExtended extends ConfigEntry {\n  localized_domain_name?: string;\n}\n\n@customElement(\"ha-config-entry-picker\")\nclass HaConfigEntryPicker extends LitElement {\n  public hass!: HomeAssistant;\n\n  @property() public integration?: string;\n\n  @property() public label?: string;\n\n  @property() public value = \"\";\n\n  @property() public helper?: string;\n\n  @state() private _configEntries?: ConfigEntryExtended[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @query(\"ha-combo-box\") private _comboBox!: HaComboBox;\n\n  public open() {\n    this._comboBox?.open();\n  }\n\n  public focus() {\n    this._comboBox?.focus();\n  }\n\n  protected firstUpdated() {\n    this._getConfigEntries();\n  }\n\n  private _rowRenderer: ComboBoxLitRenderer<ConfigEntryExtended> = (\n    item\n  ) => html`\n    <ha-combo-box-item type=\"button\">\n      <span slot=\"headline\">\n        ${item.title ||\n        this.hass.localize(\n          \"ui.panel.config.integrations.config_entry.unnamed_entry\"\n        )}\n      </span>\n      <span slot=\"supporting-text\">${item.localized_domain_name}</span>\n      <img\n        alt=\"\"\n        slot=\"start\"\n        src=${brandsUrl({\n          domain: item.domain,\n          type: \"icon\",\n          darkOptimized: this.hass.themes?.darkMode,\n        })}\n        crossorigin=\"anonymous\"\n        referrerpolicy=\"no-referrer\"\n        @error=${this._onImageError}\n        @load=${this._onImageLoad}\n      />\n    </ha-combo-box-item>\n  `;\n\n  protected render() {\n    if (!this._configEntries) {\n      return nothing;\n    }\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass\n          ? this.hass.localize(\"ui.components.config-entry-picker.config_entry\")\n          : this.label}\n        .value=${this._value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        .helper=${this.helper}\n        .renderer=${this._rowRenderer}\n        .items=${this._configEntries}\n        item-value-path=\"entry_id\"\n        item-id-path=\"entry_id\"\n        item-label-path=\"title\"\n        @value-changed=${this._valueChanged}\n      ></ha-combo-box>\n    `;\n  }\n\n  private _onImageLoad(ev) {\n    ev.target.style.visibility = \"initial\";\n  }\n\n  private _onImageError(ev) {\n    ev.target.style.visibility = \"hidden\";\n  }\n\n  private async _getConfigEntries() {\n    getConfigEntries(this.hass, {\n      type: [\"device\", \"hub\", \"service\"],\n      domain: this.integration,\n    }).then((configEntries) => {\n      this._configEntries = configEntries\n        .map(\n          (entry: ConfigEntry): ConfigEntryExtended => ({\n            ...entry,\n            localized_domain_name: domainToName(\n              this.hass.localize,\n              entry.domain\n            ),\n          })\n        )\n        .sort((conf1, conf2) =>\n          caseInsensitiveStringCompare(\n            conf1.localized_domain_name + conf1.title,\n            conf2.localized_domain_name + conf2.title,\n            this.hass.locale.language\n          )\n        );\n    });\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _valueChanged(ev: ValueChangedEvent<string>) {\n    ev.stopPropagation();\n    const newValue = ev.detail.value;\n\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-entry-picker\": HaConfigEntryPicker;\n  }\n}\n","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport type { ConfigEntrySelector } from \"../../data/selector\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-config-entry-picker\";\n\n@customElement(\"ha-selector-config_entry\")\nexport class HaConfigEntrySelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: ConfigEntrySelector;\n\n  @property() public value?: any;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  protected render() {\n    return html`<ha-config-entry-picker\n      .hass=${this.hass}\n      .value=${this.value}\n      .label=${this.label}\n      .helper=${this.helper}\n      .disabled=${this.disabled}\n      .required=${this.required}\n      .integration=${this.selector.config_entry?.integration}\n      allow-custom-entity\n    ></ha-config-entry-picker>`;\n  }\n\n  static styles = css`\n    ha-config-entry-picker {\n      width: 100%;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-config_entry\": HaConfigEntrySelector;\n  }\n}\n","export interface BrandsOptions {\n  domain: string;\n  type: \"icon\" | \"logo\" | \"icon@2x\" | \"logo@2x\";\n  useFallback?: boolean;\n  darkOptimized?: boolean;\n  brand?: boolean;\n}\n\nexport interface HardwareBrandsOptions {\n  category: string;\n  model?: string;\n  manufacturer: string;\n  darkOptimized?: boolean;\n}\n\nexport const brandsUrl = (options: BrandsOptions): string =>\n  `https://brands.home-assistant.io/${options.brand ? \"brands/\" : \"\"}${\n    options.useFallback ? \"_/\" : \"\"\n  }${options.domain}/${options.darkOptimized ? \"dark_\" : \"\"}${\n    options.type\n  }.png`;\n\nexport const hardwareBrandsUrl = (options: HardwareBrandsOptions): string =>\n  `https://brands.home-assistant.io/hardware/${options.category}/${\n    options.darkOptimized ? \"dark_\" : \"\"\n  }${options.manufacturer}${options.model ? `_${options.model}` : \"\"}.png`;\n\nexport const extractDomainFromBrandUrl = (url: string) => url.split(\"/\")[4];\n\nexport const isBrandUrl = (thumbnail: string | \"\"): boolean =>\n  thumbnail.startsWith(\"https://brands.home-assistant.io/\");\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n/**\n * Overview:\n *\n * This module is designed to add support for an async `setValue` API and\n * `disconnected` callback to directives with the least impact on the core\n * runtime or payload when that feature is not used.\n *\n * The strategy is to introduce a `AsyncDirective` subclass of\n * `Directive` that climbs the \"parent\" tree in its constructor to note which\n * branches of lit-html's \"logical tree\" of data structures contain such\n * directives and thus need to be crawled when a subtree is being cleared (or\n * manually disconnected) in order to run the `disconnected` callback.\n *\n * The \"nodes\" of the logical tree include Parts, TemplateInstances (for when a\n * TemplateResult is committed to a value of a ChildPart), and Directives; these\n * all implement a common interface called `DisconnectableChild`. Each has a\n * `_$parent` reference which is set during construction in the core code, and a\n * `_$disconnectableChildren` field which is initially undefined.\n *\n * The sparse tree created by means of the `AsyncDirective` constructor\n * crawling up the `_$parent` tree and placing a `_$disconnectableChildren` Set\n * on each parent that includes each child that contains a\n * `AsyncDirective` directly or transitively via its children. In order to\n * notify connection state changes and disconnect (or reconnect) a tree, the\n * `_$notifyConnectionChanged` API is patched onto ChildParts as a directive\n * climbs the parent tree, which is called by the core when clearing a part if\n * it exists. When called, that method iterates over the sparse tree of\n * Set<DisconnectableChildren> built up by AsyncDirectives, and calls\n * `_$notifyDirectiveConnectionChanged` on any directives that are encountered\n * in that tree, running the required callbacks.\n *\n * A given \"logical tree\" of lit-html data-structures might look like this:\n *\n *  ChildPart(N1) _$dC=[D2,T3]\n *   ._directive\n *     AsyncDirective(D2)\n *   ._value // user value was TemplateResult\n *     TemplateInstance(T3) _$dC=[A4,A6,N10,N12]\n *      ._$parts[]\n *        AttributePart(A4) _$dC=[D5]\n *         ._directives[]\n *           AsyncDirective(D5)\n *        AttributePart(A6) _$dC=[D7,D8]\n *         ._directives[]\n *           AsyncDirective(D7)\n *           Directive(D8) _$dC=[D9]\n *            ._directive\n *              AsyncDirective(D9)\n *        ChildPart(N10) _$dC=[D11]\n *         ._directive\n *           AsyncDirective(D11)\n *         ._value\n *           string\n *        ChildPart(N12) _$dC=[D13,N14,N16]\n *         ._directive\n *           AsyncDirective(D13)\n *         ._value // user value was iterable\n *           Array<ChildPart>\n *             ChildPart(N14) _$dC=[D15]\n *              ._value\n *                string\n *             ChildPart(N16) _$dC=[D17,T18]\n *              ._directive\n *                AsyncDirective(D17)\n *              ._value // user value was TemplateResult\n *                TemplateInstance(T18) _$dC=[A19,A21,N25]\n *                 ._$parts[]\n *                   AttributePart(A19) _$dC=[D20]\n *                    ._directives[]\n *                      AsyncDirective(D20)\n *                   AttributePart(A21) _$dC=[22,23]\n *                    ._directives[]\n *                      AsyncDirective(D22)\n *                      Directive(D23) _$dC=[D24]\n *                       ._directive\n *                         AsyncDirective(D24)\n *                   ChildPart(N25) _$dC=[D26]\n *                    ._directive\n *                      AsyncDirective(D26)\n *                    ._value\n *                      string\n *\n * Example 1: The directive in ChildPart(N12) updates and returns `nothing`. The\n * ChildPart will _clear() itself, and so we need to disconnect the \"value\" of\n * the ChildPart (but not its directive). In this case, when `_clear()` calls\n * `_$notifyConnectionChanged()`, we don't iterate all of the\n * _$disconnectableChildren, rather we do a value-specific disconnection: i.e.\n * since the _value was an Array<ChildPart> (because an iterable had been\n * committed), we iterate the array of ChildParts (N14, N16) and run\n * `setConnected` on them (which does recurse down the full tree of\n * `_$disconnectableChildren` below it, and also removes N14 and N16 from N12's\n * `_$disconnectableChildren`). Once the values have been disconnected, we then\n * check whether the ChildPart(N12)'s list of `_$disconnectableChildren` is empty\n * (and would remove it from its parent TemplateInstance(T3) if so), but since\n * it would still contain its directive D13, it stays in the disconnectable\n * tree.\n *\n * Example 2: In the course of Example 1, `setConnected` will reach\n * ChildPart(N16); in this case the entire part is being disconnected, so we\n * simply iterate all of N16's `_$disconnectableChildren` (D17,T18) and\n * recursively run `setConnected` on them. Note that we only remove children\n * from `_$disconnectableChildren` for the top-level values being disconnected\n * on a clear; doing this bookkeeping lower in the tree is wasteful since it's\n * all being thrown away.\n *\n * Example 3: If the LitElement containing the entire tree above becomes\n * disconnected, it will run `childPart.setConnected()` (which calls\n * `childPart._$notifyConnectionChanged()` if it exists); in this case, we\n * recursively run `setConnected()` over the entire tree, without removing any\n * children from `_$disconnectableChildren`, since this tree is required to\n * re-connect the tree, which does the same operation, simply passing\n * `isConnected: true` down the tree, signaling which callback to run.\n */\n\nimport {AttributePart, ChildPart, Disconnectable, Part} from './lit-html.js';\nimport {isSingleExpression} from './directive-helpers.js';\nimport {Directive, PartInfo, PartType} from './directive.js';\nexport * from './directive.js';\n\nconst DEV_MODE = true;\n\n/**\n * Recursively walks down the tree of Parts/TemplateInstances/Directives to set\n * the connected state of directives and run `disconnected`/ `reconnected`\n * callbacks.\n *\n * @return True if there were children to disconnect; false otherwise\n */\nconst notifyChildrenConnectedChanged = (\n  parent: Disconnectable,\n  isConnected: boolean\n): boolean => {\n  const children = parent._$disconnectableChildren;\n  if (children === undefined) {\n    return false;\n  }\n  for (const obj of children) {\n    // The existence of `_$notifyDirectiveConnectionChanged` is used as a \"brand\" to\n    // disambiguate AsyncDirectives from other DisconnectableChildren\n    // (as opposed to using an instanceof check to know when to call it); the\n    // redundancy of \"Directive\" in the API name is to avoid conflicting with\n    // `_$notifyConnectionChanged`, which exists `ChildParts` which are also in\n    // this list\n    // Disconnect Directive (and any nested directives contained within)\n    // This property needs to remain unminified.\n    (obj as AsyncDirective)['_$notifyDirectiveConnectionChanged']?.(\n      isConnected,\n      false\n    );\n    // Disconnect Part/TemplateInstance\n    notifyChildrenConnectedChanged(obj, isConnected);\n  }\n  return true;\n};\n\n/**\n * Removes the given child from its parent list of disconnectable children, and\n * if the parent list becomes empty as a result, removes the parent from its\n * parent, and so forth up the tree when that causes subsequent parent lists to\n * become empty.\n */\nconst removeDisconnectableFromParent = (obj: Disconnectable) => {\n  let parent, children;\n  do {\n    if ((parent = obj._$parent) === undefined) {\n      break;\n    }\n    children = parent._$disconnectableChildren!;\n    children.delete(obj);\n    obj = parent;\n  } while (children?.size === 0);\n};\n\nconst addDisconnectableToParent = (obj: Disconnectable) => {\n  // Climb the parent tree, creating a sparse tree of children needing\n  // disconnection\n  for (let parent; (parent = obj._$parent); obj = parent) {\n    let children = parent._$disconnectableChildren;\n    if (children === undefined) {\n      parent._$disconnectableChildren = children = new Set();\n    } else if (children.has(obj)) {\n      // Once we've reached a parent that already contains this child, we\n      // can short-circuit\n      break;\n    }\n    children.add(obj);\n    installDisconnectAPI(parent);\n  }\n};\n\n/**\n * Changes the parent reference of the ChildPart, and updates the sparse tree of\n * Disconnectable children accordingly.\n *\n * Note, this method will be patched onto ChildPart instances and called from\n * the core code when parts are moved between different parents.\n */\nfunction reparentDisconnectables(this: ChildPart, newParent: Disconnectable) {\n  if (this._$disconnectableChildren !== undefined) {\n    removeDisconnectableFromParent(this);\n    this._$parent = newParent;\n    addDisconnectableToParent(this);\n  } else {\n    this._$parent = newParent;\n  }\n}\n\n/**\n * Sets the connected state on any directives contained within the committed\n * value of this part (i.e. within a TemplateInstance or iterable of\n * ChildParts) and runs their `disconnected`/`reconnected`s, as well as within\n * any directives stored on the ChildPart (when `valueOnly` is false).\n *\n * `isClearingValue` should be passed as `true` on a top-level part that is\n * clearing itself, and not as a result of recursively disconnecting directives\n * as part of a `clear` operation higher up the tree. This both ensures that any\n * directive on this ChildPart that produced a value that caused the clear\n * operation is not disconnected, and also serves as a performance optimization\n * to avoid needless bookkeeping when a subtree is going away; when clearing a\n * subtree, only the top-most part need to remove itself from the parent.\n *\n * `fromPartIndex` is passed only in the case of a partial `_clear` running as a\n * result of truncating an iterable.\n *\n * Note, this method will be patched onto ChildPart instances and called from the\n * core code when parts are cleared or the connection state is changed by the\n * user.\n */\nfunction notifyChildPartConnectedChanged(\n  this: ChildPart,\n  isConnected: boolean,\n  isClearingValue = false,\n  fromPartIndex = 0\n) {\n  const value = this._$committedValue;\n  const children = this._$disconnectableChildren;\n  if (children === undefined || children.size === 0) {\n    return;\n  }\n  if (isClearingValue) {\n    if (Array.isArray(value)) {\n      // Iterable case: Any ChildParts created by the iterable should be\n      // disconnected and removed from this ChildPart's disconnectable\n      // children (starting at `fromPartIndex` in the case of truncation)\n      for (let i = fromPartIndex; i < value.length; i++) {\n        notifyChildrenConnectedChanged(value[i], false);\n        removeDisconnectableFromParent(value[i]);\n      }\n    } else if (value != null) {\n      // TemplateInstance case: If the value has disconnectable children (will\n      // only be in the case that it is a TemplateInstance), we disconnect it\n      // and remove it from this ChildPart's disconnectable children\n      notifyChildrenConnectedChanged(value as Disconnectable, false);\n      removeDisconnectableFromParent(value as Disconnectable);\n    }\n  } else {\n    notifyChildrenConnectedChanged(this, isConnected);\n  }\n}\n\n/**\n * Patches disconnection API onto ChildParts.\n */\nconst installDisconnectAPI = (obj: Disconnectable) => {\n  if ((obj as ChildPart).type == PartType.CHILD) {\n    (obj as ChildPart)._$notifyConnectionChanged ??=\n      notifyChildPartConnectedChanged;\n    (obj as ChildPart)._$reparentDisconnectables ??= reparentDisconnectables;\n  }\n};\n\n/**\n * An abstract `Directive` base class whose `disconnected` method will be\n * called when the part containing the directive is cleared as a result of\n * re-rendering, or when the user calls `part.setConnected(false)` on\n * a part that was previously rendered containing the directive (as happens\n * when e.g. a LitElement disconnects from the DOM).\n *\n * If `part.setConnected(true)` is subsequently called on a\n * containing part, the directive's `reconnected` method will be called prior\n * to its next `update`/`render` callbacks. When implementing `disconnected`,\n * `reconnected` should also be implemented to be compatible with reconnection.\n *\n * Note that updates may occur while the directive is disconnected. As such,\n * directives should generally check the `this.isConnected` flag during\n * render/update to determine whether it is safe to subscribe to resources\n * that may prevent garbage collection.\n */\nexport abstract class AsyncDirective extends Directive {\n  // As opposed to other Disconnectables, AsyncDirectives always get notified\n  // when the RootPart connection changes, so the public `isConnected`\n  // is a locally stored variable initialized via its part's getter and synced\n  // via `_$notifyDirectiveConnectionChanged`. This is cheaper than using\n  // the _$isConnected getter, which has to look back up the tree each time.\n  /**\n   * The connection state for this Directive.\n   */\n  isConnected!: boolean;\n\n  // @internal\n  override _$disconnectableChildren?: Set<Disconnectable> = undefined;\n  /**\n   * Initialize the part with internal fields\n   * @param part\n   * @param parent\n   * @param attributeIndex\n   */\n  override _$initialize(\n    part: Part,\n    parent: Disconnectable,\n    attributeIndex: number | undefined\n  ) {\n    super._$initialize(part, parent, attributeIndex);\n    addDisconnectableToParent(this);\n    this.isConnected = part._$isConnected;\n  }\n  // This property needs to remain unminified.\n  /**\n   * Called from the core code when a directive is going away from a part (in\n   * which case `shouldRemoveFromParent` should be true), and from the\n   * `setChildrenConnected` helper function when recursively changing the\n   * connection state of a tree (in which case `shouldRemoveFromParent` should\n   * be false).\n   *\n   * @param isConnected\n   * @param isClearingDirective - True when the directive itself is being\n   *     removed; false when the tree is being disconnected\n   * @internal\n   */\n  override ['_$notifyDirectiveConnectionChanged'](\n    isConnected: boolean,\n    isClearingDirective = true\n  ) {\n    if (isConnected !== this.isConnected) {\n      this.isConnected = isConnected;\n      if (isConnected) {\n        this.reconnected?.();\n      } else {\n        this.disconnected?.();\n      }\n    }\n    if (isClearingDirective) {\n      notifyChildrenConnectedChanged(this, isConnected);\n      removeDisconnectableFromParent(this);\n    }\n  }\n\n  /**\n   * Sets the value of the directive's Part outside the normal `update`/`render`\n   * lifecycle of a directive.\n   *\n   * This method should not be called synchronously from a directive's `update`\n   * or `render`.\n   *\n   * @param directive The directive to update\n   * @param value The value to set\n   */\n  setValue(value: unknown) {\n    if (isSingleExpression(this.__part as unknown as PartInfo)) {\n      this.__part._$setValue(value, this);\n    } else {\n      // this.__attributeIndex will be defined in this case, but\n      // assert it in dev mode\n      if (DEV_MODE && this.__attributeIndex === undefined) {\n        throw new Error(`Expected this.__attributeIndex to be a number`);\n      }\n      const newValues = [...(this.__part._$committedValue as Array<unknown>)];\n      newValues[this.__attributeIndex!] = value;\n      (this.__part as AttributePart)._$setValue(newValues, this, 0);\n    }\n  }\n\n  /**\n   * User callbacks for implementing logic to release any resources/subscriptions\n   * that may have been retained by this directive. Since directives may also be\n   * re-connected, `reconnected` should also be implemented to restore the\n   * working state of the directive prior to the next render.\n   */\n  protected disconnected() {}\n  protected reconnected() {}\n}\n"],"names":["HaComboBoxTextField","_HaTextField","_this","_callSuper","concat","args","forceBlankValue","changedProps","_superPropGet","has","this","value","HaTextField","type","Boolean","attribute","registerStyles","css","_t","_","HaComboBox","_LitElement","invalid","icon","allowCustomValue","itemValuePath","itemLabelPath","disabled","required","opened","hideClearIcon","clearInitialValue","_forceBlankValue","_defaultRowRenderer","item","html","_t2","_callee","_this$_comboBox","_regenerator","w","_context","n","updateComplete","_comboBox","open","a","_open","apply","arguments","key","_focus","_asyncToGenerator","m","_callee2","_this$_inputElement","_this$_inputElement2","_context2","_inputElement","focus","_overlayMutationObserver","disconnect","undefined","_bodyMutationObserver","get","selectedItem","_this$hass","_t3","itemIdPath","items","filteredItems","dataProvider","comboBoxRenderer","renderer","_openedChanged","_filterChanged","_valueChanged","ifDefined","label","placeholder","validationMessage","errorMessage","_t4","_t5","hass","localize","_clearValue","_toggleOpen","_renderHelper","helper","_t6","ev","stopPropagation","fireEvent","_this$_comboBox2","_this$_comboBox3","close","inputElement","detail","setTimeout","setTextFieldValue","overlay","document","querySelector","_removeInert","_observeBody","_this$_bodyMutationOb","window","MutationObserver","mutations","forEach","mutation","addedNodes","node","nodeName","removedNodes","_this$_overlayMutatio","observe","body","childList","_this$_overlayMutatio2","inert","attributeName","_this$_overlayMutatio3","target","attributes","_closeOnBlurIsPrevented","newValue","LitElement","styles","_t7","reflect","HaConfigEntryPicker","_rowRenderer","_this$hass$themes","title","localized_domain_name","brandsUrl","domain","darkOptimized","themes","darkMode","_onImageError","_onImageLoad","_getConfigEntries","_configEntries","_value","nothing","style","visibility","_getConfigEntries2","getConfigEntries","integration","then","configEntries","map","entry","Object","assign","domainToName","sort","conf1","conf2","caseInsensitiveStringCompare","locale","language","_setValue","HaConfigEntrySelector","_this$selector$config","selector","config_entry","options","brand","useFallback","extractDomainFromBrandUrl","url","split","isBrandUrl","thumbnail","startsWith","s","i","t","e","_$AN","_step","_iterator","_createForOfIteratorHelper","done","_i$_$AO","_$AO","call","err","f","o","_e","_$AM","delete","size","r","Set","add","c","h","length","_$AH","Array","isArray","_i$_$AP","_i$_$AQ","_$AP","_$AQ","_classCallCheck","_inherits","_createClass","isConnected","_$AU","_this$reconnected","_this$disconnected","reconnected","disconnected","_$Ct","_$AI","_toConsumableArray","_$Ci"],"mappings":"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"}