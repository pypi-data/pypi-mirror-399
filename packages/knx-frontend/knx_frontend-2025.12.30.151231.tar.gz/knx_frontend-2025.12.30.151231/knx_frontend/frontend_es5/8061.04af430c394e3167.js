"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([["8061"],{87328:function(e,n,t){t.d(n,{aH:function(){return s}});var o=t(16727),i=t(91889),r=(t(25276),t(34782),[" ",": "," - "]),a=e=>e.toLowerCase()!==e,s=(e,n,t)=>{var o=n[e.entity_id];return o?l(o,t):(0,i.u)(e)},l=(e,n,t)=>{var s=e.name||("original_name"in e&&null!=e.original_name?String(e.original_name):void 0),l=e.device_id?n[e.device_id]:void 0;if(!l)return s||(t?(0,i.u)(t):void 0);var c=(0,o.xn)(l);return c!==s?c&&s&&((e,n)=>{for(var t=e.toLowerCase(),o=n.toLowerCase(),i=0,s=r;i<s.length;i++){var l=`${o}${s[i]}`;if(t.startsWith(l)){var c=e.substring(l.length);if(c.length)return a(c.substr(0,c.indexOf(" ")))?c:c[0].toUpperCase()+c.slice(1)}}})(s,c)||s:void 0}},79384:function(e,n,t){t.d(n,{Cf:function(){return l}});t(2008),t(62062),t(18111),t(81148),t(22489),t(61701),t(13579),t(26099);var o=t(56403),i=t(16727),r=t(87328),a=t(47644),s=t(87400),l=(e,n,t,l,c,d)=>{var p=(0,s.l)(e,t,l,c,d),u=p.device,m=p.area,_=p.floor;return n.map((n=>{switch(n.type){case"entity":return(0,r.aH)(e,t,l);case"device":return u?(0,i.xn)(u):void 0;case"area":return m?(0,o.A)(m):void 0;case"floor":return _?(0,a.X)(_):void 0;case"text":return n.text;default:return""}}))}},87400:function(e,n,t){t.d(n,{l:function(){return o}});var o=(e,n,t,o,r)=>{var a=n[e.entity_id];return a?i(a,n,t,o,r):{entity:null,device:null,area:null,floor:null}},i=(e,n,t,o,i)=>{var r=n[e.entity_id],a=null==e?void 0:e.device_id,s=a?t[a]:void 0,l=(null==e?void 0:e.area_id)||(null==s?void 0:s.area_id),c=l?o[l]:void 0,d=null==c?void 0:c.floor_id;return{entity:r,device:s||null,area:c||null,floor:(d?i[d]:void 0)||null}}},22800:function(e,n,t){t.d(n,{BM:function(){return y},Bz:function(){return h},G3:function(){return f},G_:function(){return $},Ox:function(){return w},P9:function(){return b},jh:function(){return m},v:function(){return _},wz:function(){return z}});var o=t(78261),i=t(31432),r=(t(2008),t(50113),t(74423),t(25276),t(62062),t(26910),t(18111),t(22489),t(20116),t(61701),t(26099),t(70570)),a=t(22786),s=t(41144),l=t(79384),c=t(91889),d=(t(25749),t(79599)),p=t(40404),u=t(84125),m=(e,n)=>{if(n.name)return n.name;var t=e.states[n.entity_id];return t?(0,c.u)(t):n.original_name?n.original_name:n.entity_id},_=(e,n)=>e.callWS({type:"config/entity_registry/get",entity_id:n}),f=(e,n)=>e.callWS({type:"config/entity_registry/get_entries",entity_ids:n}),$=(e,n,t)=>e.callWS(Object.assign({type:"config/entity_registry/update",entity_id:n},t)),v=e=>e.sendMessagePromise({type:"config/entity_registry/list"}),g=(e,n)=>e.subscribeEvents((0,p.s)((()=>v(e).then((e=>n.setState(e,!0)))),500,!0),"entity_registry_updated"),h=(e,n)=>(0,r.N)("_entityRegistry",v,g,e,n),w=(0,a.A)((e=>{var n,t={},o=(0,i.A)(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;t[r.entity_id]=r}}catch(a){o.e(a)}finally{o.f()}return t})),b=(0,a.A)((e=>{var n,t={},o=(0,i.A)(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;t[r.id]=r}}catch(a){o.e(a)}finally{o.f()}return t})),y=(e,n)=>e.callWS({type:"config/entity_registry/get_automatic_entity_ids",entity_ids:n}),z=function(e,n,t,i,r,a,p,m,_){var f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",$=[],v=Object.keys(e.states);return p&&(v=v.filter((e=>p.includes(e)))),m&&(v=v.filter((e=>!m.includes(e)))),n&&(v=v.filter((e=>n.includes((0,s.m)(e))))),t&&(v=v.filter((e=>!t.includes((0,s.m)(e))))),$=v.map((n=>{var t=e.states[n],i=(0,c.u)(t),r=(0,l.Cf)(t,[{type:"entity"},{type:"device"},{type:"area"}],e.entities,e.devices,e.areas,e.floors),a=(0,o.A)(r,3),p=a[0],m=a[1],_=a[2],$=(0,u.p$)(e.localize,(0,s.m)(n)),v=(0,d.qC)(e),g=p||m||n,h=[_,p?m:void 0].filter(Boolean).join(v?" ◂ ":" ▸ ");return{id:`${f}${n}`,primary:g,secondary:h,domain_name:$,sorting_label:[m,p].filter(Boolean).join("_"),search_labels:[p,m,_,$,i,n].filter(Boolean),stateObj:t}})),r&&($=$.filter((e=>{var n;return e.id===_||(null===(n=e.stateObj)||void 0===n?void 0:n.attributes.device_class)&&r.includes(e.stateObj.attributes.device_class)}))),a&&($=$.filter((e=>{var n;return e.id===_||(null===(n=e.stateObj)||void 0===n?void 0:n.attributes.unit_of_measurement)&&a.includes(e.stateObj.attributes.unit_of_measurement)}))),i&&($=$.filter((e=>e.id===_||e.stateObj&&i(e.stateObj)))),$}},35804:function(e,n,t){t.d(n,{Q:function(){return w}});var o,i,r,a,s,l,c=t(61397),d=t(78261),p=t(50264),u=(t(23792),t(26099),t(3362),t(62953),t(96196)),m=t(84125),_=(e,n)=>{var t;return e.callApi("POST","config/config_entries/options/flow",{handler:n,show_advanced_options:Boolean(null===(t=e.userData)||void 0===t?void 0:t.showAdvanced)})},f=(e,n)=>e.callApi("GET",`config/config_entries/options/flow/${n}`),$=(e,n,t)=>e.callApi("POST",`config/config_entries/options/flow/${n}`,t),v=(e,n)=>e.callApi("DELETE",`config/config_entries/options/flow/${n}`),g=t(73347),h=e=>e,w=(e,n,t)=>{return(0,g.g)(e,Object.assign({startFlowHandler:n.entry_id,domain:n.domain},t),{flowType:"options_flow",showDevices:!1,createFlow:(b=(0,p.A)((0,c.A)().m((function e(t,o){var i,r,a;return(0,c.A)().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all([_(t,o),t.loadFragmentTranslation("config"),t.loadBackendTranslation("options",n.domain),t.loadBackendTranslation("selector",n.domain)]);case 1:return i=e.v,r=(0,d.A)(i,1),a=r[0],e.a(2,a)}}),e)}))),function(e,n){return b.apply(this,arguments)}),fetchFlow:(w=(0,p.A)((0,c.A)().m((function e(t,o){var i,r,a;return(0,c.A)().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all([f(t,o),t.loadFragmentTranslation("config"),t.loadBackendTranslation("options",n.domain),t.loadBackendTranslation("selector",n.domain)]);case 1:return i=e.v,r=(0,d.A)(i,1),a=r[0],e.a(2,a)}}),e)}))),function(e,n){return w.apply(this,arguments)}),handleFlowStep:$,deleteFlow:v,renderAbortDescription(e,t){var i=e.localize(`component.${t.translation_domain||n.domain}.options.abort.${t.reason}`,t.description_placeholders);return i?(0,u.qy)(o||(o=h`
              <ha-markdown
                breaks
                allow-svg
                .content=${0}
              ></ha-markdown>
            `),i):t.reason},renderShowFormStepHeader(e,t){return e.localize(`component.${t.translation_domain||n.domain}.options.step.${t.step_id}.title`,t.description_placeholders)||e.localize("ui.dialogs.options_flow.form.header")},renderShowFormStepDescription(e,t){var o=e.localize(`component.${t.translation_domain||n.domain}.options.step.${t.step_id}.description`,t.description_placeholders);return o?(0,u.qy)(i||(i=h`
              <ha-markdown
                allow-svg
                breaks
                .content=${0}
              ></ha-markdown>
            `),o):""},renderShowFormStepFieldLabel(e,t,o,i){var r;if("expandable"===o.type)return e.localize(`component.${n.domain}.options.step.${t.step_id}.sections.${o.name}.name`,t.description_placeholders);var a=null!=i&&null!==(r=i.path)&&void 0!==r&&r[0]?`sections.${i.path[0]}.`:"";return e.localize(`component.${n.domain}.options.step.${t.step_id}.${a}data.${o.name}`,t.description_placeholders)||o.name},renderShowFormStepFieldHelper(e,t,o,i){var a;if("expandable"===o.type)return e.localize(`component.${t.translation_domain||n.domain}.options.step.${t.step_id}.sections.${o.name}.description`,t.description_placeholders);var s=null!=i&&null!==(a=i.path)&&void 0!==a&&a[0]?`sections.${i.path[0]}.`:"",l=e.localize(`component.${t.translation_domain||n.domain}.options.step.${t.step_id}.${s}data_description.${o.name}`,t.description_placeholders);return l?(0,u.qy)(r||(r=h`<ha-markdown breaks .content=${0}></ha-markdown>`),l):""},renderShowFormStepFieldError(e,t,o){return e.localize(`component.${t.translation_domain||n.domain}.options.error.${o}`,t.description_placeholders)||o},renderShowFormStepFieldLocalizeValue(e,t,o){return e.localize(`component.${n.domain}.selector.${o}`)},renderShowFormStepSubmitButton(e,t){return e.localize(`component.${n.domain}.options.step.${t.step_id}.submit`)||e.localize("ui.panel.config.integrations.config_flow."+(!1===t.last_step?"next":"submit"))},renderExternalStepHeader(e,n){return""},renderExternalStepDescription(e,n){return""},renderCreateEntryDescription(e,n){return(0,u.qy)(a||(a=h`
          <p>${0}</p>
        `),e.localize("ui.dialogs.options_flow.success.description"))},renderShowFormProgressHeader(e,t){return e.localize(`component.${n.domain}.options.step.${t.step_id}.title`)||e.localize(`component.${n.domain}.title`)},renderShowFormProgressDescription(e,t){var o=e.localize(`component.${t.translation_domain||n.domain}.options.progress.${t.progress_action}`,t.description_placeholders);return o?(0,u.qy)(s||(s=h`
              <ha-markdown
                allow-svg
                breaks
                .content=${0}
              ></ha-markdown>
            `),o):""},renderMenuHeader(e,t){return e.localize(`component.${n.domain}.options.step.${t.step_id}.title`)||e.localize(`component.${n.domain}.title`)},renderMenuDescription(e,t){var o=e.localize(`component.${t.translation_domain||n.domain}.options.step.${t.step_id}.description`,t.description_placeholders);return o?(0,u.qy)(l||(l=h`
              <ha-markdown
                allow-svg
                breaks
                .content=${0}
              ></ha-markdown>
            `),o):""},renderMenuOption(e,t,o){return e.localize(`component.${t.translation_domain||n.domain}.options.step.${t.step_id}.menu_options.${o}`,t.description_placeholders)},renderMenuOptionDescription(e,t,o){return e.localize(`component.${t.translation_domain||n.domain}.options.step.${t.step_id}.menu_option_descriptions.${o}`,t.description_placeholders)},renderLoadingDescription(e,t){return e.localize(`component.${n.domain}.options.loading`)||("loading_flow"===t||"loading_step"===t?e.localize(`ui.dialogs.options_flow.loading.${t}`,{integration:(0,m.p$)(e.localize,n.domain)}):"")}});var w,b}},53264:function(e,n,t){t.d(n,{a:function(){return S}});var o,i,r,a,s,l,c,d,p,u=t(61397),m=t(78261),_=t(50264),f=(t(52675),t(89463),t(23792),t(26099),t(3362),t(62953),t(96196)),$=t(84125),v={"HA-Frontend-Base":`${location.protocol}//${location.host}`},g=(e,n,t,o)=>{var i;return e.callApi("POST","config/config_entries/subentries/flow",{handler:[n,t],show_advanced_options:Boolean(null===(i=e.userData)||void 0===i?void 0:i.showAdvanced),subentry_id:o},v)},h=(e,n)=>e.callApi("GET",`config/config_entries/subentries/flow/${n}`,void 0,v),w=(e,n,t)=>e.callApi("POST",`config/config_entries/subentries/flow/${n}`,t,v),b=(e,n)=>e.callApi("DELETE",`config/config_entries/subentries/flow/${n}`),y=t(73347),z=e=>e,S=(e,n,t,v)=>{return(0,y.g)(e,v,{flowType:"config_subentries_flow",showDevices:!0,createFlow:(k=(0,_.A)((0,u.A)().m((function e(o,i){var r,a,s;return(0,u.A)().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all([g(o,i,t,v.subEntryId),o.loadFragmentTranslation("config"),o.loadBackendTranslation("config_subentries",n.domain),o.loadBackendTranslation("selector",n.domain),o.loadBackendTranslation("title",n.domain)]);case 1:return r=e.v,a=(0,m.A)(r,1),s=a[0],e.a(2,s)}}),e)}))),function(e,n){return k.apply(this,arguments)}),fetchFlow:(S=(0,_.A)((0,u.A)().m((function e(t,o){var i;return(0,u.A)().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,h(t,o);case 1:return i=e.v,e.n=2,t.loadFragmentTranslation("config");case 2:return e.n=3,t.loadBackendTranslation("config_subentries",n.domain);case 3:return e.n=4,t.loadBackendTranslation("selector",n.domain);case 4:return e.a(2,i)}}),e)}))),function(e,n){return S.apply(this,arguments)}),handleFlowStep:w,deleteFlow:b,renderAbortDescription(e,i){var r=e.localize(`component.${i.translation_domain||n.domain}.config_subentries.${t}.abort.${i.reason}`,i.description_placeholders);return r?(0,f.qy)(o||(o=z`
            <ha-markdown allowsvg breaks .content=${0}></ha-markdown>
          `),r):i.reason},renderShowFormStepHeader(e,o){return e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.title`,o.description_placeholders)||e.localize(`component.${n.domain}.title`)},renderShowFormStepDescription(e,o){var r=e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.description`,o.description_placeholders);return r?(0,f.qy)(i||(i=z`
            <ha-markdown allowsvg breaks .content=${0}></ha-markdown>
          `),r):""},renderShowFormStepFieldLabel(e,o,i,r){var a;if("expandable"===i.type)return e.localize(`component.${n.domain}.config_subentries.${t}.step.${o.step_id}.sections.${i.name}.name`,o.description_placeholders);var s=null!=r&&null!==(a=r.path)&&void 0!==a&&a[0]?`sections.${r.path[0]}.`:"";return e.localize(`component.${n.domain}.config_subentries.${t}.step.${o.step_id}.${s}data.${i.name}`,o.description_placeholders)||i.name},renderShowFormStepFieldHelper(e,o,i,a){var s;if("expandable"===i.type)return e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.sections.${i.name}.description`,o.description_placeholders);var l=null!=a&&null!==(s=a.path)&&void 0!==s&&s[0]?`sections.${a.path[0]}.`:"",c=e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.${l}data_description.${i.name}`,o.description_placeholders);return c?(0,f.qy)(r||(r=z`<ha-markdown breaks .content=${0}></ha-markdown>`),c):""},renderShowFormStepFieldError(e,o,i){return e.localize(`component.${o.translation_domain||o.translation_domain||n.domain}.config_subentries.${t}.error.${i}`,o.description_placeholders)||i},renderShowFormStepFieldLocalizeValue(e,t,o){return e.localize(`component.${n.domain}.selector.${o}`)},renderShowFormStepSubmitButton(e,o){return e.localize(`component.${n.domain}.config_subentries.${t}.step.${o.step_id}.submit`)||e.localize("ui.panel.config.integrations.config_flow."+(!1===o.last_step?"next":"submit"))},renderExternalStepHeader(e,o){return e.localize(`component.${n.domain}.config_subentries.${t}.step.${o.step_id}.title`)||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site")},renderExternalStepDescription(e,o){var i=e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.description`,o.description_placeholders);return(0,f.qy)(a||(a=z`
        <p>
          ${0}
        </p>
        ${0}
      `),e.localize("ui.panel.config.integrations.config_flow.external_step.description"),i?(0,f.qy)(s||(s=z`
              <ha-markdown
                allowsvg
                breaks
                .content=${0}
              ></ha-markdown>
            `),i):"")},renderCreateEntryDescription(e,o){var i=e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.create_entry.${o.description||"default"}`,o.description_placeholders);return(0,f.qy)(l||(l=z`
        ${0}
      `),i?(0,f.qy)(c||(c=z`
              <ha-markdown
                allowsvg
                breaks
                .content=${0}
              ></ha-markdown>
            `),i):f.s6)},renderShowFormProgressHeader(e,o){return e.localize(`component.${n.domain}.config_subentries.${t}.step.${o.step_id}.title`)||e.localize(`component.${n.domain}.title`)},renderShowFormProgressDescription(e,o){var i=e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.progress.${o.progress_action}`,o.description_placeholders);return i?(0,f.qy)(d||(d=z`
            <ha-markdown allowsvg breaks .content=${0}></ha-markdown>
          `),i):""},renderMenuHeader(e,o){return e.localize(`component.${n.domain}.config_subentries.${t}.step.${o.step_id}.title`,o.description_placeholders)||e.localize(`component.${n.domain}.title`)},renderMenuDescription(e,o){var i=e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.description`,o.description_placeholders);return i?(0,f.qy)(p||(p=z`
            <ha-markdown allowsvg breaks .content=${0}></ha-markdown>
          `),i):""},renderMenuOption(e,o,i){return e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.menu_options.${i}`,o.description_placeholders)},renderMenuOptionDescription(e,o,i){return e.localize(`component.${o.translation_domain||n.domain}.config_subentries.${t}.step.${o.step_id}.menu_option_descriptions.${i}`,o.description_placeholders)},renderLoadingDescription(e,n,t,o){if("loading_flow"!==n&&"loading_step"!==n)return"";var i=(null==o?void 0:o.handler)||t;return e.localize(`ui.panel.config.integrations.config_flow.loading.${n}`,{integration:i?(0,$.p$)(e.localize,i):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}});var S,k}},70570:function(e,n,t){t.d(n,{N:function(){return r}});t(16280),t(44114),t(26099),t(3362);var o=e=>{var n=[];function t(t,o){e=o?t:Object.assign(Object.assign({},e),t);for(var i=n,r=0;r<i.length;r++)i[r](e)}return{get state(){return e},action(n){function o(e){t(e,!1)}return function(){for(var t=[e],i=0;i<arguments.length;i++)t.push(arguments[i]);var r=n.apply(this,t);if(null!=r)return r instanceof Promise?r.then(o):o(r)}},setState:t,clearState(){e=void 0},subscribe(e){return n.push(e),()=>{!function(e){for(var t=[],o=0;o<n.length;o++)n[o]===e?e=null:t.push(n[o]);n=t}(e)}}}},i=function(e,n,t,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{unsubGrace:!0};if(e[n])return e[n];var a,s,l=0,c=o(),d=()=>{if(!t)throw new Error("Collection does not support refresh");return t(e).then((e=>c.setState(e,!0)))},p=()=>d().catch((n=>{if(e.connected)throw n})),u=()=>{s=void 0,a&&a.then((e=>{e()})),c.clearState(),e.removeEventListener("ready",d),e.removeEventListener("disconnected",m)},m=()=>{s&&(clearTimeout(s),u())};return e[n]={get state(){return c.state},refresh:d,subscribe(n){1===++l&&(()=>{if(void 0!==s)return clearTimeout(s),void(s=void 0);i&&(a=i(e,c)),t&&(e.addEventListener("ready",p),p()),e.addEventListener("disconnected",m)})();var o=c.subscribe(n);return void 0!==c.state&&setTimeout((()=>n(c.state)),0),()=>{o(),--l||(r.unsubGrace?s=setTimeout(u,5e3):u())}}},e[n]},r=(e,n,t,o,r)=>i(o,e,n,t).subscribe(r)}}]);
//# sourceMappingURL=8061.04af430c394e3167.js.map