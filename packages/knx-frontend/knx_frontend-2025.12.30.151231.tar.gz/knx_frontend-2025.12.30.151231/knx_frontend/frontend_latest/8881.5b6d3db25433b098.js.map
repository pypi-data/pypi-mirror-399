{"version":3,"file":"8881.5b6d3db25433b098.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-number.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-slider.ts"],"sourcesContent":["import type { PropertyValues } from \"lit\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { NumberSelector } from \"../../data/selector\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-input-helper-text\";\nimport \"../ha-slider\";\nimport \"../ha-textfield\";\n\n@customElement(\"ha-selector-number\")\nexport class HaNumberSelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: NumberSelector;\n\n  @property({ type: Number }) public value?: number;\n\n  @property({ type: Number }) public placeholder?: number;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ attribute: false })\n  public localizeValue?: (key: string) => string;\n\n  @property({ type: Boolean }) public required = true;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  private _valueStr = \"\";\n\n  protected willUpdate(changedProps: PropertyValues) {\n    if (changedProps.has(\"value\")) {\n      if (this._valueStr === \"\" || this.value !== Number(this._valueStr)) {\n        this._valueStr =\n          this.value == null || isNaN(this.value) ? \"\" : this.value.toString();\n      }\n    }\n  }\n\n  protected render() {\n    const isBox =\n      this.selector.number?.mode === \"box\" ||\n      this.selector.number?.min === undefined ||\n      this.selector.number?.max === undefined;\n\n    let sliderStep;\n\n    if (!isBox) {\n      sliderStep = this.selector.number!.step ?? 1;\n      if (sliderStep === \"any\") {\n        sliderStep = 1;\n        // divide the range of the slider by 100 steps\n        const step =\n          (this.selector.number!.max! - this.selector.number!.min!) / 100;\n        // biggest step size is 1, round the step size to a division of 1\n        while (sliderStep > step) {\n          sliderStep /= 10;\n        }\n      }\n    }\n\n    const translationKey = this.selector.number?.translation_key;\n    let unit = this.selector.number?.unit_of_measurement;\n    if (isBox && unit && this.localizeValue && translationKey) {\n      unit =\n        this.localizeValue(`${translationKey}.unit_of_measurement.${unit}`) ||\n        unit;\n    }\n\n    return html`\n      ${this.label && !isBox\n        ? html`${this.label}${this.required ? \"*\" : \"\"}`\n        : nothing}\n      <div class=\"input\">\n        ${!isBox\n          ? html`\n              <ha-slider\n                labeled\n                .min=${this.selector.number!.min}\n                .max=${this.selector.number!.max}\n                .value=${this.value}\n                .step=${sliderStep}\n                .disabled=${this.disabled}\n                .required=${this.required}\n                @change=${this._handleSliderChange}\n                .withMarkers=${this.selector.number?.slider_ticks || false}\n              >\n              </ha-slider>\n            `\n          : nothing}\n        <ha-textfield\n          .inputMode=${this.selector.number?.step === \"any\" ||\n          (this.selector.number?.step ?? 1) % 1 !== 0\n            ? \"decimal\"\n            : \"numeric\"}\n          .label=${!isBox ? undefined : this.label}\n          .placeholder=${this.placeholder}\n          class=${classMap({ single: isBox })}\n          .min=${this.selector.number?.min}\n          .max=${this.selector.number?.max}\n          .value=${this._valueStr ?? \"\"}\n          .step=${this.selector.number?.step ?? 1}\n          helperPersistent\n          .helper=${isBox ? this.helper : undefined}\n          .disabled=${this.disabled}\n          .required=${this.required}\n          .suffix=${unit}\n          type=\"number\"\n          autoValidate\n          ?no-spinner=${!isBox}\n          @input=${this._handleInputChange}\n        >\n        </ha-textfield>\n      </div>\n      ${!isBox && this.helper\n        ? html`<ha-input-helper-text .disabled=${this.disabled}\n            >${this.helper}</ha-input-helper-text\n          >`\n        : nothing}\n    `;\n  }\n\n  private _handleInputChange(ev) {\n    ev.stopPropagation();\n    this._valueStr = ev.target.value;\n    const value =\n      ev.target.value === \"\" || isNaN(ev.target.value)\n        ? undefined\n        : Number(ev.target.value);\n    if (this.value === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", { value });\n  }\n\n  private _handleSliderChange(ev) {\n    ev.stopPropagation();\n    const value = Number(ev.target.value);\n    if (this.value === value) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", { value });\n  }\n\n  static styles = css`\n    .input {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      direction: ltr;\n    }\n    ha-slider {\n      flex: 1;\n      margin-right: 16px;\n      margin-inline-end: 16px;\n      margin-inline-start: 0;\n    }\n    ha-textfield {\n      --ha-textfield-input-width: 40px;\n    }\n    .single {\n      --ha-textfield-input-width: unset;\n      flex: 1;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-number\": HaNumberSelector;\n  }\n}\n","import Slider from \"@home-assistant/webawesome/dist/components/slider/slider\";\nimport { css, type CSSResultGroup } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { mainWindow } from \"../common/dom/get_main_window\";\n\n@customElement(\"ha-slider\")\nexport class HaSlider extends Slider {\n  @property({ reflect: true }) size: \"small\" | \"medium\" = \"small\";\n\n  @property({ type: Boolean, attribute: \"with-tooltip\" }) withTooltip = true;\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this.dir = mainWindow.document.dir;\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      Slider.styles,\n      css`\n        :host {\n          --track-size: var(--ha-slider-track-size, 4px);\n          --marker-height: calc(var(--ha-slider-track-size, 4px) / 2);\n          --marker-width: calc(var(--ha-slider-track-size, 4px) / 2);\n          --wa-color-surface-default: var(--card-background-color);\n          --wa-color-neutral-fill-normal: var(--disabled-color);\n          --wa-tooltip-background-color: var(--secondary-background-color);\n          --wa-tooltip-color: var(--primary-text-color);\n          --wa-tooltip-font-family: var(\n            --ha-tooltip-font-family,\n            var(--ha-font-family-body)\n          );\n          --wa-tooltip-font-size: var(\n            --ha-tooltip-font-size,\n            var(--ha-font-size-s)\n          );\n          --wa-tooltip-font-weight: var(\n            --ha-tooltip-font-weight,\n            var(--ha-font-weight-normal)\n          );\n          --wa-tooltip-line-height: var(\n            --ha-tooltip-line-height,\n            var(--ha-line-height-condensed)\n          );\n          --wa-tooltip-padding: 8px;\n          --wa-tooltip-border-radius: var(\n            --ha-tooltip-border-radius,\n            var(--ha-border-radius-sm)\n          );\n          --wa-tooltip-arrow-size: var(--ha-tooltip-arrow-size, 8px);\n          --wa-z-index-tooltip: var(--ha-tooltip-z-index, 1000);\n          min-width: 100px;\n          min-inline-size: 100px;\n          width: 200px;\n        }\n\n        #thumb {\n          border: none;\n          background-color: var(--ha-slider-thumb-color, var(--primary-color));\n        }\n\n        #thumb:after {\n          content: \"\";\n          border-radius: 50%;\n          position: absolute;\n          width: calc(var(--thumb-width) * 2 + 8px);\n          height: calc(var(--thumb-height) * 2 + 8px);\n          left: calc(-50% - 4px);\n          top: calc(-50% - 4px);\n          cursor: pointer;\n        }\n\n        #slider:focus-visible:not(.disabled) #thumb,\n        #slider:focus-visible:not(.disabled) #thumb-min,\n        #slider:focus-visible:not(.disabled) #thumb-max {\n          outline: var(--wa-focus-ring);\n        }\n\n        #track:after {\n          content: \"\";\n          position: absolute;\n          top: calc(-50% - 4px);\n          left: 0;\n          width: 100%;\n          height: calc(var(--track-size) * 2 + 8px);\n          cursor: pointer;\n        }\n\n        #indicator {\n          background-color: var(\n            --ha-slider-indicator-color,\n            var(--primary-color)\n          );\n        }\n\n        :host([size=\"medium\"]) {\n          --thumb-width: 20px;\n          --thumb-height: 20px;\n        }\n\n        :host([size=\"small\"]) {\n          --thumb-width: 16px;\n          --thumb-height: 16px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-slider\": HaSlider;\n  }\n}\n"],"names":["HaNumberSelector","LitElement","willUpdate","changedProps","has","this","_valueStr","value","Number","isNaN","toString","render","isBox","selector","number","mode","undefined","min","max","sliderStep","step","translationKey","translation_key","unit","unit_of_measurement","localizeValue","html","label","required","nothing","disabled","_handleSliderChange","slider_ticks","placeholder","classMap","single","helper","_handleInputChange","ev","stopPropagation","target","fireEvent","args","styles","css","attribute","type","Boolean","HaSlider","Slider","connectedCallback","super","dir","mainWindow","size","withTooltip","reflect"],"mappings":"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"}