{"version":3,"file":"6938.18f302d055c79105.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_area_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_device_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/string/get_duplicates.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_domain.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_floor_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_object_id.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_state_domain.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_state_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/supports-feature.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-dialog.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/util/promise-timeout.ts","webpack://knx-frontend/./homeassistant-frontend/src/resources/icon-metadata.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/iconsets.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-icon.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/custom_iconsets.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/custom_icons.ts","webpack://knx-frontend/./homeassistant-frontend/src/dialogs/generic/show-dialog-box.ts"],"sourcesContent":["import type { AreaRegistryEntry } from \"../../data/area_registry\";\n\nexport const computeAreaName = (area: AreaRegistryEntry): string | undefined =>\n  area.name?.trim();\n","import memoizeOne from \"memoize-one\";\nimport type { DeviceRegistryEntry } from \"../../data/device_registry\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n} from \"../../data/entity_registry\";\nimport type { HomeAssistant } from \"../../types\";\nimport { computeStateName } from \"./compute_state_name\";\nimport { getDuplicates } from \"../string/get_duplicates\";\n\nexport const computeDeviceName = (\n  device: DeviceRegistryEntry\n): string | undefined => (device.name_by_user || device.name)?.trim();\n\nexport const computeDeviceNameDisplay = (\n  device: DeviceRegistryEntry,\n  hass: HomeAssistant,\n  entities?: EntityRegistryEntry[] | EntityRegistryDisplayEntry[] | string[]\n) =>\n  computeDeviceName(device) ||\n  (entities && fallbackDeviceName(hass, entities)) ||\n  hass.localize(\"ui.panel.config.devices.unnamed_device\", {\n    type: hass.localize(\n      `ui.panel.config.devices.type.${device.entry_type || \"device\"}`\n    ),\n  });\n\nexport const fallbackDeviceName = (\n  hass: HomeAssistant,\n  entities: EntityRegistryEntry[] | EntityRegistryDisplayEntry[] | string[]\n) => {\n  for (const entity of entities || []) {\n    const entityId = typeof entity === \"string\" ? entity : entity.entity_id;\n    const stateObj = hass.states[entityId];\n    if (stateObj) {\n      return computeStateName(stateObj);\n    }\n  }\n  return undefined;\n};\n\nexport const getDuplicatedDeviceNames = memoizeOne(\n  (devices: HomeAssistant[\"devices\"]): Set<string> => {\n    const names = Object.values(devices)\n      .map((device) => computeDeviceName(device))\n      .filter((name): name is string => name !== undefined);\n\n    return getDuplicates(names);\n  }\n);\n","export function getDuplicates(array: string[]): Set<string> {\n  const duplicates = new Set<string>();\n  const seen = new Set<string>();\n\n  for (const item of array) {\n    if (seen.has(item)) {\n      duplicates.add(item);\n    } else {\n      seen.add(item);\n    }\n  }\n\n  return duplicates;\n}\n","export const computeDomain = (entityId: string): string =>\n  entityId.substring(0, entityId.indexOf(\".\"));\n","import type { FloorRegistryEntry } from \"../../data/floor_registry\";\n\nexport const computeFloorName = (floor: FloorRegistryEntry): string =>\n  floor.name?.trim();\n","/** Compute the object ID of a state. */\nexport const computeObjectId = (entityId: string): string =>\n  entityId.slice(entityId.indexOf(\".\") + 1);\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeDomain } from \"./compute_domain\";\n\nexport const computeStateDomain = (stateObj: HassEntity) =>\n  computeDomain(stateObj.entity_id);\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeObjectId } from \"./compute_object_id\";\n\nexport const computeStateNameFromEntityAttributes = (\n  entityId: string,\n  attributes: Record<string, any>\n): string =>\n  attributes.friendly_name === undefined\n    ? computeObjectId(entityId).replace(/_/g, \" \")\n    : (attributes.friendly_name ?? \"\").toString();\n\nexport const computeStateName = (stateObj: HassEntity): string =>\n  computeStateNameFromEntityAttributes(stateObj.entity_id, stateObj.attributes);\n","import type { HassEntity } from \"home-assistant-js-websocket\";\n\nexport const supportsFeature = (\n  stateObj: HassEntity,\n  feature: number\n): boolean => supportsFeatureFromAttributes(stateObj.attributes, feature);\n\nexport const supportsFeatureFromAttributes = (\n  attributes: Record<string, any>,\n  feature: number\n): boolean =>\n  // eslint-disable-next-line no-bitwise\n  (attributes.supported_features! & feature) !== 0;\n","import { DialogBase } from \"@material/mwc-dialog/mwc-dialog-base\";\nimport { styles } from \"@material/mwc-dialog/mwc-dialog.css\";\nimport { mdiClose } from \"@mdi/js\";\nimport type { TemplateResult } from \"lit\";\nimport { css, html } from \"lit\";\nimport { customElement } from \"lit/decorators\";\nimport { FOCUS_TARGET } from \"../dialogs/make-dialog-manager\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-icon-button\";\n\nconst SUPPRESS_DEFAULT_PRESS_SELECTOR = [\"button\", \"ha-list-item\"];\n\nexport const createCloseHeading = (\n  hass: HomeAssistant | undefined,\n  title: string | TemplateResult\n) => html`\n  <div class=\"header_title\">\n    <ha-icon-button\n      .label=${hass?.localize(\"ui.common.close\") ?? \"Close\"}\n      .path=${mdiClose}\n      dialogAction=\"close\"\n      class=\"header_button\"\n    ></ha-icon-button>\n    <span>${title}</span>\n  </div>\n`;\n\n@customElement(\"ha-dialog\")\nexport class HaDialog extends DialogBase {\n  protected readonly [FOCUS_TARGET];\n\n  public scrollToPos(x: number, y: number) {\n    this.contentElement?.scrollTo(x, y);\n  }\n\n  protected renderHeading() {\n    return html`<slot name=\"heading\"> ${super.renderHeading()} </slot>`;\n  }\n\n  protected firstUpdated(): void {\n    super.firstUpdated();\n    this.suppressDefaultPressSelector = [\n      this.suppressDefaultPressSelector,\n      SUPPRESS_DEFAULT_PRESS_SELECTOR,\n    ].join(\", \");\n    this._updateScrolledAttribute();\n    this.contentElement?.addEventListener(\"scroll\", this._onScroll, {\n      passive: true,\n    });\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this.contentElement.removeEventListener(\"scroll\", this._onScroll);\n  }\n\n  private _onScroll = () => {\n    this._updateScrolledAttribute();\n  };\n\n  private _updateScrolledAttribute() {\n    if (!this.contentElement) return;\n    this.toggleAttribute(\"scrolled\", this.contentElement.scrollTop !== 0);\n  }\n\n  static override styles = [\n    styles,\n    css`\n      :host([scrolled]) ::slotted(ha-dialog-header) {\n        border-bottom: 1px solid\n          var(--mdc-dialog-scroll-divider-color, rgba(0, 0, 0, 0.12));\n      }\n      .mdc-dialog {\n        --mdc-dialog-scroll-divider-color: var(\n          --dialog-scroll-divider-color,\n          var(--divider-color)\n        );\n        z-index: var(--dialog-z-index, 8);\n        -webkit-backdrop-filter: var(\n          --ha-dialog-scrim-backdrop-filter,\n          var(--dialog-backdrop-filter, none)\n        );\n        backdrop-filter: var(\n          --ha-dialog-scrim-backdrop-filter,\n          var(--dialog-backdrop-filter, none)\n        );\n        --mdc-dialog-box-shadow: var(--dialog-box-shadow, none);\n        --mdc-typography-headline6-font-weight: var(--ha-font-weight-normal);\n        --mdc-typography-headline6-font-size: 1.574rem;\n      }\n      .mdc-dialog__actions {\n        justify-content: var(--justify-action-buttons, flex-end);\n        padding: var(--ha-space-3) var(--ha-space-4) var(--ha-space-4)\n          var(--ha-space-4);\n      }\n      .mdc-dialog__actions span:nth-child(1) {\n        flex: var(--secondary-action-button-flex, unset);\n      }\n      .mdc-dialog__actions span:nth-child(2) {\n        flex: var(--primary-action-button-flex, unset);\n      }\n      .mdc-dialog__container {\n        align-items: var(--vertical-align-dialog, center);\n        padding: var(--dialog-container-padding, var(--ha-space-0));\n      }\n      .mdc-dialog__title {\n        padding: var(--ha-space-4) var(--ha-space-4) var(--ha-space-0)\n          var(--ha-space-4);\n      }\n      .mdc-dialog__title:has(span) {\n        padding: var(--ha-space-3) var(--ha-space-3) var(--ha-space-0);\n      }\n      .mdc-dialog__title::before {\n        content: unset;\n      }\n      .mdc-dialog .mdc-dialog__content {\n        position: var(--dialog-content-position, relative);\n        padding: var(--dialog-content-padding, var(--ha-space-6));\n      }\n      :host([hideactions]) .mdc-dialog .mdc-dialog__content {\n        padding-bottom: var(--dialog-content-padding, var(--ha-space-6));\n      }\n      .mdc-dialog .mdc-dialog__surface {\n        position: var(--dialog-surface-position, relative);\n        top: var(--dialog-surface-top);\n        margin-top: var(--dialog-surface-margin-top);\n        min-width: var(--mdc-dialog-min-width, auto);\n        min-height: var(--mdc-dialog-min-height, auto);\n        border-radius: var(\n          --ha-dialog-border-radius,\n          var(--ha-border-radius-3xl)\n        );\n        -webkit-backdrop-filter: var(--ha-dialog-surface-backdrop-filter, none);\n        backdrop-filter: var(--ha-dialog-surface-backdrop-filter, none);\n        background: var(\n          --ha-dialog-surface-background,\n          var(--mdc-theme-surface, #fff)\n        );\n        padding: var(--dialog-surface-padding, var(--ha-space-0));\n      }\n      :host([flexContent]) .mdc-dialog .mdc-dialog__content {\n        display: flex;\n        flex-direction: column;\n      }\n\n      .header_title {\n        display: flex;\n        align-items: center;\n        direction: var(--direction);\n      }\n      .header_title span {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        display: block;\n        padding-left: var(--ha-space-1);\n        padding-right: var(--ha-space-1);\n        margin-right: var(--ha-space-3);\n        margin-inline-end: var(--ha-space-3);\n        margin-inline-start: initial;\n      }\n      .header_button {\n        text-decoration: none;\n        color: inherit;\n        inset-inline-start: initial;\n        inset-inline-end: calc(var(--ha-space-3) * -1);\n        direction: var(--direction);\n      }\n      .dialog-actions {\n        inset-inline-start: initial !important;\n        inset-inline-end: var(--ha-space-0) !important;\n        direction: var(--direction);\n      }\n    `,\n  ];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-dialog\": HaDialog;\n  }\n}\n","class TimeoutError extends Error {\n  public timeout: number;\n\n  constructor(timeout: number, ...params) {\n    super(...params);\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, TimeoutError);\n    }\n\n    this.name = \"TimeoutError\";\n    // Custom debugging information\n    this.timeout = timeout;\n    this.message = `Timed out in ${timeout} ms.`;\n  }\n}\n\nexport const promiseTimeout = (ms: number, promise: Promise<any> | any) => {\n  const timeout = new Promise((_resolve, reject) => {\n    setTimeout(() => {\n      reject(new TimeoutError(ms));\n    }, ms);\n  });\n\n  // Returns a race between our timeout and the passed in promise\n  return Promise.race([promise, timeout]);\n};\n","import * as iconMetadata_ from \"../../build/mdi/iconMetadata.json\";\nimport type { IconMetaFile } from \"../types.js\";\n\nexport const iconMetadata = (iconMetadata_ as any).default as IconMetaFile;\n","import { clear, get, set, createStore, promisifyRequest } from \"idb-keyval\";\nimport memoizeOne from \"memoize-one\";\nimport { promiseTimeout } from \"../common/util/promise-timeout\";\nimport { iconMetadata } from \"../resources/icon-metadata\";\nimport type { IconMeta } from \"../types\";\n\nexport type Icons = Record<string, string>;\n\nexport type Chunks = Record<string, Promise<Icons>>;\n\nconst getStore = memoizeOne(async () => {\n  const iconStore = createStore(\"hass-icon-db\", \"mdi-icon-store\");\n\n  // Supervisor doesn't use icons, and should not update/downgrade the icon DB.\n  if (!__SUPERVISOR__) {\n    const version = await get(\"_version\", iconStore);\n\n    if (!version) {\n      set(\"_version\", iconMetadata.version, iconStore);\n    } else if (version !== iconMetadata.version) {\n      await clear(iconStore);\n      set(\"_version\", iconMetadata.version, iconStore);\n    }\n  }\n\n  return iconStore;\n});\n\nexport const MDI_PREFIXES = [\"mdi\", \"hass\", \"hassio\", \"hademo\"];\n\nlet toRead: [\n  string,\n  (iconPath: string | undefined) => void,\n  (e: any) => void,\n][] = [];\n\n// Queue up as many icon fetches in 1 transaction\nexport const getIcon = (iconName: string) =>\n  new Promise<string | undefined>((resolve, reject) => {\n    toRead.push([iconName, resolve, reject]);\n\n    if (toRead.length > 1) {\n      return;\n    }\n\n    // Start initializing the store, so it's ready when we need it\n    const iconStoreProm = getStore();\n    const readIcons = async () => {\n      const iconStore = await iconStoreProm;\n      iconStore(\"readonly\", (store) => {\n        for (const [iconName_, resolve_, reject_] of toRead) {\n          promisifyRequest<string | undefined>(store.get(iconName_))\n            .then((icon) => resolve_(icon))\n            .catch((e) => reject_(e));\n        }\n        toRead = [];\n      });\n    };\n\n    promiseTimeout(1000, readIcons()).catch((e) => {\n      // Firefox in private mode doesn't support IDB\n      // Safari sometime doesn't open the DB so we time out\n      for (const [, , reject_] of toRead) {\n        reject_(e);\n      }\n      toRead = [];\n    });\n  });\n\nexport const findIconChunk = (icon: string): string => {\n  let lastChunk: IconMeta;\n  for (const chunk of iconMetadata.parts) {\n    if (chunk.start !== undefined && icon < chunk.start) {\n      break;\n    }\n    lastChunk = chunk;\n  }\n  return lastChunk!.file;\n};\n\nexport const writeCache = async (chunks: Chunks) => {\n  const keys = Object.keys(chunks);\n  const iconsSets: Icons[] = await Promise.all(Object.values(chunks));\n  const iconStore = await getStore();\n  // We do a batch opening the store just once, for (considerable) performance\n  iconStore(\"readwrite\", (store) => {\n    iconsSets.forEach((icons, idx) => {\n      Object.entries(icons).forEach(([name, path]) => {\n        store.put(path, name);\n      });\n      delete chunks[keys[idx]];\n    });\n  });\n};\n","import type { PropertyValues } from \"lit\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { debounce } from \"../common/util/debounce\";\nimport type { CustomIcon } from \"../data/custom_icons\";\nimport { customIcons } from \"../data/custom_icons\";\nimport type { Chunks, Icons } from \"../data/iconsets\";\nimport {\n  MDI_PREFIXES,\n  findIconChunk,\n  getIcon,\n  writeCache,\n} from \"../data/iconsets\";\nimport \"./ha-svg-icon\";\n\ntype DeprecatedIcon = Record<\n  string,\n  {\n    removeIn: string;\n    newName?: string;\n  }\n>;\n\nconst mdiDeprecatedIcons: DeprecatedIcon = {};\n\nconst chunks: Chunks = {};\n\nconst debouncedWriteCache = debounce(() => writeCache(chunks), 2000);\n\nconst cachedIcons: Record<string, string> = {};\n\n@customElement(\"ha-icon\")\nexport class HaIcon extends LitElement {\n  @property() public icon?: string;\n\n  @state() private _path?: string;\n\n  @state() private _secondaryPath?: string;\n\n  @state() private _viewBox?: string;\n\n  @state() private _legacy = false;\n\n  public willUpdate(changedProps: PropertyValues) {\n    super.willUpdate(changedProps);\n    if (changedProps.has(\"icon\")) {\n      this._path = undefined;\n      this._secondaryPath = undefined;\n      this._viewBox = undefined;\n      this._loadIcon();\n    }\n  }\n\n  protected render() {\n    if (!this.icon) {\n      return nothing;\n    }\n    if (this._legacy) {\n      return html`<!-- @ts-ignore we don't provide the iron-icon element -->\n        <iron-icon .icon=${this.icon}></iron-icon>`;\n    }\n    return html`<ha-svg-icon\n      .path=${this._path}\n      .secondaryPath=${this._secondaryPath}\n      .viewBox=${this._viewBox}\n    ></ha-svg-icon>`;\n  }\n\n  private async _loadIcon() {\n    if (!this.icon) {\n      return;\n    }\n    const requestedIcon = this.icon;\n    const [iconPrefix, origIconName] = this.icon.split(\":\", 2);\n\n    let iconName = origIconName;\n\n    if (!iconPrefix || !iconName) {\n      return;\n    }\n\n    if (!MDI_PREFIXES.includes(iconPrefix)) {\n      const customIcon = customIcons[iconPrefix];\n      if (customIcon) {\n        if (customIcon && typeof customIcon.getIcon === \"function\") {\n          this._setCustomPath(customIcon.getIcon(iconName), requestedIcon);\n        }\n        return;\n      }\n      this._legacy = true;\n      return;\n    }\n\n    this._legacy = false;\n\n    if (iconName in mdiDeprecatedIcons) {\n      const deprecatedIcon = mdiDeprecatedIcons[iconName];\n      let message: string;\n\n      if (deprecatedIcon.newName) {\n        message = `Icon ${iconPrefix}:${iconName} was renamed to ${iconPrefix}:${deprecatedIcon.newName}, please change your config, it will be removed in version ${deprecatedIcon.removeIn}.`;\n        iconName = deprecatedIcon.newName!;\n      } else {\n        message = `Icon ${iconPrefix}:${iconName} was removed from MDI, please replace this icon with an other icon in your config, it will be removed in version ${deprecatedIcon.removeIn}.`;\n      }\n      // eslint-disable-next-line no-console\n      console.warn(message);\n      fireEvent(this, \"write_log\", {\n        level: \"warning\",\n        message,\n      });\n    }\n\n    if (iconName in cachedIcons) {\n      this._path = cachedIcons[iconName];\n      return;\n    }\n\n    if (iconName === \"home-assistant\") {\n      const icon = (await import(\"../resources/home-assistant-logo-svg\"))\n        .mdiHomeAssistant;\n\n      if (this.icon === requestedIcon) {\n        this._path = icon;\n      }\n      cachedIcons[iconName] = icon;\n      return;\n    }\n\n    let databaseIcon: string | undefined;\n    try {\n      databaseIcon = await getIcon(iconName);\n    } catch (_err) {\n      // Firefox in private mode doesn't support IDB\n      // iOS Safari sometimes doesn't open the DB\n      databaseIcon = undefined;\n    }\n\n    if (databaseIcon) {\n      if (this.icon === requestedIcon) {\n        this._path = databaseIcon;\n      }\n      cachedIcons[iconName] = databaseIcon;\n      return;\n    }\n    const chunk = findIconChunk(iconName);\n\n    if (chunk in chunks) {\n      this._setPath(chunks[chunk], iconName, requestedIcon);\n      return;\n    }\n\n    const iconPromise = fetch(`/static/mdi/${chunk}.json`).then((response) =>\n      response.json()\n    );\n    chunks[chunk] = iconPromise;\n    this._setPath(iconPromise, iconName, requestedIcon);\n    debouncedWriteCache();\n  }\n\n  private async _setCustomPath(\n    promise: Promise<CustomIcon>,\n    requestedIcon: string\n  ) {\n    const icon = await promise;\n    if (this.icon !== requestedIcon) {\n      return;\n    }\n    this._path = icon.path;\n    this._secondaryPath = icon.secondaryPath;\n    this._viewBox = icon.viewBox;\n  }\n\n  private async _setPath(\n    promise: Promise<Icons>,\n    iconName: string,\n    requestedIcon: string\n  ) {\n    const iconPack = await promise;\n    if (this.icon === requestedIcon) {\n      this._path = iconPack[iconName];\n    }\n    cachedIcons[iconName] = iconPack[iconName];\n  }\n\n  static styles = css`\n    :host {\n      fill: currentcolor;\n    }\n  `;\n}\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon\": HaIcon;\n  }\n}\n","import type { CustomIcon } from \"./custom_icons\";\n\ninterface CustomIconsetsWindow {\n  customIconsets?: Record<string, (name: string) => Promise<CustomIcon>>;\n}\n\nconst customIconsetsWindow = window as CustomIconsetsWindow;\n\nif (!(\"customIconsets\" in customIconsetsWindow)) {\n  customIconsetsWindow.customIconsets = {};\n}\n\nexport const customIconsets = customIconsetsWindow.customIconsets!;\n","import { customIconsets } from \"./custom_iconsets\";\n\nexport interface CustomIcon {\n  path: string;\n  secondaryPath?: string;\n  viewBox?: string;\n}\n\nexport interface CustomIconListItem {\n  name: string;\n  keywords?: string[];\n}\n\nexport interface CustomIconHelpers {\n  getIcon: (name: string) => Promise<CustomIcon>;\n  getIconList?: () => Promise<CustomIconListItem[]>;\n}\n\nexport interface CustomIconsWindow {\n  customIcons?: Record<string, CustomIconHelpers>;\n}\n\nconst customIconsWindow = window as CustomIconsWindow;\n\nif (!(\"customIcons\" in customIconsWindow)) {\n  customIconsWindow.customIcons = {};\n}\n\n// Proxy for backward compatibility with icon sets\nexport const customIcons = new Proxy(customIconsWindow.customIcons!, {\n  get: (obj, prop: string) =>\n    obj[prop] ??\n    (customIconsets[prop]\n      ? {\n          getIcon: customIconsets[prop],\n        }\n      : undefined),\n});\n","import type { TemplateResult } from \"lit\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\ninterface BaseDialogBoxParams {\n  confirmText?: string;\n  text?: string | TemplateResult;\n  title?: string;\n  warning?: boolean;\n}\n\nexport interface AlertDialogParams extends BaseDialogBoxParams {\n  confirm?: () => void;\n}\n\nexport interface ConfirmationDialogParams extends BaseDialogBoxParams {\n  dismissText?: string;\n  confirm?: () => void;\n  cancel?: () => void;\n  destructive?: boolean;\n}\n\nexport interface PromptDialogParams extends BaseDialogBoxParams {\n  inputLabel?: string;\n  dismissText?: string;\n  inputType?: string;\n  defaultValue?: string;\n  placeholder?: string;\n  confirm?: (out?: string) => void;\n  cancel?: () => void;\n  inputMin?: number | string;\n  inputMax?: number | string;\n}\n\nexport interface DialogBoxParams\n  extends ConfirmationDialogParams,\n    PromptDialogParams {\n  confirm?: (out?: string) => void;\n  confirmation?: boolean;\n  prompt?: boolean;\n}\n\nexport const loadGenericDialog = () => import(\"./dialog-box\");\n\nconst showDialogHelper = (\n  element: HTMLElement,\n  dialogParams: DialogBoxParams,\n  extra?: {\n    confirmation?: DialogBoxParams[\"confirmation\"];\n    prompt?: DialogBoxParams[\"prompt\"];\n  }\n) =>\n  new Promise((resolve) => {\n    const origCancel = dialogParams.cancel;\n    const origConfirm = dialogParams.confirm;\n\n    fireEvent(element, \"show-dialog\", {\n      dialogTag: \"dialog-box\",\n      dialogImport: loadGenericDialog,\n      dialogParams: {\n        ...dialogParams,\n        ...extra,\n        cancel: () => {\n          resolve(extra?.prompt ? null : false);\n          if (origCancel) {\n            origCancel();\n          }\n        },\n        confirm: (out) => {\n          resolve(extra?.prompt ? out : true);\n          if (origConfirm) {\n            origConfirm(out);\n          }\n        },\n      },\n    });\n  });\n\nexport const showAlertDialog = (\n  element: HTMLElement,\n  dialogParams: AlertDialogParams\n) => showDialogHelper(element, dialogParams);\n\nexport const showConfirmationDialog = (\n  element: HTMLElement,\n  dialogParams: ConfirmationDialogParams\n) =>\n  showDialogHelper(element, dialogParams, {\n    confirmation: true,\n  }) as Promise<boolean>;\n\nexport const showPromptDialog = (\n  element: HTMLElement,\n  dialogParams: PromptDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { prompt: true }) as Promise<\n    null | string\n  >;\n"],"names":["computeAreaName","area","name","trim","computeDeviceName","device","name_by_user","computeDeviceNameDisplay","hass","entities","fallbackDeviceName","localize","type","entry_type","entity","entityId","entity_id","stateObj","states","computeStateName","memoizeOne","devices","array","duplicates","Set","seen","item","has","add","getDuplicates","Object","values","map","filter","undefined","computeDomain","substring","indexOf","computeFloorName","floor","computeObjectId","slice","computeStateDomain","computeStateNameFromEntityAttributes","attributes","friendly_name","replace","toString","supportsFeature","feature","supportsFeatureFromAttributes","supported_features","SUPPRESS_DEFAULT_PRESS_SELECTOR","createCloseHeading","title","html","HaDialog","DialogBase","scrollToPos","x","y","this","contentElement","scrollTo","renderHeading","firstUpdated","super","suppressDefaultPressSelector","join","_updateScrolledAttribute","addEventListener","_onScroll","passive","disconnectedCallback","removeEventListener","toggleAttribute","scrollTop","args","styles","css","TimeoutError","Error","constructor","timeout","params","captureStackTrace","message","iconMetadata","getStore","iconStore","createStore","version","get","clear","set","MDI_PREFIXES","toRead","getIcon","iconName","Promise","resolve","reject","push","length","iconStoreProm","promiseTimeout","ms","promise","_resolve","setTimeout","race","store","iconName_","resolve_","reject_","promisifyRequest","then","icon","catch","e","readIcons","mdiDeprecatedIcons","chunks","debouncedWriteCache","debounce","keys","iconsSets","all","forEach","icons","idx","entries","path","put","writeCache","cachedIcons","HaIcon","LitElement","willUpdate","changedProps","_path","_secondaryPath","_viewBox","_loadIcon","render","_legacy","nothing","requestedIcon","iconPrefix","origIconName","split","databaseIcon","customIcon","customIcons","_setCustomPath","deprecatedIcon","newName","removeIn","console","warn","fireEvent","level","mdiHomeAssistant","_err","chunk","lastChunk","start","file","findIconChunk","_setPath","iconPromise","fetch","response","json","secondaryPath","viewBox","iconPack","customIconsetsWindow","window","customIconsets","customIconsWindow","Proxy","obj","prop","loadGenericDialog","showDialogHelper","element","dialogParams","extra","origCancel","cancel","origConfirm","confirm","dialogTag","dialogImport","prompt","out","showAlertDialog","showConfirmationDialog","confirmation","showPromptDialog"],"mappings":"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"}