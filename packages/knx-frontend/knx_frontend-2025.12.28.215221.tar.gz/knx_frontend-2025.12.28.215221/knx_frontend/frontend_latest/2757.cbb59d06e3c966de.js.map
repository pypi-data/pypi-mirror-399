{"version":3,"file":"2757.cbb59d06e3c966de.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/entity/strip_prefix_from_entity_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_entity_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_entity_name_display.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/context/get_entity_context.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/valid_entity_id.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/entity/ha-entity-picker.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/entity.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/entity_registry.ts","webpack://knx-frontend/./homeassistant-frontend/src/panels/config/helpers/show-dialog-helper-detail.ts"],"sourcesContent":["const SUFFIXES = [\" \", \": \", \" - \"];\n\n/**\n * Strips a device name from an entity name.\n * @param entityName the entity name\n * @param prefix the prefix to strip\n * @returns\n */\nexport const stripPrefixFromEntityName = (\n  entityName: string,\n  prefix: string\n) => {\n  const lowerCasedEntityName = entityName.toLowerCase();\n  const lowerCasedPrefix = prefix.toLowerCase();\n  for (const suffix of SUFFIXES) {\n    const lowerCasedPrefixWithSuffix = `${lowerCasedPrefix}${suffix}`;\n\n    if (lowerCasedEntityName.startsWith(lowerCasedPrefixWithSuffix)) {\n      const newName = entityName.substring(lowerCasedPrefixWithSuffix.length);\n      if (newName.length) {\n        // If first word already has an upper case letter (e.g. from brand name)\n        // leave as-is, otherwise capitalize the first word.\n        return hasUpperCase(newName.substr(0, newName.indexOf(\" \")))\n          ? newName\n          : newName[0].toUpperCase() + newName.slice(1);\n      }\n    }\n  }\n\n  return undefined;\n};\n\nconst hasUpperCase = (str: string): boolean => str.toLowerCase() !== str;\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n} from \"../../data/entity_registry\";\nimport type { HomeAssistant } from \"../../types\";\nimport { computeDeviceName } from \"./compute_device_name\";\nimport { computeStateName } from \"./compute_state_name\";\nimport { stripPrefixFromEntityName } from \"./strip_prefix_from_entity_name\";\n\nexport const computeEntityName = (\n  stateObj: HassEntity,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"]\n): string | undefined => {\n  const entry = entities[stateObj.entity_id] as\n    | EntityRegistryDisplayEntry\n    | undefined;\n\n  if (!entry) {\n    // Fall back to state name if not in the entity registry (friendly name)\n    return computeStateName(stateObj);\n  }\n  return computeEntityEntryName(entry, devices);\n};\n\nexport const computeEntityEntryName = (\n  entry: EntityRegistryDisplayEntry | EntityRegistryEntry,\n  devices: HomeAssistant[\"devices\"],\n  fallbackStateObj?: HassEntity\n): string | undefined => {\n  const name =\n    entry.name ||\n    (\"original_name\" in entry && entry.original_name != null\n      ? String(entry.original_name)\n      : undefined);\n\n  const device = entry.device_id ? devices[entry.device_id] : undefined;\n\n  if (!device) {\n    if (name) {\n      return name;\n    }\n    if (fallbackStateObj) {\n      return computeStateName(fallbackStateObj);\n    }\n    return undefined;\n  }\n\n  const deviceName = computeDeviceName(device);\n\n  // If the device name is the same as the entity name, consider empty entity name\n  if (deviceName === name) {\n    return undefined;\n  }\n\n  // Remove the device name from the entity name if it starts with it\n  if (deviceName && name) {\n    return stripPrefixFromEntityName(name, deviceName) || name;\n  }\n\n  return name;\n};\n\nexport const entityUseDeviceName = (\n  stateObj: HassEntity,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"]\n): boolean => !computeEntityName(stateObj, entities, devices);\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type { HomeAssistant } from \"../../types\";\nimport { ensureArray } from \"../array/ensure-array\";\nimport { computeAreaName } from \"./compute_area_name\";\nimport { computeDeviceName } from \"./compute_device_name\";\nimport { computeEntityName, entityUseDeviceName } from \"./compute_entity_name\";\nimport { computeFloorName } from \"./compute_floor_name\";\nimport { getEntityContext } from \"./context/get_entity_context\";\n\nconst DEFAULT_SEPARATOR = \" \";\n\nexport const DEFAULT_ENTITY_NAME = [\n  { type: \"device\" },\n  { type: \"entity\" },\n] satisfies EntityNameItem[];\n\nexport type EntityNameItem =\n  | {\n      type: \"entity\" | \"device\" | \"area\" | \"floor\";\n    }\n  | {\n      type: \"text\";\n      text: string;\n    };\n\nexport interface EntityNameOptions {\n  separator?: string;\n}\n\nexport const computeEntityNameDisplay = (\n  stateObj: HassEntity,\n  name: EntityNameItem | EntityNameItem[] | undefined,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"],\n  options?: EntityNameOptions\n) => {\n  let items = ensureArray(name || DEFAULT_ENTITY_NAME);\n\n  const separator = options?.separator ?? DEFAULT_SEPARATOR;\n\n  // If all items are text, just join them\n  if (items.every((n) => n.type === \"text\")) {\n    return items.map((item) => item.text).join(separator);\n  }\n\n  const useDeviceName = entityUseDeviceName(stateObj, entities, devices);\n\n  // If entity uses device name, and device is not already included, replace it with device name\n  if (useDeviceName) {\n    const hasDevice = items.some((n) => n.type === \"device\");\n    if (!hasDevice) {\n      items = items.map((n) => (n.type === \"entity\" ? { type: \"device\" } : n));\n    }\n  }\n\n  const names = computeEntityNameList(\n    stateObj,\n    items,\n    entities,\n    devices,\n    areas,\n    floors\n  );\n\n  // If after processing there is only one name, return that\n  if (names.length === 1) {\n    return names[0] || \"\";\n  }\n\n  return names.filter((n) => n).join(separator);\n};\n\nexport const computeEntityNameList = (\n  stateObj: HassEntity,\n  name: EntityNameItem[],\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): (string | undefined)[] => {\n  const { device, area, floor } = getEntityContext(\n    stateObj,\n    entities,\n    devices,\n    areas,\n    floors\n  );\n\n  const names = name.map((item) => {\n    switch (item.type) {\n      case \"entity\":\n        return computeEntityName(stateObj, entities, devices);\n      case \"device\":\n        return device ? computeDeviceName(device) : undefined;\n      case \"area\":\n        return area ? computeAreaName(area) : undefined;\n      case \"floor\":\n        return floor ? computeFloorName(floor) : undefined;\n      case \"text\":\n        return item.text;\n      default:\n        return \"\";\n    }\n  });\n\n  return names;\n};\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type { AreaRegistryEntry } from \"../../../data/area_registry\";\nimport type { DeviceRegistryEntry } from \"../../../data/device_registry\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n  ExtEntityRegistryEntry,\n} from \"../../../data/entity_registry\";\nimport type { FloorRegistryEntry } from \"../../../data/floor_registry\";\nimport type { HomeAssistant } from \"../../../types\";\n\ninterface EntityContext {\n  entity: EntityRegistryDisplayEntry | null;\n  device: DeviceRegistryEntry | null;\n  area: AreaRegistryEntry | null;\n  floor: FloorRegistryEntry | null;\n}\n\nexport const getEntityContext = (\n  stateObj: HassEntity,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): EntityContext => {\n  const entry = entities[stateObj.entity_id] as\n    | EntityRegistryDisplayEntry\n    | undefined;\n\n  if (!entry) {\n    return {\n      entity: null,\n      device: null,\n      area: null,\n      floor: null,\n    };\n  }\n  return getEntityEntryContext(entry, entities, devices, areas, floors);\n};\n\nexport const getEntityEntryContext = (\n  entry:\n    | EntityRegistryDisplayEntry\n    | EntityRegistryEntry\n    | ExtEntityRegistryEntry,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): EntityContext => {\n  const entity = entities[entry.entity_id];\n  const deviceId = entry?.device_id;\n  const device = deviceId ? devices[deviceId] : undefined;\n  const areaId = entry?.area_id || device?.area_id;\n  const area = areaId ? areas[areaId] : undefined;\n  const floorId = area?.floor_id;\n  const floor = floorId ? floors[floorId] : undefined;\n\n  return {\n    entity: entity,\n    device: device || null,\n    area: area || null,\n    floor: floor || null,\n  };\n};\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\n\nexport const isValidEntityId = (entityId: string) =>\n  validEntityId.test(entityId);\n","import { mdiPlus, mdiShape } from \"@mdi/js\";\nimport type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { html, LitElement, nothing, type PropertyValues } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeEntityNameList } from \"../../common/entity/compute_entity_name_display\";\nimport { isValidEntityId } from \"../../common/entity/valid_entity_id\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\nimport type { HaEntityPickerEntityFilterFunc } from \"../../data/entity\";\nimport {\n  getEntities,\n  type EntityComboBoxItem,\n} from \"../../data/entity_registry\";\nimport { domainToName } from \"../../data/integration\";\nimport {\n  isHelperDomain,\n  type HelperDomain,\n} from \"../../panels/config/helpers/const\";\nimport { showHelperDetailDialog } from \"../../panels/config/helpers/show-dialog-helper-detail\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-combo-box-item\";\nimport \"../ha-generic-picker\";\nimport type { HaGenericPicker } from \"../ha-generic-picker\";\nimport type { PickerComboBoxSearchFn } from \"../ha-picker-combo-box\";\nimport type { PickerValueRenderer } from \"../ha-picker-field\";\nimport \"../ha-svg-icon\";\nimport \"./state-badge\";\n\nconst CREATE_ID = \"___create-new-entity___\";\n\n@customElement(\"ha-entity-picker\")\nexport class HaEntityPicker extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  // eslint-disable-next-line lit/no-native-attributes\n  @property({ type: Boolean }) public autofocus = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n\n  @property({ type: Boolean, attribute: \"show-entity-id\" })\n  public showEntityId = false;\n\n  @property() public label?: string;\n\n  @property() public value?: string;\n\n  @property() public helper?: string;\n\n  @property() public placeholder?: string;\n\n  @property({ type: String, attribute: \"search-label\" })\n  public searchLabel?: string;\n\n  @property({ attribute: false, type: Array }) public createDomains?: string[];\n\n  /**\n   * Show entities from specific domains.\n   * @type {Array}\n   * @attr include-domains\n   */\n  @property({ type: Array, attribute: \"include-domains\" })\n  public includeDomains?: string[];\n\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n\n  /**\n   * Show only entities of these device classes.\n   * @type {Array}\n   * @attr include-device-classes\n   */\n  @property({ type: Array, attribute: \"include-device-classes\" })\n  public includeDeviceClasses?: string[];\n\n  /**\n   * Show only entities with these unit of measuments.\n   * @type {Array}\n   * @attr include-unit-of-measurement\n   */\n  @property({ type: Array, attribute: \"include-unit-of-measurement\" })\n  public includeUnitOfMeasurement?: string[];\n\n  /**\n   * List of allowed entities to show.\n   * @type {Array}\n   * @attr include-entities\n   */\n  @property({ type: Array, attribute: \"include-entities\" })\n  public includeEntities?: string[];\n\n  /**\n   * List of entities to be excluded.\n   * @type {Array}\n   * @attr exclude-entities\n   */\n  @property({ type: Array, attribute: \"exclude-entities\" })\n  public excludeEntities?: string[];\n\n  @property({ attribute: false })\n  public entityFilter?: HaEntityPickerEntityFilterFunc;\n\n  @property({ attribute: \"hide-clear-icon\", type: Boolean })\n  public hideClearIcon = false;\n\n  @property({ attribute: \"add-button\", type: Boolean })\n  public addButton = false;\n\n  @query(\"ha-generic-picker\") private _picker?: HaGenericPicker;\n\n  protected firstUpdated(changedProperties: PropertyValues): void {\n    super.firstUpdated(changedProperties);\n    // Load title translations so it is available when the combo-box opens\n    this.hass.loadBackendTranslation(\"title\");\n  }\n\n  private _valueRenderer: PickerValueRenderer = (value) => {\n    const entityId = value || \"\";\n\n    const stateObj = this.hass.states[entityId];\n\n    if (!stateObj) {\n      return html`\n        <ha-svg-icon\n          slot=\"start\"\n          .path=${mdiShape}\n          style=\"margin: 0 4px\"\n        ></ha-svg-icon>\n        <span slot=\"headline\">${entityId}</span>\n      `;\n    }\n\n    const [entityName, deviceName, areaName] = computeEntityNameList(\n      stateObj,\n      [{ type: \"entity\" }, { type: \"device\" }, { type: \"area\" }],\n      this.hass.entities,\n      this.hass.devices,\n      this.hass.areas,\n      this.hass.floors\n    );\n\n    const isRTL = computeRTL(this.hass);\n\n    const primary = entityName || deviceName || entityId;\n    const secondary = [areaName, entityName ? deviceName : undefined]\n      .filter(Boolean)\n      .join(isRTL ? \" ◂ \" : \" ▸ \");\n\n    return html`\n      <state-badge\n        .hass=${this.hass}\n        .stateObj=${stateObj}\n        slot=\"start\"\n      ></state-badge>\n      <span slot=\"headline\">${primary}</span>\n      <span slot=\"supporting-text\">${secondary}</span>\n    `;\n  };\n\n  private get _showEntityId() {\n    return this.showEntityId || this.hass.userData?.showEntityIdPicker;\n  }\n\n  private _rowRenderer: ComboBoxLitRenderer<EntityComboBoxItem> = (\n    item,\n    { index }\n  ) => {\n    const showEntityId = this._showEntityId;\n\n    return html`\n      <ha-combo-box-item type=\"button\" compact .borderTop=${index !== 0}>\n        ${item.icon_path\n          ? html`\n              <ha-svg-icon\n                slot=\"start\"\n                style=\"margin: 0 4px\"\n                .path=${item.icon_path}\n              ></ha-svg-icon>\n            `\n          : html`\n              <state-badge\n                slot=\"start\"\n                .stateObj=${item.stateObj}\n                .hass=${this.hass}\n              ></state-badge>\n            `}\n        <span slot=\"headline\">${item.primary}</span>\n        ${item.secondary\n          ? html`<span slot=\"supporting-text\">${item.secondary}</span>`\n          : nothing}\n        ${item.stateObj && showEntityId\n          ? html`\n              <span slot=\"supporting-text\" class=\"code\">\n                ${item.stateObj.entity_id}\n              </span>\n            `\n          : nothing}\n        ${item.domain_name && !showEntityId\n          ? html`\n              <div slot=\"trailing-supporting-text\" class=\"domain\">\n                ${item.domain_name}\n              </div>\n            `\n          : nothing}\n      </ha-combo-box-item>\n    `;\n  };\n\n  private _getAdditionalItems = () =>\n    this._getCreateItems(this.hass.localize, this.createDomains);\n\n  private _getCreateItems = memoizeOne(\n    (\n      localize: this[\"hass\"][\"localize\"],\n      createDomains: this[\"createDomains\"]\n    ) => {\n      if (!createDomains?.length) {\n        return [];\n      }\n\n      return createDomains.map((domain) => {\n        const primary = localize(\n          \"ui.components.entity.entity-picker.create_helper\",\n          {\n            domain: isHelperDomain(domain)\n              ? localize(\n                  `ui.panel.config.helpers.types.${domain as HelperDomain}`\n                )\n              : domainToName(localize, domain),\n          }\n        );\n\n        return {\n          id: CREATE_ID + domain,\n          primary: primary,\n          secondary: localize(\"ui.components.entity.entity-picker.new_entity\"),\n          icon_path: mdiPlus,\n        } satisfies EntityComboBoxItem;\n      });\n    }\n  );\n\n  private _getEntitiesMemoized = memoizeOne(getEntities);\n\n  private _getItems = () =>\n    this._getEntitiesMemoized(\n      this.hass,\n      this.includeDomains,\n      this.excludeDomains,\n      this.entityFilter,\n      this.includeDeviceClasses,\n      this.includeUnitOfMeasurement,\n      this.includeEntities,\n      this.excludeEntities,\n      this.value\n    );\n\n  protected render() {\n    const placeholder =\n      this.placeholder ??\n      this.hass.localize(\"ui.components.entity.entity-picker.placeholder\");\n\n    return html`\n      <ha-generic-picker\n        .hass=${this.hass}\n        .disabled=${this.disabled}\n        .autofocus=${this.autofocus}\n        .allowCustomValue=${this.allowCustomEntity}\n        .label=${this.label}\n        .helper=${this.helper}\n        .searchLabel=${this.searchLabel}\n        .notFoundLabel=${this._notFoundLabel}\n        .placeholder=${placeholder}\n        .value=${this.addButton ? undefined : this.value}\n        .rowRenderer=${this._rowRenderer}\n        .getItems=${this._getItems}\n        .getAdditionalItems=${this._getAdditionalItems}\n        .hideClearIcon=${this.hideClearIcon}\n        .searchFn=${this._searchFn}\n        .valueRenderer=${this._valueRenderer}\n        @value-changed=${this._valueChanged}\n        .addButtonLabel=${this.addButton\n          ? this.hass.localize(\"ui.components.entity.entity-picker.add\")\n          : undefined}\n      >\n      </ha-generic-picker>\n    `;\n  }\n\n  private _searchFn: PickerComboBoxSearchFn<EntityComboBoxItem> = (\n    search,\n    filteredItems\n  ) => {\n    // If there is exact match for entity id, put it first\n    const index = filteredItems.findIndex(\n      (item) => item.stateObj?.entity_id === search\n    );\n    if (index === -1) {\n      return filteredItems;\n    }\n\n    const [exactMatch] = filteredItems.splice(index, 1);\n    filteredItems.unshift(exactMatch);\n    return filteredItems;\n  };\n\n  public async open() {\n    await this.updateComplete;\n    await this._picker?.open();\n  }\n\n  private _valueChanged(ev) {\n    ev.stopPropagation();\n    const value = ev.detail.value;\n\n    if (!value) {\n      this._setValue(undefined);\n      return;\n    }\n\n    if (value.startsWith(CREATE_ID)) {\n      const domain = value.substring(CREATE_ID.length);\n\n      showHelperDetailDialog(this, {\n        domain,\n        dialogClosedCallback: (item) => {\n          if (item.entityId) this._setValue(item.entityId);\n        },\n      });\n      return;\n    }\n\n    if (!isValidEntityId(value)) {\n      return;\n    }\n\n    this._setValue(value);\n  }\n\n  private _setValue(value: string | undefined) {\n    this.value = value;\n\n    fireEvent(this, \"value-changed\", { value });\n    fireEvent(this, \"change\");\n  }\n\n  private _notFoundLabel = (search: string) =>\n    this.hass.localize(\"ui.components.entity.entity-picker.no_match\", {\n      term: html`<b>‘${search}’</b>`,\n    });\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-picker\": HaEntityPicker;\n  }\n}\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport { arrayLiteralIncludes } from \"../common/array/literal-includes\";\n\nexport const UNAVAILABLE = \"unavailable\";\nexport const UNKNOWN = \"unknown\";\nexport const ON = \"on\";\nexport const OFF = \"off\";\n\nexport const UNAVAILABLE_STATES = [UNAVAILABLE, UNKNOWN] as const;\nexport const OFF_STATES = [UNAVAILABLE, UNKNOWN, OFF] as const;\n\nexport const isUnavailableState = arrayLiteralIncludes(UNAVAILABLE_STATES);\nexport const isOffState = arrayLiteralIncludes(OFF_STATES);\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n","import type { Connection, HassEntity } from \"home-assistant-js-websocket\";\nimport { createCollection } from \"home-assistant-js-websocket\";\nimport type { Store } from \"home-assistant-js-websocket/dist/store\";\nimport memoizeOne from \"memoize-one\";\nimport { computeDomain } from \"../common/entity/compute_domain\";\nimport { computeEntityNameList } from \"../common/entity/compute_entity_name_display\";\nimport { computeStateName } from \"../common/entity/compute_state_name\";\nimport { caseInsensitiveStringCompare } from \"../common/string/compare\";\nimport { computeRTL } from \"../common/util/compute_rtl\";\nimport { debounce } from \"../common/util/debounce\";\nimport type { PickerComboBoxItem } from \"../components/ha-picker-combo-box\";\nimport type { HomeAssistant } from \"../types\";\nimport type { HaEntityPickerEntityFilterFunc } from \"./entity\";\nimport { domainToName } from \"./integration\";\nimport type { LightColor } from \"./light\";\nimport type { RegistryEntry } from \"./registry\";\n\ntype EntityCategory = \"config\" | \"diagnostic\";\n\nexport interface EntityRegistryDisplayEntry {\n  entity_id: string;\n  name?: string;\n  icon?: string;\n  device_id?: string;\n  area_id?: string;\n  labels: string[];\n  hidden?: boolean;\n  entity_category?: EntityCategory;\n  translation_key?: string;\n  platform?: string;\n  display_precision?: number;\n  has_entity_name?: boolean;\n}\n\nexport interface EntityRegistryDisplayEntryResponse {\n  entities: {\n    ei: string;\n    di?: string;\n    ai?: string;\n    lb: string[];\n    ec?: number;\n    en?: string;\n    ic?: string;\n    pl?: string;\n    tk?: string;\n    hb?: boolean;\n    dp?: number;\n    hn?: boolean;\n  }[];\n  entity_categories: Record<number, EntityCategory>;\n}\n\nexport interface EntityRegistryEntry extends RegistryEntry {\n  id: string;\n  entity_id: string;\n  name: string | null;\n  icon: string | null;\n  platform: string;\n  config_entry_id: string | null;\n  config_subentry_id: string | null;\n  device_id: string | null;\n  area_id: string | null;\n  labels: string[];\n  disabled_by: \"user\" | \"device\" | \"integration\" | \"config_entry\" | null;\n  hidden_by: Exclude<EntityRegistryEntry[\"disabled_by\"], \"config_entry\">;\n  entity_category: EntityCategory | null;\n  has_entity_name: boolean;\n  original_name?: string;\n  unique_id: string;\n  translation_key?: string;\n  options: EntityRegistryOptions | null;\n  categories: Record<string, string>;\n}\n\nexport interface ExtEntityRegistryEntry extends EntityRegistryEntry {\n  capabilities: Record<string, unknown>;\n  original_icon?: string;\n  device_class?: string;\n  original_device_class?: string;\n  aliases: string[];\n}\n\nexport interface UpdateEntityRegistryEntryResult {\n  entity_entry: ExtEntityRegistryEntry;\n  reload_delay?: number;\n  require_restart?: boolean;\n}\n\nexport interface SensorEntityOptions {\n  display_precision?: number | null;\n  suggested_display_precision?: number | null;\n  unit_of_measurement?: string | null;\n}\n\nexport interface LightEntityOptions {\n  favorite_colors?: LightColor[];\n}\n\nexport interface NumberEntityOptions {\n  unit_of_measurement?: string | null;\n}\n\nexport interface LockEntityOptions {\n  default_code?: string | null;\n}\n\nexport interface AlarmControlPanelEntityOptions {\n  default_code?: string | null;\n}\n\nexport interface WeatherEntityOptions {\n  precipitation_unit?: string | null;\n  pressure_unit?: string | null;\n  temperature_unit?: string | null;\n  visibility_unit?: string | null;\n  wind_speed_unit?: string | null;\n}\n\nexport interface SwitchAsXEntityOptions {\n  entity_id: string;\n  invert: boolean;\n}\n\nexport interface EntityRegistryOptions {\n  number?: NumberEntityOptions;\n  sensor?: SensorEntityOptions;\n  alarm_control_panel?: AlarmControlPanelEntityOptions;\n  lock?: LockEntityOptions;\n  weather?: WeatherEntityOptions;\n  light?: LightEntityOptions;\n  switch_as_x?: SwitchAsXEntityOptions;\n  conversation?: Record<string, unknown>;\n  \"cloud.alexa\"?: Record<string, unknown>;\n  \"cloud.google_assistant\"?: Record<string, unknown>;\n}\n\nexport interface EntityRegistryEntryUpdateParams {\n  name?: string | null;\n  icon?: string | null;\n  device_class?: string | null;\n  area_id?: string | null;\n  disabled_by?: string | null;\n  hidden_by: string | null;\n  new_entity_id?: string;\n  options_domain?: string;\n  options?:\n    | SensorEntityOptions\n    | NumberEntityOptions\n    | LockEntityOptions\n    | AlarmControlPanelEntityOptions\n    | WeatherEntityOptions\n    | LightEntityOptions;\n  aliases?: string[];\n  labels?: string[];\n  categories?: Record<string, string | null>;\n}\n\nconst batteryPriorities = [\"sensor\", \"binary_sensor\"];\nexport const findBatteryEntity = <T extends { entity_id: string }>(\n  hass: HomeAssistant,\n  entities: T[]\n): T | undefined => {\n  const batteryEntities = entities\n    .filter(\n      (entity) =>\n        hass.states[entity.entity_id] &&\n        hass.states[entity.entity_id].attributes.device_class === \"battery\" &&\n        batteryPriorities.includes(computeDomain(entity.entity_id))\n    )\n    .sort(\n      (a, b) =>\n        batteryPriorities.indexOf(computeDomain(a.entity_id)) -\n        batteryPriorities.indexOf(computeDomain(b.entity_id))\n    );\n  if (batteryEntities.length > 0) {\n    return batteryEntities[0];\n  }\n\n  return undefined;\n};\n\nexport const findBatteryChargingEntity = <T extends { entity_id: string }>(\n  hass: HomeAssistant,\n  entities: T[]\n): T | undefined =>\n  entities.find(\n    (entity) =>\n      hass.states[entity.entity_id] &&\n      hass.states[entity.entity_id].attributes.device_class ===\n        \"battery_charging\"\n  );\n\nexport const computeEntityRegistryName = (\n  hass: HomeAssistant,\n  entry: EntityRegistryEntry\n): string | null => {\n  if (entry.name) {\n    return entry.name;\n  }\n  const state = hass.states[entry.entity_id];\n  if (state) {\n    return computeStateName(state);\n  }\n  return entry.original_name ? entry.original_name : entry.entity_id;\n};\n\nexport const getExtendedEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<ExtEntityRegistryEntry> =>\n  hass.callWS({\n    type: \"config/entity_registry/get\",\n    entity_id: entityId,\n  });\n\nexport const getExtendedEntityRegistryEntries = (\n  hass: HomeAssistant,\n  entityIds: string[]\n): Promise<Record<string, ExtEntityRegistryEntry>> =>\n  hass.callWS({\n    type: \"config/entity_registry/get_entries\",\n    entity_ids: entityIds,\n  });\n\nexport const updateEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string,\n  updates: Partial<EntityRegistryEntryUpdateParams>\n): Promise<UpdateEntityRegistryEntryResult> =>\n  hass.callWS({\n    type: \"config/entity_registry/update\",\n    entity_id: entityId,\n    ...updates,\n  });\n\nexport const removeEntityRegistryEntry = (\n  hass: HomeAssistant,\n  entityId: string\n): Promise<void> =>\n  hass.callWS({\n    type: \"config/entity_registry/remove\",\n    entity_id: entityId,\n  });\n\nexport const fetchEntityRegistry = (conn: Connection) =>\n  conn.sendMessagePromise<EntityRegistryEntry[]>({\n    type: \"config/entity_registry/list\",\n  });\n\nexport const fetchEntityRegistryDisplay = (conn: Connection) =>\n  conn.sendMessagePromise<EntityRegistryDisplayEntryResponse>({\n    type: \"config/entity_registry/list_for_display\",\n  });\n\nconst subscribeEntityRegistryUpdates = (\n  conn: Connection,\n  store: Store<EntityRegistryEntry[]>\n) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchEntityRegistry(conn).then((entities) =>\n          store.setState(entities, true)\n        ),\n      500,\n      true\n    ),\n    \"entity_registry_updated\"\n  );\n\nexport const subscribeEntityRegistry = (\n  conn: Connection,\n  onChange: (entities: EntityRegistryEntry[]) => void\n) =>\n  createCollection<EntityRegistryEntry[]>(\n    \"_entityRegistry\",\n    fetchEntityRegistry,\n    subscribeEntityRegistryUpdates,\n    conn,\n    onChange\n  );\n\nexport const sortEntityRegistryByName = (\n  entries: EntityRegistryEntry[],\n  language: string\n) =>\n  entries.sort((entry1, entry2) =>\n    caseInsensitiveStringCompare(entry1.name || \"\", entry2.name || \"\", language)\n  );\n\nexport const entityRegistryByEntityId = memoizeOne(\n  (entries: EntityRegistryEntry[]) => {\n    const entities: Record<string, EntityRegistryEntry> = {};\n    for (const entity of entries) {\n      entities[entity.entity_id] = entity;\n    }\n    return entities;\n  }\n);\n\nexport const entityRegistryById = memoizeOne(\n  (entries: EntityRegistryEntry[]) => {\n    const entities: Record<string, EntityRegistryEntry> = {};\n    for (const entity of entries) {\n      entities[entity.id] = entity;\n    }\n    return entities;\n  }\n);\n\nexport const getEntityPlatformLookup = (\n  entities: EntityRegistryEntry[]\n): Record<string, string> => {\n  const entityLookup = {};\n  for (const confEnt of entities) {\n    if (!confEnt.platform) {\n      continue;\n    }\n    entityLookup[confEnt.entity_id] = confEnt.platform;\n  }\n  return entityLookup;\n};\n\nexport const getAutomaticEntityIds = (\n  hass: HomeAssistant,\n  entity_ids: string[]\n) =>\n  hass.callWS<Record<string, string | null>>({\n    type: \"config/entity_registry/get_automatic_entity_ids\",\n    entity_ids,\n  });\n\nexport interface EntityComboBoxItem extends PickerComboBoxItem {\n  domain_name?: string;\n  stateObj?: HassEntity;\n}\n\nexport const getEntities = (\n  hass: HomeAssistant,\n  includeDomains?: string[],\n  excludeDomains?: string[],\n  entityFilter?: HaEntityPickerEntityFilterFunc,\n  includeDeviceClasses?: string[],\n  includeUnitOfMeasurement?: string[],\n  includeEntities?: string[],\n  excludeEntities?: string[],\n  value?: string,\n  idPrefix = \"\"\n): EntityComboBoxItem[] => {\n  let items: EntityComboBoxItem[] = [];\n\n  let entityIds = Object.keys(hass.states);\n\n  if (includeEntities) {\n    entityIds = entityIds.filter((entityId) =>\n      includeEntities.includes(entityId)\n    );\n  }\n\n  if (excludeEntities) {\n    entityIds = entityIds.filter(\n      (entityId) => !excludeEntities.includes(entityId)\n    );\n  }\n\n  if (includeDomains) {\n    entityIds = entityIds.filter((eid) =>\n      includeDomains.includes(computeDomain(eid))\n    );\n  }\n\n  if (excludeDomains) {\n    entityIds = entityIds.filter(\n      (eid) => !excludeDomains.includes(computeDomain(eid))\n    );\n  }\n\n  items = entityIds.map<EntityComboBoxItem>((entityId) => {\n    const stateObj = hass.states[entityId];\n\n    const friendlyName = computeStateName(stateObj); // Keep this for search\n    const [entityName, deviceName, areaName] = computeEntityNameList(\n      stateObj,\n      [{ type: \"entity\" }, { type: \"device\" }, { type: \"area\" }],\n      hass.entities,\n      hass.devices,\n      hass.areas,\n      hass.floors\n    );\n\n    const domainName = domainToName(hass.localize, computeDomain(entityId));\n\n    const isRTL = computeRTL(hass);\n\n    const primary = entityName || deviceName || entityId;\n    const secondary = [areaName, entityName ? deviceName : undefined]\n      .filter(Boolean)\n      .join(isRTL ? \" ◂ \" : \" ▸ \");\n\n    return {\n      id: `${idPrefix}${entityId}`,\n      primary: primary,\n      secondary: secondary,\n      domain_name: domainName,\n      sorting_label: [deviceName, entityName].filter(Boolean).join(\"_\"),\n      search_labels: [\n        entityName,\n        deviceName,\n        areaName,\n        domainName,\n        friendlyName,\n        entityId,\n      ].filter(Boolean) as string[],\n      stateObj: stateObj,\n    };\n  });\n\n  if (includeDeviceClasses) {\n    items = items.filter(\n      (item) =>\n        // We always want to include the entity of the current value\n        item.id === value ||\n        (item.stateObj?.attributes.device_class &&\n          includeDeviceClasses.includes(item.stateObj.attributes.device_class))\n    );\n  }\n\n  if (includeUnitOfMeasurement) {\n    items = items.filter(\n      (item) =>\n        // We always want to include the entity of the current value\n        item.id === value ||\n        (item.stateObj?.attributes.unit_of_measurement &&\n          includeUnitOfMeasurement.includes(\n            item.stateObj.attributes.unit_of_measurement\n          ))\n    );\n  }\n\n  if (entityFilter) {\n    items = items.filter(\n      (item) =>\n        // We always want to include the entity of the current value\n        item.id === value || (item.stateObj && entityFilter!(item.stateObj))\n    );\n  }\n\n  return items;\n};\n","import { fireEvent } from \"../../../common/dom/fire_event\";\n\nexport const loadHelperDetailDialog = () => import(\"./dialog-helper-detail\");\n\nexport interface ShowDialogHelperDetailParams {\n  domain?: string;\n  dialogClosedCallback?: (params: {\n    flowFinished: boolean;\n    entryId?: string;\n    entityId?: string;\n  }) => void;\n}\n\nexport const showHelperDetailDialog = (\n  element: HTMLElement,\n  params: ShowDialogHelperDetailParams\n) => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-helper-detail\",\n    dialogImport: loadHelperDetailDialog,\n    dialogParams: params,\n  });\n};\n"],"names":["SUFFIXES","hasUpperCase","str","toLowerCase","computeEntityName","stateObj","entities","devices","entry","entity_id","computeEntityEntryName","computeStateName","fallbackStateObj","name","original_name","String","undefined","device","device_id","deviceName","computeDeviceName","stripPrefixFromEntityName","entityName","prefix","lowerCasedEntityName","lowerCasedPrefix","suffix","lowerCasedPrefixWithSuffix","startsWith","newName","substring","length","substr","indexOf","toUpperCase","slice","computeEntityNameList","areas","floors","area","floor","getEntityContext","map","item","type","computeAreaName","computeFloorName","text","getEntityEntryContext","entity","deviceId","areaId","area_id","floorId","floor_id","validEntityId","isValidEntityId","entityId","test","CREATE_ID","HaEntityPicker","LitElement","firstUpdated","changedProperties","super","this","hass","loadBackendTranslation","_showEntityId","showEntityId","userData","showEntityIdPicker","render","placeholder","localize","html","disabled","autofocus","allowCustomEntity","label","helper","searchLabel","_notFoundLabel","addButton","value","_rowRenderer","_getItems","_getAdditionalItems","hideClearIcon","_searchFn","_valueRenderer","_valueChanged","open","updateComplete","_picker","ev","stopPropagation","detail","domain","showHelperDetailDialog","dialogClosedCallback","_setValue","fireEvent","args","required","states","mdiShape","areaName","isRTL","computeRTL","primary","secondary","filter","Boolean","join","index","icon_path","nothing","domain_name","_getCreateItems","createDomains","memoizeOne","isHelperDomain","domainToName","id","mdiPlus","_getEntitiesMemoized","getEntities","includeDomains","excludeDomains","entityFilter","includeDeviceClasses","includeUnitOfMeasurement","includeEntities","excludeEntities","search","filteredItems","findIndex","exactMatch","splice","unshift","term","attribute","Array","UNAVAILABLE","UNKNOWN","ON","OFF","UNAVAILABLE_STATES","OFF_STATES","isUnavailableState","arrayLiteralIncludes","computeEntityRegistryName","state","getExtendedEntityRegistryEntry","callWS","getExtendedEntityRegistryEntries","entityIds","entity_ids","updateEntityRegistryEntry","updates","fetchEntityRegistry","conn","sendMessagePromise","subscribeEntityRegistryUpdates","store","subscribeEvents","debounce","then","setState","subscribeEntityRegistry","onChange","createCollection","entityRegistryByEntityId","entries","entityRegistryById","getAutomaticEntityIds","idPrefix","items","Object","keys","includes","eid","computeDomain","friendlyName","domainName","sorting_label","search_labels","attributes","device_class","unit_of_measurement","loadHelperDetailDialog","e","element","params","dialogTag","dialogImport","dialogParams"],"mappings":"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"}