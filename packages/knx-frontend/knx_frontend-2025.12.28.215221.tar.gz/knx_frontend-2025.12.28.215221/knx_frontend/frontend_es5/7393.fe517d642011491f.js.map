{"version":3,"file":"7393.fe517d642011491f.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/entity/context/get_entity_context.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-template.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-tooltip.ts","webpack://knx-frontend/./homeassistant-frontend/src/util/documentation-url.ts","webpack://knx-frontend/./homeassistant-frontend/src/util/toast.ts"],"sourcesContent":["import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type { AreaRegistryEntry } from \"../../../data/area_registry\";\nimport type { DeviceRegistryEntry } from \"../../../data/device_registry\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n  ExtEntityRegistryEntry,\n} from \"../../../data/entity_registry\";\nimport type { FloorRegistryEntry } from \"../../../data/floor_registry\";\nimport type { HomeAssistant } from \"../../../types\";\n\ninterface EntityContext {\n  entity: EntityRegistryDisplayEntry | null;\n  device: DeviceRegistryEntry | null;\n  area: AreaRegistryEntry | null;\n  floor: FloorRegistryEntry | null;\n}\n\nexport const getEntityContext = (\n  stateObj: HassEntity,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): EntityContext => {\n  const entry = entities[stateObj.entity_id] as\n    | EntityRegistryDisplayEntry\n    | undefined;\n\n  if (!entry) {\n    return {\n      entity: null,\n      device: null,\n      area: null,\n      floor: null,\n    };\n  }\n  return getEntityEntryContext(entry, entities, devices, areas, floors);\n};\n\nexport const getEntityEntryContext = (\n  entry:\n    | EntityRegistryDisplayEntry\n    | EntityRegistryEntry\n    | ExtEntityRegistryEntry,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): EntityContext => {\n  const entity = entities[entry.entity_id];\n  const deviceId = entry?.device_id;\n  const device = deviceId ? devices[deviceId] : undefined;\n  const areaId = entry?.area_id || device?.area_id;\n  const area = areaId ? areas[areaId] : undefined;\n  const floorId = area?.floor_id;\n  const floor = floorId ? floors[floorId] : undefined;\n\n  return {\n    entity: entity,\n    device: device || null,\n    area: area || null,\n    floor: floor || null,\n  };\n};\n","import { css, html, nothing, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { HomeAssistant } from \"../../types\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport \"../ha-code-editor\";\nimport \"../ha-input-helper-text\";\nimport \"../ha-alert\";\n\nconst WARNING_STRINGS = [\"template:\", \"sensor:\", \"state:\", \"trigger: template\"];\n\n@customElement(\"ha-selector-template\")\nexport class HaTemplateSelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public value?: string;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property() public placeholder?: any;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  @state() private warn: string | undefined = undefined;\n\n  protected render() {\n    return html`\n      ${this.warn\n        ? html`<ha-alert alert-type=\"warning\"\n            >${this.hass.localize(\n              \"ui.components.selectors.template.yaml_warning\",\n              { string: this.warn }\n            )}\n            <br />\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=${documentationUrl(\n                this.hass,\n                \"/docs/configuration/templating/\"\n              )}\n              >${this.hass.localize(\n                \"ui.components.selectors.template.learn_more\"\n              )}</a\n            ></ha-alert\n          >`\n        : nothing}\n      ${this.label\n        ? html`<p>${this.label}${this.required ? \"*\" : \"\"}</p>`\n        : nothing}\n      <ha-code-editor\n        mode=\"jinja2\"\n        .hass=${this.hass}\n        .value=${this.value}\n        .readOnly=${this.disabled}\n        .placeholder=${this.placeholder || \"{{ ... }}\"}\n        autofocus\n        autocomplete-entities\n        autocomplete-icons\n        @value-changed=${this._handleChange}\n        dir=\"ltr\"\n        linewrap\n      ></ha-code-editor>\n      ${this.helper\n        ? html`<ha-input-helper-text .disabled=${this.disabled}\n            >${this.helper}</ha-input-helper-text\n          >`\n        : nothing}\n    `;\n  }\n\n  private _handleChange(ev) {\n    ev.stopPropagation();\n    let value = ev.target.value;\n    if (this.value === value) {\n      return;\n    }\n    this.warn = WARNING_STRINGS.find((str) => value.includes(str));\n    if (value === \"\" && !this.required) {\n      value = undefined;\n    }\n    fireEvent(this, \"value-changed\", { value });\n  }\n\n  static styles = css`\n    p {\n      margin-top: 0;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-template\": HaTemplateSelector;\n  }\n}\n","import Tooltip from \"@home-assistant/webawesome/dist/components/tooltip/tooltip\";\nimport { css } from \"lit\";\nimport type { CSSResultGroup } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-tooltip\")\nexport class HaTooltip extends Tooltip {\n  /** The amount of time to wait before showing the tooltip when the user mouses in. */\n  @property({ attribute: \"show-delay\", type: Number }) showDelay = 150;\n\n  /** The amount of time to wait before hiding the tooltip when the user mouses out.. */\n  @property({ attribute: \"hide-delay\", type: Number }) hideDelay = 150;\n\n  static get styles(): CSSResultGroup {\n    return [\n      Tooltip.styles,\n      css`\n        :host {\n          --wa-tooltip-background-color: var(--secondary-background-color);\n          --wa-tooltip-content-color: var(--primary-text-color);\n          --wa-tooltip-font-family: var(\n            --ha-tooltip-font-family,\n            var(--ha-font-family-body)\n          );\n          --wa-tooltip-font-size: var(\n            --ha-tooltip-font-size,\n            var(--ha-font-size-s)\n          );\n          --wa-tooltip-font-weight: var(\n            --ha-tooltip-font-weight,\n            var(--ha-font-weight-normal)\n          );\n          --wa-tooltip-line-height: var(\n            --ha-tooltip-line-height,\n            var(--ha-line-height-condensed)\n          );\n          --wa-tooltip-padding: 8px;\n          --wa-tooltip-border-radius: var(\n            --ha-tooltip-border-radius,\n            var(--ha-border-radius-sm)\n          );\n          --wa-tooltip-arrow-size: var(--ha-tooltip-arrow-size, 8px);\n          --wa-z-index-tooltip: var(--ha-tooltip-z-index, 1000);\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-tooltip\": HaTooltip;\n  }\n}\n","import type { HomeAssistant } from \"../types\";\n\nexport const documentationUrl = (hass: HomeAssistant, path: string) =>\n  `https://${\n    hass.config.version.includes(\"b\")\n      ? \"rc\"\n      : hass.config.version.includes(\"dev\")\n        ? \"next\"\n        : \"www\"\n  }.home-assistant.io${path}`;\n","import { fireEvent } from \"../common/dom/fire_event\";\nimport type { ShowToastParams } from \"../managers/notification-manager\";\n\nexport const showToast = (el: HTMLElement, params: ShowToastParams) =>\n  fireEvent(el, \"hass-notification\", params);\n"],"names":["getEntityContext","stateObj","entities","devices","areas","floors","entry","entity_id","getEntityEntryContext","entity","device","area","floor","deviceId","device_id","undefined","areaId","area_id","floorId","floor_id","WARNING_STRINGS","HaTemplateSelector","_LitElement","_this","_callSuper","concat","args","disabled","required","warn","html","_t","_","_t2","hass","localize","string","documentationUrl","nothing","label","_t3","value","placeholder","_handleChange","helper","_t4","key","ev","stopPropagation","target","this","find","str","includes","fireEvent","LitElement","styles","css","_t5","attribute","type","Boolean","HaTooltip","_Tooltip","showDelay","hideDelay","Tooltip","Number","path","config","version","showToast","el","params"],"mappings":"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"}