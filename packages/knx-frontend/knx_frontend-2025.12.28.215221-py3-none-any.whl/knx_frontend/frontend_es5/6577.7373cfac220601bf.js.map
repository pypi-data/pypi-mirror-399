{"version":3,"file":"6577.7373cfac220601bf.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-areas-display-editor.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-items-display-editor.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-areas-display.ts","webpack://knx-frontend/./node_modules/@lit-labs/observers/src/resize-controller.ts","webpack://knx-frontend/./node_modules/lit-html/src/directives/private-async-helpers.ts","webpack://knx-frontend/./node_modules/lit-html/src/directives/until.ts"],"sourcesContent":["import { mdiTextureBox } from \"@mdi/js\";\nimport type { TemplateResult } from \"lit\";\nimport { LitElement, html } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { getAreaContext } from \"../common/entity/context/get_area_context\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-expansion-panel\";\nimport \"./ha-items-display-editor\";\nimport type { DisplayItem, DisplayValue } from \"./ha-items-display-editor\";\nimport \"./ha-svg-icon\";\nimport \"./ha-textfield\";\n\nexport interface AreasDisplayValue {\n  hidden?: string[];\n  order?: string[];\n}\n\n@customElement(\"ha-areas-display-editor\")\nexport class HaAreasDisplayEditor extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public label?: string;\n\n  @property({ attribute: false }) public value?: AreasDisplayValue;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public expanded = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean, attribute: \"show-navigation-button\" })\n  public showNavigationButton = false;\n\n  protected render(): TemplateResult {\n    const areas = Object.values(this.hass.areas);\n\n    const items: DisplayItem[] = areas.map((area) => {\n      const { floor } = getAreaContext(area, this.hass.floors);\n      return {\n        value: area.area_id,\n        label: area.name,\n        icon: area.icon ?? undefined,\n        iconPath: mdiTextureBox,\n        description: floor?.name,\n      };\n    });\n\n    const value: DisplayValue = {\n      order: this.value?.order ?? [],\n      hidden: this.value?.hidden ?? [],\n    };\n\n    return html`\n      <ha-expansion-panel\n        outlined\n        .header=${this.label}\n        .expanded=${this.expanded}\n      >\n        <ha-svg-icon slot=\"leading-icon\" .path=${mdiTextureBox}></ha-svg-icon>\n        <ha-items-display-editor\n          .hass=${this.hass}\n          .items=${items}\n          .value=${value}\n          @value-changed=${this._areaDisplayChanged}\n          .showNavigationButton=${this.showNavigationButton}\n        ></ha-items-display-editor>\n      </ha-expansion-panel>\n    `;\n  }\n\n  private async _areaDisplayChanged(ev) {\n    ev.stopPropagation();\n    const value = ev.detail.value as DisplayValue;\n    const newValue: AreasDisplayValue = {\n      ...this.value,\n      ...value,\n    };\n    if (newValue.hidden?.length === 0) {\n      delete newValue.hidden;\n    }\n    if (newValue.order?.length === 0) {\n      delete newValue.order;\n    }\n\n    fireEvent(this, \"value-changed\", { value: newValue });\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-areas-display-editor\": HaAreasDisplayEditor;\n  }\n}\n","import { ResizeController } from \"@lit-labs/observers/resize-controller\";\nimport { mdiDragHorizontalVariant, mdiEye, mdiEyeOff } from \"@mdi/js\";\nimport type { TemplateResult } from \"lit\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { ifDefined } from \"lit/directives/if-defined\";\nimport { repeat } from \"lit/directives/repeat\";\nimport { until } from \"lit/directives/until\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport { orderCompare } from \"../common/string/compare\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-icon\";\nimport \"./ha-icon-button\";\nimport \"./ha-icon-next\";\nimport \"./ha-md-list\";\nimport \"./ha-md-list-item\";\nimport \"./ha-sortable\";\nimport \"./ha-svg-icon\";\n\nexport interface DisplayItem {\n  icon?: string | Promise<string | undefined>;\n  iconPath?: string;\n  value: string;\n  label: string;\n  description?: string;\n  disableSorting?: boolean;\n  disableHiding?: boolean;\n}\n\nexport interface DisplayValue {\n  order: string[];\n  hidden: string[];\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-items-display-editor\": HaItemDisplayEditor;\n  }\n  interface HASSDomEvents {\n    \"item-display-navigate-clicked\": { value: string };\n  }\n}\n\n@customElement(\"ha-items-display-editor\")\nexport class HaItemDisplayEditor extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public items: DisplayItem[] = [];\n\n  @property({ type: Boolean, attribute: \"show-navigation-button\" })\n  public showNavigationButton = false;\n\n  @property({ type: Boolean, attribute: \"dont-sort-visible\" })\n  public dontSortVisible = false;\n\n  @property({ attribute: false })\n  public value: DisplayValue = {\n    order: [],\n    hidden: [],\n  };\n\n  @property({ attribute: false }) public actionsRenderer?: (\n    item: DisplayItem\n  ) => TemplateResult<1> | typeof nothing;\n\n  /**\n   * Used to sort items by keyboard navigation.\n   */\n  @state() private _dragIndex: number | null = null;\n\n  private _showIcon = new ResizeController(this, {\n    callback: (entries) => entries[0]?.contentRect.width > 450,\n  });\n\n  protected render() {\n    const allItems = this._allItems(\n      this.items,\n      this.value.hidden,\n      this.value.order\n    );\n\n    const showIcon = this._showIcon.value;\n    return html`\n      <ha-sortable\n        draggable-selector=\".draggable\"\n        handle-selector=\".handle\"\n        @item-moved=${this._itemMoved}\n      >\n        <ha-md-list>\n          ${repeat(\n            allItems,\n            (item) => item.value,\n            (item: DisplayItem, idx) => {\n              const isVisible = !this.value.hidden.includes(item.value);\n              const {\n                label,\n                value,\n                description,\n                icon,\n                iconPath,\n                disableSorting,\n                disableHiding,\n              } = item;\n              return html`\n                <ha-md-list-item\n                  type=\"button\"\n                  @click=${this.showNavigationButton\n                    ? this._navigate\n                    : undefined}\n                  .value=${value}\n                  class=${classMap({\n                    hidden: !isVisible,\n                    draggable: isVisible && !disableSorting,\n                    \"drag-selected\": this._dragIndex === idx,\n                  })}\n                  @keydown=${isVisible && !disableSorting\n                    ? this._listElementKeydown\n                    : undefined}\n                  .idx=${idx}\n                >\n                  <span slot=\"headline\">${label}</span>\n                  ${description\n                    ? html`<span slot=\"supporting-text\">${description}</span>`\n                    : nothing}\n                  ${!showIcon\n                    ? nothing\n                    : icon\n                      ? html`\n                          <ha-icon\n                            class=\"icon\"\n                            .icon=${until(icon, \"\")}\n                            slot=\"start\"\n                          ></ha-icon>\n                        `\n                      : iconPath\n                        ? html`\n                            <ha-svg-icon\n                              class=\"icon\"\n                              .path=${iconPath}\n                              slot=\"start\"\n                            ></ha-svg-icon>\n                          `\n                        : nothing}\n                  ${this.showNavigationButton\n                    ? html`\n                        <ha-icon-next slot=\"end\"></ha-icon-next>\n                        <div slot=\"end\" class=\"separator\"></div>\n                      `\n                    : nothing}\n                  ${this.actionsRenderer\n                    ? html`\n                        <div slot=\"end\" @click=${stopPropagation}>\n                          ${this.actionsRenderer(item)}\n                        </div>\n                      `\n                    : nothing}\n                  ${!isVisible || !disableHiding\n                    ? html`<ha-icon-button\n                        .path=${isVisible ? mdiEye : mdiEyeOff}\n                        slot=\"end\"\n                        .label=${this.hass.localize(\n                          `ui.components.items-display-editor.${isVisible ? \"hide\" : \"show\"}`,\n                          {\n                            label: label,\n                          }\n                        )}\n                        .value=${value}\n                        @click=${this._toggle}\n                        .disabled=${disableHiding || false}\n                      ></ha-icon-button>`\n                    : nothing}\n                  ${isVisible && !disableSorting\n                    ? html`\n                        <ha-svg-icon\n                          tabindex=${ifDefined(\n                            this.showNavigationButton ? \"0\" : undefined\n                          )}\n                          .idx=${idx}\n                          @keydown=${this.showNavigationButton\n                            ? this._dragHandleKeydown\n                            : undefined}\n                          class=\"handle\"\n                          .path=${mdiDragHorizontalVariant}\n                          slot=\"end\"\n                        ></ha-svg-icon>\n                      `\n                    : html`<ha-svg-icon slot=\"end\"></ha-svg-icon>`}\n                </ha-md-list-item>\n              `;\n            }\n          )}\n        </ha-md-list>\n      </ha-sortable>\n    `;\n  }\n\n  private _toggle(ev) {\n    ev.stopPropagation();\n    this._dragIndex = null;\n    const value = ev.currentTarget.value;\n\n    const hiddenItems = this._hiddenItems(this.items, this.value.hidden);\n\n    const newHidden = hiddenItems.map((item) => item.value);\n\n    if (newHidden.includes(value)) {\n      newHidden.splice(newHidden.indexOf(value), 1);\n    } else {\n      newHidden.push(value);\n    }\n\n    const newVisibleItems = this._visibleItems(\n      this.items,\n      newHidden,\n      this.value.order\n    );\n    const newOrder = newVisibleItems.map((a) => a.value);\n\n    this.value = {\n      hidden: newHidden,\n      order: newOrder,\n    };\n    fireEvent(this, \"value-changed\", { value: this.value });\n  }\n\n  private _itemMoved(ev: CustomEvent): void {\n    ev.stopPropagation();\n    const { oldIndex, newIndex } = ev.detail;\n\n    this._moveItem(oldIndex, newIndex);\n  }\n\n  private _moveItem(oldIndex, newIndex) {\n    if (oldIndex === newIndex) {\n      return;\n    }\n\n    const visibleItems = this._visibleItems(\n      this.items,\n      this.value.hidden,\n      this.value.order\n    );\n    const newOrder = visibleItems.map((item) => item.value);\n\n    const movedItem = newOrder.splice(oldIndex, 1)[0];\n    newOrder.splice(newIndex, 0, movedItem);\n\n    this.value = {\n      ...this.value,\n      order: newOrder,\n    };\n    fireEvent(this, \"value-changed\", { value: this.value });\n  }\n\n  private _navigate(ev) {\n    const value = ev.currentTarget.value;\n    fireEvent(this, \"item-display-navigate-clicked\", { value });\n    ev.stopPropagation();\n  }\n\n  private _visibleItems = memoizeOne(\n    (items: DisplayItem[], hidden: string[], order: string[]) => {\n      const compare = orderCompare(order);\n\n      const visibleItems = items.filter((item) => !hidden.includes(item.value));\n      if (this.dontSortVisible) {\n        return [\n          ...visibleItems.filter((item) => !item.disableSorting),\n          ...visibleItems.filter((item) => item.disableSorting),\n        ];\n      }\n\n      return visibleItems.sort((a, b) =>\n        a.disableSorting && !b.disableSorting ? -1 : compare(a.value, b.value)\n      );\n    }\n  );\n\n  private _allItems = memoizeOne(\n    (items: DisplayItem[], hidden: string[], order: string[]) => {\n      const visibleItems = this._visibleItems(items, hidden, order);\n      const hiddenItems = this._hiddenItems(items, hidden);\n      return [...visibleItems, ...hiddenItems];\n    }\n  );\n\n  private _hiddenItems = memoizeOne((items: DisplayItem[], hidden: string[]) =>\n    items.filter((item) => hidden.includes(item.value))\n  );\n\n  private _maxSortableIndex = memoizeOne(\n    (items: DisplayItem[], hidden: string[]) =>\n      items.filter(\n        (item) => !item.disableSorting && !hidden.includes(item.value)\n      ).length - 1\n  );\n\n  private _keyActivatedMove = (ev: KeyboardEvent, clearDragIndex = false) => {\n    const oldIndex = this._dragIndex;\n\n    if (ev.key === \"ArrowUp\") {\n      this._dragIndex = Math.max(0, this._dragIndex! - 1);\n    } else {\n      this._dragIndex = Math.min(\n        this._maxSortableIndex(this.items, this.value.hidden),\n        this._dragIndex! + 1\n      );\n    }\n    this._moveItem(oldIndex, this._dragIndex);\n\n    // refocus the item after the sort\n    setTimeout(async () => {\n      await this.updateComplete;\n      const selectedElement = this.shadowRoot?.querySelector(\n        `ha-md-list-item:nth-child(${this._dragIndex! + 1})`\n      ) as HTMLElement | null;\n      selectedElement?.focus();\n      if (clearDragIndex) {\n        this._dragIndex = null;\n      }\n    });\n  };\n\n  private _sortKeydown = (ev: KeyboardEvent) => {\n    if (\n      this._dragIndex !== null &&\n      (ev.key === \"ArrowUp\" || ev.key === \"ArrowDown\")\n    ) {\n      ev.preventDefault();\n      this._keyActivatedMove(ev);\n    } else if (this._dragIndex !== null && ev.key === \"Escape\") {\n      ev.preventDefault();\n      ev.stopPropagation();\n      this._dragIndex = null;\n      this.removeEventListener(\"keydown\", this._sortKeydown);\n    }\n  };\n\n  private _listElementKeydown = (ev: KeyboardEvent) => {\n    if (ev.altKey && (ev.key === \"ArrowUp\" || ev.key === \"ArrowDown\")) {\n      ev.preventDefault();\n      this._dragIndex = (ev.target as any).idx;\n      this._keyActivatedMove(ev, true);\n    } else if (\n      (!this.showNavigationButton && ev.key === \"Enter\") ||\n      ev.key === \" \"\n    ) {\n      this._dragHandleKeydown(ev);\n    }\n  };\n\n  private _dragHandleKeydown(ev: KeyboardEvent): void {\n    if (ev.key === \"Enter\" || ev.key === \" \") {\n      ev.preventDefault();\n      ev.stopPropagation();\n      if (this._dragIndex === null) {\n        this._dragIndex = (ev.target as any).idx;\n        this.addEventListener(\"keydown\", this._sortKeydown);\n      } else {\n        this.removeEventListener(\"keydown\", this._sortKeydown);\n        this._dragIndex = null;\n      }\n    }\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this.removeEventListener(\"keydown\", this._sortKeydown);\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n    }\n    .handle {\n      cursor: move;\n      padding: 8px;\n      margin: -8px;\n    }\n    .separator {\n      width: 1px;\n      background-color: var(--divider-color);\n      height: 21px;\n      margin: 0 -4px;\n    }\n    ha-md-list {\n      padding: 0;\n    }\n    ha-md-list-item {\n      --md-list-item-top-space: 0;\n      --md-list-item-bottom-space: 0;\n      --md-list-item-leading-space: 8px;\n      --md-list-item-trailing-space: 8px;\n      --md-list-item-two-line-container-height: 48px;\n      --md-list-item-one-line-container-height: 48px;\n    }\n    ha-md-list-item.drag-selected {\n      --md-focus-ring-color: rgba(var(--rgb-accent-color), 0.6);\n      border-radius: var(--ha-border-radius-md);\n      outline: solid;\n      outline-color: rgba(var(--rgb-accent-color), 0.6);\n      outline-offset: -2px;\n      outline-width: 2px;\n      background-color: rgba(var(--rgb-accent-color), 0.08);\n    }\n    ha-md-list-item ha-icon-button {\n      margin-left: -12px;\n      margin-right: -12px;\n    }\n    ha-md-list-item.hidden {\n      --md-list-item-label-text-color: var(--disabled-text-color);\n      --md-list-item-supporting-text-color: var(--disabled-text-color);\n    }\n    ha-md-list-item.hidden .icon {\n      color: var(--disabled-text-color);\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-items-display-editor\": HaItemDisplayEditor;\n  }\n}\n","import { LitElement, html } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport type { AreasDisplaySelector } from \"../../data/selector\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-areas-display-editor\";\n\n@customElement(\"ha-selector-areas_display\")\nexport class HaAreasDisplaySelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: AreasDisplaySelector;\n\n  @property() public value?: any;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  protected render() {\n    return html`\n      <ha-areas-display-editor\n        .hass=${this.hass}\n        .value=${this.value}\n        .label=${this.label}\n        .helper=${this.helper}\n        .disabled=${this.disabled}\n        .required=${this.required}\n      ></ha-areas-display-editor>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-areas_display\": HaAreasDisplaySelector;\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nimport {isServer} from 'lit-html/is-server.js';\nimport {\n  ReactiveController,\n  ReactiveControllerHost,\n} from '@lit/reactive-element/reactive-controller.js';\n\n/**\n * The callback function for a ResizeController.\n */\nexport type ResizeValueCallback<T = unknown> = (\n  ...args: Parameters<ResizeObserverCallback>\n) => T;\n\n/**\n * The config options for a ResizeController.\n */\nexport interface ResizeControllerConfig<T = unknown> {\n  /**\n   * Configuration object for the ResizeController.\n   */\n  config?: ResizeObserverOptions;\n  /**\n   * The element to observe. In addition to configuring the target here,\n   * the `observe` method can be called to observe additional targets. When not\n   * specified, the target defaults to the `host`. If set to `null`, no target\n   * is automatically observed. Only the configured target will be re-observed\n   * if the host connects again after unobserving via disconnection.\n   */\n  target?: Element | null;\n  /**\n   * The callback used to process detected changes into a value stored\n   * in the controller's `value` property.\n   */\n  callback?: ResizeValueCallback<T>;\n  /**\n   * By default the `callback` is called without changes when a target is\n   * observed. This is done to help manage initial state, but this\n   * setup step can be skipped by setting this to true.\n   */\n  skipInitial?: boolean;\n}\n\n/**\n * ResizeController is a ReactiveController that integrates a ResizeObserver\n * with a ReactiveControllerHost's reactive update lifecycle. This is typically\n * a ReactiveElement or LitElement. ResizeObservers can be used to detect\n * size changes to DOM elements.\n *\n * The controller can specify a `target` element to observe and the\n * configuration options to pass to the ResizeObserver. The `observe`\n * method can be called to observe additional elements.\n *\n * When a change is detected, the controller's given `callback` function is\n * used to process the result into a value which is stored on the controller.\n * The controller's `value` is usable during the host's update cycle.\n */\nexport class ResizeController<T = unknown> implements ReactiveController {\n  private _host: ReactiveControllerHost;\n  private _targets = new Set<Element>();\n  private _config?: ResizeObserverOptions;\n  private _observer!: ResizeObserver;\n  private _skipInitial = false;\n  /**\n   * Flag used to help manage calling the `callback` when observe is called\n   * in addition to when a mutation occurs. This is done to help setup initial\n   * state and is performed async by requesting a host update and calling\n   * `handleChanges` once by checking and then resetting this flag.\n   */\n  private _unobservedUpdate = false;\n  /**\n   * The result of processing the observer's changes via the `callback`\n   * function.\n   */\n  value?: T;\n  /**\n   * Function that returns a value processed from the observer's changes.\n   * The result is stored in the `value` property.\n   */\n  callback?: ResizeValueCallback<T>;\n  constructor(\n    host: ReactiveControllerHost & Element,\n    {target, config, callback, skipInitial}: ResizeControllerConfig<T>\n  ) {\n    this._host = host;\n    // Target defaults to `host` unless explicitly `null`.\n    if (target !== null) {\n      this._targets.add(target ?? host);\n    }\n    this._config = config;\n    this._skipInitial = skipInitial ?? this._skipInitial;\n    this.callback = callback;\n    if (isServer) {\n      return;\n    }\n    // Check browser support.\n    if (!window.ResizeObserver) {\n      console.warn(\n        `ResizeController error: browser does not support ResizeObserver.`\n      );\n      return;\n    }\n    this._observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      this.handleChanges(entries);\n      this._host.requestUpdate();\n    });\n    host.addController(this);\n  }\n\n  /**\n   * Process the observer's changes with the controller's `callback`\n   * function to produce a result stored in the `value` property.\n   */\n  protected handleChanges(entries: ResizeObserverEntry[]) {\n    this.value = this.callback?.(entries, this._observer);\n  }\n\n  hostConnected() {\n    for (const target of this._targets) {\n      this.observe(target);\n    }\n  }\n\n  hostDisconnected() {\n    this.disconnect();\n  }\n\n  async hostUpdated() {\n    // Handle initial state as a set of 0 changes. This helps setup initial\n    // state and promotes UI = f(state) since ideally the callback does not\n    // rely on changes.\n    if (!this._skipInitial && this._unobservedUpdate) {\n      this.handleChanges([]);\n    }\n    this._unobservedUpdate = false;\n  }\n\n  /**\n   * Observe the target element. The controller's `target` is automatically\n   * observed when the host connects.\n   * @param target Element to observe\n   */\n  observe(target: Element) {\n    this._targets.add(target);\n    this._observer.observe(target, this._config);\n    this._unobservedUpdate = true;\n    this._host.requestUpdate();\n  }\n\n  /**\n   * Unobserve the target element.\n   * @param target Element to unobserve\n   */\n  unobserve(target: Element) {\n    this._targets.delete(target);\n    this._observer.unobserve(target);\n  }\n\n  /**\n   * Disconnects the observer. This is done automatically when the host\n   * disconnects.\n   */\n  protected disconnect() {\n    this._observer.disconnect();\n  }\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\n// Note, this module is not included in package exports so that it's private to\n// our first-party directives. If it ends up being useful, we can open it up and\n// export it.\n\n/**\n * Helper to iterate an AsyncIterable in its own closure.\n * @param iterable The iterable to iterate\n * @param callback The callback to call for each value. If the callback returns\n * `false`, the loop will be broken.\n */\nexport const forAwaitOf = async <T>(\n  iterable: AsyncIterable<T>,\n  callback: (value: T) => Promise<boolean>\n) => {\n  for await (const v of iterable) {\n    if ((await callback(v)) === false) {\n      return;\n    }\n  }\n};\n\n/**\n * Holds a reference to an instance that can be disconnected and reconnected,\n * so that a closure over the ref (e.g. in a then function to a promise) does\n * not strongly hold a ref to the instance. Approximates a WeakRef but must\n * be manually connected & disconnected to the backing instance.\n */\nexport class PseudoWeakRef<T> {\n  private _ref?: T;\n  constructor(ref: T) {\n    this._ref = ref;\n  }\n  /**\n   * Disassociates the ref with the backing instance.\n   */\n  disconnect() {\n    this._ref = undefined;\n  }\n  /**\n   * Reassociates the ref with the backing instance.\n   */\n  reconnect(ref: T) {\n    this._ref = ref;\n  }\n  /**\n   * Retrieves the backing instance (will be undefined when disconnected)\n   */\n  deref() {\n    return this._ref;\n  }\n}\n\n/**\n * A helper to pause and resume waiting on a condition in an async function\n */\nexport class Pauser {\n  private _promise?: Promise<void> = undefined;\n  private _resolve?: () => void = undefined;\n  /**\n   * When paused, returns a promise to be awaited; when unpaused, returns\n   * undefined. Note that in the microtask between the pauser being resumed\n   * an await of this promise resolving, the pauser could be paused again,\n   * hence callers should check the promise in a loop when awaiting.\n   * @returns A promise to be awaited when paused or undefined\n   */\n  get() {\n    return this._promise;\n  }\n  /**\n   * Creates a promise to be awaited\n   */\n  pause() {\n    this._promise ??= new Promise((resolve) => (this._resolve = resolve));\n  }\n  /**\n   * Resolves the promise which may be awaited\n   */\n  resume() {\n    this._resolve?.();\n    this._promise = this._resolve = undefined;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n\nimport {Part, noChange} from '../lit-html.js';\nimport {isPrimitive} from '../directive-helpers.js';\nimport {directive, AsyncDirective} from '../async-directive.js';\nimport {Pauser, PseudoWeakRef} from './private-async-helpers.js';\n\nconst isPromise = (x: unknown) => {\n  return !isPrimitive(x) && typeof (x as {then?: unknown}).then === 'function';\n};\n// Effectively infinity, but a SMI.\nconst _infinity = 0x3fffffff;\n\nexport class UntilDirective extends AsyncDirective {\n  private __lastRenderedIndex: number = _infinity;\n  private __values: unknown[] = [];\n  private __weakThis = new PseudoWeakRef(this);\n  private __pauser = new Pauser();\n\n  render(...args: Array<unknown>): unknown {\n    return args.find((x) => !isPromise(x)) ?? noChange;\n  }\n\n  override update(_part: Part, args: Array<unknown>) {\n    const previousValues = this.__values;\n    let previousLength = previousValues.length;\n    this.__values = args;\n\n    const weakThis = this.__weakThis;\n    const pauser = this.__pauser;\n\n    // If our initial render occurs while disconnected, ensure that the pauser\n    // and weakThis are in the disconnected state\n    if (!this.isConnected) {\n      this.disconnected();\n    }\n\n    for (let i = 0; i < args.length; i++) {\n      // If we've rendered a higher-priority value already, stop.\n      if (i > this.__lastRenderedIndex) {\n        break;\n      }\n\n      const value = args[i];\n\n      // Render non-Promise values immediately\n      if (!isPromise(value)) {\n        this.__lastRenderedIndex = i;\n        // Since a lower-priority value will never overwrite a higher-priority\n        // synchronous value, we can stop processing now.\n        return value;\n      }\n\n      // If this is a Promise we've already handled, skip it.\n      if (i < previousLength && value === previousValues[i]) {\n        continue;\n      }\n\n      // We have a Promise that we haven't seen before, so priorities may have\n      // changed. Forget what we rendered before.\n      this.__lastRenderedIndex = _infinity;\n      previousLength = 0;\n\n      // Note, the callback avoids closing over `this` so that the directive\n      // can be gc'ed before the promise resolves; instead `this` is retrieved\n      // from `weakThis`, which can break the hard reference in the closure when\n      // the directive disconnects\n      Promise.resolve(value).then(async (result: unknown) => {\n        // If we're disconnected, wait until we're (maybe) reconnected\n        // The while loop here handles the case that the connection state\n        // thrashes, causing the pauser to resume and then get re-paused\n        while (pauser.get()) {\n          await pauser.get();\n        }\n        // If the callback gets here and there is no `this`, it means that the\n        // directive has been disconnected and garbage collected and we don't\n        // need to do anything else\n        const _this = weakThis.deref();\n        if (_this !== undefined) {\n          const index = _this.__values.indexOf(value);\n          // If state.values doesn't contain the value, we've re-rendered without\n          // the value, so don't render it. Then, only render if the value is\n          // higher-priority than what's already been rendered.\n          if (index > -1 && index < _this.__lastRenderedIndex) {\n            _this.__lastRenderedIndex = index;\n            _this.setValue(result);\n          }\n        }\n      });\n    }\n\n    return noChange;\n  }\n\n  override disconnected() {\n    this.__weakThis.disconnect();\n    this.__pauser.pause();\n  }\n\n  override reconnected() {\n    this.__weakThis.reconnect(this);\n    this.__pauser.resume();\n  }\n}\n\n/**\n * Renders one of a series of values, including Promises, to a Part.\n *\n * Values are rendered in priority order, with the first argument having the\n * highest priority and the last argument having the lowest priority. If a\n * value is a Promise, low-priority values will be rendered until it resolves.\n *\n * The priority of values can be used to create placeholder content for async\n * data. For example, a Promise with pending content can be the first,\n * highest-priority, argument, and a non_promise loading indicator template can\n * be used as the second, lower-priority, argument. The loading indicator will\n * render immediately, and the primary content will render when the Promise\n * resolves.\n *\n * Example:\n *\n * ```js\n * const content = fetch('./content.txt').then(r => r.text());\n * html`${until(content, html`<span>Loading...</span>`)}`\n * ```\n */\nexport const until = directive(UntilDirective);\n\n/**\n * The type of the class that powers this directive. Necessary for naming the\n * directive's return type.\n */\n// export type {UntilDirective};\n"],"names":["HaAreasDisplayEditor","_LitElement","_this","_callSuper","concat","args","expanded","disabled","required","showNavigationButton","_this$value$order","_this$value","_this$value$hidden","_this$value2","items","Object","values","hass","areas","map","area","_area$icon","floor","getAreaContext","floors","value","area_id","label","name","icon","undefined","iconPath","mdiTextureBox","description","order","hidden","html","_t","_","_areaDisplayChanged","key","_areaDisplayChanged2","_asyncToGenerator","_regenerator","m","_callee","ev","_newValue$hidden","_newValue$order","newValue","w","_context","n","stopPropagation","detail","assign","length","fireEvent","a","_x","apply","arguments","LitElement","attribute","type","Boolean","HaItemDisplayEditor","dontSortVisible","_dragIndex","_showIcon","ResizeController","_assertThisInitialized","callback","entries","_entries$","contentRect","width","_visibleItems","memoizeOne","compare","orderCompare","visibleItems","filter","item","includes","_toConsumableArray","disableSorting","sort","b","_allItems","hiddenItems","_hiddenItems","_maxSortableIndex","_keyActivatedMove","clearDragIndex","oldIndex","Math","max","min","_moveItem","setTimeout","_this$shadowRoot","selectedElement","updateComplete","shadowRoot","querySelector","focus","_sortKeydown","preventDefault","removeEventListener","_listElementKeydown","altKey","_dragHandleKeydown","target","idx","allItems","showIcon","_itemMoved","repeat","isVisible","disableHiding","_t2","_navigate","classMap","draggable","this","_t3","nothing","_t4","until","_t5","_t6","actionsRenderer","_t7","_t8","localize","_toggle","_t9","ifDefined","_t0","currentTarget","newHidden","splice","indexOf","push","newOrder","_ev$detail","newIndex","movedItem","addEventListener","_superPropGet","styles","css","_t1","HaAreasDisplaySelector","helper","t","_createClass","_ref","i","h","config","e","o","skipInitial","_classCallCheck","Set","add","l","s","window","ResizeObserver","u","handleChanges","requestUpdate","addController","console","warn","_this$callback","call","_step","_iterator","_createForOfIteratorHelper","done","observe","err","f","disconnect","_hostUpdated","delete","unobserve","G","Y","Z","_this$Y","Promise","_this$Z","then","c","_i","_$Cwt","_$Cbt","_$CK","_$CX","r","_inherits","_s$find","_len","Array","_key","find","_this2","isConnected","disconnected","_ret","_loop","v","resolve","_e","get","deref","setValue","pause","reconnect","resume"],"mappings":"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"}