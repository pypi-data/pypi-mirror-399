"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([["3295"],{87328:function(e,t,n){n.d(t,{aH:function(){return o}});var i=n(16727),r=n(91889),a=(n(25276),n(34782),[" ",": "," - "]),s=e=>e.toLowerCase()!==e,o=(e,t,n)=>{var i=t[e.entity_id];return i?u(i,n):(0,r.u)(e)},u=(e,t,n)=>{var o=e.name||("original_name"in e&&null!=e.original_name?String(e.original_name):void 0),u=e.device_id?t[e.device_id]:void 0;if(!u)return o||(n?(0,r.u)(n):void 0);var l=(0,i.xn)(u);return l!==o?l&&o&&((e,t)=>{for(var n=e.toLowerCase(),i=t.toLowerCase(),r=0,o=a;r<o.length;r++){var u=`${i}${o[r]}`;if(n.startsWith(u)){var l=e.substring(u.length);if(l.length)return s(l.substr(0,l.indexOf(" ")))?l:l[0].toUpperCase()+l.slice(1)}}})(o,l)||o:void 0}},79384:function(e,t,n){n.d(t,{Cf:function(){return u}});n(2008),n(62062),n(18111),n(81148),n(22489),n(61701),n(13579),n(26099);var i=n(56403),r=n(16727),a=n(87328),s=n(47644),o=n(87400),u=(e,t,n,u,l,c)=>{var d=(0,o.l)(e,n,u,l,c),v=d.device,h=d.area,f=d.floor;return t.map((t=>{switch(t.type){case"entity":return(0,a.aH)(e,n,u);case"device":return v?(0,r.xn)(v):void 0;case"area":return h?(0,i.A)(h):void 0;case"floor":return f?(0,s.X)(f):void 0;case"text":return t.text;default:return""}}))}},87400:function(e,t,n){n.d(t,{l:function(){return i}});var i=(e,t,n,i,a)=>{var s=t[e.entity_id];return s?r(s,t,n,i,a):{entity:null,device:null,area:null,floor:null}},r=(e,t,n,i,r)=>{var a=t[e.entity_id],s=null==e?void 0:e.device_id,o=s?n[s]:void 0,u=(null==e?void 0:e.area_id)||(null==o?void 0:o.area_id),l=u?i[u]:void 0,c=null==l?void 0:l.floor_id;return{entity:a,device:o||null,area:l||null,floor:(c?r[c]:void 0)||null}}},73796:function(e,t,n){n.r(t),n.d(t,{HaConversationAgentSelector:function(){return S}});var i,r,a,s,o,u=n(44734),l=n(56038),c=n(69683),d=n(6454),v=(n(28706),n(62826)),h=n(96196),f=n(77845),_=n(61397),g=n(50264),y=n(31432),p=n(25460),b=(n(50113),n(74423),n(62062),n(18111),n(20116),n(61701),n(26099),n(92542)),m=n(55124),C=n(40404),A=n(3950),E=n(98320),k=n(84125),w=n(35804),$=(n(56565),n(69869),n(22800)),L=n(53264),O=e=>e,M="__NONE_OPTION__",j=function(e){function t(){var e;(0,u.A)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=(0,c.A)(this,t,[].concat(i))).disabled=!1,e.required=!1,e._debouncedUpdateAgents=(0,C.s)((()=>e._updateAgents()),500),e}return(0,d.A)(t,e),(0,l.A)(t,[{key:"render",value:function(){var e,t;if(!this._agents)return h.s6;var n=this.value;if(!n&&this.required){var o,u=(0,y.A)(this._agents);try{for(u.s();!(o=u.n()).done;){var l=o.value;if("conversation.home_assistant"===l.id&&l.supported_languages.includes(this.language)){n=l.id;break}}}catch(f){u.e(f)}finally{u.f()}if(!n){var c,d=(0,y.A)(this._agents);try{for(d.s();!(c=d.n()).done;){var v=c.value;if("*"===v.supported_languages&&v.supported_languages.includes(this.language)){n=v.id;break}}}catch(f){d.e(f)}finally{d.f()}}}return n||(n=M),(0,h.qy)(i||(i=O`
      <ha-select
        .label=${0}
        .value=${0}
        .required=${0}
        .disabled=${0}
        @selected=${0}
        @closed=${0}
        fixedMenuPosition
        naturalMenuWidth
      >
        ${0}
        ${0}</ha-select
      >${0}
    `),this.label||this.hass.localize("ui.components.coversation-agent-picker.conversation_agent"),n,this.required,this.disabled,this._changed,m.d,this.required?h.s6:(0,h.qy)(r||(r=O`<ha-list-item .value=${0}>
              ${0}
            </ha-list-item>`),M,this.hass.localize("ui.components.coversation-agent-picker.none")),this._agents.map((e=>(0,h.qy)(a||(a=O`<ha-list-item
              .value=${0}
              .disabled=${0}
            >
              ${0}
            </ha-list-item>`),e.id,"*"!==e.supported_languages&&0===e.supported_languages.length,e.name))),this._subConfigEntry&&null!==(e=this._configEntry)&&void 0!==e&&null!==(e=e.supported_subentry_types[this._subConfigEntry.subentry_type])&&void 0!==e&&e.supports_reconfigure||null!==(t=this._configEntry)&&void 0!==t&&t.supports_options?(0,h.qy)(s||(s=O`<ha-icon-button
            .path=${0}
            @click=${0}
          ></ha-icon-button>`),"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",this._openOptionsFlow):"")}},{key:"willUpdate",value:function(e){(0,p.A)(t,"willUpdate",this,3)([e]),this.hasUpdated?e.has("language")&&this._debouncedUpdateAgents():this._updateAgents(),e.has("value")&&this._maybeFetchConfigEntry()}},{key:"_maybeFetchConfigEntry",value:(v=(0,g.A)((0,_.A)().m((function e(){var t;return(0,_.A)().w((function(e){for(;;)switch(e.p=e.n){case 0:if(this.value&&this.value in this.hass.entities){e.n=1;break}return this._configEntry=void 0,e.a(2);case 1:return e.p=1,e.n=2,(0,$.v)(this.hass,this.value);case 2:if((t=e.v).config_entry_id){e.n=3;break}return this._configEntry=void 0,e.a(2);case 3:return e.n=4,(0,A.Vx)(this.hass,t.config_entry_id);case 4:if(this._configEntry=e.v.config_entry,t.config_subentry_id){e.n=5;break}this._subConfigEntry=void 0,e.n=7;break;case 5:return e.n=6,(0,A.t0)(this.hass,t.config_entry_id);case 6:this._subConfigEntry=e.v.find((e=>e.subentry_id===t.config_subentry_id));case 7:e.n=9;break;case 8:e.p=8,e.v,this._configEntry=void 0,this._subConfigEntry=void 0;case 9:return e.a(2)}}),e,this,[[1,8]])}))),function(){return v.apply(this,arguments)})},{key:"_updateAgents",value:(o=(0,g.A)((0,_.A)().m((function e(){var t,n,i;return(0,_.A)().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,(0,E.vc)(this.hass,this.language,this.hass.config.country||void 0);case 1:if(t=e.v,n=t.agents,this._agents=n,this.value){e.n=2;break}return e.a(2);case 2:i=n.find((e=>e.id===this.value)),(0,b.r)(this,"supported-languages-changed",{value:null==i?void 0:i.supported_languages}),(!i||"*"!==i.supported_languages&&0===i.supported_languages.length)&&(this.value=void 0,(0,b.r)(this,"value-changed",{value:this.value}));case 3:return e.a(2)}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"_openOptionsFlow",value:(n=(0,g.A)((0,_.A)().m((function e(){var t,n,i,r,a;return(0,_.A)().w((function(e){for(;;)switch(e.n){case 0:if(this._configEntry){e.n=1;break}return e.a(2);case 1:if(!this._subConfigEntry||null===(t=this._configEntry.supported_subentry_types[this._subConfigEntry.subentry_type])||void 0===t||!t.supports_reconfigure){e.n=2;break}return(0,L.a)(this,this._configEntry,this._subConfigEntry.subentry_type,{startFlowHandler:this._configEntry.entry_id,subEntryId:this._subConfigEntry.subentry_id}),e.a(2);case 2:return n=w.Q,i=this,r=this._configEntry,e.n=3,(0,k.QC)(this.hass,this._configEntry.domain);case 3:a=e.v,n(i,r,{manifest:a});case 4:return e.a(2)}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_changed",value:function(e){var t,n=e.target;!this.hass||""===n.value||n.value===this.value||void 0===this.value&&n.value===M||(this.value=n.value===M?void 0:n.value,(0,b.r)(this,"value-changed",{value:this.value}),(0,b.r)(this,"supported-languages-changed",{value:null===(t=this._agents.find((e=>e.id===this.value)))||void 0===t?void 0:t.supported_languages}))}}]);var n,o,v}(h.WF);j.styles=(0,h.AH)(o||(o=O`
    :host {
      display: flex;
      align-items: center;
    }
    ha-select {
      width: 100%;
    }
    ha-icon-button {
      color: var(--secondary-text-color);
    }
  `)),(0,v.__decorate)([(0,f.MZ)()],j.prototype,"value",void 0),(0,v.__decorate)([(0,f.MZ)()],j.prototype,"language",void 0),(0,v.__decorate)([(0,f.MZ)()],j.prototype,"label",void 0),(0,v.__decorate)([(0,f.MZ)({attribute:!1})],j.prototype,"hass",void 0),(0,v.__decorate)([(0,f.MZ)({type:Boolean,reflect:!0})],j.prototype,"disabled",void 0),(0,v.__decorate)([(0,f.MZ)({type:Boolean})],j.prototype,"required",void 0),(0,v.__decorate)([(0,f.wk)()],j.prototype,"_agents",void 0),(0,v.__decorate)([(0,f.wk)()],j.prototype,"_configEntry",void 0),(0,v.__decorate)([(0,f.wk)()],j.prototype,"_subConfigEntry",void 0),j=(0,v.__decorate)([(0,f.EM)("ha-conversation-agent-picker")],j);var q,Z,x=e=>e,S=function(e){function t(){var e;(0,u.A)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=(0,c.A)(this,t,[].concat(i))).disabled=!1,e.required=!0,e}return(0,d.A)(t,e),(0,l.A)(t,[{key:"render",value:function(){var e,t;return(0,h.qy)(q||(q=x`<ha-conversation-agent-picker
      .hass=${0}
      .value=${0}
      .language=${0}
      .label=${0}
      .helper=${0}
      .disabled=${0}
      .required=${0}
    ></ha-conversation-agent-picker>`),this.hass,this.value,(null===(e=this.selector.conversation_agent)||void 0===e?void 0:e.language)||(null===(t=this.context)||void 0===t?void 0:t.language),this.label,this.helper,this.disabled,this.required)}}])}(h.WF);S.styles=(0,h.AH)(Z||(Z=x`
    ha-conversation-agent-picker {
      width: 100%;
    }
  `)),(0,v.__decorate)([(0,f.MZ)({attribute:!1})],S.prototype,"hass",void 0),(0,v.__decorate)([(0,f.MZ)({attribute:!1})],S.prototype,"selector",void 0),(0,v.__decorate)([(0,f.MZ)()],S.prototype,"value",void 0),(0,v.__decorate)([(0,f.MZ)()],S.prototype,"label",void 0),(0,v.__decorate)([(0,f.MZ)()],S.prototype,"helper",void 0),(0,v.__decorate)([(0,f.MZ)({type:Boolean})],S.prototype,"disabled",void 0),(0,v.__decorate)([(0,f.MZ)({type:Boolean})],S.prototype,"required",void 0),(0,v.__decorate)([(0,f.MZ)({attribute:!1})],S.prototype,"context",void 0),S=(0,v.__decorate)([(0,f.EM)("ha-selector-conversation_agent")],S)},98320:function(e,t,n){n.d(t,{ZE:function(){return i},e1:function(){return a},vc:function(){return r}});var i=function(e){return e[e.CONTROL=1]="CONTROL",e}({}),r=(e,t,n)=>e.callWS({type:"conversation/agent/list",language:t,country:n}),a=(e,t,n)=>e.callWS({type:"conversation/agent/homeassistant/language_scores",language:t,country:n})},22800:function(e,t,n){n.d(t,{BM:function(){return A},Bz:function(){return b},G3:function(){return _},G_:function(){return g},Ox:function(){return m},P9:function(){return C},jh:function(){return h},v:function(){return f},wz:function(){return E}});var i=n(78261),r=n(31432),a=(n(2008),n(50113),n(74423),n(25276),n(62062),n(26910),n(18111),n(22489),n(20116),n(61701),n(26099),n(70570)),s=n(22786),o=n(41144),u=n(79384),l=n(91889),c=(n(25749),n(79599)),d=n(40404),v=n(84125),h=(e,t)=>{if(t.name)return t.name;var n=e.states[t.entity_id];return n?(0,l.u)(n):t.original_name?t.original_name:t.entity_id},f=(e,t)=>e.callWS({type:"config/entity_registry/get",entity_id:t}),_=(e,t)=>e.callWS({type:"config/entity_registry/get_entries",entity_ids:t}),g=(e,t,n)=>e.callWS(Object.assign({type:"config/entity_registry/update",entity_id:t},n)),y=e=>e.sendMessagePromise({type:"config/entity_registry/list"}),p=(e,t)=>e.subscribeEvents((0,d.s)((()=>y(e).then((e=>t.setState(e,!0)))),500,!0),"entity_registry_updated"),b=(e,t)=>(0,a.N)("_entityRegistry",y,p,e,t),m=(0,s.A)((e=>{var t,n={},i=(0,r.A)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n[a.entity_id]=a}}catch(s){i.e(s)}finally{i.f()}return n})),C=(0,s.A)((e=>{var t,n={},i=(0,r.A)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n[a.id]=a}}catch(s){i.e(s)}finally{i.f()}return n})),A=(e,t)=>e.callWS({type:"config/entity_registry/get_automatic_entity_ids",entity_ids:t}),E=function(e,t,n,r,a,s,d,h,f){var _=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",g=[],y=Object.keys(e.states);return d&&(y=y.filter((e=>d.includes(e)))),h&&(y=y.filter((e=>!h.includes(e)))),t&&(y=y.filter((e=>t.includes((0,o.m)(e))))),n&&(y=y.filter((e=>!n.includes((0,o.m)(e))))),g=y.map((t=>{var n=e.states[t],r=(0,l.u)(n),a=(0,u.Cf)(n,[{type:"entity"},{type:"device"},{type:"area"}],e.entities,e.devices,e.areas,e.floors),s=(0,i.A)(a,3),d=s[0],h=s[1],f=s[2],g=(0,v.p$)(e.localize,(0,o.m)(t)),y=(0,c.qC)(e),p=d||h||t,b=[f,d?h:void 0].filter(Boolean).join(y?" ◂ ":" ▸ ");return{id:`${_}${t}`,primary:p,secondary:b,domain_name:g,sorting_label:[h,d].filter(Boolean).join("_"),search_labels:[d,h,f,g,r,t].filter(Boolean),stateObj:n}})),a&&(g=g.filter((e=>{var t;return e.id===f||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.device_class)&&a.includes(e.stateObj.attributes.device_class)}))),s&&(g=g.filter((e=>{var t;return e.id===f||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.unit_of_measurement)&&s.includes(e.stateObj.attributes.unit_of_measurement)}))),r&&(g=g.filter((e=>e.id===f||e.stateObj&&r(e.stateObj)))),g}},73347:function(e,t,n){n.d(t,{g:function(){return a}});n(23792),n(26099),n(3362),n(62953);var i=n(92542),r=()=>Promise.all([n.e("113"),n.e("8256"),n.e("7394")]).then(n.bind(n,90313)),a=(e,t,n)=>{(0,i.r)(e,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:r,dialogParams:Object.assign(Object.assign({},t),{},{flowConfig:n,dialogParentElement:e})})}},70570:function(e,t,n){n.d(t,{N:function(){return a}});n(16280),n(44114),n(26099),n(3362);var i=e=>{var t=[];function n(n,i){e=i?n:Object.assign(Object.assign({},e),n);for(var r=t,a=0;a<r.length;a++)r[a](e)}return{get state(){return e},action(t){function i(e){n(e,!1)}return function(){for(var n=[e],r=0;r<arguments.length;r++)n.push(arguments[r]);var a=t.apply(this,n);if(null!=a)return a instanceof Promise?a.then(i):i(a)}},setState:n,clearState(){e=void 0},subscribe(e){return t.push(e),()=>{!function(e){for(var n=[],i=0;i<t.length;i++)t[i]===e?e=null:n.push(t[i]);t=n}(e)}}}},r=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{unsubGrace:!0};if(e[t])return e[t];var s,o,u=0,l=i(),c=()=>{if(!n)throw new Error("Collection does not support refresh");return n(e).then((e=>l.setState(e,!0)))},d=()=>c().catch((t=>{if(e.connected)throw t})),v=()=>{o=void 0,s&&s.then((e=>{e()})),l.clearState(),e.removeEventListener("ready",c),e.removeEventListener("disconnected",h)},h=()=>{o&&(clearTimeout(o),v())};return e[t]={get state(){return l.state},refresh:c,subscribe(t){1===++u&&(()=>{if(void 0!==o)return clearTimeout(o),void(o=void 0);r&&(s=r(e,l)),n&&(e.addEventListener("ready",d),d()),e.addEventListener("disconnected",h)})();var i=l.subscribe(t);return void 0!==l.state&&setTimeout((()=>t(l.state)),0),()=>{i(),--u||(a.unsubGrace?o=setTimeout(v,5e3):v())}}},e[t]},a=(e,t,n,i,a)=>r(i,e,t,n).subscribe(a)}}]);
//# sourceMappingURL=3295.e6dc546ff089ff2b.js.map