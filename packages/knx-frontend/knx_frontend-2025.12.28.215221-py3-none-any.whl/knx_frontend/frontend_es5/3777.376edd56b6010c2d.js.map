{"version":3,"file":"3777.376edd56b6010c2d.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/entity/state_active.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-media.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/auth.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/entity.ts"],"sourcesContent":["import type { HassEntity } from \"home-assistant-js-websocket\";\nimport { isUnavailableState, OFF, UNAVAILABLE } from \"../../data/entity\";\nimport { computeDomain } from \"./compute_domain\";\n\nexport function stateActive(stateObj: HassEntity, state?: string): boolean {\n  const domain = computeDomain(stateObj.entity_id);\n  const compareState = state !== undefined ? state : stateObj?.state;\n\n  if ([\"button\", \"event\", \"input_button\", \"scene\"].includes(domain)) {\n    return compareState !== UNAVAILABLE;\n  }\n\n  if (isUnavailableState(compareState)) {\n    return false;\n  }\n\n  // The \"off\" check is relevant for most domains, but there are exceptions\n  // such as \"alert\" where \"off\" is still a somewhat active state and\n  // therefore gets a custom color and \"idle\" is instead the state that\n  // matches what most other domains consider inactive.\n  if (compareState === OFF && domain !== \"alert\") {\n    return false;\n  }\n\n  // Custom cases\n  switch (domain) {\n    case \"alarm_control_panel\":\n      return compareState !== \"disarmed\";\n    case \"alert\":\n      // \"on\" and \"off\" are active, as \"off\" just means alert was acknowledged but is still active\n      return compareState !== \"idle\";\n    case \"cover\":\n      return compareState !== \"closed\";\n    case \"device_tracker\":\n    case \"person\":\n      return compareState !== \"not_home\";\n    case \"lawn_mower\":\n      return [\"mowing\", \"error\"].includes(compareState);\n    case \"lock\":\n      return compareState !== \"locked\";\n    case \"media_player\":\n      return compareState !== \"standby\";\n    case \"vacuum\":\n      return ![\"idle\", \"docked\", \"paused\"].includes(compareState);\n    case \"valve\":\n      return compareState !== \"closed\";\n    case \"plant\":\n      return compareState === \"problem\";\n    case \"group\":\n      return [\"on\", \"home\", \"open\", \"locked\", \"problem\"].includes(compareState);\n    case \"timer\":\n      return compareState === \"active\";\n    case \"camera\":\n      return compareState === \"streaming\";\n  }\n\n  return true;\n}\n","import { mdiPlayBox, mdiPlus } from \"@mdi/js\";\nimport type { PropertyValues } from \"lit\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { supportsFeature } from \"../../common/entity/supports-feature\";\nimport { getSignedPath } from \"../../data/auth\";\nimport type { MediaPickedEvent } from \"../../data/media-player\";\nimport {\n  MediaClassBrowserSettings,\n  MediaPlayerEntityFeature,\n} from \"../../data/media-player\";\nimport type { MediaSelector, MediaSelectorValue } from \"../../data/selector\";\nimport type { HomeAssistant } from \"../../types\";\nimport { brandsUrl, extractDomainFromBrandUrl } from \"../../util/brands-url\";\nimport \"../ha-alert\";\nimport \"../ha-form/ha-form\";\nimport type { SchemaUnion } from \"../ha-form/types\";\nimport { showMediaBrowserDialog } from \"../media-player/show-media-browser-dialog\";\nimport { ensureArray } from \"../../common/array/ensure-array\";\nimport \"../ha-picture-upload\";\n\nconst MANUAL_SCHEMA = [\n  { name: \"media_content_id\", required: false, selector: { text: {} } },\n  { name: \"media_content_type\", required: false, selector: { text: {} } },\n] as const;\n\nconst INCLUDE_DOMAINS = [\"media_player\"];\n\nconst EMPTY_FORM = {};\n\n@customElement(\"ha-selector-media\")\nexport class HaMediaSelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: MediaSelector;\n\n  @property({ attribute: false }) public value?: MediaSelectorValue;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @property({ type: Boolean, reflect: true }) public required = true;\n\n  @property({ attribute: false }) public context?: {\n    filter_entity?: string | string[];\n  };\n\n  @state() private _thumbnailUrl?: string | null;\n\n  private _contextEntities: string[] | undefined;\n\n  private get _hasAccept(): boolean {\n    return !!this.selector?.media?.accept?.length;\n  }\n\n  willUpdate(changedProps: PropertyValues<this>) {\n    if (changedProps.has(\"context\")) {\n      if (!this._hasAccept) {\n        this._contextEntities = ensureArray(this.context?.filter_entity);\n      }\n    }\n\n    if (changedProps.has(\"value\")) {\n      const thumbnail = this.value?.metadata?.thumbnail;\n      const oldThumbnail = (changedProps.get(\"value\") as this[\"value\"])\n        ?.metadata?.thumbnail;\n      if (thumbnail === oldThumbnail) {\n        return;\n      }\n      if (thumbnail && thumbnail.startsWith(\"/\")) {\n        this._thumbnailUrl = undefined;\n        // Thumbnails served by local API require authentication\n        getSignedPath(this.hass, thumbnail).then((signedPath) => {\n          this._thumbnailUrl = signedPath.path;\n        });\n      } else if (\n        thumbnail &&\n        thumbnail.startsWith(\"https://brands.home-assistant.io\")\n      ) {\n        // The backend is not aware of the theme used by the users,\n        // so we rewrite the URL to show a proper icon\n        this._thumbnailUrl = brandsUrl({\n          domain: extractDomainFromBrandUrl(thumbnail),\n          type: \"icon\",\n          useFallback: true,\n          darkOptimized: this.hass.themes?.darkMode,\n        });\n      } else {\n        this._thumbnailUrl = thumbnail;\n      }\n    }\n  }\n\n  protected render() {\n    const entityId = this._getActiveEntityId();\n\n    const stateObj = entityId ? this.hass.states[entityId] : undefined;\n\n    const supportsBrowse =\n      !entityId ||\n      (stateObj &&\n        supportsFeature(stateObj, MediaPlayerEntityFeature.BROWSE_MEDIA));\n\n    if (this.selector.media?.image_upload && !this.value) {\n      return html`${this.label ? html`<label>${this.label}</label>` : nothing}\n        <ha-picture-upload\n          .hass=${this.hass}\n          .value=${null}\n          .contentIdHelper=${this.selector.media?.content_id_helper}\n          select-media\n          full-media\n          @media-picked=${this._pictureUploadMediaPicked}\n        ></ha-picture-upload>`;\n    }\n\n    return html`\n      ${this._hasAccept ||\n      (this._contextEntities && this._contextEntities.length <= 1)\n        ? nothing\n        : html`\n            <ha-entity-picker\n              .hass=${this.hass}\n              .value=${entityId}\n              .label=${this.label ||\n              this.hass.localize(\n                \"ui.components.selectors.media.pick_media_player\"\n              )}\n              .disabled=${this.disabled}\n              .helper=${this.helper}\n              .required=${this.required}\n              .hideClearIcon=${!!this._contextEntities}\n              .includeDomains=${INCLUDE_DOMAINS}\n              .includeEntities=${this._contextEntities}\n              .allowCustomEntity=${!this._contextEntities}\n              @value-changed=${this._entityChanged}\n            ></ha-entity-picker>\n          `}\n      ${!supportsBrowse\n        ? html`\n            ${this.label ? html`<label>${this.label}</label>` : nothing}\n            <ha-alert>\n              ${this.hass.localize(\n                \"ui.components.selectors.media.browse_not_supported\"\n              )}\n            </ha-alert>\n            <ha-form\n              .hass=${this.hass}\n              .data=${this.value || EMPTY_FORM}\n              .schema=${MANUAL_SCHEMA}\n              .computeLabel=${this._computeLabelCallback}\n              .computeHelper=${this._computeHelperCallback}\n            ></ha-form>\n          `\n        : html`${this.label ? html`<label>${this.label}</label>` : nothing}\n            <ha-card\n              outlined\n              tabindex=\"0\"\n              role=\"button\"\n              aria-label=${!this.value?.media_content_id\n                ? this.hass.localize(\"ui.components.selectors.media.pick_media\")\n                : this.value.metadata?.title || this.value.media_content_id}\n              @click=${this._pickMedia}\n              @keydown=${this._handleKeyDown}\n              class=${this.disabled || (!entityId && !this._hasAccept)\n                ? \"disabled\"\n                : \"\"}\n            >\n              <div class=\"content-container\">\n                <div class=\"thumbnail\">\n                  ${this.value?.metadata?.thumbnail\n                    ? html`\n                        <div\n                          class=\"${classMap({\n                            \"centered-image\":\n                              !!this.value.metadata.media_class &&\n                              [\"app\", \"directory\"].includes(\n                                this.value.metadata.media_class\n                              ),\n                          })}\n                          image\"\n                          style=${this._thumbnailUrl\n                            ? `background-image: url(${this._thumbnailUrl});`\n                            : \"\"}\n                        ></div>\n                      `\n                    : html`\n                        <div class=\"icon-holder image\">\n                          <ha-svg-icon\n                            class=\"folder\"\n                            .path=${!this.value?.media_content_id\n                              ? mdiPlus\n                              : this.value?.metadata?.media_class\n                                ? MediaClassBrowserSettings[\n                                    this.value.metadata.media_class ===\n                                    \"directory\"\n                                      ? this.value.metadata\n                                          .children_media_class ||\n                                        this.value.metadata.media_class\n                                      : this.value.metadata.media_class\n                                  ].icon\n                                : mdiPlayBox}\n                          ></ha-svg-icon>\n                        </div>\n                      `}\n                </div>\n                <div class=\"title\">\n                  ${!this.value?.media_content_id\n                    ? this.hass.localize(\n                        \"ui.components.selectors.media.pick_media\"\n                      )\n                    : this.value.metadata?.title || this.value.media_content_id}\n                </div>\n              </div>\n            </ha-card>\n            ${this.selector.media?.clearable\n              ? html`<div>\n                  <ha-button\n                    appearance=\"plain\"\n                    size=\"small\"\n                    variant=\"danger\"\n                    @click=${this._clearValue}\n                  >\n                    ${this.hass.localize(\n                      \"ui.components.picture-upload.clear_picture\"\n                    )}\n                  </ha-button>\n                </div>`\n              : nothing}`}\n    `;\n  }\n\n  private _computeLabelCallback = (\n    schema: SchemaUnion<typeof MANUAL_SCHEMA>\n  ): string =>\n    this.hass.localize(`ui.components.selectors.media.${schema.name}`);\n\n  private _computeHelperCallback = (\n    schema: SchemaUnion<typeof MANUAL_SCHEMA>\n  ): string =>\n    this.hass.localize(`ui.components.selectors.media.${schema.name}_detail`);\n\n  private _entityChanged(ev: CustomEvent) {\n    ev.stopPropagation();\n    if (!this._hasAccept && this.context?.filter_entity) {\n      fireEvent(this, \"value-changed\", {\n        value: {\n          media_content_id: \"\",\n          media_content_type: \"\",\n          metadata: {\n            browse_entity_id: ev.detail.value,\n          },\n        },\n      });\n    } else {\n      fireEvent(this, \"value-changed\", {\n        value: {\n          entity_id: ev.detail.value,\n          media_content_id: \"\",\n          media_content_type: \"\",\n        },\n      });\n    }\n  }\n\n  private _pickMedia() {\n    showMediaBrowserDialog(this, {\n      action: \"pick\",\n      entityId: this._getActiveEntityId(),\n      navigateIds: this.value?.metadata?.navigateIds,\n      accept: this.selector.media?.accept,\n      defaultId: this.value?.media_content_id,\n      defaultType: this.value?.media_content_type,\n      hideContentType: this.selector.media?.hide_content_type,\n      contentIdHelper: this.selector.media?.content_id_helper,\n      mediaPickedCallback: (pickedMedia: MediaPickedEvent) => {\n        fireEvent(this, \"value-changed\", {\n          value: {\n            ...this.value,\n            media_content_id: pickedMedia.item.media_content_id,\n            media_content_type: pickedMedia.item.media_content_type,\n            metadata: {\n              title: pickedMedia.item.title,\n              thumbnail: pickedMedia.item.thumbnail,\n              media_class: pickedMedia.item.media_class,\n              children_media_class: pickedMedia.item.children_media_class,\n              navigateIds: pickedMedia.navigateIds?.map((id) => ({\n                media_content_type: id.media_content_type,\n                media_content_id: id.media_content_id,\n              })),\n              ...(!this._hasAccept && this.context?.filter_entity\n                ? { browse_entity_id: this._getActiveEntityId() }\n                : {}),\n            },\n          },\n        });\n      },\n    });\n  }\n\n  private _getActiveEntityId(): string | undefined {\n    const metaId = this.value?.metadata?.browse_entity_id;\n    return (\n      this.value?.entity_id ||\n      (metaId && this._contextEntities?.includes(metaId) && metaId) ||\n      this._contextEntities?.[0]\n    );\n  }\n\n  private _handleKeyDown(ev: KeyboardEvent) {\n    if (ev.key === \"Enter\" || ev.key === \" \") {\n      ev.preventDefault();\n      this._pickMedia();\n    }\n  }\n\n  private _pictureUploadMediaPicked(ev) {\n    const pickedMedia = ev.detail as MediaPickedEvent;\n    fireEvent(this, \"value-changed\", {\n      value: {\n        ...this.value,\n        media_content_id: pickedMedia.item.media_content_id,\n        media_content_type: pickedMedia.item.media_content_type,\n        metadata: {\n          title: pickedMedia.item.title,\n          thumbnail: pickedMedia.item.thumbnail,\n          media_class: pickedMedia.item.media_class,\n          children_media_class: pickedMedia.item.children_media_class,\n          navigateIds: pickedMedia.navigateIds?.map((id) => ({\n            media_content_type: id.media_content_type,\n            media_content_id: id.media_content_id,\n          })),\n        },\n      },\n    });\n  }\n\n  private _clearValue() {\n    fireEvent(this, \"value-changed\", { value: undefined });\n  }\n\n  static styles = css`\n    ha-entity-picker {\n      display: block;\n      margin-bottom: 16px;\n    }\n    ha-alert {\n      display: block;\n      margin-bottom: 16px;\n    }\n    ha-card {\n      position: relative;\n      width: 100%;\n      box-sizing: border-box;\n      cursor: pointer;\n      transition: background-color 180ms ease-in-out;\n      min-height: 56px;\n    }\n    ha-card:hover:not(.disabled),\n    ha-card:focus:not(.disabled) {\n      background-color: var(--state-icon-hover-color, rgba(0, 0, 0, 0.04));\n    }\n    ha-card:focus {\n      outline: none;\n    }\n    ha-card.disabled {\n      pointer-events: none;\n      color: var(--disabled-text-color);\n    }\n    .content-container {\n      display: flex;\n      align-items: center;\n      padding: 8px;\n      gap: var(--ha-space-3);\n    }\n    ha-card .thumbnail {\n      width: 40px;\n      height: 40px;\n      flex-shrink: 0;\n      position: relative;\n      box-sizing: border-box;\n      border-radius: var(--ha-border-radius-md);\n      overflow: hidden;\n    }\n    ha-card .image {\n      border-radius: var(--ha-border-radius-md);\n    }\n    .folder {\n      --mdc-icon-size: 24px;\n    }\n    .title {\n      font-size: var(--ha-font-size-m);\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      line-height: 1.4;\n      flex: 1;\n      min-width: 0;\n    }\n    .image {\n      position: absolute;\n      top: 0;\n      right: 0;\n      left: 0;\n      bottom: 0;\n      background-size: cover;\n      background-repeat: no-repeat;\n      background-position: center;\n    }\n    .centered-image {\n      margin: 4px;\n      background-size: contain;\n    }\n    .icon-holder {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-media\": HaMediaSelector;\n  }\n}\n","import type { HaFormSchema } from \"../components/ha-form/types\";\nimport type { HomeAssistant } from \"../types\";\nimport type { RefreshTokenType } from \"./refresh_token\";\n\nexport interface AuthUrlSearchParams {\n  client_id?: string;\n  redirect_uri?: string;\n  state?: string;\n}\n\nexport interface AuthProvider {\n  name: string;\n  id: string;\n  type: string;\n  users?: Record<string, string>;\n}\n\nexport interface Credential {\n  type: string;\n}\n\nexport interface SignedPath {\n  path: string;\n}\n\nexport const hassUrl = __HASS_URL__;\n\nexport const autocompleteLoginFields = (schema: HaFormSchema[]) =>\n  schema.map((field) => {\n    if (field.type !== \"string\") return field;\n    switch (field.name) {\n      case \"username\":\n        return { ...field, autocomplete: \"username\", autofocus: true };\n      case \"password\":\n        return { ...field, autocomplete: \"current-password\" };\n      case \"code\":\n        return { ...field, autocomplete: \"one-time-code\", autofocus: true };\n      default:\n        return field;\n    }\n  });\n\nexport const getSignedPath = (\n  hass: HomeAssistant,\n  path: string\n): Promise<SignedPath> => hass.callWS({ type: \"auth/sign_path\", path });\n\nexport const fetchAuthProviders = () =>\n  fetch(\"/auth/providers\", {\n    credentials: \"same-origin\",\n  });\n\nexport const createLoginFlow = (\n  client_id: string | undefined,\n  redirect_uri: string | undefined,\n  handler: (string | null)[]\n) =>\n  fetch(\"/auth/login_flow\", {\n    method: \"POST\",\n    credentials: \"same-origin\",\n    body: JSON.stringify({\n      client_id,\n      handler,\n      redirect_uri,\n    }),\n  });\n\nexport const submitLoginFlow = (flow_id: string, data: Record<string, any>) =>\n  fetch(`/auth/login_flow/${flow_id}`, {\n    method: \"POST\",\n    credentials: \"same-origin\",\n    body: JSON.stringify(data),\n  });\n\nexport const deleteLoginFlow = (flow_id) =>\n  fetch(`/auth/login_flow/${flow_id}`, {\n    method: \"DELETE\",\n    credentials: \"same-origin\",\n  });\n\nexport const redirectWithAuthCode = (\n  url: string,\n  authCode: string,\n  oauth2State: string | undefined,\n  storeToken: boolean\n) => {\n  // OAuth 2: 3.1.2 we need to retain query component of a redirect URI\n  if (!url.includes(\"?\")) {\n    url += \"?\";\n  } else if (!url.endsWith(\"&\")) {\n    url += \"&\";\n  }\n\n  url += `code=${encodeURIComponent(authCode)}`;\n\n  if (oauth2State) {\n    url += `&state=${encodeURIComponent(oauth2State)}`;\n  }\n  if (storeToken) {\n    url += `&storeToken=true`;\n  }\n\n  document.location.assign(url);\n};\n\nexport const createAuthForUser = async (\n  hass: HomeAssistant,\n  userId: string,\n  username: string,\n  password: string\n) =>\n  hass.callWS({\n    type: \"config/auth_provider/homeassistant/create\",\n    user_id: userId,\n    username,\n    password,\n  });\n\nexport const changePassword = (\n  hass: HomeAssistant,\n  current_password: string,\n  new_password: string\n) =>\n  hass.callWS({\n    type: \"config/auth_provider/homeassistant/change_password\",\n    current_password,\n    new_password,\n  });\n\nexport const adminChangePassword = (\n  hass: HomeAssistant,\n  userId: string,\n  password: string\n) =>\n  hass.callWS<undefined>({\n    type: \"config/auth_provider/homeassistant/admin_change_password\",\n    user_id: userId,\n    password,\n  });\n\nexport const adminChangeUsername = (\n  hass: HomeAssistant,\n  userId: string,\n  username: string\n) =>\n  hass.callWS<undefined>({\n    type: \"config/auth_provider/homeassistant/admin_change_username\",\n    user_id: userId,\n    username,\n  });\n\nexport const deleteAllRefreshTokens = (\n  hass: HomeAssistant,\n  token_type?: RefreshTokenType,\n  delete_current_token?: boolean\n) =>\n  hass.callWS({\n    type: \"auth/delete_all_refresh_tokens\",\n    token_type,\n    delete_current_token,\n  });\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport { arrayLiteralIncludes } from \"../common/array/literal-includes\";\n\nexport const UNAVAILABLE = \"unavailable\";\nexport const UNKNOWN = \"unknown\";\nexport const ON = \"on\";\nexport const OFF = \"off\";\n\nexport const UNAVAILABLE_STATES = [UNAVAILABLE, UNKNOWN] as const;\nexport const OFF_STATES = [UNAVAILABLE, UNKNOWN, OFF] as const;\n\nexport const isUnavailableState = arrayLiteralIncludes(UNAVAILABLE_STATES);\nexport const isOffState = arrayLiteralIncludes(OFF_STATES);\n\nexport type HaEntityPickerEntityFilterFunc = (entityId: HassEntity) => boolean;\n"],"names":["stateActive","stateObj","state","domain","computeDomain","entity_id","compareState","undefined","includes","UNAVAILABLE","isUnavailableState","OFF","MANUAL_SCHEMA","name","required","selector","text","INCLUDE_DOMAINS","EMPTY_FORM","HaMediaSelector","_LitElement","_this","_callSuper","concat","args","disabled","_computeLabelCallback","schema","hass","localize","_computeHelperCallback","_this$selector","media","accept","length","key","value","changedProps","_this$context","has","this","_hasAccept","_contextEntities","ensureArray","context","filter_entity","_this$value","_changedProps$get","thumbnail","metadata","get","startsWith","_thumbnailUrl","getSignedPath","then","signedPath","path","_this$hass$themes","brandsUrl","extractDomainFromBrandUrl","type","useFallback","darkOptimized","themes","darkMode","_this$selector$media","_this$value2","_this$value$metadata","_this$value3","_this$value4","_this$value5","_this$value6","_this$value$metadata2","_this$selector$media3","_this$selector$media2","entityId","_getActiveEntityId","states","supportsBrowse","supportsFeature","MediaPlayerEntityFeature","image_upload","html","_t","_","label","_t2","nothing","content_id_helper","_pictureUploadMediaPicked","_t3","_t4","helper","_entityChanged","_t7","_t8","media_content_id","title","_pickMedia","_handleKeyDown","_t9","classMap","media_class","_t0","MediaClassBrowserSettings","children_media_class","icon","clearable","_t1","_clearValue","_t5","_t6","ev","_this$context2","stopPropagation","fireEvent","media_content_type","browse_entity_id","detail","_this$value7","_this$selector$media4","_this$value8","_this$value9","_this$selector$media5","_this$selector$media6","showMediaBrowserDialog","action","navigateIds","defaultId","defaultType","hideContentType","hide_content_type","contentIdHelper","mediaPickedCallback","pickedMedia","_pickedMedia$navigate","_this$context3","Object","assign","item","map","id","_this$value0","_this$value1","_this$_contextEntitie","_this$_contextEntitie2","metaId","preventDefault","_pickedMedia$navigate2","LitElement","styles","css","_t10","attribute","Boolean","reflect","autocompleteLoginFields","field","autocomplete","autofocus","callWS","UNKNOWN","ON","UNAVAILABLE_STATES","OFF_STATES","arrayLiteralIncludes"],"mappings":"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"}