{"version":3,"file":"8990.36f807b93a834c7e.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-config-entry-picker.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-config-entry.ts","webpack://knx-frontend/./homeassistant-frontend/src/util/brands-url.ts"],"sourcesContent":["import type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { caseInsensitiveStringCompare } from \"../common/string/compare\";\nimport type { ConfigEntry } from \"../data/config_entries\";\nimport { getConfigEntries } from \"../data/config_entries\";\nimport { domainToName } from \"../data/integration\";\nimport type { ValueChangedEvent, HomeAssistant } from \"../types\";\nimport { brandsUrl } from \"../util/brands-url\";\nimport \"./ha-combo-box\";\nimport type { HaComboBox } from \"./ha-combo-box\";\nimport \"./ha-combo-box-item\";\n\nexport interface ConfigEntryExtended extends ConfigEntry {\n  localized_domain_name?: string;\n}\n\n@customElement(\"ha-config-entry-picker\")\nclass HaConfigEntryPicker extends LitElement {\n  public hass!: HomeAssistant;\n\n  @property() public integration?: string;\n\n  @property() public label?: string;\n\n  @property() public value = \"\";\n\n  @property() public helper?: string;\n\n  @state() private _configEntries?: ConfigEntryExtended[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @query(\"ha-combo-box\") private _comboBox!: HaComboBox;\n\n  public open() {\n    this._comboBox?.open();\n  }\n\n  public focus() {\n    this._comboBox?.focus();\n  }\n\n  protected firstUpdated() {\n    this._getConfigEntries();\n  }\n\n  private _rowRenderer: ComboBoxLitRenderer<ConfigEntryExtended> = (\n    item\n  ) => html`\n    <ha-combo-box-item type=\"button\">\n      <span slot=\"headline\">\n        ${item.title ||\n        this.hass.localize(\n          \"ui.panel.config.integrations.config_entry.unnamed_entry\"\n        )}\n      </span>\n      <span slot=\"supporting-text\">${item.localized_domain_name}</span>\n      <img\n        alt=\"\"\n        slot=\"start\"\n        src=${brandsUrl({\n          domain: item.domain,\n          type: \"icon\",\n          darkOptimized: this.hass.themes?.darkMode,\n        })}\n        crossorigin=\"anonymous\"\n        referrerpolicy=\"no-referrer\"\n        @error=${this._onImageError}\n        @load=${this._onImageLoad}\n      />\n    </ha-combo-box-item>\n  `;\n\n  protected render() {\n    if (!this._configEntries) {\n      return nothing;\n    }\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass\n          ? this.hass.localize(\"ui.components.config-entry-picker.config_entry\")\n          : this.label}\n        .value=${this._value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        .helper=${this.helper}\n        .renderer=${this._rowRenderer}\n        .items=${this._configEntries}\n        item-value-path=\"entry_id\"\n        item-id-path=\"entry_id\"\n        item-label-path=\"title\"\n        @value-changed=${this._valueChanged}\n      ></ha-combo-box>\n    `;\n  }\n\n  private _onImageLoad(ev) {\n    ev.target.style.visibility = \"initial\";\n  }\n\n  private _onImageError(ev) {\n    ev.target.style.visibility = \"hidden\";\n  }\n\n  private async _getConfigEntries() {\n    getConfigEntries(this.hass, {\n      type: [\"device\", \"hub\", \"service\"],\n      domain: this.integration,\n    }).then((configEntries) => {\n      this._configEntries = configEntries\n        .map(\n          (entry: ConfigEntry): ConfigEntryExtended => ({\n            ...entry,\n            localized_domain_name: domainToName(\n              this.hass.localize,\n              entry.domain\n            ),\n          })\n        )\n        .sort((conf1, conf2) =>\n          caseInsensitiveStringCompare(\n            conf1.localized_domain_name + conf1.title,\n            conf2.localized_domain_name + conf2.title,\n            this.hass.locale.language\n          )\n        );\n    });\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _valueChanged(ev: ValueChangedEvent<string>) {\n    ev.stopPropagation();\n    const newValue = ev.detail.value;\n\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-entry-picker\": HaConfigEntryPicker;\n  }\n}\n","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport type { ConfigEntrySelector } from \"../../data/selector\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-config-entry-picker\";\n\n@customElement(\"ha-selector-config_entry\")\nexport class HaConfigEntrySelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: ConfigEntrySelector;\n\n  @property() public value?: any;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  protected render() {\n    return html`<ha-config-entry-picker\n      .hass=${this.hass}\n      .value=${this.value}\n      .label=${this.label}\n      .helper=${this.helper}\n      .disabled=${this.disabled}\n      .required=${this.required}\n      .integration=${this.selector.config_entry?.integration}\n      allow-custom-entity\n    ></ha-config-entry-picker>`;\n  }\n\n  static styles = css`\n    ha-config-entry-picker {\n      width: 100%;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-config_entry\": HaConfigEntrySelector;\n  }\n}\n","export interface BrandsOptions {\n  domain: string;\n  type: \"icon\" | \"logo\" | \"icon@2x\" | \"logo@2x\";\n  useFallback?: boolean;\n  darkOptimized?: boolean;\n  brand?: boolean;\n}\n\nexport interface HardwareBrandsOptions {\n  category: string;\n  model?: string;\n  manufacturer: string;\n  darkOptimized?: boolean;\n}\n\nexport const brandsUrl = (options: BrandsOptions): string =>\n  `https://brands.home-assistant.io/${options.brand ? \"brands/\" : \"\"}${\n    options.useFallback ? \"_/\" : \"\"\n  }${options.domain}/${options.darkOptimized ? \"dark_\" : \"\"}${\n    options.type\n  }.png`;\n\nexport const hardwareBrandsUrl = (options: HardwareBrandsOptions): string =>\n  `https://brands.home-assistant.io/hardware/${options.category}/${\n    options.darkOptimized ? \"dark_\" : \"\"\n  }${options.manufacturer}${options.model ? `_${options.model}` : \"\"}.png`;\n\nexport const extractDomainFromBrandUrl = (url: string) => url.split(\"/\")[4];\n\nexport const isBrandUrl = (thumbnail: string | \"\"): boolean =>\n  thumbnail.startsWith(\"https://brands.home-assistant.io/\");\n"],"names":["HaConfigEntryPicker","LitElement","open","this","_comboBox","focus","firstUpdated","_getConfigEntries","render","_configEntries","html","hass","undefined","label","localize","_value","required","disabled","helper","_rowRenderer","_valueChanged","nothing","_onImageLoad","ev","target","style","visibility","_onImageError","getConfigEntries","type","domain","integration","then","configEntries","map","entry","localized_domain_name","domainToName","sort","conf1","conf2","caseInsensitiveStringCompare","title","locale","language","value","stopPropagation","newValue","detail","_setValue","setTimeout","fireEvent","args","item","brandsUrl","darkOptimized","themes","darkMode","Boolean","HaConfigEntrySelector","selector","config_entry","styles","css","attribute","options","brand","useFallback","extractDomainFromBrandUrl","url","split","isBrandUrl","thumbnail","startsWith"],"mappings":"yRAkBA,MAAAA,UAAAC,EAAAA,GAoBSC,IAAAA,GACLC,KAAAC,WAAAF,MACF,CAEOG,KAAAA,GACLF,KAAAC,WAAAC,OACF,CAEUC,YAAAA,GACRH,KAAAI,mBACF,CA6BUC,MAAAA,GACR,OAAKL,KAALM,eAGAC,EAAAA,EAAA;;gBAEU,KAAAC;sBACCC,IAAA,KAAAC,OAAA,KAAAF,KAAA,KAAAA,KAAAG,SAAA,uDAAAD;iBAGA,KAAAE;oBACG,KAAAC;oBACA,KAAAC;kBACF,KAAAC;oBACE,KAAAC;iBACH,KAAAV;;;;yBAIQ,KAAAW;;MAjBjBC,EAAAA,EAoBJ,CAEQC,YAAAA,CAAAC,GACNA,EAAAC,OAAAC,MAAAC,WAAA,SACF,CAEQC,aAAAA,CAAAJ,GACNA,EAAAC,OAAAC,MAAAC,WAAA,QACF,CAEA,uBAAAnB,IACEqB,EAAAA,EAAAA,IAAA,KAAAjB,KAAA,CACEkB,KAAA,CAAO,SAAU,MAAO,WACxBC,OAAA,KAAAC,cACFC,MAAAC,IACE9B,KAAAM,eAAAwB,EAAAC,KAAAC,IAAA,IAGMA,EACAC,uBAAAC,EAAAA,EAAAA,IAAA,KAAA1B,KAAAG,SAAAqB,EAAAL,YAIFQ,MAAA,CAAAC,EAAAC,KAAAC,EAAAA,EAAAA,IAAAF,EAAAH,sBAAAG,EAAAG,MAAAF,EAAAJ,sBAAAI,EAAAE,MAAA,KAAA/B,KAAAgC,OAAAC,WAAA,GAUR,CAEA,UAAA7B,GACE,OAAOZ,KAAP0C,OAAA,EACF,CAEQzB,aAAAA,CAAAG,GACNA,EAAAuB,kBACA,MAAAC,EAAAxB,EAAAyB,OAAAH,MAEAE,IAAA,KAAAhC,QACEZ,KAAA8C,UAAAF,EAEJ,CAEQE,SAAAA,CAAAJ,GACN1C,KAAA0C,MAAAA,EACAK,YAAA,MACEC,EAAAA,EAAAA,GAAA,sBAAmCN,WACnCM,EAAAA,EAAAA,GAAA,iBACC,EACL,C,kBAvIF,SAAAC,GAAA,KAAAP,MAAA,QAAA5B,UAAA,OAAAD,UAAA,OAAAG,aAAAkC,GAAA3C,EAAAA,EAAA;;;UAqCQ2C,EAAAX,OAAA,KAAA/B,KAAAG,SAAA;;qCAK2BuC,EAAAjB;;;;eAIvBkB,EAAAA,EAAAA,IAAA,CACFxB,OAAAuB,EAAAvB,OACAD,KAAA,OACA0B,cAAA,KAAA5C,KAAA6C,QAAAC;;;iBAIK,KAAA9B;gBACD,KAAAL;;;mVAxCAO,KAAA6B,W,2DAEA7B,KAAA6B,W,qKC3BP,MAAPC,UAAA1D,EAAAA,GAeYO,MAAAA,GACR,OAAAE,EAAAA,EAAA;cACQ,KAAAC;eACC,KAAAkC;eACA,KAAAhC;gBACC,KAAAK;kBACE,KAAAD;kBACA,KAAAD;qBACG,KAAA4C,SAAAC,cAAA9B;;+BAGjB,C,kBA1BK,SAAAqB,GAAA,KAAAnC,UAAA,OAAAD,UAAA,C,EAAM2C,EAAAG,OAAAC,EAAAA,EAAA;;;;gCACCC,WAAA,K,uDAEAA,WAAA,K,0OAQAnC,KAAA6B,W,2DAEA7B,KAAA6B,W,uJCLP,MAAPJ,EAAAW,GAAA,oCAAAA,EAAAC,MAAA,eAAAD,EAAAE,YAAA,UAAAF,EAAAnC,UAAAmC,EAAAV,cAAA,aAAAU,EAAApC,WAYAuC,EAAAC,GAAAA,EAAAC,MAAA,QAEAC,EAAAC,GAAAA,EAAAC,WAAA,oC"}