{"version":3,"file":"6080.885021b63c1076ba.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/entity/context/get_entity_context.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/chips/ha-assist-chip.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/entity/ha-entity-name-picker.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-entity-name.ts","webpack://knx-frontend/./homeassistant-frontend/src/mixins/subscribe-mixin.ts","webpack://knx-frontend/./node_modules/@material/web/chips/internal/assist-chip.ts","webpack://knx-frontend/./node_modules/@material/web/chips/internal/assist-styles.ts"],"sourcesContent":["import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type { AreaRegistryEntry } from \"../../../data/area_registry\";\nimport type { DeviceRegistryEntry } from \"../../../data/device_registry\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n  ExtEntityRegistryEntry,\n} from \"../../../data/entity_registry\";\nimport type { FloorRegistryEntry } from \"../../../data/floor_registry\";\nimport type { HomeAssistant } from \"../../../types\";\n\ninterface EntityContext {\n  entity: EntityRegistryDisplayEntry | null;\n  device: DeviceRegistryEntry | null;\n  area: AreaRegistryEntry | null;\n  floor: FloorRegistryEntry | null;\n}\n\nexport const getEntityContext = (\n  stateObj: HassEntity,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): EntityContext => {\n  const entry = entities[stateObj.entity_id] as\n    | EntityRegistryDisplayEntry\n    | undefined;\n\n  if (!entry) {\n    return {\n      entity: null,\n      device: null,\n      area: null,\n      floor: null,\n    };\n  }\n  return getEntityEntryContext(entry, entities, devices, areas, floors);\n};\n\nexport const getEntityEntryContext = (\n  entry:\n    | EntityRegistryDisplayEntry\n    | EntityRegistryEntry\n    | ExtEntityRegistryEntry,\n  entities: HomeAssistant[\"entities\"],\n  devices: HomeAssistant[\"devices\"],\n  areas: HomeAssistant[\"areas\"],\n  floors: HomeAssistant[\"floors\"]\n): EntityContext => {\n  const entity = entities[entry.entity_id];\n  const deviceId = entry?.device_id;\n  const device = deviceId ? devices[deviceId] : undefined;\n  const areaId = entry?.area_id || device?.area_id;\n  const area = areaId ? areas[areaId] : undefined;\n  const floorId = area?.floor_id;\n  const floor = floorId ? floors[floorId] : undefined;\n\n  return {\n    entity: entity,\n    device: device || null,\n    area: area || null,\n    floor: floor || null,\n  };\n};\n","import { AssistChip } from \"@material/web/chips/internal/assist-chip\";\nimport { styles } from \"@material/web/chips/internal/assist-styles\";\n\nimport { styles as sharedStyles } from \"@material/web/chips/internal/shared-styles\";\nimport { styles as elevatedStyles } from \"@material/web/chips/internal/elevated-styles\";\n\nimport { css, html } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\n\n@customElement(\"ha-assist-chip\")\n// @ts-ignore\nexport class HaAssistChip extends AssistChip {\n  @property({ type: Boolean, reflect: true }) filled = false;\n\n  @property({ type: Boolean }) active = false;\n\n  static override styles = [\n    sharedStyles,\n    elevatedStyles,\n    styles,\n    css`\n      :host {\n        --md-sys-color-primary: var(--primary-text-color);\n        --md-sys-color-on-surface: var(--primary-text-color);\n        --md-assist-chip-container-shape: var(\n          --ha-assist-chip-container-shape,\n          16px\n        );\n        --md-assist-chip-outline-color: var(--outline-color);\n        --md-assist-chip-label-text-weight: 400;\n      }\n      /** Material 3 doesn't have a filled chip, so we have to make our own **/\n      .filled {\n        display: flex;\n        pointer-events: none;\n        border-radius: inherit;\n        inset: 0;\n        position: absolute;\n        background-color: var(--ha-assist-chip-filled-container-color);\n      }\n      /** Set the size of mdc icons **/\n      ::slotted([slot=\"icon\"]),\n      ::slotted([slot=\"trailing-icon\"]) {\n        display: flex;\n        --mdc-icon-size: var(--md-input-chip-icon-size, 18px);\n        font-size: var(--_label-text-size) !important;\n      }\n\n      .trailing.icon ::slotted(*),\n      .trailing.icon svg {\n        margin-inline-end: unset;\n        margin-inline-start: var(--_icon-label-space);\n      }\n      ::before {\n        background: var(--ha-assist-chip-container-color, transparent);\n        opacity: var(--ha-assist-chip-container-opacity, 1);\n      }\n      :where(.active)::before {\n        background: var(--ha-assist-chip-active-container-color);\n        opacity: var(--ha-assist-chip-active-container-opacity);\n      }\n      .label {\n        font-family: var(--ha-font-family-body);\n      }\n    `,\n  ];\n\n  protected override renderOutline() {\n    if (this.filled) {\n      return html`<span class=\"filled\"></span>`;\n    }\n\n    return super.renderOutline();\n  }\n\n  protected override getContainerClasses() {\n    return {\n      ...super.getContainerClasses(),\n      active: this.active,\n    };\n  }\n\n  protected override renderPrimaryContent() {\n    return html`\n      <span class=\"leading icon\" aria-hidden=\"true\">\n        ${this.renderLeadingIcon()}\n      </span>\n      <span class=\"label\">${this.label}</span>\n      <span class=\"touch\"></span>\n      <span class=\"trailing leading icon\" aria-hidden=\"true\">\n        ${this.renderTrailingIcon()}\n      </span>\n    `;\n  }\n\n  protected renderTrailingIcon() {\n    return html`<slot name=\"trailing-icon\"></slot>`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-assist-chip\": HaAssistChip;\n  }\n}\n","import \"@material/mwc-menu/mwc-menu-surface\";\nimport { mdiDragHorizontalVariant, mdiPlus } from \"@mdi/js\";\nimport type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport type { IFuseOptions } from \"fuse.js\";\nimport Fuse from \"fuse.js\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { repeat } from \"lit/directives/repeat\";\nimport memoizeOne from \"memoize-one\";\nimport { ensureArray } from \"../../common/array/ensure-array\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { stopPropagation } from \"../../common/dom/stop_propagation\";\nimport type { EntityNameItem } from \"../../common/entity/compute_entity_name_display\";\nimport { getEntityContext } from \"../../common/entity/context/get_entity_context\";\nimport type { EntityNameType } from \"../../common/translations/entity-state\";\nimport type { LocalizeKeys } from \"../../common/translations/localize\";\nimport type { HomeAssistant, ValueChangedEvent } from \"../../types\";\nimport \"../chips/ha-assist-chip\";\nimport \"../chips/ha-chip-set\";\nimport \"../chips/ha-input-chip\";\nimport \"../ha-combo-box\";\nimport type { HaComboBox } from \"../ha-combo-box\";\nimport \"../ha-input-helper-text\";\nimport \"../ha-sortable\";\n\ninterface EntityNameOption {\n  primary: string;\n  secondary?: string;\n  field_label: string;\n  value: string;\n}\n\nconst rowRenderer: ComboBoxLitRenderer<EntityNameOption> = (item) => html`\n  <ha-combo-box-item type=\"button\">\n    <span slot=\"headline\">${item.primary}</span>\n    ${item.secondary\n      ? html`<span slot=\"supporting-text\">${item.secondary}</span>`\n      : nothing}\n  </ha-combo-box-item>\n`;\n\nconst KNOWN_TYPES = new Set([\"entity\", \"device\", \"area\", \"floor\"]);\n\nconst UNIQUE_TYPES = new Set([\"entity\", \"device\", \"area\", \"floor\"]);\n\nconst formatOptionValue = (item: EntityNameItem) => {\n  if (item.type === \"text\" && item.text) {\n    return item.text;\n  }\n  return `___${item.type}___`;\n};\n\nconst parseOptionValue = (value: string): EntityNameItem => {\n  if (value.startsWith(\"___\") && value.endsWith(\"___\")) {\n    const type = value.slice(3, -3);\n    if (KNOWN_TYPES.has(type)) {\n      return { type: type as EntityNameType };\n    }\n  }\n  return { type: \"text\", text: value };\n};\n\n@customElement(\"ha-entity-name-picker\")\nexport class HaEntityNamePicker extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public entityId?: string;\n\n  @property({ attribute: false }) public value?:\n    | string\n    | EntityNameItem\n    | EntityNameItem[];\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @query(\".container\", true) private _container?: HTMLDivElement;\n\n  @query(\"ha-combo-box\", true) private _comboBox!: HaComboBox;\n\n  @state() private _opened = false;\n\n  private _editIndex?: number;\n\n  private _validTypes = memoizeOne((entityId?: string) => {\n    const options = new Set<string>([\"text\"]);\n    if (!entityId) {\n      return options;\n    }\n\n    const stateObj = this.hass.states[entityId];\n\n    if (!stateObj) {\n      return options;\n    }\n\n    options.add(\"entity\");\n\n    const context = getEntityContext(\n      stateObj,\n      this.hass.entities,\n      this.hass.devices,\n      this.hass.areas,\n      this.hass.floors\n    );\n\n    if (context.device) options.add(\"device\");\n    if (context.area) options.add(\"area\");\n    if (context.floor) options.add(\"floor\");\n    return options;\n  });\n\n  private _getOptions = memoizeOne((entityId?: string) => {\n    if (!entityId) {\n      return [];\n    }\n\n    const types = this._validTypes(entityId);\n\n    const items = (\n      [\"entity\", \"device\", \"area\", \"floor\"] as const\n    ).map<EntityNameOption>((name) => {\n      const stateObj = this.hass.states[entityId];\n      const isValid = types.has(name);\n      const primary = this.hass.localize(\n        `ui.components.entity.entity-name-picker.types.${name}`\n      );\n      const secondary =\n        (stateObj && isValid\n          ? this.hass.formatEntityName(stateObj, { type: name })\n          : this.hass.localize(\n              `ui.components.entity.entity-name-picker.types.${name}_missing` as LocalizeKeys\n            )) || \"-\";\n\n      return {\n        primary,\n        secondary,\n        field_label: primary,\n        value: formatOptionValue({ type: name }),\n      };\n    });\n\n    return items;\n  });\n\n  private _customNameOption = memoizeOne((text: string) => ({\n    primary: this.hass.localize(\n      \"ui.components.entity.entity-name-picker.custom_name\"\n    ),\n    secondary: `\"${text}\"`,\n    field_label: text,\n    value: formatOptionValue({ type: \"text\", text }),\n  }));\n\n  private _formatItem = (item: EntityNameItem) => {\n    if (item.type === \"text\") {\n      return `\"${item.text}\"`;\n    }\n    if (KNOWN_TYPES.has(item.type)) {\n      return this.hass.localize(\n        `ui.components.entity.entity-name-picker.types.${item.type as EntityNameType}`\n      );\n    }\n    return item.type;\n  };\n\n  protected render() {\n    const value = this._items;\n    const options = this._getOptions(this.entityId);\n    const validTypes = this._validTypes(this.entityId);\n\n    return html`\n      ${this.label ? html`<label>${this.label}</label>` : nothing}\n      <div class=\"container\">\n        <ha-sortable\n          no-style\n          @item-moved=${this._moveItem}\n          .disabled=${this.disabled}\n          handle-selector=\"button.primary.action\"\n          filter=\".add\"\n        >\n          <ha-chip-set>\n            ${repeat(\n              this._items,\n              (item) => item,\n              (item: EntityNameItem, idx) => {\n                const label = this._formatItem(item);\n                const isValid = validTypes.has(item.type);\n                return html`\n                  <ha-input-chip\n                    data-idx=${idx}\n                    @remove=${this._removeItem}\n                    @click=${this._editItem}\n                    .label=${label}\n                    .selected=${!this.disabled}\n                    .disabled=${this.disabled}\n                    class=${!isValid ? \"invalid\" : \"\"}\n                  >\n                    <ha-svg-icon\n                      slot=\"icon\"\n                      .path=${mdiDragHorizontalVariant}\n                    ></ha-svg-icon>\n                    <span>${label}</span>\n                  </ha-input-chip>\n                `;\n              }\n            )}\n            ${this.disabled\n              ? nothing\n              : html`\n                  <ha-assist-chip\n                    @click=${this._addItem}\n                    .disabled=${this.disabled}\n                    label=${this.hass.localize(\n                      \"ui.components.entity.entity-name-picker.add\"\n                    )}\n                    class=\"add\"\n                  >\n                    <ha-svg-icon slot=\"icon\" .path=${mdiPlus}></ha-svg-icon>\n                  </ha-assist-chip>\n                `}\n          </ha-chip-set>\n        </ha-sortable>\n\n        <mwc-menu-surface\n          .open=${this._opened}\n          @closed=${this._onClosed}\n          @opened=${this._onOpened}\n          @input=${stopPropagation}\n          .anchor=${this._container}\n        >\n          <ha-combo-box\n            .hass=${this.hass}\n            .value=${\"\"}\n            .autofocus=${this.autofocus}\n            .disabled=${this.disabled}\n            .required=${this.required && !value.length}\n            .items=${options}\n            allow-custom-value\n            item-id-path=\"value\"\n            item-value-path=\"value\"\n            item-label-path=\"field_label\"\n            .renderer=${rowRenderer}\n            @opened-changed=${this._openedChanged}\n            @value-changed=${this._comboBoxValueChanged}\n            @filter-changed=${this._filterChanged}\n          >\n          </ha-combo-box>\n        </mwc-menu-surface>\n      </div>\n      ${this._renderHelper()}\n    `;\n  }\n\n  private _renderHelper() {\n    return this.helper\n      ? html`\n          <ha-input-helper-text .disabled=${this.disabled}>\n            ${this.helper}\n          </ha-input-helper-text>\n        `\n      : nothing;\n  }\n\n  private _onClosed(ev) {\n    ev.stopPropagation();\n    this._opened = false;\n    this._editIndex = undefined;\n  }\n\n  private async _onOpened(ev) {\n    if (!this._opened) {\n      return;\n    }\n    ev.stopPropagation();\n    this._opened = true;\n    await this._comboBox?.focus();\n    await this._comboBox?.open();\n  }\n\n  private async _addItem(ev) {\n    ev.stopPropagation();\n    this._opened = true;\n  }\n\n  private async _editItem(ev) {\n    ev.stopPropagation();\n    const idx = parseInt(ev.currentTarget.dataset.idx, 10);\n    this._editIndex = idx;\n    this._opened = true;\n  }\n\n  private get _items(): EntityNameItem[] {\n    return this._toItems(this.value);\n  }\n\n  private _toItems = memoizeOne((value?: typeof this.value) => {\n    if (typeof value === \"string\") {\n      if (value === \"\") {\n        return [];\n      }\n      return [{ type: \"text\", text: value } satisfies EntityNameItem];\n    }\n    return value ? ensureArray(value) : [];\n  });\n\n  private _toValue = memoizeOne(\n    (items: EntityNameItem[]): typeof this.value => {\n      if (items.length === 0) {\n        return undefined;\n      }\n      if (items.length === 1) {\n        const item = items[0];\n        return item.type === \"text\" ? item.text : item;\n      }\n      return items;\n    }\n  );\n\n  private _openedChanged(ev: ValueChangedEvent<boolean>) {\n    const open = ev.detail.value;\n    if (open) {\n      const options = this._comboBox.items || [];\n\n      const initialItem =\n        this._editIndex != null ? this._items[this._editIndex] : undefined;\n\n      const initialValue = initialItem ? formatOptionValue(initialItem) : \"\";\n\n      const filteredItems = this._filterSelectedOptions(options, initialValue);\n\n      if (initialItem?.type === \"text\" && initialItem.text) {\n        filteredItems.push(this._customNameOption(initialItem.text));\n      }\n\n      this._comboBox.filteredItems = filteredItems;\n      this._comboBox.setInputValue(initialValue);\n    } else {\n      this._opened = false;\n      this._comboBox.setInputValue(\"\");\n    }\n  }\n\n  private _filterSelectedOptions = (\n    options: EntityNameOption[],\n    current?: string\n  ) => {\n    const items = this._items;\n\n    const excludedValues = new Set(\n      items\n        .filter((item) => UNIQUE_TYPES.has(item.type))\n        .map((item) => formatOptionValue(item))\n    );\n\n    const filteredOptions = options.filter(\n      (option) => !excludedValues.has(option.value) || option.value === current\n    );\n    return filteredOptions;\n  };\n\n  private _filterChanged(ev: ValueChangedEvent<string>) {\n    const input = ev.detail.value;\n    const filter = input?.toLowerCase() || \"\";\n    const options = this._comboBox.items || [];\n\n    const currentItem =\n      this._editIndex != null ? this._items[this._editIndex] : undefined;\n\n    const currentValue = currentItem ? formatOptionValue(currentItem) : \"\";\n\n    let filteredItems = this._filterSelectedOptions(options, currentValue);\n\n    if (!filter) {\n      this._comboBox.filteredItems = filteredItems;\n      return;\n    }\n\n    const fuseOptions: IFuseOptions<EntityNameOption> = {\n      keys: [\"primary\", \"secondary\", \"value\"],\n      isCaseSensitive: false,\n      minMatchCharLength: Math.min(filter.length, 2),\n      threshold: 0.2,\n      ignoreDiacritics: true,\n    };\n\n    const fuse = new Fuse(filteredItems, fuseOptions);\n    filteredItems = fuse.search(filter).map((result) => result.item);\n    filteredItems.push(this._customNameOption(input));\n    this._comboBox.filteredItems = filteredItems;\n  }\n\n  private async _moveItem(ev: CustomEvent) {\n    ev.stopPropagation();\n    const { oldIndex, newIndex } = ev.detail;\n    const value = this._items;\n    const newValue = value.concat();\n    const element = newValue.splice(oldIndex, 1)[0];\n    newValue.splice(newIndex, 0, element);\n    this._setValue(newValue);\n    await this.updateComplete;\n    this._filterChanged({ detail: { value: \"\" } } as ValueChangedEvent<string>);\n  }\n\n  private async _removeItem(ev) {\n    ev.stopPropagation();\n    const value = [...this._items];\n    const idx = parseInt(ev.target.dataset.idx, 10);\n    value.splice(idx, 1);\n    this._setValue(value);\n    await this.updateComplete;\n    this._filterChanged({ detail: { value: \"\" } } as ValueChangedEvent<string>);\n  }\n\n  private _comboBoxValueChanged(ev: ValueChangedEvent<string>): void {\n    ev.stopPropagation();\n    const value = ev.detail.value;\n\n    if (this.disabled || value === \"\") {\n      return;\n    }\n\n    const item: EntityNameItem = parseOptionValue(value);\n\n    const newValue = [...this._items];\n\n    if (this._editIndex != null) {\n      newValue[this._editIndex] = item;\n    } else {\n      newValue.push(item);\n    }\n\n    this._setValue(newValue);\n  }\n\n  private _setValue(value: EntityNameItem[]) {\n    const newValue = this._toValue(value);\n    this.value = newValue;\n    fireEvent(this, \"value-changed\", {\n      value: newValue,\n    });\n  }\n\n  static styles = css`\n    :host {\n      position: relative;\n      width: 100%;\n    }\n\n    .container {\n      position: relative;\n      background-color: var(--mdc-text-field-fill-color, whitesmoke);\n      border-radius: var(--ha-border-radius-sm);\n      border-end-end-radius: var(--ha-border-radius-square);\n      border-end-start-radius: var(--ha-border-radius-square);\n    }\n    .container:after {\n      display: block;\n      content: \"\";\n      position: absolute;\n      pointer-events: none;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 1px;\n      width: 100%;\n      background-color: var(\n        --mdc-text-field-idle-line-color,\n        rgba(0, 0, 0, 0.42)\n      );\n      transform:\n        height 180ms ease-in-out,\n        background-color 180ms ease-in-out;\n    }\n    :host([disabled]) .container:after {\n      background-color: var(\n        --mdc-text-field-disabled-line-color,\n        rgba(0, 0, 0, 0.42)\n      );\n    }\n    .container:focus-within:after {\n      height: 2px;\n      background-color: var(--mdc-theme-primary);\n    }\n\n    label {\n      display: block;\n      margin: 0 0 var(--ha-space-2);\n    }\n\n    .add {\n      order: 1;\n    }\n\n    mwc-menu-surface {\n      --mdc-menu-min-width: 100%;\n    }\n\n    ha-chip-set {\n      padding: var(--ha-space-2) var(--ha-space-2);\n    }\n\n    .invalid {\n      text-decoration: line-through;\n    }\n\n    .sortable-fallback {\n      display: none;\n      opacity: 0;\n    }\n\n    .sortable-ghost {\n      opacity: 0.4;\n    }\n\n    .sortable-drag {\n      cursor: grabbing;\n    }\n\n    ha-input-helper-text {\n      display: block;\n      margin: var(--ha-space-2) 0 0;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-name-picker\": HaEntityNamePicker;\n  }\n}\n","import { html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport type { EntityNameSelector } from \"../../data/selector\";\nimport { SubscribeMixin } from \"../../mixins/subscribe-mixin\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../entity/ha-entity-name-picker\";\n\n@customElement(\"ha-selector-entity_name\")\nexport class HaSelectorEntityName extends SubscribeMixin(LitElement) {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: EntityNameSelector;\n\n  @property() public value?: string | string[];\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  @property({ attribute: false }) public context?: {\n    entity?: string;\n  };\n\n  protected render() {\n    const value = this.value ?? this.selector.entity_name?.default_name;\n\n    return html`\n      <ha-entity-name-picker\n        .hass=${this.hass}\n        .entityId=${this.selector.entity_name?.entity_id ||\n        this.context?.entity}\n        .value=${value}\n        .label=${this.label}\n        .helper=${this.helper}\n        .disabled=${this.disabled}\n        .required=${this.required}\n      ></ha-entity-name-picker>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-entity_name\": HaSelectorEntityName;\n  }\n}\n","import type { UnsubscribeFunc } from \"home-assistant-js-websocket\";\nimport type { PropertyValues, ReactiveElement } from \"lit\";\nimport { property } from \"lit/decorators\";\nimport type { Constructor, HomeAssistant } from \"../types\";\n\nexport interface HassSubscribeElement {\n  hassSubscribe(): UnsubscribeFunc[];\n}\n\nexport const SubscribeMixin = <T extends Constructor<ReactiveElement>>(\n  superClass: T\n) => {\n  class SubscribeClass extends superClass {\n    @property({ attribute: false }) public hass?: HomeAssistant;\n\n    // we wait with subscribing till these properties are set on the host element\n    protected hassSubscribeRequiredHostProps?: string[];\n\n    private __unsubs?: (UnsubscribeFunc | Promise<UnsubscribeFunc>)[];\n\n    public connectedCallback() {\n      super.connectedCallback();\n      this._checkSubscribed();\n    }\n\n    public disconnectedCallback() {\n      super.disconnectedCallback();\n      if (this.__unsubs) {\n        while (this.__unsubs.length) {\n          const unsub = this.__unsubs.pop()!;\n          if (unsub instanceof Promise) {\n            unsub.then((unsubFunc) => unsubFunc());\n          } else {\n            unsub();\n          }\n        }\n        this.__unsubs = undefined;\n      }\n    }\n\n    protected updated(changedProps: PropertyValues) {\n      super.updated(changedProps);\n      if (changedProps.has(\"hass\")) {\n        this._checkSubscribed();\n        return;\n      }\n      if (!this.hassSubscribeRequiredHostProps) {\n        return;\n      }\n      for (const key of changedProps.keys()) {\n        if (this.hassSubscribeRequiredHostProps.includes(key as string)) {\n          this._checkSubscribed();\n          return;\n        }\n      }\n    }\n\n    protected hassSubscribe(): (UnsubscribeFunc | Promise<UnsubscribeFunc>)[] {\n      return [];\n    }\n\n    private _checkSubscribed(): void {\n      if (\n        this.__unsubs !== undefined ||\n        !(this as unknown as Element).isConnected ||\n        this.hass === undefined ||\n        this.hassSubscribeRequiredHostProps?.some(\n          (prop) => this[prop] === undefined\n        )\n      ) {\n        return;\n      }\n      this.__unsubs = this.hassSubscribe();\n    }\n  }\n  return SubscribeClass;\n};\n","/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport '../../elevation/elevation.js';\n\nimport {html, nothing} from 'lit';\nimport {property} from 'lit/decorators.js';\n\nimport {ARIAMixinStrict} from '../../internal/aria/aria.js';\n\nimport {Chip} from './chip.js';\n\n/**\n * An assist chip component.\n */\nexport class AssistChip extends Chip {\n  @property({type: Boolean}) elevated = false;\n  @property() href = '';\n  /**\n   * The filename to use when downloading the linked resource.\n   * If not specified, the browser will determine a filename.\n   * This is only applicable when the chip is used as a link (`href` is set).\n   */\n  @property() download = '';\n  @property() target: '_blank' | '_parent' | '_self' | '_top' | '' = '';\n\n  protected get primaryId() {\n    return this.href ? 'link' : 'button';\n  }\n\n  protected override get rippleDisabled() {\n    // Link chips cannot be disabled\n    return !this.href && (this.disabled || this.softDisabled);\n  }\n\n  protected override getContainerClasses() {\n    return {\n      ...super.getContainerClasses(),\n      // Link chips cannot be disabled\n      disabled: !this.href && (this.disabled || this.softDisabled),\n      elevated: this.elevated,\n      link: !!this.href,\n    };\n  }\n\n  protected override renderPrimaryAction(content: unknown) {\n    const {ariaLabel} = this as ARIAMixinStrict;\n    if (this.href) {\n      return html`\n        <a\n          class=\"primary action\"\n          id=\"link\"\n          aria-label=${ariaLabel || nothing}\n          href=${this.href}\n          download=${this.download || nothing}\n          target=${this.target || nothing}\n          >${content}</a\n        >\n      `;\n    }\n\n    return html`\n      <button\n        class=\"primary action\"\n        id=\"button\"\n        aria-label=${ariaLabel || nothing}\n        aria-disabled=${this.softDisabled || nothing}\n        ?disabled=${this.disabled && !this.alwaysFocusable}\n        type=\"button\"\n        >${content}</button\n      >\n    `;\n  }\n\n  protected override renderOutline() {\n    if (this.elevated) {\n      return html`<md-elevation part=\"elevation\"></md-elevation>`;\n    }\n\n    return super.renderOutline();\n  }\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n// Generated stylesheet for ./chips/internal/assist-styles.css.\nimport {css} from 'lit';\nexport const styles = css`:host{--_container-height: var(--md-assist-chip-container-height, 32px);--_disabled-label-text-color: var(--md-assist-chip-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-assist-chip-disabled-label-text-opacity, 0.38);--_elevated-container-color: var(--md-assist-chip-elevated-container-color, var(--md-sys-color-surface-container-low, #f7f2fa));--_elevated-container-elevation: var(--md-assist-chip-elevated-container-elevation, 1);--_elevated-container-shadow-color: var(--md-assist-chip-elevated-container-shadow-color, var(--md-sys-color-shadow, #000));--_elevated-disabled-container-color: var(--md-assist-chip-elevated-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_elevated-disabled-container-elevation: var(--md-assist-chip-elevated-disabled-container-elevation, 0);--_elevated-disabled-container-opacity: var(--md-assist-chip-elevated-disabled-container-opacity, 0.12);--_elevated-focus-container-elevation: var(--md-assist-chip-elevated-focus-container-elevation, 1);--_elevated-hover-container-elevation: var(--md-assist-chip-elevated-hover-container-elevation, 2);--_elevated-pressed-container-elevation: var(--md-assist-chip-elevated-pressed-container-elevation, 1);--_focus-label-text-color: var(--md-assist-chip-focus-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-label-text-color: var(--md-assist-chip-hover-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-color: var(--md-assist-chip-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-assist-chip-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-assist-chip-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_label-text-font: var(--md-assist-chip-label-text-font, var(--md-sys-typescale-label-large-font, var(--md-ref-typeface-plain, Roboto)));--_label-text-line-height: var(--md-assist-chip-label-text-line-height, var(--md-sys-typescale-label-large-line-height, 1.25rem));--_label-text-size: var(--md-assist-chip-label-text-size, var(--md-sys-typescale-label-large-size, 0.875rem));--_label-text-weight: var(--md-assist-chip-label-text-weight, var(--md-sys-typescale-label-large-weight, var(--md-ref-typeface-weight-medium, 500)));--_pressed-label-text-color: var(--md-assist-chip-pressed-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-color: var(--md-assist-chip-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-opacity: var(--md-assist-chip-pressed-state-layer-opacity, 0.12);--_disabled-outline-color: var(--md-assist-chip-disabled-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-outline-opacity: var(--md-assist-chip-disabled-outline-opacity, 0.12);--_focus-outline-color: var(--md-assist-chip-focus-outline-color, var(--md-sys-color-on-surface, #1d1b20));--_outline-color: var(--md-assist-chip-outline-color, var(--md-sys-color-outline, #79747e));--_outline-width: var(--md-assist-chip-outline-width, 1px);--_disabled-leading-icon-color: var(--md-assist-chip-disabled-leading-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-leading-icon-opacity: var(--md-assist-chip-disabled-leading-icon-opacity, 0.38);--_focus-leading-icon-color: var(--md-assist-chip-focus-leading-icon-color, var(--md-sys-color-primary, #6750a4));--_hover-leading-icon-color: var(--md-assist-chip-hover-leading-icon-color, var(--md-sys-color-primary, #6750a4));--_leading-icon-color: var(--md-assist-chip-leading-icon-color, var(--md-sys-color-primary, #6750a4));--_icon-size: var(--md-assist-chip-icon-size, 18px);--_pressed-leading-icon-color: var(--md-assist-chip-pressed-leading-icon-color, var(--md-sys-color-primary, #6750a4));--_container-shape-start-start: var(--md-assist-chip-container-shape-start-start, var(--md-assist-chip-container-shape, var(--md-sys-shape-corner-small, 8px)));--_container-shape-start-end: var(--md-assist-chip-container-shape-start-end, var(--md-assist-chip-container-shape, var(--md-sys-shape-corner-small, 8px)));--_container-shape-end-end: var(--md-assist-chip-container-shape-end-end, var(--md-assist-chip-container-shape, var(--md-sys-shape-corner-small, 8px)));--_container-shape-end-start: var(--md-assist-chip-container-shape-end-start, var(--md-assist-chip-container-shape, var(--md-sys-shape-corner-small, 8px)));--_leading-space: var(--md-assist-chip-leading-space, 16px);--_trailing-space: var(--md-assist-chip-trailing-space, 16px);--_icon-label-space: var(--md-assist-chip-icon-label-space, 8px);--_with-leading-icon-leading-space: var(--md-assist-chip-with-leading-icon-leading-space, 8px)}@media(forced-colors: active){.link .outline{border-color:ActiveText}}\n`;\n"],"names":["getEntityContext","stateObj","entities","devices","areas","floors","entry","entity_id","getEntityEntryContext","entity","device","area","floor","deviceId","device_id","undefined","areaId","area_id","floorId","floor_id","HaAssistChip","AssistChip","renderOutline","this","filled","html","super","getContainerClasses","active","renderPrimaryContent","renderLeadingIcon","label","renderTrailingIcon","args","styles","sharedStyles","elevatedStyles","css","type","Boolean","reflect","rowRenderer","item","primary","secondary","nothing","KNOWN_TYPES","Set","UNIQUE_TYPES","formatOptionValue","text","HaEntityNamePicker","LitElement","render","value","_items","options","_getOptions","entityId","validTypes","_validTypes","_moveItem","disabled","repeat","idx","_formatItem","isValid","has","_removeItem","_editItem","_addItem","hass","localize","_opened","_onClosed","_onOpened","stopPropagation","_container","autofocus","required","length","_openedChanged","_comboBoxValueChanged","_filterChanged","_renderHelper","helper","ev","_editIndex","_comboBox","focus","open","parseInt","currentTarget","dataset","_toItems","detail","items","initialItem","initialValue","filteredItems","_filterSelectedOptions","push","_customNameOption","setInputValue","input","filter","toLowerCase","currentItem","currentValue","fuseOptions","keys","isCaseSensitive","minMatchCharLength","Math","min","threshold","ignoreDiacritics","Fuse","search","map","result","oldIndex","newIndex","newValue","concat","element","splice","_setValue","updateComplete","target","startsWith","endsWith","slice","parseOptionValue","_toValue","fireEvent","memoizeOne","states","add","context","types","name","formatEntityName","field_label","ensureArray","current","excludedValues","option","attribute","HaSelectorEntityName","SubscribeMixin","selector","entity_name","default_name","superClass","SubscribeClass","connectedCallback","_checkSubscribed","disconnectedCallback","__unsubs","unsub","pop","Promise","then","unsubFunc","updated","changedProps","hassSubscribeRequiredHostProps","key","includes","hassSubscribe","isConnected","some","prop","Chip","primaryId","href","rippleDisabled","softDisabled","elevated","link","renderPrimaryAction","content","ariaLabel","download","alwaysFocusable","constructor","__decorate","property"],"mappings":"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"}