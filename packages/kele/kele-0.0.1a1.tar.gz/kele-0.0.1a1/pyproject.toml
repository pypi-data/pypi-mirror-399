[project]
name = "kele"

description = "æ¨ç†å¼•æ“"
authors = [
  { name = "Bingqian Li" },
  { name = "BoYang Zhang" },
  { name = "Weiming Hong" },
  { name = "Hao Zhang" },
  { name = "Yi Zhou" }
]

maintainers = [
  { name = "Bingqian Li", email = "libq2022@alumni.shanghaitech.edu.cn" },
  { name = "Yi Zhou", email = "yi_zhou@ustc.edu.cn" }
]

readme = {file = "README.md", content-type = "text/markdown"}

license = {text = "BSD-3-Clause"}

dynamic = ["version"]

requires-python = ">=3.13, <4.0"
dependencies = [
    "pyyaml>=6.0, <7.0",
    "pydantic>=2.0.0, <3.0",
    "polars>=1.32",
    "bidict>=0.23, <1.0",
    "sympy>=1.13, <2.0",
    "graphviz==0.20.3",
    "numpy>=2.3.3",
    "psutil>=7.0",
    "prometheus_client>=0.22",
    "tyro>=0.9, <2.0",
    "lark>=1.0, <2.0",
    "python-sat>=1.7.dev0, <2.0",
    "networkx>=3.5, <4.0",
    "pyvis>=0.3, <0.4",
    "dacite>=1.9, <2.0"
]

[dependency-groups]
mypy = [
    "mypy>=1.18.0,<2.0.0"
]
ruff = [
    "ruff>=0.11.7,<0.15.0"
]
docs = [
    "sphinx",
    "sphinx-rtd-theme"
]
dev = [
    "pytest>=9.0, <10.0",
    "pre-commit>=4.2.0,<5.0.0",
    "maturin>=1.0,<2.0",
]

[build-system]
requires = ["hatchling", "uv-dynamic-versioning", "hatchling-pyo3-plugin==0.1.1"]
build-backend = "hatchling.build"

[tool.hatch.version]
source = "uv-dynamic-versioning"

[tool.hatch.build.hooks.version]
path = "kele/_version.py"
template = '''
version = "{version}"
'''

[tool.hatch.build.targets.sdist]
exclude = ["tests", "docs", "examples"]

[tool.hatch.build.targets.wheel]
packages = ["kele"]
exclude = ["tests", "docs", "examples", "equality/_egg_equiv/**"]

[tool.hatch.build.targets.wheel.hooks.custom]

[tool.uv-dynamic-versioning]
pattern = "default-unprefixed"

[tool.hatch.build.hooks.pyo3]
profile = "release"

[tool.maturin]
bindings = "pyo3"
python-source = "."
module-name = "kele.egg_equiv"

[tool.check-wheel-contents]
ignore = ["W009", "W010"]
