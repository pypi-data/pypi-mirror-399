"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1871],{39037:function(e,t,s){s.r(t),s.d(t,{ClusterTable:function(){return O},Clusters:function(){return _},Status2Actions:function(){return V},enabledActions:function(){return W},handleVSCodeConnection:function(){return q}});var r=s(85893),l=s(67294),a=s(11163),n=s(55739),i=s(36989),c=s(41664),o=s.n(c),u=s(30803),d=s(37673),h=s(68764),x=s(23266),p=s(17324),m=s(94545),f=s(13626),j=s(60998);/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,j.Z)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),g=(0,j.Z)("SquareCode",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);s(9353);var y=s(92128),w=s(99307),b=s(23001),k=s(55988),N=s(88950),C=s(6378),S=s(36856);s(1272);var L=s(20546);let M=[{label:"Status",value:"status"},{label:"Cluster",value:"cluster"},{label:"User",value:"user"},{label:"Workspace",value:"workspace"},{label:"Infra",value:"infra"}],R=(e,t)=>{let s="",r="";return e>=0&&(s=e+"m",r=" "),t&&(s+="".concat(r,"(down)")),""===s&&(s="-"),s},E=(e,t)=>{if(e&&e.includes("@")){let s=e.split("@")[0];return t&&t!==s?"".concat(s," (").concat(t,")"):s}let s=e||t||"N/A";return t&&t!==s?"".concat(s," (").concat(t,")"):s},I=e=>{if(!e||0===e)return"-";let t=e=Math.floor(e),s="",r=0;for(let e of[{value:31536e3,label:"y"},{value:2592e3,label:"mo"},{value:86400,label:"d"},{value:3600,label:"h"},{value:60,label:"m"},{value:1,label:"s"}])if(t>=e.value&&r<2){let l=Math.floor(t/e.value);s+="".concat(l).concat(e.label," "),t%=e.value,r++}return s.trim()||"0s"};function _(){let e=(0,a.useRouter)(),[t,s]=(0,l.useState)(!1),c=l.useRef(null),[u,d]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!1),[j,v]=(0,l.useState)(null),[g,w]=(0,l.useState)(()=>!!e.isReady&&"true"===e.query.history),[k,L]=(0,l.useState)(!0),[R,I]=(0,l.useState)(()=>{if(e.isReady){let t=e.query.historyDays;if(t&&"string"==typeof t&&["1","5","10","30"].includes(t))return parseInt(t)}return 1}),_=(0,b.X)(),[q,H]=(0,l.useState)([]),[W,F]=(0,l.useState)({status:[],cluster:[],user:[],workspace:[],infra:[]}),[V,A]=(0,l.useState)(!1),[P,Z]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(e.isReady){T();let t="true"===e.query.history;g!==t&&(L(!1),w(t),setTimeout(()=>L(!0),50));let s=e.query.historyDays;if(s&&"string"==typeof s&&["1","5","10","30"].includes(s)){let e=parseInt(s);R!==e&&I(e)}}},[e.isReady,e.query.history,e.query.historyDays]),(0,l.useEffect)(()=>{(async()=>{try{await S.ZP.preloadForPage("clusters");let e=await C.default.get(p.getWorkspaces),t=Object.keys(e),s=await C.default.get(x.getClusters),r=[...new Set(s.map(e=>e.workspace||"default").filter(e=>e))],l=new Set(t);r.includes("default")&&l.has("default"),r.forEach(e=>l.add(e));let a=[...new Set(s.map(e=>({userId:e.user_hash||e.user,username:e.user})).filter(e=>e.userId)).values()],n=new Map;a.forEach(e=>{n.set(e.userId,{userId:e.userId,username:e.username,display:E(e.username,e.userId)})}),A(!0),Z(new Date)}catch(e){console.error("Error fetching data for filters:",e),A(!0),Z(new Date)}})()},[]);let B=t=>{let s={...e.query},r=[],l=[],a=[];t.map((e,t)=>{var s;r.push(null!==(s=e.property.toLowerCase())&&void 0!==s?s:""),l.push(e.operator),a.push(e.value)}),s.property=r,s.operator=l,s.value=a,e.replace({pathname:e.pathname,query:s},void 0,{shallow:!0})},U=t=>{let s={...e.query};s.history=t.toString(),e.replace({pathname:e.pathname,query:s},void 0,{shallow:!0})},Q=t=>{let s={...e.query};s.historyDays=t.toString(),e.replace({pathname:e.pathname,query:s},void 0,{shallow:!0})},T=()=>{let t={...e.query},s=t.property,r=t.operator,l=t.value;if(void 0===s)return;let a=[],n=Array.isArray(s)?s.length:1,i=new Map;if(i.set("",""),i.set("status","Status"),i.set("cluster","Cluster"),i.set("user","User"),i.set("workspace","Workspace"),i.set("infra","Infra"),1===n)a.push({property:i.get(s),operator:r,value:l});else for(let e=0;e<n;e++)a.push({property:i.get(s[e]),operator:r[e],value:l[e]});H(a)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-1 min-h-[20px]",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(o(),{href:"/clusters",className:"text-sky-blue hover:underline leading-none text-base",children:"Sky Clusters"})}),(0,r.jsx)("div",{className:"w-full sm:w-auto",children:(0,r.jsx)(D,{propertyList:M,valueList:W,setFilters:H,updateURLParams:B,placeholder:"Filter clusters",filters:q})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:g,onChange:e=>{let t=e.target.checked;w(t),U(t)},className:"sr-only"}),(0,r.jsx)("div",{className:"relative inline-flex h-5 w-9 items-center rounded-full ".concat(k?"transition-colors":""," ").concat(g?"bg-sky-600":"bg-gray-300"),children:(0,r.jsx)("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white ".concat(k?"transition-transform":""," ").concat(g?"translate-x-5":"translate-x-1")})}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Show history"})]}),g&&(0,r.jsxs)(N.Ph,{value:R.toString(),onValueChange:e=>{let t=parseInt(e);I(t),Q(t)},children:[(0,r.jsx)(N.i4,{className:"w-24 h-8 text-xs",children:(0,r.jsx)(N.ki,{})}),(0,r.jsxs)(N.Bw,{children:[(0,r.jsx)(N.Ql,{value:"1",children:"1 day"}),(0,r.jsx)(N.Ql,{value:"5",children:"5 days"}),(0,r.jsx)(N.Ql,{value:"10",children:"10 days"}),(0,r.jsx)(N.Ql,{value:"30",children:"30 days"})]})]})]}),t&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(n.Z,{size:15,className:"mt-0"}),(0,r.jsx)("span",{className:"ml-2 text-gray-500 text-sm",children:"Loading..."})]}),!t&&P&&(0,r.jsx)(i.$3,{timestamp:P}),(0,r.jsxs)("button",{onClick:()=>{C.default.invalidate(x.getClusters),C.default.invalidate(p.getWorkspaces),g&&C.default.invalidate(x.uR),A(!1),S.ZP.preloadForPage("clusters",{force:!0}).then(()=>{A(!0),Z(new Date),c.current&&c.current()})},disabled:t,className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:[(0,r.jsx)(f.Z,{className:"h-4 w-4 mr-1.5"}),!_&&(0,r.jsx)("span",{children:"Refresh"})]})]})]}),(0,r.jsx)(z,{filters:q,setFilters:H,updateURLParams:B}),(0,r.jsx)(O,{refreshInterval:i.yc,setLoading:s,refreshDataRef:c,filters:q,showHistory:g,historyDays:R,onOpenSSHModal:e=>{v(e),d(!0)},onOpenVSCodeModal:e=>{v(e),m(!0)},setOptionValues:F,preloadingComplete:V}),(0,r.jsx)(y.Oh,{isOpen:u,onClose:()=>d(!1),cluster:j}),(0,r.jsx)(y._R,{isOpen:h,onClose:()=>m(!1),cluster:j})]})}function O(e){let{refreshInterval:t,setLoading:s,refreshDataRef:a,filters:c,showHistory:p,historyDays:f,onOpenSSHModal:j,onOpenVSCodeModal:v,setOptionValues:g,preloadingComplete:y}=e,[b,N]=(0,l.useState)([]),[S,M]=(0,l.useState)({key:null,direction:"ascending"}),[E,_]=(0,l.useState)(!1),[O,q]=(0,l.useState)(!0),[H,W]=(0,l.useState)(1),[F,D]=(0,l.useState)(10),z=e=>{let t={status:[],cluster:[],user:[],workspace:[],infra:[]},s=(e,t)=>{e.includes(t)||e.push(t)};return e.map(e=>{s(t.status,e.status),s(t.cluster,e.cluster),s(t.user,e.user),s(t.workspace,e.workspace),s(t.infra,e.infra)}),t},A=l.useCallback(async()=>{s(!0),_(!0);try{let e=await C.default.get(x.getClusters);if(p){let t=[];try{t=await C.default.get(x.uR,[null,f])}catch(e){console.error("Error fetching cluster history:",e)}let s=e.map(e=>({...e,isHistorical:!1})),r=t.map(e=>({...e,isHistorical:!0})),l=[...s];r.forEach(t=>{e.some(e=>e.cluster_hash===t.cluster_hash)||l.push(t)}),g(z(l)),N(l)}else{let t=e.map(e=>({...e,isHistorical:!1}));g(z(t)),N(t)}}catch(e){console.error("Error fetching cluster data:",e),g(z([])),N([])}s(!1),_(!1),q(!1)},[s,p,f,g]),P=(e,t)=>{var s;let{property:r,operator:l,value:a}=t;if(!a)return!0;if(!r){let t=a.toLowerCase();return Object.values(e).some(e=>null==e?void 0:e.toString().toLowerCase().includes(t))}let n=null===(s=e[r.toLowerCase()])||void 0===s?void 0:s.toString().toLowerCase(),i=a.toString().toLowerCase();switch(l){case"=":return n===i;case":":return null==n?void 0:n.includes(i);default:return!0}},Z=l.useMemo(()=>{let e=0===c.length?b:b.filter(e=>{let t=null;for(let s=0;s<c.length;s++){let r=P(e,c[s]);t=null===t?r:t&&r}return t});return(0,m.R0)(e,S.key,S.direction)},[b,S,c]);l.useEffect(()=>{a&&(a.current=A)},[a,A]),(0,l.useEffect)(()=>{N([]);let e=!0;if(y){A();let s=setInterval(()=>{e&&"visible"===window.document.visibilityState&&A()},t);return()=>{e=!1,clearInterval(s)}}return()=>{e=!1}},[t,A,y]),(0,l.useEffect)(()=>{W(1)},[b.length]);let B=e=>{let t="ascending";S.key===e&&"ascending"===S.direction&&(t="descending"),M({key:e,direction:t})},U=e=>S.key===e?"ascending"===S.direction?" ↑":" ↓":"",Q=Math.ceil(Z.length/F),T=(H-1)*F,X=T+F,$=Z.slice(T,X);return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Zb,{children:(0,r.jsx)("div",{className:"overflow-x-auto rounded-lg",children:(0,r.jsxs)(h.iA,{className:"min-w-full",children:[(0,r.jsx)(h.xD,{children:(0,r.jsxs)(h.SC,{children:[(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("status"),children:["Status",U("status")]}),(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("cluster"),children:["Cluster",U("cluster")]}),(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("user"),children:["User",U("user")]}),(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("workspace"),children:["Workspace",U("workspace")]}),(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("infra"),children:["Infra",U("infra")]}),(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("resources_str"),children:["Resources",U("resources_str")]}),(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("time"),children:["Started",U("time")]}),p&&(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("duration"),children:["Duration",U("duration")]}),(0,r.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>B("autostop"),children:["Autostop",U("autostop")]}),(0,r.jsx)(h.ss,{className:"md:sticky md:right-0 md:bg-white",children:"Actions"})]})}),(0,r.jsx)(h.RM,{children:E||!y?(0,r.jsx)(h.SC,{children:(0,r.jsx)(h.pj,{colSpan:9,className:"text-center py-6 text-gray-500",children:(0,r.jsxs)("div",{className:"flex justify-center items-center",children:[(0,r.jsx)(n.Z,{size:20,className:"mr-2"}),(0,r.jsx)("span",{children:"Loading..."})]})})}):$.length>0?$.map((e,t)=>(0,r.jsxs)(h.SC,{children:[(0,r.jsx)(h.pj,{children:(0,r.jsx)(k.j,{name:"clusters.table.status.badge",context:e,fallback:(0,r.jsx)(w.OE,{status:e.status,statusTooltip:e.statusTooltip})})}),(0,r.jsx)(h.pj,{children:(0,r.jsx)(o(),{href:"/clusters/".concat(e.isHistorical?e.cluster_hash:e.cluster||e.name),className:"text-blue-600",children:e.cluster||e.name})}),(0,r.jsx)(h.pj,{children:(0,r.jsx)(L.H,{username:e.user,userHash:e.user_hash})}),(0,r.jsx)(h.pj,{children:(0,r.jsx)(o(),{href:"/workspaces",className:"text-gray-700 hover:text-blue-600 hover:underline",children:e.workspace||"default"})}),(0,r.jsx)(h.pj,{children:(0,r.jsx)(i.Md,{content:e.full_infra||e.infra,className:"text-sm text-muted-foreground",children:(0,r.jsxs)("span",{children:[(0,r.jsx)(o(),{href:"/infra",className:"text-blue-600 hover:underline",children:e.cloud}),e.infra.includes("(")&&(0,r.jsx)("span",{children:" "+e.infra.substring(e.infra.indexOf("("))})]})})}),(0,r.jsx)(h.pj,{children:(0,r.jsx)(i.Md,{content:e.resources_str_full||e.resources_str,className:"text-sm text-muted-foreground",children:(0,r.jsx)("span",{children:e.resources_str})})}),(0,r.jsx)(h.pj,{children:(0,r.jsx)(i.Zg,{date:e.time})}),p&&(0,r.jsx)(h.pj,{children:I(e.duration)}),(0,r.jsx)(h.pj,{children:e.isHistorical?"-":R(e.autostop,e.to_down)}),(0,r.jsx)(h.pj,{className:"text-left md:sticky md:right-0 md:bg-white",children:!e.isHistorical&&(0,r.jsx)(V,{cluster:e.cluster,status:e.status,onOpenSSHModal:j,onOpenVSCodeModal:v})})]},t)):(0,r.jsx)(h.SC,{children:(0,r.jsx)(h.pj,{colSpan:9,className:"text-center py-6 text-gray-500",children:p?"No clusters found":"No active clusters"})})})]})})}),b.length>0&&(0,r.jsx)("div",{className:"flex justify-end items-center py-2 px-4 text-sm text-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:"Rows per page:"}),(0,r.jsxs)("div",{className:"relative inline-block",children:[(0,r.jsxs)("select",{value:F,onChange:e=>{D(parseInt(e.target.value,10)),W(1)},className:"py-1 pl-2 pr-6 appearance-none outline-none cursor-pointer border-none bg-transparent",style:{minWidth:"40px"},children:[(0,r.jsx)("option",{value:10,children:"10"}),(0,r.jsx)("option",{value:30,children:"30"}),(0,r.jsx)("option",{value:50,children:"50"}),(0,r.jsx)("option",{value:100,children:"100"}),(0,r.jsx)("option",{value:200,children:"200"})]}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-500 absolute right-0 top-1/2 transform -translate-y-1/2 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(0,r.jsx)("div",{children:"".concat(T+1," - ").concat(Math.min(X,Z.length)," of ").concat(Z.length)}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>{W(e=>Math.max(e-1,1))},disabled:1===H,className:"text-gray-500 h-8 w-8 p-0",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"chevron-left",children:(0,r.jsx)("path",{d:"M15 18l-6-6 6-6"})})}),(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>{W(e=>Math.min(e+1,Q))},disabled:H===Q||0===Q,className:"text-gray-500 h-8 w-8 p-0",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"chevron-right",children:(0,r.jsx)("path",{d:"M9 18l6-6-6-6"})})})]})]})})]})}let q=(e,t)=>{t&&t(e)},H=(e,t)=>{t?t(e):window.open("ssh://".concat(e))},W=e=>"RUNNING"===e?["connect","VSCode"]:[],F={connect:(0,r.jsx)(v,{className:"w-4 h-4 text-gray-500 inline-block"}),VSCode:(0,r.jsx)(g,{className:"w-4 h-4 text-gray-500 inline-block"})};function V(e){let{withLabel:t=!1,cluster:s,status:l,onOpenSSHModal:a,onOpenVSCodeModal:n}=e,c=W(l),o=(0,b.X)(),u=e=>{switch(e){case"connect":H(s,a);break;case"VSCode":q(s,n);break;default:return}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex items-center space-x-4",children:Object.entries(F).map(e=>{let s,l,[a,n]=e;switch(a){case"connect":s="Connect",l="Connect with SSH";break;case"VSCode":s="VSCode",l="Open in VS Code"}return(t||(s=""),c.includes(a))?(0,r.jsx)(i.WH,{content:l,className:"capitalize text-sm text-muted-foreground",children:(0,r.jsxs)("button",{onClick:()=>u(a),className:"text-sky-blue hover:text-sky-blue-bright font-medium inline-flex items-center",children:[n,!o&&(0,r.jsx)("span",{className:"ml-1.5",children:s})]})},a):(0,r.jsx)(i.WH,{content:l,className:"capitalize text-sm text-muted-foreground",children:(0,r.jsxs)("span",{className:"opacity-30 flex items-center cursor-not-allowed text-sm",title:a,children:[n,!o&&(0,r.jsx)("span",{className:"ml-1.5",children:s})]})},a)})})})}let D=e=>{let{propertyList:t=[],valueList:s,setFilters:a,updateURLParams:n,placeholder:i="Filter clusters",filters:c=[]}=e,o=(0,l.useRef)(null),u=(0,l.useRef)(null),[d,h]=(0,l.useState)(!1),[x,p]=(0,l.useState)(""),[m,f]=(0,l.useState)("status"),[j,v]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&o.current&&!o.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,l.useEffect)(()=>{let e=[],t=m||"";if(t.length>1){t=m[0].toUpperCase();for(let e=1;e<m.length;e++)t+=m[e]}let r=c.filter(e=>e.property===t).map(e=>e.value);if(s&&"object"==typeof s)switch(m){case"status":e=s.status.filter(e=>!r.find(t=>t===e))||[];break;case"user":e=s.user.filter(e=>!r.find(t=>t===e))||[];break;case"cluster":e=s.cluster.filter(e=>!r.find(t=>t===e))||[];break;case"workspace":e=s.workspace.filter(e=>!r.find(t=>t===e))||[];break;case"infra":e=s.infra.filter(e=>!r.find(t=>t===e))||[]}""!==x.trim()&&(e=e.filter(e=>e&&e.toString().toLowerCase().includes(x.toLowerCase()))),v(e)},[m,s,x,c]);let g=e=>{let s=t.find(t=>t.value===e);return s?s.label:e},y=e=>{a(t=>{let s=[...t,{property:g(m),operator:":",value:e}];return n(s),s}),h(!1),p(""),o.current.focus()};return(0,r.jsxs)("div",{className:"flex flex-row border border-gray-300 rounded-md overflow-visible",children:[(0,r.jsx)("div",{className:"border-r border-gray-300 flex-shrink-0",children:(0,r.jsxs)(N.Ph,{onValueChange:f,value:m,children:[(0,r.jsx)(N.i4,{"aria-label":"Filter Property",className:"focus:ring-0 focus:ring-offset-0 border-none rounded-l-md rounded-r-none w-20 sm:w-24 md:w-32 h-8 text-xs sm:text-sm",children:(0,r.jsx)(N.ki,{placeholder:"Status"})}),(0,r.jsx)(N.Bw,{children:t.map((e,t)=>(0,r.jsx)(N.Ql,{value:e.value,children:e.label},"property-item-".concat(t)))})]})}),(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)("input",{type:"text",ref:o,placeholder:i,value:x,onChange:e=>{p(e.target.value),d||h(!0)},onFocus:()=>{h(!0)},onKeyDown:e=>{"Enter"===e.key&&""!==x.trim()?(a(e=>{let t=[...e,{property:g(m),operator:":",value:x}];return n(t),t}),p(""),h(!1)):"Escape"===e.key&&(h(!1),o.current.blur())},className:"h-8 w-full sm:w-96 px-3 pr-8 text-sm border-none rounded-l-none rounded-r-md focus:ring-0 focus:outline-none",autoComplete:"off"}),x&&(0,r.jsx)("button",{onClick:()=>{p(""),h(!1)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",title:"Clear filter",tabIndex:-1,children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),d&&j.length>0&&(0,r.jsx)("div",{ref:u,className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",style:{zIndex:9999},children:j.map((e,t)=>(0,r.jsx)("div",{className:"px-3 py-2 cursor-pointer hover:bg-gray-50 text-sm ".concat(t!==j.length-1?"border-b border-gray-100":""),onClick:()=>y(e),children:(0,r.jsx)("span",{className:"text-sm text-gray-700",children:e})},"".concat(e,"-").concat(t)))})]})]})},z=e=>{let{filters:t=[],setFilters:s,updateURLParams:l}=e,a=e=>{s(t=>{let s=t.filter((t,s)=>s!==e);return l(s),s})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"flex items-center gap-4 py-2 px-2",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-content gap-2",children:[t.map((e,t)=>(0,r.jsx)(A,{filter:e,onRemove:()=>a(t)},"filteritem-".concat(t))),t.length>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{onClick:()=>{l([]),s([])},className:"rounded-full px-4 py-1 text-sm text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Clear filters"})})]})})})},A=e=>{let{filter:t,onRemove:s}=e;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center text-blue-600 bg-blue-100 px-1 py-1 rounded-full text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[(0,r.jsx)("span",{children:"".concat(t.property," ")}),(0,r.jsx)("span",{children:"".concat(t.operator," ")}),(0,r.jsx)("span",{children:" ".concat(t.value)})]}),(0,r.jsx)("button",{onClick:()=>s(),className:"p-0.5 ml-1 transform text-gray-400 hover:text-gray-600 bg-blue-500 hover:bg-blue-600 rounded-full flex flex-col items-center",title:"Clear filter",children:(0,r.jsx)("svg",{className:"h-3 w-3",fill:"none",stroke:"white",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:5,d:"M6 18L18 6M6 6l12 12"})})})]})})}},12003:function(e,t,s){s.d(t,{j:function(){return n}});var r=s(90512);let l=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=r.W,n=(e,t)=>s=>{var r;if((null==t?void 0:t.variants)==null)return a(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:n,defaultVariants:i}=t,c=Object.keys(n).map(e=>{let t=null==s?void 0:s[e],r=null==i?void 0:i[e];if(null===t)return null;let a=l(t)||l(r);return n[e][a]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return a(e,c,null==t?void 0:null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...l}=t;return Object.entries(l).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...i,...o}[t]):({...i,...o})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}}]);