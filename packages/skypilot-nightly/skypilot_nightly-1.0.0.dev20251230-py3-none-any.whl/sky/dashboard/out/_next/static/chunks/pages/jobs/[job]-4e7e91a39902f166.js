(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9315],{40479:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/jobs/[job]",function(){return t(88099)}])},1125:function(e,s,t){"use strict";t.d(s,{C:function(){return i}});var r=t(85893),n=t(67294),l=t(34209),a=t(84283);let o=e=>{if(!e||"string"!=typeof e)return e;let s=e.split("\n"),t=[];for(let e=0;e<s.length;e++){let r=s[e];if(""===r.trim()){let n=!1,l=0;for(let t=e-1;t>=0;t--){let e=s[t],r=e.trim();if(r&&e.match(/:\s*[|>]\s*$/)){n=!0;for(let e=t+1;e<s.length;e++){let t=s[e];if(t.trim()){l=t.search(/\S/);break}}break}if(r&&0===e.search(/\S/))break}if(n)for(let n=e+1;n<s.length;n++){let e=s[n];if(e.trim()){e.search(/\S/)>=l?t.push("  #YAML_BLANK_LINE_MARKER#"):t.push(r);break}}else t.push(r)}else t.push(r)}return t.join("\n")};function i(e){let{children:s,className:t=""}=e,i=(0,n.useRef)(null),c=o(s);(0,n.useEffect)(()=>{if(i.current){let e=i.current;setTimeout(()=>{let s;let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null);for(;s=t.nextNode();)s.textContent&&s.textContent.includes("#YAML_BLANK_LINE_MARKER#")&&(s.textContent=s.textContent.replace(/#YAML_BLANK_LINE_MARKER#/g,""))},0)}},[c]);let d={...a.mQ,'code[class*="language-"]':{...a.mQ['code[class*="language-"]'],whiteSpace:"pre !important"},'pre[class*="language-"]':{...a.mQ['pre[class*="language-"]'],whiteSpace:"pre !important"}};return(0,r.jsx)("div",{ref:i,className:t,children:(0,r.jsx)(l.Z,{language:"yaml",style:d,customStyle:{margin:0,padding:0,background:"transparent",fontSize:"0.875rem",fontFamily:'ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace'},wrapLines:!0,wrapLongLines:!0,showLineNumbers:!1,useInlineStyles:!0,children:c})})}},84303:function(e,s,t){"use strict";t.d(s,{_q:function(){return l},pJ:function(){return i}});var r=t(1272);let n={lineWidth:-1,quotingType:"'",forceQuotes:!1,noRefs:!0,sortKeys:!1,condenseFlow:!1,indent:2},l=e=>{if(!e)return"No YAML available";try{let s=r.ZP.load(e),t=r.ZP.dump(s,n).split("\n"),l=[],a=-1;for(let e=0;e<t.length;e++){let s=t[e],r=s.search(/\S/);0===r&&a>=0&&e>0&&l.push(""),l.push(s),a=r}return l.join("\n").trim()}catch(s){return console.error("YAML formatting error:",s),e}},a=e=>"string"==typeof e?e.substring(0,50)+"...":e&&e.name?"name: ".concat(e.name):e&&e.resources?"Task configuration":"YAML document",o=(e,s)=>{try{let t=r.ZP.load(e),l=r.ZP.dump(t,n).split("\n"),o=[],i=-1;for(let e=0;e<l.length;e++){let s=l[e],t=s.search(/\S/);0===t&&i>=0&&e>0&&o.push(""),o.push(s),i=t}return{index:s,content:o.join("\n").trim(),preview:a(t)}}catch(t){return console.error("YAML formatting error for document ".concat(s,":"),t),{index:s,content:e,preview:"Invalid YAML"}}},i=e=>{if(!e)return[];try{let s=[],t=e.split(/^---$/m);for(let e=0;e<t.length;e++){let r=t[e].trim();r&&""!==r&&s.push(r)}return(s.length>1?s.slice(1):s).map((e,s)=>o(e,s))}catch(s){return console.error("YAML formatting error:",s),[{index:0,content:e,preview:"Invalid YAML"}]}}},88099:function(e,s,t){"use strict";t.r(s);var r=t(85893),n=t(67294),l=t(55739),a=t(11163),o=t(37673),i=t(68969),c=t(41664),d=t.n(c),m=t(13626),x=t(16826),u=t(45895),h=t(6639),g=t(70282),f=t(27325),j=t(36989),b=t(99307),p=t(23001),N=t(9008),y=t.n(N),v=t(84303),L=t(20546),w=t(1125),_=t(6378),k=t(55988),C=t(21494),S=t(45697),E=t.n(S);function I(e){let{jobId:s,detailJobData:t,isLoadingControllerLogs:l,handleControllerLogsRefresh:a,setIsLoadingControllerLogs:c,setIsLoadingLogs:d,refreshControllerLogsFlag:g,poolsData:f}=e,b="skypilot-controller-logs-expanded",[p,N]=(0,n.useState)(()=>"true"===localStorage.getItem(b));return(0,r.jsx)("div",{id:"controller-logs-section",className:"mt-6",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 ".concat(p?"pt-4":"py-4"),children:[(0,r.jsxs)("button",{onClick:()=>{let e=!p;N(e),localStorage.setItem(b,String(e))},className:"flex items-center text-left focus:outline-none hover:text-gray-700 transition-colors duration-200",children:[p?(0,r.jsx)(u.Z,{className:"w-5 h-5 mr-2"}):(0,r.jsx)(h.Z,{className:"w-5 h-5 mr-2"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Controller Logs"}),(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Logs are not streaming; click refresh to fetch the latest logs.)"})]}),p&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j.WH,{content:"Download full controller logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:()=>(0,i.jh)({jobId:parseInt(Array.isArray(s)?s[0]:s),controller:!0}),className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})})}),(0,r.jsx)(j.WH,{content:"Refresh controller logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:a,disabled:l,className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(m.Z,{className:"w-4 h-4 ".concat(l?"animate-spin":"")})})})]})]}),p&&(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(T,{jobData:t,activeTab:"controllerlogs",setIsLoadingLogs:d,setIsLoadingControllerLogs:c,isLoadingLogs:!1,isLoadingControllerLogs:l,refreshFlag:g,poolsData:f})})]})})}function T(e){let{jobData:s,activeTab:t,setIsLoadingLogs:a,setIsLoadingControllerLogs:o,isLoadingLogs:c,isLoadingControllerLogs:m,refreshFlag:x,poolsData:p}=e,[N,y]=(0,n.useState)(!1),[_,S]=(0,n.useState)({}),[E,I]=(0,n.useState)(!1),[T,A]=(0,n.useState)(!1),Z=(0,n.useRef)(null),M=(0,n.useRef)(null),R=(0,n.useCallback)(e=>{let s="logs"===e?Z:M;if(s.current)for(let t of[()=>s.current.querySelector(".logs-container"),()=>s.current.querySelector('[class*="logs-container"]'),()=>s.current.querySelector('div[style*="overflow"]'),()=>s.current]){let s=t();if(s&&s.scrollHeight>s.clientHeight){s.scrollTop=s.scrollHeight,console.log("Auto-scrolled ".concat(e," to bottom"));break}}},[]),D=["PENDING","SUBMITTED","STARTING"].includes(s.status),F=["PENDING","SUBMITTED"].includes(s.status),H=["RECOVERING"].includes(s.status),W=e=>{S(s=>({...s,[e]:!s[e]}))},Y=async()=>{try{let e=(0,v.pJ)(s.dag_yaml),t="";t=1===e.length?e[0].content:e.length>1?e.map(e=>e.content).join("\n---\n"):s.dag_yaml,await navigator.clipboard.writeText(t),I(!0),setTimeout(()=>I(!1),2e3)}catch(e){console.error("Failed to copy YAML to clipboard:",e)}},P=async()=>{try{await navigator.clipboard.writeText(s.entrypoint),A(!0),setTimeout(()=>A(!1),2e3)}catch(e){console.error("Failed to copy command to clipboard:",e)}},B=(0,n.useMemo)(()=>({jobId:s.id,controller:!1}),[s.id]),q=(0,n.useMemo)(()=>({jobId:s.id,controller:!0}),[s.id]),J=(0,n.useCallback)(e=>{console.error("Error streaming logs:",e)},[]),O=(0,n.useCallback)(e=>{console.error("Error streaming controller logs:",e)},[]),{lines:K,isLoading:$,hasReceivedFirstChunk:z}=(0,C.V)({streamFn:i.NJ,streamArgs:B,enabled:"logs"===t&&!D&&!H,refreshTrigger:"logs"===t?x:0,onError:J}),{lines:G,isLoading:Q,hasReceivedFirstChunk:U}=(0,C.V)({streamFn:i.NJ,streamArgs:q,enabled:"controllerlogs"===t&&!F,refreshTrigger:"controllerlogs"===t?x:0,onError:O});return((0,n.useEffect)(()=>{a($)},[$,a]),(0,n.useEffect)(()=>{o(Q)},[Q,o]),(0,n.useEffect)(()=>{let e=()=>{("logs"===t&&K.length||"controllerlogs"===t&&G.length)&&R("logs"===t?"logs":"controllerlogs")};requestAnimationFrame(()=>{requestAnimationFrame(e)})},[t,K,G,R]),"logs"===t)?(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",ref:Z,children:D?(0,r.jsx)("div",{className:"bg-[#f7f7f7] flex items-center justify-center py-4 text-gray-500",children:(0,r.jsx)("span",{children:"Waiting for the job to start; refresh in a few moments."})}):H?(0,r.jsx)("div",{className:"bg-[#f7f7f7] flex items-center justify-center py-4 text-gray-500",children:(0,r.jsx)("span",{children:"Waiting for the job to recover; refresh in a few moments."})}):z||K.length?(0,r.jsx)(j.$B,{logs:K}):c?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)(l.Z,{size:20,className:"mr-2"}),(0,r.jsx)("span",{children:"Loading logs..."})]}):(0,r.jsx)(j.$B,{logs:K})}):"controllerlogs"===t?(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",ref:M,children:F?(0,r.jsx)("div",{className:"bg-[#f7f7f7] flex items-center justify-center py-4 text-gray-500",children:(0,r.jsx)("span",{children:"Waiting for the job controller process to start; refresh in a few moments."})}):U||G.length?(0,r.jsx)(j.$B,{logs:G,controller:!0}):m?(0,r.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,r.jsx)(l.Z,{size:20,className:"mr-2"}),(0,r.jsx)("span",{children:"Loading logs..."})]}):(0,r.jsx)(j.$B,{logs:G,controller:!0})}):(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Job ID (Name)"}),(0,r.jsxs)("div",{className:"text-base mt-1",children:[s.id," ",s.name?"(".concat(s.name,")"):""]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Status"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,r.jsx)(k.j,{name:"jobs.detail.status.badge",context:s,fallback:(0,r.jsx)(b.OE,{status:s.status})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"User"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,r.jsx)(L.H,{username:s.user,userHash:s.user_hash})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Workspace"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,r.jsx)(d(),{href:"/workspaces",className:"text-gray-700 hover:text-blue-600 hover:underline",children:s.workspace||"default"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Submitted"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.submitted_at?(0,j.xn)(s.submitted_at):"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Requested Resources"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.requested_resources||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Infra"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.infra?(0,r.jsx)(j.Md,{content:s.full_infra||s.infra,className:"text-sm text-muted-foreground",children:(0,r.jsxs)("span",{children:[(0,r.jsx)(d(),{href:"/infra",className:"text-blue-600 hover:underline",children:s.cloud||s.infra.split("(")[0].trim()}),s.infra.includes("(")&&(0,r.jsx)("span",{children:" "+s.infra.substring(s.infra.indexOf("("))})]})}):"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Resources"}),(0,r.jsx)("div",{className:"text-base mt-1",children:s.resources_str_full||s.resources_str||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Git Commit"}),(0,r.jsx)("div",{className:"text-base mt-1 flex items-center",children:s.git_commit&&"-"!==s.git_commit?(0,r.jsxs)("span",{className:"flex items-center mr-2",children:[s.git_commit,(0,r.jsx)(j.WH,{content:E?"Copied!":"Copy commit",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:async()=>{await navigator.clipboard.writeText(s.git_commit),I(!0),setTimeout(()=>I(!1),2e3)},className:"flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200 p-1 ml-2",children:E?(0,r.jsx)(g.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"})})})]}):(0,r.jsx)("span",{className:"text-gray-400",children:"-"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Pool"}),(0,r.jsx)("div",{className:"text-base mt-1",children:(0,j.os)(s.pool,s.pool_hash,p)})]}),(s.entrypoint||s.dag_yaml)&&(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"text-gray-600 font-medium text-base",children:"Entrypoint"}),s.entrypoint&&(0,r.jsx)(j.WH,{content:T?"Copied!":"Copy command",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:P,className:"flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200 p-1 ml-2",children:T?(0,r.jsx)(g.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"})})})]}),(0,r.jsxs)("div",{className:"space-y-4 mt-3",children:[s.entrypoint&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:(0,r.jsx)("code",{className:"text-sm text-gray-800 font-mono break-all",children:s.entrypoint})})}),s.dag_yaml&&"{}"!==s.dag_yaml&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center mb-2",children:[(0,r.jsxs)("button",{onClick:()=>{y(!N)},className:"flex items-center text-left focus:outline-none text-gray-700 hover:text-gray-900 transition-colors duration-200",children:[N?(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-1"}):(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-1"}),(0,r.jsx)("span",{className:"text-base",children:"Show SkyPilot YAML"})]}),(0,r.jsx)(j.WH,{content:E?"Copied!":"Copy YAML",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:Y,className:"flex items-center text-gray-500 hover:text-gray-700 transition-colors duration-200 p-1 ml-2",children:E?(0,r.jsx)(g.Z,{className:"w-4 h-4 text-green-600"}):(0,r.jsx)(f.Z,{className:"w-4 h-4"})})})]}),N&&(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3 max-h-96 overflow-y-auto",children:(()=>{let e=(0,v.pJ)(s.dag_yaml);return 0===e.length?(0,r.jsx)("div",{className:"text-gray-500",children:"No YAML available"}):1===e.length?(0,r.jsx)(w.C,{className:"whitespace-pre-wrap",children:e[0].content}):(0,r.jsx)("div",{className:"space-y-4",children:e.map((e,s)=>(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 last:border-b-0",children:[(0,r.jsx)("button",{onClick:()=>W(s),className:"flex items-center justify-between w-full text-left focus:outline-none",children:(0,r.jsxs)("div",{className:"flex items-center",children:[_[s]?(0,r.jsx)(u.Z,{className:"w-4 h-4 mr-2"}):(0,r.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Task ",s+1,": ",e.preview]})]})}),_[s]&&(0,r.jsx)("div",{className:"mt-3 ml-6",children:(0,r.jsx)(w.C,{className:"whitespace-pre-wrap",children:e.content})})]},s))})})()})]})]})]})]})}T.propTypes={jobData:E().shape({id:E().oneOfType([E().string,E().number]),name:E().oneOfType([E().string,E().number]),status:E().string,user:E().string,user_hash:E().string,workspace:E().string,submitted_at:E().oneOfType([E().string,E().number,E().instanceOf(Date)]),requested_resources:E().string,infra:E().string,full_infra:E().string,cloud:E().string,resources_str_full:E().string,resources_str:E().string,git_commit:E().string,pool:E().string,pool_hash:E().string,entrypoint:E().string,dag_yaml:E().string}),activeTab:E().string,setIsLoadingLogs:E().func,setIsLoadingControllerLogs:E().func,isLoadingLogs:E().bool,isLoadingControllerLogs:E().bool,refreshFlag:E().number,poolsData:E().array},s.default=function(){var e;let s=(0,a.useRouter)(),{job:t,tab:c}=s.query,[u,h]=(0,n.useState)(0),{jobData:g,loading:f}=(0,i.UA)(t,u),[b,N]=(0,n.useState)([]),[v,L]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!0),[S,E]=(0,n.useState)(!1),[A,Z]=(0,n.useState)(!1),[M,R]=(0,n.useState)(!1),[D,F]=(0,n.useState)(!1),[H,W]=(0,n.useState)(!1),[Y,P]=(0,n.useState)(0),[B,q]=(0,n.useState)(0),J=(0,p.X)();n.useEffect(()=>{!f&&w&&C(!1)},[f,w]),(0,n.useEffect)(()=>{(async function(){try{let e=await _.ZP.get(i.vs,[{}]);N(e.pools||[])}catch(e){console.error("Error fetching pools data:",e),N([])}})()},[]);let O=e=>{let s=document.getElementById(e);s&&s.scrollIntoView({behavior:"smooth"})};(0,n.useEffect)(()=>{F(!0)},[]),(0,n.useEffect)(()=>{if(!H){let e=new MutationObserver(()=>{let s=document.getElementById("logs-section"),t=document.getElementById("controller-logs-section");("logs"===c&&s||"controllerlogs"===c&&t)&&(W(!0),e.disconnect())});return e.observe(document.body,{childList:!0,subtree:!0}),()=>e.disconnect()}},[H,c]),(0,n.useEffect)(()=>{if(s.isReady&&D&&H&&!M){let e=setTimeout(()=>{"logs"===c?(O("logs-section"),R(!0)):"controllerlogs"===c&&(O("controller-logs-section"),R(!0))},800);return()=>clearTimeout(e)}},[s.isReady,c,M,D,H]),(0,n.useEffect)(()=>{R(!1),W(!1)},[c]);let K=async()=>{L(!0);try{h(e=>e+1),P(e=>e+1),q(e=>e+1)}catch(e){console.error("Error refreshing data:",e)}finally{L(!1)}};if(!s.isReady)return(0,r.jsx)("div",{children:"Loading..."});let $=null==g?void 0:null===(e=g.jobs)||void 0===e?void 0:e.find(e=>String(e.id)===String(t)),z=t?"Job: ".concat(t," | SkyPilot Dashboard"):"Job Details | SkyPilot Dashboard";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y(),{children:(0,r.jsx)("title",{children:z})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"text-base flex items-center",children:[(0,r.jsx)(d(),{href:"/jobs",className:"text-sky-blue hover:underline",children:"Managed Jobs"}),(0,r.jsx)("span",{className:"mx-2 text-gray-500",children:"â€º"}),(0,r.jsxs)(d(),{href:"/jobs/".concat(t),className:"text-sky-blue hover:underline",children:[t," ",(null==$?void 0:$.name)?"(".concat($.name,")"):""]})]}),(0,r.jsxs)("div",{className:"text-sm flex items-center",children:[(f||v||S||A)&&(0,r.jsxs)("div",{className:"flex items-center mr-4",children:[(0,r.jsx)(l.Z,{size:15,className:"mt-0"}),(0,r.jsx)("span",{className:"ml-2 text-gray-500",children:"Loading..."})]}),(0,r.jsx)(j.WH,{content:"Refresh",className:"text-muted-foreground",children:(0,r.jsxs)("button",{onClick:K,disabled:f||v,className:"text-sky-blue hover:text-sky-blue-bright font-medium inline-flex items-center h-8",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4 mr-1.5"}),!J&&(0,r.jsx)("span",{children:"Refresh"})]})})]})]}),f&&w?(0,r.jsxs)("div",{className:"flex items-center justify-center py-32",children:[(0,r.jsx)(l.Z,{size:20,className:"mr-2"}),(0,r.jsx)("span",{children:"Loading..."})]}):$?(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{id:"details-section",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)("div",{className:"flex items-center justify-between px-4 pt-4",children:(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Details"})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(T,{jobData:$,activeTab:"info",setIsLoadingLogs:E,setIsLoadingControllerLogs:Z,isLoadingLogs:S,isLoadingControllerLogs:A,refreshFlag:0,poolsData:b})})]})}),(0,r.jsx)(k.j,{name:"jobs.detail.gpu-metrics",context:{jobId:$.id,jobName:$.name,jobData:$,pool:$.pool,userHash:$.user_hash,infra:$.full_infra||$.infra},wrapperClassName:"mt-6"}),(0,r.jsx)("div",{id:"logs-section",className:"mt-6",children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Logs"}),(0,r.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:"(Logs are not streaming; click refresh to fetch the latest logs.)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(j.WH,{content:"Download full logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:()=>(0,i.jh)({jobId:parseInt(Array.isArray(t)?t[0]:t),controller:!1}),className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(x.Z,{className:"w-4 h-4"})})}),(0,r.jsx)(j.WH,{content:"Refresh logs",className:"text-muted-foreground",children:(0,r.jsx)("button",{onClick:()=>{P(e=>e+1)},disabled:S,className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:(0,r.jsx)(m.Z,{className:"w-4 h-4 ".concat(S?"animate-spin":"")})})})]})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(T,{jobData:$,activeTab:"logs",setIsLoadingLogs:E,setIsLoadingControllerLogs:Z,isLoadingLogs:S,isLoadingControllerLogs:A,refreshFlag:Y,poolsData:b})})]})}),(0,r.jsx)(k.j,{name:"jobs.detail.events",context:{jobId:$.id},wrapperClassName:"mt-6"}),(0,r.jsx)(I,{jobId:t,detailJobData:$,isLoadingControllerLogs:A,handleControllerLogsRefresh:()=>{q(e=>e+1)},setIsLoadingControllerLogs:Z,setIsLoadingLogs:E,refreshControllerLogsFlag:B,poolsData:b})]}):(0,r.jsx)("div",{className:"flex items-center justify-center py-32",children:(0,r.jsx)("span",{children:"Job not found"})})]})]})}},55988:function(e,s,t){"use strict";t.d(s,{j:function(){return l}});var r=t(85893);t(67294);var n=t(23800);function l(e){let{name:s,context:t={},fallback:l=null,wrapperClassName:a=""}=e,o=(0,n.dL)(s);return 0===o.length?l:(0,r.jsx)("div",{className:a||void 0,children:o.map(e=>{let s=e.component;return(0,r.jsx)(s,{...t},e.id)})})}}},function(e){e.O(0,[616,5739,6130,1272,754,6989,3850,8969,4083,2888,9774,179],function(){return e(e.s=40479)}),_N_E=e.O()}]);