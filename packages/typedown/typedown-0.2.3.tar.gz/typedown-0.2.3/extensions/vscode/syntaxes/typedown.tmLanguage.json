{
  "scopeName": "markdown.typedown.injection",
  "name": "Typedown Injection",
  "injectionSelector": "L:text.html.markdown",
  "patterns": [
    {
      "include": "#entity-block"
    },
    {
      "include": "#config-python-block"
    },
    {
      "include": "#spec-block"
    },
    {
      "include": "#model-block"
    },
    {
      "include": "#reference-inline"
    }
  ],
  "repository": {
    "entity-block": {
      "begin": "^(\\s*)(```)(entity:\\s*[a-zA-Z0-9_\\.]+)(.*)$",
      "beginCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" },
        "3": { "name": "entity.name.class.typedown" },
        "4": { "name": "meta.attribute.typedown" }
      },
      "end": "^(\\s*)(```)$",
      "endCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" }
      },
      "name": "meta.embedded.block.typedown",
      "patterns": [
        {
          "include": "source.yaml"
        }
      ]
    },
    "config-python-block": {
      "begin": "^(\\s*)(```)(config:python)(.*)$",
      "beginCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" },
        "3": { "name": "keyword.control.directive.typedown" },
        "4": { "name": "meta.attribute.typedown" }
      },
      "end": "^(\\s*)(```)$",
      "endCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" }
      },
      "name": "meta.embedded.block.python",
      "patterns": [
        {
          "include": "source.python"
        }
      ]
    },
    "spec-block": {
      "begin": "^(\\s*)(```)(spec)(.*)$",
      "beginCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" },
        "3": { "name": "keyword.control.directive.typedown" },
        "4": { "name": "meta.attribute.typedown" }
      },
      "end": "^(\\s*)(```)$",
      "endCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" }
      },
      "name": "meta.embedded.block.python",
      "patterns": [
        {
          "include": "source.python"
        }
      ]
    },
    "model-block": {
      "begin": "^(\\s*)(```)(model:[a-zA-Z0-9_\\.]+)(.*)$",
      "beginCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" },
        "3": { "name": "entity.name.class.typedown" },
        "4": { "name": "meta.attribute.typedown" }
      },
      "end": "^(\\s*)(```)$",
      "endCaptures": {
        "2": { "name": "markup.fenced_code.block.markdown" }
      },
      "name": "meta.embedded.block.python",
      "patterns": [
        {
          "include": "source.python"
        }
      ]
    },
    "reference-inline": {
      "match": "(\\[\\[)(.*?)(\\]\\])",
      "captures": {
        "1": { "name": "punctuation.definition.link.begin.typedown" },
        "2": { "name": "entity.name.reference.typedown" },
        "3": { "name": "punctuation.definition.link.end.typedown" }
      },
      "name": "markup.underline.link.typedown"
    }
  }
}
