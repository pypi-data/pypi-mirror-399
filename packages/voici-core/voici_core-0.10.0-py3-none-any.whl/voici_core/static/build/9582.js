"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[9582],{89582:(t,e,r)=>{r.r(e),r.d(e,{DEFAULT_LANGUAGE_CODE:()=>u,Gettext:()=>d,ITranslator:()=>_,ITranslatorConnector:()=>c,NullTranslator:()=>p,TranslationManager:()=>f,TranslatorConnector:()=>h,nullTranslator:()=>m,requestTranslationsAPI:()=>o});var n=r(41670),s=r(82780),a=r(31725),i=r(30470);const l="api/translations";async function o(t="",e="",r={},n=void 0){const s=null!=n?n:i.ServerConnection.makeSettings();t=t||`${s.appUrl}/${l}`;const o=a.URLExt.join(s.baseUrl,t),u=a.URLExt.join(o,e);if(!u.startsWith(o))throw new Error("Can only be used for translations requests");let c;try{c=await i.ServerConnection.makeRequest(u,r,s)}catch(t){throw new i.ServerConnection.NetworkError(t)}let h=await c.text();if(h.length>0)try{h=JSON.parse(h)}catch(t){console.error("Not a JSON response body.",c)}if(!c.ok)throw new i.ServerConnection.ResponseError(c,h.message||h);return h}const u="en",c=new s.Token("@jupyterlab/translation:ITranslatorConnector","A service to connect to the server translation endpoint.");class h extends n.DataConnector{constructor(t="",e){super(),this._translationsUrl=t,this._serverSettings=e}async fetch(t){var e;return o(this._translationsUrl,null!==(e=null==t?void 0:t.language)&&void 0!==e?e:"",{},this._serverSettings)}}const _=new s.Token("@jupyterlab/translation:ITranslator","A service to translate strings.");function g(t){return t.replace("-","_")}class d{constructor(t){t=t||{},this._defaults={domain:"messages",locale:document.documentElement.getAttribute("lang")||u,pluralFunc:function(t){return{nplurals:2,plural:1!=t?1:0}},contextDelimiter:String.fromCharCode(4),stringsPrefix:""},this._locale=(t.locale||this._defaults.locale).replace("_","-"),this._domain=g(t.domain||this._defaults.domain),this._contextDelimiter=t.contextDelimiter||this._defaults.contextDelimiter,this._stringsPrefix=t.stringsPrefix||this._defaults.stringsPrefix,this._pluralFuncs={},this._dictionary={},this._pluralForms={},t.messages&&(this._dictionary[this._domain]={},this._dictionary[this._domain][this._locale]=t.messages),t.pluralForms&&(this._pluralForms[this._locale]=t.pluralForms)}setContextDelimiter(t){this._contextDelimiter=t}getContextDelimiter(){return this._contextDelimiter}setLocale(t){this._locale=t.replace("_","-")}getLocale(){return this._locale}setDomain(t){this._domain=g(t)}getDomain(){return this._domain}setStringsPrefix(t){this._stringsPrefix=t}getStringsPrefix(){return this._stringsPrefix}static strfmt(t,...e){return t.replace(/%%/g,"%% ").replace(/%(\d+)/g,(function(t,r){return e[r-1]})).replace(/%% /g,"%")}loadJSON(t,e){if(!t[""]||!t[""].language||!t[""].pluralForms)throw new Error(`Wrong jsonData, it must have an empty key ("") with "language" and "pluralForms" information: ${t}`);e=g(e);let r=t[""],n=JSON.parse(JSON.stringify(t));delete n[""],this.setMessages(e||this._defaults.domain,r.language,n,r.pluralForms)}__(t,...e){return this.gettext(t,...e)}_n(t,e,r,...n){return this.ngettext(t,e,r,...n)}_p(t,e,...r){return this.pgettext(t,e,...r)}_np(t,e,r,n,...s){return this.npgettext(t,e,r,n,...s)}gettext(t,...e){return this.dcnpgettext("","",t,"",0,...e)}ngettext(t,e,r,...n){return this.dcnpgettext("","",t,e,r,...n)}pgettext(t,e,...r){return this.dcnpgettext("",t,e,"",0,...r)}npgettext(t,e,r,n,...s){return this.dcnpgettext("",t,e,r,n,...s)}dcnpgettext(t,e,r,n,s,...a){let i;t=g(t)||this._domain;let l=e?e+this._contextDelimiter+r:r,o={pluralForm:!1},u=!1,c=this._locale,h=this.expandLocale(this._locale);for(let e in h)if(c=h[e],u=this._dictionary[t]&&this._dictionary[t][c]&&this._dictionary[t][c][l],u=n?u&&this._dictionary[t][c][l].length>1:u&&1==this._dictionary[t][c][l].length,u){o.locale=c;break}if(u?i=this._dictionary[t][c][l]:(i=[r],o.pluralFunc=this._defaults.pluralFunc),!n)return this.t(i,s,o,...a);o.pluralForm=!0;let _=u?i:[r,n];return this.t(_,s,o,...a)}expandLocale(t){let e=[t],r=t.lastIndexOf("-");for(;r>0;)t=t.slice(0,r),e.push(t),r=t.lastIndexOf("-");return e}getPluralFunc(t){if(!new RegExp("^\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;n0-9_()])+").test(t))throw new Error(d.strfmt('The plural form "%1" is not valid',t));return new Function("n","let plural, nplurals; "+t+" return { nplurals: nplurals, plural: (plural === true ? 1 : (plural ? plural : 0)) };")}removeContext(t){return-1!==t.indexOf(this._contextDelimiter)?t.split(this._contextDelimiter)[1]:t}t(t,e,r,...n){if(!r.pluralForm)return this._stringsPrefix+d.strfmt(this.removeContext(t[0]),...n);let s;return r.pluralFunc?s=r.pluralFunc(e):(this._pluralFuncs[r.locale||""]||(this._pluralFuncs[r.locale||""]=this.getPluralFunc(this._pluralForms[r.locale||""])),s=this._pluralFuncs[r.locale||""](e)),(void 0===!s.plural||s.plural>s.nplurals||t.length<=s.plural)&&(s.plural=0),this._stringsPrefix+d.strfmt(this.removeContext(t[s.plural]),...[e].concat(n))}setMessages(t,e,r,n){t=g(t),n&&(this._pluralForms[e]=n),this._dictionary[t]||(this._dictionary[t]={}),this._dictionary[t][e]=r}}class p{constructor(t){this.languageCode=u,this._languageBundle=t}load(t){return this._languageBundle}}const m=new p(new class{__(t,...e){return this.gettext(t,...e)}_n(t,e,r,...n){return this.ngettext(t,e,r,...n)}_p(t,e,...r){return this.pgettext(t,e,...r)}_np(t,e,r,n,...s){return this.npgettext(t,e,r,n,...s)}gettext(t,...e){return d.strfmt(t,...e)}ngettext(t,e,r,...n){return d.strfmt(1==r?t:e,...[r].concat(n))}pgettext(t,e,...r){return d.strfmt(e,...r)}npgettext(t,e,r,n,...s){return this.ngettext(e,r,n,...s)}dcnpgettext(t,e,r,n,s,...a){return this.ngettext(r,n,s,...a)}});class f{constructor(t="",e,r,n){this._domainData={},this._translationBundles={},this._connector=null!=n?n:new h(t,r),this._stringsPrefix=e||"",this._englishBundle=new d({stringsPrefix:this._stringsPrefix}),this._currentLocale=u}get languageCode(){return this._currentLocale}async fetch(t){var e,r,n,s;let a;if(this._languageData=await this._connector.fetch({language:t}),this._languageData&&"default"===t)try{for(const t of Object.values(null!==(e=this._languageData.data)&&void 0!==e?e:{})){a=t[""].language;break}}catch(t){}this._currentLocale=("default"!==t?t:null!=a?a:u).replace("_","-"),this._domainData=null!==(n=null===(r=this._languageData)||void 0===r?void 0:r.data)&&void 0!==n?n:{};const i=null===(s=this._languageData)||void 0===s?void 0:s.message;i&&this._currentLocale!==u&&console.warn(i)}load(t){if(this._domainData){if(this._currentLocale==u)return this._englishBundle;if(!((t=g(t))in this._translationBundles)){let e=new d({domain:t,locale:this._currentLocale,stringsPrefix:this._stringsPrefix});if(t in this._domainData){const r=this._domainData[t][""],n={...this._domainData[t],"":{...r,pluralForms:r.plural_forms}};e.loadJSON(n,t)}this._translationBundles[t]=e}return this._translationBundles[t]}return this._englishBundle}}}}]);