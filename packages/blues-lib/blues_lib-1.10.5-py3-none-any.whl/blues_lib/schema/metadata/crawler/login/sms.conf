{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "the metadata of the llm engine",
  "type": "object", 
  "required": ["summary","browser","crawler"],
  "properties": {
    "tpl_id":{
      "type":"string",
      "pattern":"^[A-Za-z0-9.-_]+$",
      "$comment": "the instance id of the instance"
    },
    "summary": { "$ref":"#/$defs/summary" },
    "browser":{ "$ref":"#/$defs/browser" },
    "crawler":{ "$ref":"#/$defs/crawler" },
  },
  "additionalProperties": false,
  "$defs": {
    "summary":{
      "type":"object",
      "required":["type"],
      "properties":{
        "type":{
          "type":"string",
          "const":"URL"
        },
      }
    },
    
    "browser":{
      "type":"object",
      "required":["config","options"],
      "properties":{
        "config":{
          "type":["object","null"],
          "minProperties":1
        },
        "options":{
          "type":["object","null"],
          "minProperties":1
        }
      }
    },

    "crawler":{
      "type": "object",
      "required":["open","send","mail","input","submit","save","data"],
      "properties":{
        "open":{ "$ref":"#/$defs/behaviors" },
        "send":{ "$ref":"#/$defs/behaviors" },
        "mail":{ "$ref":"#/$defs/behaviors" },
        "input":{ "$ref":"#/$defs/behaviors" },
        "submit":{ "$ref":"#/$defs/behaviors" },
        "save":{ "$ref":"#/$defs/behaviors" },
        "data":{ "$ref":"#/$defs/data" },
      },
    },
    "behaviors":{
      "type": "array",
      "minItems": 1,
      "items":{
        "type": "object",
        "required": ["_kind"],
      },
    },
    "data":{
      "type": "object",
      "required":["_kind","loc_or_elem"],
      "properties":{
        "_kind":{
          "type":"string",
          "enum":["ele_presents","ele_absents"]
        },
        "loc_or_elem":{
          "type":"string",
          "minLength":1
        },
        "wait_time":{
          "type":"integer",
          "minimum":2
        }
      },
    },
  }
}