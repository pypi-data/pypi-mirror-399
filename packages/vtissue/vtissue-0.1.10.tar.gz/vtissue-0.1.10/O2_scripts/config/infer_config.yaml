data:
  input_anndata: "/n/scratch/users/a/ajn16/vtissue/data/data_preprocessed.h5ad" #mel1_preprocessed orion_preprocessed
  output_dir: "/n/scratch/users/a/ajn16/vtissue/results"
  save_modified_anndata: false
  group_by: "patch" #image patch

columns:
  image_id: "imageid"
  x_centroid: "X_centroid"
  y_centroid: "Y_centroid"
  #phenotype: "phenotype"

patching:
  enabled: true
  max_cells_per_patch: 1000
  grid_size: null
  overlap_fraction: 0

spatial:
  default_mpp: 0.32
  algorithm: "auto"
  n_jobs: -1

model:
  checkpoint_path: "/n/scratch/users/a/ajn16/vtissue/results/checkpoint_best.pt"

inference:
  enabled: true
  target_levels: ["node"]
  aggregate_method: "mean"
  batch_size: 1
  device: "cuda"
  precision: "fp32"
  cache_dir: "/n/scratch/users/a/ajn16/vtissue/results/inference_cache/"
  overwrite_input: true
  allow_gene_mismatch: false

# Gene usage analysis (model-derived per-gene usage scores)
gene_usage:
  enabled: false

prediction:
  enabled: false
  cell_type_column: "vt_pred_celltype"
  min_confidence: 0
  unknown_label: "UK"

expression:
  enabled: true
  markers: ['SOX10','KRT18','CD3D','ITGAX'] #CDH1 SOX10
  layer_name: "vt_expr_pred"

