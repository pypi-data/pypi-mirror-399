<section class="metrics">
<h2>System Metrics</h2>
<style>
.stats { display: flex; flex-direction: column; gap: 14px; margin: 18px 0 24px; }
.stats-row { display: grid; gap: 14px; }
.stats-row.primary { grid-template-columns: repeat(4, 1fr); }
.stats-row.dates { grid-template-columns: repeat(2, 1fr); }
.stat { background: var(--bg-card); padding: 14px 16px; border-radius: 8px; }
.stat.status-ok { background-color: rgba(var(--status-ok-rgb), 0.08); border-left: 4px solid rgb(var(--status-ok-rgb)); }
.stat.status-caution { background-color: rgba(var(--status-warn-rgb), 0.12); border-left: 4px solid rgb(var(--status-warn-rgb)); }
.stat.status-critical { background-color: rgba(var(--status-critical-rgb), 0.12); border-left: 4px solid rgb(var(--status-critical-rgb)); }
.stat .label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-label); margin-bottom: 6px; display: block; }
.stat .value { font-size: 1.35rem; font-weight: 600; }
.metrics .gaps-toggle {
  font-size: 0.85rem;
  color: var(--accent);
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  font-weight: 400;
}
.metrics .gaps-toggle:hover {
  text-decoration: underline;
}
.metrics-chart {
  margin: 1rem 0;
  overflow: hidden;
}
.metrics-chart canvas {
  width: 100% !important;
  height: 100% !important;
}
.metrics-view-toggle {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  align-items: center;
}
.metrics-view-toggle .gaps-toggle.active {
  font-weight: 600;
}
@media (max-width: 640px) {
  .stats-row.primary { grid-template-columns: repeat(2, 1fr); }
  .stats-row.dates { grid-template-columns: 1fr; }
}
</style>

<div class="stats">
  <div class="stats-row primary">
    <div class="stat">
      <span class="label">Uptime</span>
      <span class="value" id="uptime-value">–</span>
    </div>
    <div class="stat">
      <span class="label">Load Average</span>
      <span class="value" id="load-value">–</span>
    </div>
    <div class="stat">
      <span class="label">Memory Usage</span>
      <span class="value" id="memory-value">–</span>
    </div>
    <div class="stat">
      <span class="label">Temperature</span>
      <span class="value" id="temp-value">–</span>
    </div>
  </div>
  <div class="stats-row dates">
    <div class="stat">
      <span class="label">Disk Usage</span>
      <span class="value" id="disk-value">–</span>
    </div>
    <div class="stat">
      <span class="label">NFS Storage</span>
      <span class="value" id="storage-value">–</span>
    </div>
  </div>
</div>

<div class="metrics-history">
  <div class="metrics-view-toggle" data-metrics="view-toggle" style="display: none;">
    <button type="button" class="gaps-toggle" data-metrics="view-table">Table</button>
    <button type="button" class="gaps-toggle" data-metrics="view-chart">Chart</button>
    <select class="gaps-toggle" data-metrics="metric-select" style="display: none;">
      <option value="cpu_memory">CPU + Memory</option>
      <option value="cpu_percent">CPU %</option>
      <option value="memory_percent">Memory %</option>
      <option value="disk_io">Disk I/O</option>
      <option value="net_io">Network I/O</option>
      <option value="temp_c">Temperature</option>
      <option value="load_1min">Load Average</option>
      <option value="battery_percent">Battery %</option>
    </select>
    <select class="gaps-toggle" data-metrics="period-select" style="display: none;">
    </select>
  </div>
  
  <div class="metrics-chart" data-metrics="chart-container" style="display: none;">
    <canvas data-metrics="chart"></canvas>
  </div>
  
  <div data-metrics="table-container" style="display: none;">
    <p class="muted" data-metrics="history-status">Loading metrics history…</p>
    <table>
      <thead>
        <tr>
          <th>Timestamp</th>
          <th>CPU %</th>
          <th>Memory %</th>
          <th>Disk Read MB/min</th>
          <th>Disk Write MB/min</th>
          <th>Net RX MB/min</th>
          <th>Net TX MB/min</th>
          <th>Load</th>
          <th>Temp °C</th>
          <th>Battery %</th>
          <th>Source</th>
        </tr>
      </thead>
      <tbody data-metrics="rows"></tbody>
    </table>
    <button type="button" class="gaps-toggle" data-metrics="toggle">Show more</button>
  </div>
</div>
</section>
