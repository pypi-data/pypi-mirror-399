[tool.ruff]
line-length = 79

# Excluir carpetas y archivos que no deben ser analizados.
# Es buena práctica excluir cachés, entornos virtuales y archivos autogenerados.
exclude = [
    ".ruff_cache",
    "__pycache__",
    "*.ipynb",
    "manual_sandbox/*",
    ".venv",
    "venv",
]

[tool.ruff.lint]
# Selección de reglas a aplicar.
# D: pydocstyle (documentación)
# C4: flake8-comprehensions (comprensiones eficientes)
# T20: flake8-print (evitar prints)
# PYI: flake8-pyi (buenas prácticas en stubs)
select = ["E", "F", "UP", "B", "SIM", "I", "D", "C4", "T20", "PYI"]

# Ignorar reglas específicas. F401 (unused import) a menudo es problemático
# ignore = ["F401"]

# Habilitar la corrección automática para todas las reglas que lo soporten.
fixable = ["ALL"]

# Reglas específicas que no deben ser corregidas automáticamente.
# unfixable = []

[tool.ruff.lint.pydocstyle]
# Usar la convención de Google para los docstrings es un estándar muy legible.
convention = "google"

[tool.ruff.lint.isort]
# Ayuda a isort a saber que 'measurekit' es tu propio proyecto y debe
# agrupar sus importaciones por separado de las librerías de terceros.
known-first-party = ["measurekit"]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["E402", "F401"] # Permite importaciones relativas en inits.
"tests/*" = ["D", "S101"]         # En los tests, no requerimos docstrings (D) ni asserts (S101).
"manual_sandbox/*" = ["ALL"]   # Ignora completamente este directorio.
"startup.py" = ["T20"]          # Permite los 'print' en el archivo de arranque para feedback.

[tool.ruff.format]
docstring-code-format = true

[tool.pytest.ini_options]
# addopts = "--strict-markers --cov=measurekit --cov-report=term-missing"
# Especifica dónde buscar los tests.
testpaths = [
    "tests",
]

[tool.coverage.run]
source = ["measurekit"]
omit = [
    "**/__init__.py",
    "tests/*",
    "manual_sandbox/*",
    "measurekit/*.py"    
]

[tool.coverage.report]
fail_under = 80
exclude_lines = [
    "pragma: no cover",
    "if __name__ == .__main__.:",
    "if TYPE_CHECKING:",
    "raise NotImplementedError",
]
