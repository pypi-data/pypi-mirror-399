services:
  captcha-bypass:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: captcha-bypass
    restart: unless-stopped
    ports:
      - "${PORT:-8191}:8191"
    environment:
      # 0 or empty = auto-detect (cpu_count)
      WORKERS: ${WORKERS:-0}
      RESULT_TTL: ${RESULT_TTL:-300}
      MAX_QUEUE_SIZE: ${MAX_QUEUE_SIZE:-1000}
    stop_grace_period: 30s
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
