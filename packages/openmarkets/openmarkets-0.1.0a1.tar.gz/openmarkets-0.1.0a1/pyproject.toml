[project]
name = "openmarkets"
version = "0.1.0.a1"
description = "OpenMarkets is a modular Model Context Protocol (MCP) server that unifies access to financial market data for AI, research, and quantitative finance. It offers robust APIs for historical prices, corporate actions, fundamentals, and more, enabling advanced agentic retrieval, RAG, and LLM-powered workflows."
authors = [{ name = "Dobri Danchev" }]
classifiers = [
    "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
    "Development Status :: 3 - Alpha",
    "Operating System :: OS Independent",
    "Intended Audience :: Developers",
    "Intended Audience :: Financial and Insurance Industry",
    "Topic :: Office/Business :: Financial",
    "Topic :: Office/Business :: Financial :: Investment",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
    "Topic :: Scientific/Engineering :: Interface Engine/Protocol Translator",
    "Topic :: Software Development :: Libraries",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Programming Language :: Python :: 3 :: Only",
]
keywords = [
    "machinelearning",
    "finance",
    "investment",
    "mcp",
    "modelcontextprotocol",
    "yahoo finance",
    "financial data retrieval",
]
readme = "README.md"
license = { text = "AGPL-3.0-or-later" }
requires-python = ">=3.10"
dependencies = [
    "mcp[cli]>=1.25.0",
    "yfinance>=1.0.0",
    "lxml>=6.0.2",
    
]
optional-dependencies = {"fastmcp" = ["fastmcp>=2.14.1"]}

[project.urls]
Homepage = "https://openmarkets.dev"
Source = "https://github.com/danchev/openmarkets"
Documentation = "https://danchev.github.io/openmarkets/"
Issues = "https://github.com/danchev/openmarkets/issues"

[project.scripts]
openmarkets = "openmarkets.core.server:main"
mcp-server-yfinance = "openmarkets.core.server:main"

[build-system]
requires = ["uv_build>=0.9.9,<0.10.0"]
build-backend = "uv_build"

[dependency-groups]
dev = [
    "debugpy>=1.8.17",
    "pyright>=1.1.407",
    "refurb>=2.2.0",
    "ruff>=0.14.10",
    "ty>=0.0.7",
    {include-group = "test"},
    {include-group = "commit"},
]
test = [
    "pytest>=9.0.2",
    "pytest-cov>=7.0.0",
    "pytest-xdist>=3.8.0",
    "pytest-asyncio>=1.3.0",
    "coverage>=7.13.0",
]
docs = [
    "mkdocs>=1.6.1",
    "mkdocs-glightbox>=0.5.1",
    "mkdocs-material[imaging]>=9.6.22",
    "mkdocstrings-python>=1.18.2",
]
commit = [
    "commitizen>=4.10.1", 
    "pre-commit>=4.5.1",
]

[tool.ruff]
fix = true
show-fixes = true
output-format = "full"
line-length = 120
target-version = "py310"

[tool.ruff.lint]
select = ["E", "F", "I", "B", "Q"]
ignore = ["E203", "E501"]

[tool.ruff.lint.isort]
known-first-party = ["openmarkets"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"

[tool.pytest.ini_options]
addopts = "-n auto --cov=src/openmarkets --cov-report=html --cov-report=term-missing --cov-fail-under=70"
testpaths = ["tests"]
python_files = "test_*.py"
python_functions = "test_*"

[tool.mypy]
custom_typeshed_dir = "typings"
plugins = ["mypy_ruff"]

[tool.commitizen]
name = "cz_conventional_commits"
version = "0.1.0.a1"
tag_format = "$version"
version_files = [
    "pyproject.toml:version"
]
update_changelog_on_bump = true

[tool.coverage.run]
command_line = "-m openmarkets"
branch = true
source = ["openmarkets"]
omit = [
    "tests/*",
    "src/openmarkets/__init__.py",
    "src/openmarkets/core/__init__.py",
    "src/openmarkets/services/__init__.py",
]

[tool.coverage.report]
show_missing = true
skip_covered = true
precision = 2

[tool.ty.src]
exclude = [
    "generated",
    "typings",
]