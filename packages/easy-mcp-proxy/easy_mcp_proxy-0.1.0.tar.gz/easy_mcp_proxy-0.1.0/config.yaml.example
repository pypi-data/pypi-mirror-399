mcp_servers:

  # Memory server for long-term agent memory
  redis-memory-server:
    command: uv
    args:
      - tool
      - run
      - --from
      - agent-memory-server
      - agent-memory
      - mcp
    env:
      REDIS_URL: redis://localhost:6399
    tools:
      get_current_datetime:
        description: |
          Get the current date and time. Use this when you need to
          record timestamps for Redis instance events or incidents.

          {original}
      create_long_term_memories:
        description: |
          Save long-term memories about Redis instances. Use this to
          record: past incidents and their resolutions, configuration
          changes, performance baselines, known issues, maintenance
          history, and lessons learned. Always include the instance_id
          in the memory text for future retrieval.

          {original}
      search_long_term_memory:
        description: |
          Search saved memories about Redis instances. ALWAYS use this
          before troubleshooting a Redis instance to recall past issues,
          solutions, and context. Search by instance_id, error patterns,
          or symptoms.

          {original}
      get_long_term_memory:
        description: |
          Retrieve a specific memory by ID. Use this to get full details
          of a memory found via search.

          {original}
      edit_long_term_memory:
        description: |
          Update an existing memory. Use this to add new information to
          a past incident record, update resolution status, or correct
          outdated information.

          {original}
      delete_long_term_memories:
        description: |
          Delete memories that are no longer relevant. Use sparingly -
          prefer editing to add context rather than deleting.

          {original}

  # GitHub MCP server - uses official GitHub MCP server via stdio
  # Requires a GitHub Personal Access Token with appropriate permissions
  github:
    command: npx
    args:
      - -y
      - "@modelcontextprotocol/server-github"
    env:
      GITHUB_PERSONAL_ACCESS_TOKEN: "${GITHUB_PERSONAL_ACCESS_TOKEN}"
    # Constrain to search/read tools only
    tools:
      search_code: {}
      search_issues: {}
      get_file_contents: {}
      list_issues: {}
      list_pull_requests: {}
      get_issue: {}
      get_pull_request: {}
      list_commits: {}
      get_pull_request_files: {}
      get_pull_request_status: {}

  # AWS Documentation MCP server - search and read AWS documentation
  aws-documentation:
    command: uv
    args:
      - tool
      - run
      - --from
      - awslabs.aws-documentation-mcp-server
      - awslabs.aws-documentation-mcp-server
    env:
      FASTMCP_LOG_LEVEL: ERROR
      AWS_DOCUMENTATION_PARTITION: aws
      MCP_USER_AGENT: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"

  zendesk:
    command: uv
    args:
      - tool
      - run
      - --from
      - git+https://github.com/abrookins/zendesk-mcp-server
      - zendesk


  # Skills server for storing and retrieving procedural knowledge
  skills-server:
    command: uv
    args:
      - tool
      - run
      - --from
      - agent-memory-server
      - agent-memory
      - mcp
    env:
      REDIS_URL: redis://localhost:6399
      DEFAULT_MCP_NAMESPACE: skills
    tools:
      create_long_term_memories:
        name: save_skill
        description: |
          Save a new skill as a series of steps to accomplish a task.

      search_long_term_memory:
        name: search_skills
        description: |
          Search for previously saved skills. ALWAYS use this before
          attempting a complex task to check if you already know how
          to do it. Search by task name, keywords, or describe what
          you're trying to accomplish.

          You can also use this to LIST skills by searching without any
          arguments.

      get_long_term_memory:
        name: get_skill
        description: |
          Retrieve a specific skill by ID. Use this to get the full
          step-by-step procedure after finding it via search.

      edit_long_term_memory:
        name: update_skill
        description: |
          Update an existing skill. Use this to refine steps based on
          new learnings, add troubleshooting tips, update for changed
          tooling or processes, or add alternative approaches.

      delete_long_term_memories:
        name: delete_skills
        description: |
          Delete a skill that is outdated or no longer applicable.


# Tool views with custom tools
tool_views:
  # Default view exposes all upstream tools plus custom tools
  default:
    description: "Default view with all tools and code quality analysis"
    include_all: true
    custom_tools:
      # Custom Python tool that wraps the MFCQI CLI for code quality analysis
      # See tools/mfcqi.py for the implementation
      - module: tools.mfcqi.analyze_code_quality

  # Read-only view for safe exploration
  read-only:
    description: "Read-only tools for safe code exploration"
    tools:
      github:
        search_code: {}
        search_issues: {}
        get_file_contents: {}
        list_issues: {}
        get_issue: {}
      redis-memory-server:
        search_long_term_memory: {}
        get_long_term_memory: {}
      skills-server:
        search_skills: {}
        get_skill: {}
