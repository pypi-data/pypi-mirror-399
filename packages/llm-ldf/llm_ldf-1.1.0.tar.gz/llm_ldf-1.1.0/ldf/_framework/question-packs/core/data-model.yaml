# Data Model Question-Pack
# Questions about database schema, migrations, and data management

domain: data-model
description: "Database schema design, migrations, and data patterns"
critical: true

questions:
  database:
    - question: "What database will be used?"
      critical: true
      options:
        - "PostgreSQL"
        - "MySQL/MariaDB"
        - "MongoDB"
        - "SQLite (development only)"
        - "Multiple databases"
      follow_ups:
        - "What version?"
        - "Cloud managed or self-hosted?"

    - question: "What ORM/query builder will be used?"
      critical: true
      options:
        - "SQLAlchemy (Python)"
        - "Prisma"
        - "TypeORM"
        - "GORM (Go)"
        - "Raw SQL"
        - "Other"
      examples:
        - "SQLAlchemy 2.0 with async support"
        - "Prisma with TypeScript"

  migrations:
    - question: "What migration tool will be used?"
      critical: true
      options:
        - "Alembic (Python)"
        - "Prisma Migrate"
        - "TypeORM migrations"
        - "Flyway"
        - "goose (Go)"
        - "Other"
      follow_ups:
        - "Are down migrations required?"

    - question: "How will schema changes be deployed?"
      critical: true
      options:
        - "Run before deployment"
        - "Run during deployment"
        - "Blue-green with migration"
        - "Expand-migrate-contract"
      examples:
        - "Alembic upgrade in CI before deploy"
        - "Rolling deployment with backward-compatible migrations"

    - question: "How will data backfills be handled?"
      critical: false
      options:
        - "Separate from schema migrations"
        - "Combined with schema migrations"
        - "Background jobs"
        - "Manual scripts"
      follow_ups:
        - "What about large tables (millions of rows)?"

  schema_design:
    - question: "What ID strategy will be used?"
      critical: true
      options:
        - "UUID v4"
        - "Auto-increment integers"
        - "ULID"
        - "Snowflake IDs"
        - "Custom format"
      examples:
        - "UUID for external IDs, int for internal"
        - "ULID for sortable, collision-resistant IDs"

    - question: "How will timestamps be handled?"
      critical: true
      options:
        - "UTC, stored as TIMESTAMP WITH TIME ZONE"
        - "UTC, stored as TIMESTAMP"
        - "Local timezone"
        - "Unix timestamps"
      follow_ups:
        - "How are dates without time handled?"

    - question: "Is soft delete needed?"
      critical: false
      options:
        - "Yes - deleted_at column"
        - "Yes - is_deleted boolean"
        - "No - hard delete only"
        - "Depends on table"
      follow_ups:
        - "What is the retention policy for soft-deleted records?"

  indexing:
    - question: "What indexing strategy?"
      critical: false
      options:
        - "Index foreign keys by default"
        - "Add indexes based on queries"
        - "Minimal indexes initially"
        - "Comprehensive indexes upfront"
      follow_ups:
        - "Are partial indexes needed?"
        - "Are composite indexes needed?"

  data_integrity:
    - question: "What constraints will be enforced?"
      critical: true
      options:
        - "Database constraints (FK, UNIQUE, CHECK)"
        - "Application-level only"
        - "Both database and application"
      examples:
        - "UNIQUE on email, FK on org_id, CHECK on status"

    - question: "How will concurrent updates be handled?"
      critical: false
      options:
        - "Optimistic locking (version column)"
        - "Pessimistic locking (SELECT FOR UPDATE)"
        - "Last write wins"
        - "Depends on use case"
      examples:
        - "Optimistic locking for user profiles"
        - "Pessimistic locking for inventory"
